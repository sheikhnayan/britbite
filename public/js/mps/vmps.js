(self.webpackChunkMPS=self.webpackChunkMPS||[]).push([[132],{44605:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(68116),a=r(37148);const i={components:{AttachmentsComponent:s.Z,ListAttachmentsComponent:a.Z},data:function(){return{attachments:null,form:{attachments:[]}}},methods:{handleUpload:function(t){this.form.attachments.push(t)},clearAttachments:function(){this.form.attachments=[],this.form.new_attachments=[]},deleteAttachment:function(t){this.attachments=this.attachments.filter((function(e){return e.uuid!==t.uuid}))}}}},48921:(t,e,r)=>{"use strict";function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:()=>l});const l=function(t,e,r,a,i){return i=i||!0,r=r||!1,a=a||!1,{data:function(){return{original:{},saving:!1,loading:!0,attributes:[],errors:{message:"",form:{}}}},created:function(){this.original=o({},this.form),this.$route.params.id?i&&this.fetch(this.$route.params.id):r?this.create():this.loading=!1},watch:{$route:function(t,e){t.name.includes("add")?(this.form=o({},this.original),this.handleReset()):t.name.includes("edit")&&this.$route.params.id&&(this.loading=!0,this.fetch(this.$route.params.id))}},methods:{handleSubmit:function(e){var r=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$refs[t].validate((function(t){t?(r.saving=!0,r.submit(e,s)):r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10})}))},handleReset:function(){this.form=o({},this.original),this.$refs[t].resetFields(),this.saving=!1},submit:function(i,n){var l=this,c=e,d="added";this.errors.message="";var u="record_added";this.form.id&&""!=this.form.id&&(d="updated",c=e+"/"+this.form.id,u="record_updated",this.form._method="PUT"),c+=n?"?stay=1":"";var m=o({},this.form);if(this.attributes&&this.attributes.length>0){var p=this.attributes.map((function(t){var e={};return delete m[t.slug],e[t.slug]=l.form[t.slug],e}));m.extra_attributes=Object.assign.apply(Object,s(p))}"promo"!=t&&m.items&&(m.items=m.items.map((function(t){var e={id:t.id,name:t.name,code:t.code,cost:t.cost,price:t.price,item_id:t.item_id,unit_id:t.unit_id,item_unit_id:t.item_unit_id,quantity:t.quantity,batch_no:t.batch_no,net_cost:t.net_cost,net_price:t.net_price,tax_amount:t.tax_amount,unit_cost:t.unit_cost,unit_price:t.unit_price,taxes:t.taxes,allTaxes:t.allTaxes,categories:t.categories,selected:(t.selected,{modifiers:[],variations:[],portions:[]}),has_serials:t.has_serials,tax_included:t.tax_included,discount_amount:t.discount_amount,discount:t.discount?t.discount:0,expiry_date:t.expiry_date?l.$moment(t.expiry_date).format(l.$moment.HTML5_FMT.DATE):""};return t.selected.modifiers.length&&(e.selected.modifiers=t.selected.modifiers.map((function(t){return{id:t.mId,selected:t.id,price:t.price,quantity:t.quantity}}))),t.selected.variations.length&&(e.selected.variations=t.selected.variations.map((function(t){return{id:t.id,price:t.price,quantity:t.quantity}}))),t.selected.portions.length&&(e.selected.portions=t.selected.portions.map((function(t){return{id:t.id,cost:t.cost,price:t.price,quantity:t.quantity,essentials:t.essentials.map((function(t){return{id:t.id,item_id:t.item_id,variation_id:t.variation_id}})),choosables:t.choosables.map((function(t){return{id:t.id,selected:t.selected,variation_id:t.variation_id}})),portion_items:t.portion_items.map((function(t){return{id:t.id,item_id:t.item_id,variation_id:t.variation_id}}))}}))),e.promotions&&e.promotions.length&&(e.promotions=e.allPromotions.filter((function(t){return e.promotions.includes(t.id)}))),e.categories&&e.categories.length&&(e.categories=e.categories.map((function(t){return{id:t.id,promotions:t.promotions&&t.promotions.length?t.promotions.map((function(t){return t.id})):[]}}))),e.selected.variations.length&&(e.selected.variations=e.selected.variations.map((function(t){return t.taxes=t.taxes?t.taxes.map((function(t){return t.id})):[],t.allTaxes=t.item_taxes=t.allTaxes?t.allTaxes.map((function(t){return t.id})):[],t}))),e.selected.serials=t.selected.serials,e.taxes=e.taxes?e.taxes.map((function(t){return t.id})):[],e.allTaxes=e.item_taxes=e.allTaxes?e.allTaxes.map((function(t){return t.id})):[],e.promotions=t.promotions&&t.promotions.length?t.promotions.map((function(t){return t.id})):[],e.allPromotions=e.item_promotions=t.allPromotions&&t.allPromotions.length?t.allPromotions.map((function(t){return t.id})):[],e}))),"modifiers"==i&&(m.options=m.options.map((function(t){return{id:t.id,sku:t.sku,item_id:t.item_id,quantity:t.quantity}}))),m.date&&(m.date=this.$moment(m.date).format(this.$moment.HTML5_FMT.DATE)),m.start_date&&(m.start_date=this.$moment(m.start_date).format(this.$moment.HTML5_FMT.DATE)),m.expiry_date&&(m.expiry_date=this.$moment(m.expiry_date).format(this.$moment.HTML5_FMT.DATE)),m.settings&&m.settings.birth_date&&(m.settings.birth_date=this.$moment(m.settings.birth_date).format(this.$moment.HTML5_FMT.DATE)),m.settings&&m.settings.hire_date&&(m.settings.hire_date=this.$moment(m.settings.hire_date).format(this.$moment.HTML5_FMT.DATE)),m.user&&delete m.user,m.customer&&delete m.customer,m.location&&delete m.location,m=this.$form(m),this.$http.post(c,m).then((function(e){e.data.success?(l.$Notice.destroy(),l.$Notice.success({title:l.$tc(t)+" "+l.$t(d),desc:l.$t(u)}),"location"==t&&e.data.locations&&l.$store.commit("setLocations",e.data.locations),n?("updated"==d?a&&(l.form=a(e.data.data,l)):l.handleReset(),l.step&&(l.step=0),r&&l.create()):l.$router.push({name:i+".list"})):l.$Notice.error({title:l.$t("failed"),desc:l.$t("failed_error_text")})})).catch((function(t){return l.errors=t})).finally((function(){return l.saving=!1}))},updateCF:function(e,r){var s=this;this.form[e]=r,setTimeout((function(){s.$refs[t].validateField(e)}),1e3)}}}}},21490:(t,e,r)=>{"use strict";r.d(e,{Z:()=>f});var s=r(36940),a=r.n(s),i=r(23279),o=r.n(i),n=r(48921),l=r(44605);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var _=function(t,e,r){return e.attributes=t.attributes,delete t.customer,delete t.supplier,delete t.user,delete t.attributes,t.discount_method="items",t.items=t.items.map((function(t){t.item.guid=e.guid(),t.item.id=r?"":t.id,t.item.item_id=t.item_id,t.item.sale_item_id=t.id,t.item.item_unit_id=t.item.unit_id,t.item.unit_id=t.unit_id,t.item.batch_no=t.batch_no,t.item.unit&&(t.item.allUnits=[d({},t.item.unit)].concat(m(t.item.unit.subunits))),t.item.quantity=parseFloat(t.quantity),t.item.real_value=parseFloat(t.item[e.field]),t.item[e.field]=parseFloat(t[e.field]),t.item.expiry_date=new Date(t.expiry_date),t.item.discount_amount=parseFloat(t.discount_amount);var s=t.item[e.field]-t.item.discount_amount;return t.item.discount=t.discount&&parseFloat(t.discount)>0?parseFloat(t.discount):null,t.item.allTaxes=m(t.item.taxes),t.item.taxes=e.calculateTaxes(t.item.allTaxes,s),"price"==e.field&&(t.promotions=t.promotions,t.item.promotions=t.promotions,t.item.allPromotions=m(t.item.promotions)),t.item.selected={modifiers:[],variations:[],portions:[]},t.modifier_options&&t.modifier_options.length&&(t.item.selected.modifiers=t.modifier_options.map((function(r){var s=t.item.modifiers.find((function(t){return t.id==r.modifier_id})),a=s.options.find((function(t){return t.id==r.id})),i={id:r.id,meta:r.meta,title:s.title,mId:r.modifier_id,option:a.name,cost:parseFloat(r.pivot.cost),price:parseFloat(r.pivot.price),quantity:parseFloat(r.pivot.quantity)};i.discount_amount=parseFloat(r.pivot.discount_amount);var o=i[e.field]-i.discount_amount;return i.discount=t.discount&&parseFloat(t.discount)>0?parseFloat(t.discount):null,i.taxes=e.calculateTaxes(t.item.allTaxes,o),i}))),t.variations&&t.variations.length&&(t.item.selected.variations=t.variations.map((function(r){var s=t.item.variations.find((function(t){return r.id==t.id})),a={id:r.id,meta:r.meta,cost:parseFloat(r.pivot.cost),price:parseFloat(r.pivot.price),quantity:parseFloat(r.pivot.quantity),available:parseFloat(r.pivot.quantity+s.location_stock[0].quantity)};a.discount_amount=parseFloat(r.pivot.discount_amount);var i=a[e.field]-a.discount_amount;return a.discount=t.discount&&parseFloat(t.discount)>0?parseFloat(t.discount):null,a.taxes=e.calculateTaxes(t.item.allTaxes,i),a}))),t.portions&&t.portions.length&&(t.item.selected.portions=t.portions.map((function(r){var s={id:r.id,name:r.name,cost:parseFloat(r.pivot.cost),price:parseFloat(r.pivot.price),quantity:parseFloat(r.pivot.quantity),choosables:r.choosables.map((function(t){var e=r.pivot.choosables.find((function(e){return e.id==t.id})),s=t.items.find((function(t){return t.item_id==e.item_id})).item,a=s.has_variants?s.variations.find((function(t){return t.id==e.variation_id})):null;return s.has_variants?d(d({},t),{},{selected:e.item_id,meta:a?a.meta:null,variation_id:e.variation_id,variants:m(s.variants),variations:m(s.variations)}):d(d({},t),{},{selected:e.item_id,variation_id:null})})),essentials:r.essentials.map((function(t){var e=r.pivot.essentials.find((function(e){return e.id==t.id}));if(t.item.has_variants){var s=t.item.variations.find((function(t){return t.id==e.variation_id}));return d(d({},t),{},{meta:s?s.meta:null,variation_id:e.variation_id,variants:m(t.item.variants),variations:m(t.item.variations)})}return t})),portion_items:r.portion_items.map((function(t){var e=r.pivot.portion_items.find((function(e){return e.id==t.id}));if(t.item.has_variants){var s=t.item.variations.find((function(t){return t.id==e.variation_id}));return d(d({},t),{},{meta:s?s.meta:null,variation_id:e.variation_id,variants:m(t.item.variants),variations:m(t.item.variations)})}return t}))};s.discount_amount=parseFloat(r.pivot.discount_amount);var a=s[e.field]-s.discount_amount;return s.discount=t.discount&&parseFloat(t.discount)>0?parseFloat(t.discount):null,s.taxes=e.calculateTaxes(t.item.allTaxes,a),s}))),t.item})),t.shipping_fee=t.shipping_fee?parseFloat(t.shipping_fee):null,e.is_draft=!!t.draft,t.draft=t.draft?""+t.draft:"0",t.payment="0",t.type=t.type||"nett",t.deduct_from_register="0",t.date&&(t.date=new Date(t.date)),t.start_date&&(t.start_date=new Date(t.start_date)),r&&(t.id="",t.reference="",t.date=new Date),e.attachments=t.attachments&&t.attachments.length?m(t.attachments):[],e.form=d(d({},t),t.extra_attributes),e.changed=!1,e.form};const f=function(t,e,r,s,i){return a().capitalize(t),e=e||"app/"+a().pluralize(t),r=r||("purchase"==t?"cost":"price"),{mixins:[l.Z,(0,n.Z)(t,e,!0,_,!1)],data:function(){var e=this;return{query:"",taxes:[],result:[],photo:null,customers:[],suppliers:[],attributes:[],is_draft:!0,changed:!1,deleting:!1,new_photo:null,edit_item:null,searching:!1,field:r,attachments:null,show_item_edit:!1,expiry_date_options:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},form:{id:"",taxes:[],items:[],draft:0,payment:0,repeat:"",details:"",reference:"",discount:null,attachments:[],date:new Date,shipping_fee:null,create_before:null,start_date:new Date,deduct_from_register:0,discount_method:"items",type:"return_order"==t?"":"nett",customer_id:"",supplier_id:""},rules:{discount:[{validator:function(t,r,s){r&&parseFloat(r)>parseFloat(e.$store.state.settings.max_discount)?s(new Error(e.$t("max_discount_error",{percent:parseFloat(e.$store.state.settings.max_discount)}))):s()},type:"number",trigger:["change","blur"]}],details:[{message:this.$t("field_is_required",{field:this.$t("details")}),trigger:"blur"}],customer_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("customer")}),trigger:"change"}],supplier_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("supplier")}),trigger:"change"}],date:[{type:"date",required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("date")})}],start_date:[{type:"date",required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("start_date")})}],type:[{required:!0,message:this.$t("field_is_required",{field:this.$t("type")}),trigger:"change"}],repeat:[{required:!0,message:this.$t("field_is_required",{field:this.$t("repeat")}),trigger:"change"}],taxes:[{type:"array",required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("category")})}]}}},watch:{"form.customer_id":function(t,e){var r=this;if(e){var s=this.customers.find((function(t){return t.value==e}));s&&s.customer_group&&s.customer_group.discount&&this.form.items.map((function(t){t.discount=parseFloat(t.discount)-parseFloat(s.customer_group.discount),r.addToOrder(t,t.quantity,!0,!0)}))}t&&this.checkCustomerGroup(t)},"form.discount_method":function(t,e){var r=this;"order"==this.form.discount_method?this.form.items=this.form.items.map((function(t){return t.discount=null,t.discount_amount=0,t})):this.form.items=this.form.items.map((function(t){return t.discount=r.form.discount?r.form.discount:null,t.discount_amount=r.form.discount?r.formatDecimal(t[r.field]*t.discount/100):0,t}))},"form.discount":o()((function(t,e){var r=this;(t=t?parseFloat(t):0)<=parseFloat(this.$store.state.settings.max_discount)&&"items"==this.form.discount_method&&(this.form.items=this.form.items.map((function(e){return e.discount=t,e.discount_amount=t?r.formatDecimal(e[r.field]*e.discount/100):0,e})))}),500)},created:function(){var t=this;this.$route.params.id||this.$event.fire("location:select"),this.$event.listen("addOrderRowByItemID",(function(e){t.addOrderRowByItemID(e.id,e.item_id)})),this.$http.get("app/taxes/search").then((function(e){return t.taxes=e.data})).then((function(){t.$route.params.id&&t.fetch(t.$route.params.id)})),s&&s.id?this.$route.query[s.qId]?this.$http.get("/app/quotations/".concat(this.$route.query[s.qId],"?attr=sale")).then((function(e){return _(e.data,t,!0)})).finally((function(){return t.loading=!1})):this.$route.query[s.id]&&this.fetch(this.$route.query[s.id],!0):this.form.customer_id=this.$store.state.settings.default_customer},methods:{create:function(){var t=this;this.$http.get("".concat(e,"/create")).then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t,r){var s=this;this.$http.get("".concat(e,"/").concat(t)).then((function(t){return _(t.data,s,r)})).finally((function(){return s.loading=!1}))},selectPurchaseItem:function(t){var e=this;this.loading=!0,this.$http.get("app/purchase_order_items/"+t).then((function(t){return e.addToOrder(t.data)})).catch((function(t){return console.log(t)})).finally((function(){return e.loading=!1}))},searchItems:function(e){if("return_order"==t&&!this.form.type)return this.$Notice.error({title:this.$t("invalid_form"),desc:this.$t("invalid_form_error"),duration:10}),!1;if(e.length<35&&!e.includes("(")){var r="purchase"==t||"adjustment"==t;this.getItems(e,this,r)}},getItems:o()((function(t,e,r){e.searching=!0;var s="app/items/search?q="+t;r&&(s="app/items_wp/search?type=standard,service&q="+t);var a=null,i=(e.$store.getters.search_delay,e.$store.getters.scale_barcode);i&&i.total_digits&&i.total_digits==t.length&&(s="app/items/search?scale=1&q="+(a=e.parseScaleBarcode(t,i)).item_code+"&barcode="+t),e.$http.get(s).then((function(t){if(a&&t.data&&t.data.id){var s=t.data.location_stock.length>0&&t.data.location_stock[0].price?parseFloat(t.data.location_stock[0].price):parseFloat(t.data.price);t.data.barcode_price=e.formatDecimal(a.price,4),t.data.barcode_qty=e.formatQtyDecimal(a.weight,4),t.data.barcode_price||(t.data.barcode_price=e.formatDecimal(s/t.data.barcode_qty)),t.data.barcode_qty||(t.data.barcode_qty=e.formatQtyDecimal(a.price/s)),e.selectSaleItem(t.data.id,t.data),e.result=[]}else t.data&&1==t.data.length?(r?e.selectPurchaseItem(t.data[0].id):e.selectSaleItem(t.data[0].id),e.result=[]):e.result=t.data||[]})).finally((function(){return e.searching=!1}))}),search_delay||250),searchCustomers:function(t){""===t||this.customers.find((function(e){return e.label==t}))||this.getCustomers(t,this)},getCustomers:o()((function(t,e){e.searching=!0,e.$http.get("app/customers/search?q="+t).then((function(t){return e.customers=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),searchSuppliers:function(t){""===t||this.suppliers.find((function(e){return e.label==t}))||this.getSuppliers(t,this)},getSuppliers:o()((function(t,e){e.searching=!0,e.$http.get("app/suppliers/search?q="+t).then((function(t){return e.suppliers=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),is_draftable:function(){return!this.$route.params.id||this.is_draft}}}}},42184:(t,e,r)=>{"use strict";r.d(e,{Z:()=>d});var s=r(52917),a=r(14514);function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const d=function(t,e,r,o){return{components:{InputNumberComponent:s.Z,SelectVariationComponent:a.Z},data:function(){return{item:{},variantModal:!1}},watch:{variantModal:function(t){t||(this.item={},this.$refs.selectVarMod.$refs.form.resetFields())}},methods:{variationSubmitted:function(t){var e=t.quantity?t.quantity:1;this.item.selected={modifiers:[],variations:[],portions:[],serials:[]},t.serials&&t.serials.length&&(this.item.selected.serials=t.serials),t.modifiers&&t.modifiers.length&&(this.item.selected.modifiers=t.modifiers),t.selected_variation&&this.item.selected.variations.push(t.selected_variation),t.selected_portion&&this.item.selected.portions.push(t.selected_portion),this.addToOrder(this.item,e,!1,!1,!0),this.variantModal=!1},calculateItemDiscountAmount:function(t){var e=this,r=0;return t.selected.modifiers.length&&t.selected.modifiers.length&&(t.selected.modifiers=t.selected.modifiers.map((function(s){var a=e.formatDecimal(parseFloat(s[e.field])*parseFloat(t.discount)/100);return e.applicablePromotions(t).map((function(t){a+=e.formatDecimal(parseFloat(s[e.field]-a)*parseFloat(t.discount)/100)})),r+=a,s.discount_amount=a,s}))),t.selected.variations.length||t.selected.portions.length?(t.selected.variations.length&&(t.selected.variations=t.selected.variations.map((function(s){var a=e.formatDecimal(parseFloat(s[e.field])*parseFloat(t.discount)/100);return e.applicablePromotions(t).map((function(t){a+=e.formatDecimal(parseFloat(s[e.field]-a)*parseFloat(t.discount)/100)})),r+=a,s.discount_amount=a,s}))),t.selected.portions.length&&(t.selected.portions=t.selected.portions.map((function(s){var a=e.formatDecimal(parseFloat(s[e.field])*parseFloat(t.discount)/100);return e.applicablePromotions(t).map((function(t){a+=e.formatDecimal(parseFloat(s[e.field]-a)*parseFloat(t.discount)/100)})),r+=a,s.discount_amount=a,s}))),t.discount_amount=parseFloat(this.formatDecimal(r)),t):(r=this.formatDecimal(parseFloat(t[this.field])*parseFloat(t.discount)/100),this.applicablePromotions(t).map((function(s){r+=e.formatDecimal(parseFloat(t[e.field]-r)*parseFloat(s.discount)/100)})),t.discount_amount=r,t)},applySXGD:function(t){var r=this;this[e].items=this[e].items.map((function(t){t.promotions&&t.promotions.length&&t.promotions.map((function(e,s){t=r.calculateItemDiscountAmount(t)}))}))},applicablePromotions:function(t){return t.allPromotions?t.allPromotions.filter((function(e){return t.promotions.includes(e.id)})):[]},applyPromotions:function(t,e){var r=this;return!t.allPromotions||t.allPromotions.length<1?[]:t.allPromotions.filter((function(e){return r.applyPromoDiscount(e,t)})).map((function(t){return t.id}))},addPromoDiscount:function(t,e){return t.id||(t=e.allPromotions.find((function(e){return e.id==t}))),e.allPromotions.find((function(e){return e.id==t.id}))||e.allPromotions.push(t),e},applyPromoDiscount:function(t,e){if("simple"==t.type)return!0;if("advance"==t.type){if(e.quantity>=parseFloat(t.quantity_to_buy))return!0}else if("BXGY"==t.type){if(e.quantity>=parseFloat(t.quantity_to_buy))return this.addOrderRowByItemID(t.item_id_to_get,e.id),!0}else if("SXGD"==t.type&&this.orderTotalAmount>=parseFloat(t.amount_to_spend))return!0;return!1},checkCustomerGroup:function(t){var r=this;this.$nextTick((function(){var t=r.customers.find((function(t){return t.value==r[e].customer_id}));t&&t.customer_group&&r[e].items.map((function(e){e.discount=(e.discount?parseFloat(e.discount):0)+parseFloat(t.customer_group.discount),r.addToOrder(e,e.quantity,!0,!0)}))}))},checkPromos:function(t){var e=this;return t.promotions=t.valid_promotions,delete t.valid_promotions,t.promotions&&t.promotions.length&&t.promotions.map((function(r){t=e.addPromoDiscount(r,t)})),t.categories&&t.categories[0].valid_promotions&&t.categories[0].valid_promotions.length&&t.categories[0].valid_promotions.map((function(r){t=e.addPromoDiscount(r,t)})),t.promotions=this.applyPromotions(t),t=this.calculateItemDiscountAmount(t),t=this.doTaxCalculation(t)},calcItemTax:function(t){var e=this;return t.taxes&&t.taxes.length?t.taxes.reduce((function(t,r){return e.formatDecimal(t+parseFloat(r.amount))}),0):0},doTaxCalculation:function(t,e){var r=this,s=t[this.field]-(!e&&t.discount_amount?parseFloat(t.discount_amount):0);return t.taxes=this.calculateTaxes(t.allTaxes,s,t.tax_included),t.selected.modifiers.length&&(t.selected.modifiers=t.selected.modifiers.map((function(s){var a=s[r.field]-(!e&&s.discount_amount?parseFloat(s.discount_amount):0);return s.taxes=r.calculateTaxes(t.allTaxes,a),s.total_tax_amount=r.calcItemTax(s),s}))),t.selected.variations.length&&(t.selected.variations=t.selected.variations.map((function(s){var a=s[r.field]-(!e&&s.discount_amount?parseFloat(s.discount_amount):0);return s.taxes=r.calculateTaxes(t.allTaxes,a),s.total_tax_amount=r.calcItemTax(s),s}))),t.selected.portions.length&&(t.selected.portions=t.selected.portions.map((function(s){var a=s[r.field]-(!e&&s.discount_amount?parseFloat(s.discount_amount):0);return s.taxes=r.calculateTaxes(t.allTaxes,a),s.total_tax_amount=r.calcItemTax(s),s}))),t},calculateTaxes:function(t,e,r){var s=this,a=(t=this.applicableTaxes(t)).filter((function(t){return 1==t.compound})),o=t.filter((function(t){return 0==t.compound})).map((function(t){return l(l({},t),{},{value:t.id,on:parseFloat(e),amount:s.calculateTaxOn(t.rate,e,r)})})),n=o.reduce((function(t,e){return t+parseFloat(e.amount)}),0),c=a.map((function(t){return l(l({},t),{},{value:t.id,on:parseFloat(e)+parseFloat(n),amount:s.calculateTaxOn(t.rate,parseFloat(e)+parseFloat(n),r)})}));return[].concat(i(o),i(c))},calculateTaxOn:function(t,e,r){return 1==r?this.calculateInclusiveTax(t,e):this.calculateExclusiveTax(t,e)},calculateInclusiveTax:function(t,e){return this.formatDecimal(parseFloat(e)*parseFloat(t)/(100+parseFloat(t)),4)},calculateExclusiveTax:function(t,e){return this.formatDecimal(parseFloat(e)*parseFloat(t)/100,4)},applicableTaxes:function(r){var s=this;return r.filter((function(r){var a=s.$store.getters.location;if("cost"==t){if(o)return!r.same;var i=s.suppliers.find((function(t){return t.value==s[e].supplier_id}));if(r.state&&i&&a){var n=i.state==a.state;return r.same?n:!n}}else{var l=s.customers?s.customers.find((function(t){return t.value==s[e].customer_id})):null;if(r.state&&l&&a){var c=l.state==a.state;return r.same?c:!c}}return!0}))},playSound:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];1==this.$store.getters.play_sound&&this.$event.fire(t?"okSound":"errorSound")},addOrderRowByItemID:function(t,e){var r=this;this.$http.get("app/items/"+t).then((function(t){t.data[r.field]=0,t.data.promo=1,t.data.promotions=null,t.data.promo_item_id=e,t.data.categories[0].promotions=null,r.addToOrder(t.data)}))},selectItem:function(t){this.query="",this.addToOrder(JSON.parse(t))},selectSaleItem:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r?this.cloading=!0:this.loading=!0,s?(this.addToOrder(s),this.loading=!1):this.$http.get("app/sale_order_items/"+t).then((function(t){return e.addToOrder(t.data)})).catch((function(t){return console.log(t)})).finally((function(){r?(e.query="",e.cloading=!1):e.loading=!1}))},addToOrder:function(s,a,n,c,d){var u=this;if(!s)return!1;if(!this[e]||!s.code||!s.name)return!1;if(s.selected||(s.selected={modifiers:[],portions:[],variations:[],serials:[]},o||"cost"!=t||(s.selected.serials=[{number:"",till:""}])),c)n||(s=this.checkPromos(s)),r?this.$store.commit("setOrderRow",s):this[e].items=this[e].items.map((function(t){return t.item_id==s.id?s:t}));else{if(this.cloading=!0,!d&&(s.serials&&s.serials.length||s.modifiers&&s.modifiers.length>0||s.portions&&s.portions.length>0||s.variants&&s.variants.length>0&&s.variations&&s.variations.length>0))return"recipe"!=s.type||1!=s.portions.length||s.modifiers&&s.modifiers.length?(this.cloading=!1,this.item=JSON.parse(JSON.stringify(s)),this.variantModal=!0,!1):(s.selected.portions=i(s.portions),this.addToOrder(s,1,!1,!1,!0),!0);var m={},p=!!(this[e].items&&this[e].items.length>0)&&this[e].items.find((function(t){return t.id==s.id&&t.promo==s.promo&&(!t.variation||t.variation&&s.variation&&t.variation.id==s.variation.id)}));p?(p.quantity=n?parseFloat(a):parseFloat(p.quantity)+(a?parseFloat(a):s.barcode_qty?s.barcode_qty:1),s.selected.portions.length&&(s.selected.portions=s.selected.portions.map((function(t){return t.quantity=t.quantity?t.quantity:1,t})),p.selected.portions.push(s.selected.portions[0])),s.selected.variations.length&&p.selected.variations.push(s.selected.variations[0]),s.selected.modifiers.length&&(p.selected.modifiers.length?s.selected.modifiers.map((function(t){p.selected.modifiers=p.selected.modifiers.map((function(e){return e.id==t.id&&(e.quantity=parseFloat(e.quantity)+1),e})),p.selected.modifiers.find((function(e){return e.id==t.id}))||p.selected.modifiers.push(t)})):p.selected.modifiers=s.selected.modifiers),p=this.doTaxCalculation(p),"price"==t&&(p=this.checkPromos(p)),r?this.$store.commit("setOrderRow",p):this[e].items=this[e].items.map((function(t){return t.item_id==p.id?p:t})),this.alert(this.$root.$t("cart_item_updated",{item:s.name})),this.playSound(!0)):("price"==t&&this.customer&&this.customer.customer_group&&(s.discount=parseFloat(s.discount?s.discount:0)+(this.customer.customer_group?parseFloat(this.customer.customer_group.discount):0)),s.unit&&(s.allUnits=[l(l({},s.unit),{},{subunits:null})].concat(i(s.unit.subunits))),(m=l(l({},s),{},{comment:"",item_id:s.id,item_unit_id:s.unit_id,unit_id:"price"==t?s.sale_unit_id?s.sale_unit_id:s.unit_id:s.purchase_unit_id?s.purchase_unit_id:s.unit_id,guid:this.guid(),allTaxes:i(s.taxes),selected:l({},s.selected),discount:s.discount?s.discount:null,quantity:a?parseFloat(a):s.barcode_qty?s.barcode_qty:1})).selected.portions=m.selected.portions.map((function(t){return t.quantity=t.quantity?t.quantity:1,t})),m.price=m.location_stock.length>0&&m.location_stock[0].price?parseFloat(m.location_stock[0].price):parseFloat(m.price),m.cost=m.location_stock.length>0&&m.location_stock[0].cost?parseFloat(m.location_stock[0].cost):parseFloat(m.cost),(m=this.doTaxCalculation(m)).total_tax_amount=this.calcItemTax(m),"price"==t&&(m.promotions=s.promotions?s.promotions:[],m.allPromotions=s.allPromotions?s.allPromotions:[],m=this.checkPromos(m)),r?this.$store.commit("addOrderRow",m):this[e].items.push(m),this.alert(this.$root.$t("added_to_cart",{item:m.name})),this.playSound(!0)),r&&window&&document.documentElement.clientWidth>768&&this.$event.fire("order:scroll"),this.cloading=!1}this.$nextTick((function(){u.query="",u.isMobile()||document.querySelector("#scan_barcode").focus()}))}}}}},61402:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});r(18446);var s=r(23279),a=r.n(s),i=r(42184);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}const u=function(t,e,s,o){return{mixins:[(0,i.Z)(t,e,s,o)],data:function(){var e=this,r=function(t,r,s){r&&r>e.edit_item.max_discount?s(new Error(e.$t("max_discount_error",{percent:parseFloat(e.edit_item.max_discount)}))):s()},s=function(t,r,s){r&&(r>e.edit_item.max_price||r<e.edit_item.min_price)?s(new Error(e.$t("mm_price_error",{min:parseFloat(e.edit_item.min_price),max:parseFloat(e.edit_item.max_price)}))):s()};return{show:!1,field:t,gift_cards:[],gift_card:null,cloading:!1,itemPrice:s,itemDiscount:r,itemRules:{cost:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("cost")}),trigger:["change","blur"]}],price:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("price")}),trigger:["change","blur"]},{validator:s,trigger:["change","blur"]}],quantity:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("quantity")}),trigger:["change","blur"]}],discount:[{validator:r,trigger:["change","blur"]}]}}},computed:{customer:function(){var t=this;return this.customers.find((function(r){return r.value==t[e].customer_id}))},orderTotalItems:function(){return this[e]&&this[e].items?this[e].items.length:0},orderOriginalTotal:function(){var t=this;if(this[e]&&"order"!=this[e].discount_method){var r=c(this[e].items).map((function(e){var r={tax_included:e.tax_included,allTaxes:c(e.allTaxes),quantity:e.quantity,selected:{}};return r[t.field]=e[t.field],r.selected.variations=e.selected.variations.map((function(t){return n({},t)})),r.selected.portions=e.selected.portions.map((function(t){return n({},t)})),r.selected.modifiers=e.selected.modifiers.map((function(t){return n({},t)})),parseFloat(t.calcRowOriginalTotal(r))})).reduce((function(t,e){return t+e}),0);return this.formatDecimal(r)}return 0},orderDiscount:function(){return this[e]&&"order"==this[e].discount_method?this.formatDecimal(this.orderTotalAmount*this[e].discount/100):0},orderTotalQuantity:function(){return this[e]?this[e].items.map((function(t){return t.quantity})).reduce((function(t,e){return t+e}),0):0},orderPayableAmount:function(){return this[e]?this.formatDecimal(this.orderTotalAmount-this.orderDiscount):0},paymentChange:function(){return this.paymentForm.amount>this.orderTotalAmount?this.paymentForm.amount-this.orderTotalAmount:0},totalItemTax:function(){var t=this,r=this[e].items.reduce((function(e,r){var s=(r=t.doTaxCalculation(r)).taxes.reduce((function(t,e){return t+parseFloat(e.amount)*parseFloat(r.quantity)}),0);return parseFloat(e+s)}),0);return this.formatDecimal(r)},orderTotalAmount:function(){var t=this;c(this[e].items);return this.formatDecimal(this[e].items.reduce((function(e,r){return e+(r?t.calcRowTotal(r):0)}),0))}},methods:{giftCardSelected:function(t){this.gift_card=this.gift_cards.find((function(e){return e.number==t}))},searchGiftCard:function(t){this.getGiftCard(t,this)},getGiftCard:a()((function(t,e){e.searching=!0,e.$http.get("app/gift_cards/search?q="+t).then((function(t){1==t.data.length?(e.gift_card=t.data[0],e.paymentForm.gift_card_number=t.data[0].number):e.gift_cards=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),getPortionById:function(t,e){return t.find((function(t){return t.id==e}))},getPortionChoosable:function(t,e,r){return t.choosables.find((function(t){return t.id==e})).selected==r},changeSelectedPortion:function(t,e){var r=t?this.edit_item.portions.find((function(t,r){return r==e})):{},s=t?this.edit_item.portions.find((function(e){return e.id==t})):{},a={id:s.id,name:s.name,choosables:[],quantity:r.quantity?r.quantity:1};s.choosables.map((function(t){a.choosables.push({id:t.id,selected:t.items[0].item_id})})),this.edit_item.selected.portions[e]=n({},a)},modOptLabel:function(t){return t.item.name+" (+"+this.formatDecimal(t.item[this.field])+")"},itemQuantityChanged:function(t){s?this.$event.fire("pos:order:update",{item:t,qty:t.quantity,set:!0,force:!1,vCheck:!1}):this.addToOrder(t,t.quantity,!0)},itemUnitChanged:function(){var t=this.calculateUnitPrice(this.edit_item,this.field);this.edit_item=this.doTaxCalculation(t)},itemVariationQuantityChanged:function(t){t.quantity=t.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),s?this.$event.fire("pos:order:update",{item:t,qty:t.quantity,set:!0,force:!0,vCheck:!0}):this.addToOrder(t,t.quantity,!0,!0,!0)},itemPortionQuantityChanged:function(t){t.quantity=t.selected.portions.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),s?this.$event.fire("pos:order:update",{item:t,qty:t.quantity,set:!0,force:!0,vCheck:!0}):this.addToOrder(t,t.quantity,!0,!0,!0)},itemModifierQuantityChanged:function(t){s?this.$event.fire("pos:order:update",{item:t,qty:t.quantity,set:!0,force:!0,vCheck:!0}):this.addToOrder(t,t.quantity,!0,!0,!0)},checkDisc:function(t,e){if(t){if(-1!==t.toString().indexOf("%")){var r=t.split("%"),s=this.formatDecimal(parseFloat(e)*parseFloat(r[0])/100);return{discount:t,discount_amount:isNaN(parseFloat(s))?0:parseFloat(s)}}return{discount:t,discount_amount:isNaN(parseFloat(t))?0:parseFloat(t)}}return{discount:"",discount_amount:0}},calcRowOriginalTotal:function(t){var e=this,r=0;return t.selected.modifiers.length&&(r+=t.selected.modifiers.reduce((function(r,s){var a=parseFloat(s[e.field]);return s.taxes=e.calculateTaxes(t.allTaxes,a,t.tax_included),s.total_tax_amount=e.calcItemTax(s),r+parseFloat(s.quantity)*(a+(1==t.tax_included?0:parseFloat(s.total_tax_amount)))}),0)),t.selected.variations.length||t.selected.portions.length?(t.selected.variations.length&&(r+=t.selected.variations.reduce((function(r,s){var a=parseFloat(s[e.field]?s[e.field]:t[e.field]);return s.taxes=e.calculateTaxes(t.allTaxes,a,t.tax_included),s.total_tax_amount=e.calcItemTax(s),r+parseFloat(s.quantity)*(a+(1==t.tax_included?0:parseFloat(s.total_tax_amount)))}),0)),t.selected.portions.length&&(r+=t.selected.portions.reduce((function(r,s){var a=parseFloat(s[e.field]);return s.taxes=e.calculateTaxes(t.allTaxes,a,t.tax_included),s.total_tax_amount=e.calcItemTax(s),r+parseFloat(s.quantity)*(a+(1==t.tax_included?0:parseFloat(s.total_tax_amount)))}),0)),r):(t.taxes=this.calculateTaxes(t.allTaxes,t[this.field],t.tax_included),t.total_tax_amount=this.calcItemTax(t),r+parseFloat(t.quantity)*(parseFloat(t[this.field])+(1==t.tax_included?0:t.total_tax_amount)))},doTotal:function(t,e,r){return parseFloat(t.quantity)*(parseFloat(t[this.field])-parseFloat(t[this.field]&&!r&&t.discount_amount?t.discount_amount:0)+(1==e?0:parseFloat(t[this.field]?t.total_tax_amount:0)))},calcRowTotal:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r&&r.taxes&&r.taxes.length&&!r.total_tax_amount&&0!=r.total_tax_amount?(r.taxes=this.calculateTaxes(r.allTaxes,r[this.field],r.tax_included),r.total_tax_amount=this.calcItemTax(r)):t.taxes&&t.taxes.length&&!t.total_tax_amount&&0!=t.total_tax_amount&&(t.taxes=this.calculateTaxes(t.allTaxes,t[this.field],t.tax_included),t.total_tax_amount=this.calcItemTax(t));var s=0;return t.selected.modifiers&&t.selected.modifiers.length&&(s+=t.selected.modifiers.reduce((function(r,s){return r+e.doTotal(s,t.tax_included)}),0)),r||!t.selected.variations.length&&!t.selected.portions.length?s+this.formatDecimal(parseFloat(r?r.quantity:t.quantity)*(parseFloat(r?r[this.field]:t[this.field])-parseFloat(r?r.discount_amount:t.discount_amount?t.discount_amount:0)+(1==t.tax_included?0:r?r.total_tax_amount:t.total_tax_amount))):(t.selected.variations.length&&(s+=t.selected.variations.reduce((function(r,s){return r+e.doTotal(s,t.tax_included)}),0)),t.selected.portions.length&&(s+=t.selected.portions.reduce((function(r,s){return r+e.doTotal(s,t.tax_included)}),0)),s)},guid:function(){return r(18738)(this.uuid()+Date.now().toString()+Math.random().toString())},uuid:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},portionChanged:function(t){var e=t?this.edit_item.portions.find((function(e){return e.id==t})):{};this.edit_item.portion=n({},e)},addPortionToEditItem:function(){var t={quantity:1,choosables:[],essentials:[],portion_items:[],id:this.edit_item.portions[0].id,name:this.edit_item.portions[0].name};this.edit_item.portions[0].portion_items.map((function(e){t.portion_items.push(e)})),this.edit_item.portions[0].essentials.map((function(e){t.essentials.push(e)})),this.edit_item.portions[0].choosables.map((function(e){t.choosables.push({id:e.id,selected:e.items[0].item_id})})),this.edit_item.selected.portions.push(t)},editItem:function(t){var r=this;this[e].items[t].guid||(this[e].items[t].guid=this.guid()),this.edit_item=JSON.parse(JSON.stringify(this[e].items[t]));var s=this.edit_item.selected.portions.length;if(s){var a=this.edit_item.quantity-s;if(a&&a>0)if(1==this.edit_item.portions.length)this.edit_item.selected.portions[0].quantity=this.edit_item.quantity;else for(var i=function(t){var e={quantity:1,choosables:[],id:r.edit_item.portions[0].id,name:r.edit_item.portions[0].name};r.edit_item.portions[0].choosables.map((function(t){e.choosables.push({id:t.id,selected:t.items[0].item_id})})),r.edit_item.selected.portions.push(e)},o=1;o<=a;o++)i();else if(a&&a<0)for(var n=a;n<0;n++)this.edit_item.selected.portions.pop()}this.edit_item.discount=this.edit_item.discount?parseFloat(this.edit_item.discount):null,this.edit_item.allTaxes=this.edit_item.allTaxes.map((function(t){return t.id})),this.show_item_edit=!0},updateItem:function(){var r=this;this.$refs.editItemForm.validate((function(a){if(a){if("price"==t){if(r.edit_item.serials&&r.edit_item.has_serials&&r.edit_item.serials.length&&r.edit_item.selected.serials.length!=r.edit_item.quantity)return r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10}),!1}else if(r.edit_item.serials&&r.edit_item.selected.serials.length!=r.edit_item.quantity)return r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10}),!1;if(r.edit_item.selected.modifiers=[],r.edit_item.modifiers&&r.edit_item.modifiers.length&&r.edit_item.modifiers.map((function(t){t.selected&&("checkbox"==t.show_as||"select_multiple"==t.show_as?t.selected.map((function(e){t.options.map((function(s){e==s.id&&r.edit_item.selected.modifiers.push({id:s.id,mId:t.id,quantity:1,cost:s.item.cost,option:s.item.name,price:s.item.price,title:t.title})}))})):t.options.map((function(e){t.selected==e.id&&r.edit_item.selected.modifiers.push({id:e.id,mId:t.id,quantity:1,cost:e.item.cost,option:e.item.name,price:e.item.price,title:t.title})})))})),r.edit_item.portions&&r.edit_item.portions.length&&(r.edit_item.quantity=r.edit_item.selected.portions.reduce((function(t,e){return t+parseFloat(e.quantity)}),0)),r.edit_item.variations&&r.edit_item.variations.length&&(r.edit_item.quantity=r.edit_item.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0)),r.edit_item.allTaxes=r.taxes.filter((function(t){return r.edit_item.allTaxes.includes(t.id)})),r.edit_item=r.calculateItemDiscountAmount(r.edit_item),"price"==t)r[e].items.find((function(t){return t.id==r.edit_item.id})).promotions!=r.edit_item.promotions&&r.edit_item.allPromotions.map((function(t){r.edit_item.promotions.includes(t.id)&&"BXGY"==t.type&&(r[e].items=r[e].items.filter((function(e){return e.id!=t.item_id_to_get&&e.promo_item_id!=r.edit_item.id})))})),r.applicablePromotions(r.edit_item).map((function(t){"BXGY"==t.type&&r.edit_item.quantity>=t.quantity_to_buy&&r.addOrderRowByItemID(t.item_id_to_get,r.edit_item.id)}));r.edit_item=r.doTaxCalculation(r.edit_item);var i=JSON.parse(JSON.stringify(r.edit_item));r[e].items=r[e].items.map((function(t){return t.guid==i.guid?i:t})),s?r.$event.fire("pos:order:update",{item:i,qty:i.quantity,set:!0,force:!0,vCheck:!1}):r.addToOrder(i,i.quantity,!0,!0),r.edit_item=null,r.show_item_edit=!1}else r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10})}))},deleteItem:function(t,r,a){var i=this;t.promotions&&t.promotions.length&&(t.promotions=t.allPromotions?t.allPromotions.filter((function(e){return t.promotions.includes(e.id)})):[],t.promotions.map((function(e){"BXGY"==e.type&&t.quantity>=e.quantity_to_buy&&i.$store.commit("delPromotionItem",{id:e.item_id_to_get,promo_item_id:t.id})}))),s?this.$store.commit("delOrderRow",t):this[e].items=this[e].items.filter((function(e){return e.guid!=t.guid})),this.edit_item=null,this.show_item_edit=!1},deleteItemVariation:function(t,r,a){var i=this[e].items.find((function(e){return e.guid==t.guid}));i.selected_variation=null,i.selected.variations=i.selected.variations.filter((function(t){return t.id!==r.id})),i.quantity=i.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),i.selected.variations.length<=0?this.deleteItem(i):s&&this.$store.commit("setOrderRow",i)},deleteItemPortion:function(t,r,a){var i=this[e].items.find((function(e){return e.guid==t.guid}));i.selected_portion=null,i.selected.portions=i.selected.portions.filter((function(t,e){return e!==a})),i.quantity=i.selected.portions.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),i.selected.portions.length<=0?this.deleteItem(i):s&&this.$store.commit("setOrderRow",i)},deleteItemModifier:function(t,r,a){var i=this[e].items.find((function(e){return e.guid==t.guid}));i.selected.modifiers=i.selected.modifiers.filter((function(t){return t.id!==r.id})),i.modifiers=i.modifiers.map((function(t){return t.id==r.mId&&(Array.isArray(t.selected)?t.selected=t.options.filter((function(t){return t.id==r.id})):t.selected=null),t})),s&&this.$store.commit("setOrderRow",i)},remove:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!s||this.$store.getters.superAdmin)this["deleteItem"+r](t,a,i);else{var o=null;this.$Modal.confirm({width:260,okText:this.$t("ok"),cancelText:this.$t("cancel"),title:this.$t("pin_required"),render:function(t){return t("Input",{props:{value:o,autofocus:!0,placeholder:e.$t("type_pin")},on:{input:function(t){return o=t}}})},onOk:function(){e.$Message.info("Check POS pin "+o+" then perform delete!"),e["deleteItem"+r](t,a,i)}})}}}}}},92704:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var s=r(36940),a=r.n(s),i=r(37148);const o=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4?arguments[4]:void 0,n=a().pluralize(t),l=o?"."+a().pluralize(o):"";return{data:function(){return{refresh:1}},created:function(){1!=this.$store.state.settings.hide_id&&this.columns.unshift({title:this.$t("id"),sortable:!0,key:"id",width:275})},mounted:function(){this.isSmallScreen&&(this.columns=this.columns.map((function(t){return t.fixed&&delete t.fixed,t})))},methods:{showInfo:function(t){console.log("show: ",t)},editRecord:function(t){this.$router.push({name:n+l+".edit",params:{id:t.id}})},renderAttachments:function(t,e){var r=this;return e.row.attachments&&e.row.attachments.length?t("Button",{props:{size:"small",type:"primary",icon:"ios-link"},on:{click:function(){r.viewAttachments(e.row.attachments)}}}):""},viewAttachments:function(t){var e=this;this.$Modal.info({width:750,closable:!0,scrollable:!0,okText:this.$t("close"),title:this.$tc("attachment",2),render:function(r){return r(i.Z,{props:{attachments:t},on:{input:function(t){e.value=t}}})}})},deleteAttachment:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e?e.attachments=e.attachments.filter((function(e){return e.uuid!==t.uuid})):this.attachments=this.attachments.filter((function(e){return e.uuid!==t.uuid}))},deleteRecord:function(r){var s=this;this.$http.delete(e+"/"+r.id).then((function(e){e.data.success?(s.$Notice.success({title:s.$tc(t)+" "+s.$t("deleted"),desc:s.$t("record_deleted")}),s.refresh++):s.$Notice.error({title:s.$tc("failed"),desc:e.data.error||s.$t("failed_record_delete_text"),duration:15})})).catch((function(t){s.$event.fire("appError",t.response)})).finally((function(){return s.$Modal.remove()}))},deleteRecords:function(t){var r=this,s=t.map((function(t){return t.id}));this.$http.post(e+"/delete/many",{ids:s}).then((function(t){t.data.success?(r.$Notice.success({duration:10,desc:r.$t("records_deleted"),title:t.data.count+" "+r.$t("deleted")+", "+t.data.failed+" "+r.$t("failed")}),r.refresh++):r.$Notice.error({title:r.$tc("failed"),desc:r.$t("bulk_failed_error_text"),duration:15})}))},renderBoolean:function(t,e,r){return t("div",{style:"text-align:center;"},[1==e.row[r]?t("i",{class:"ivu-icon ivu-icon-md-checkmark",style:"font-size: 16px; color: #19be6b;"}):t("i",{class:"ivu-icon ivu-icon-md-close",style:"font-size: 16px; color: #ed4014;"})])},renderUnlessIcon:function(t,e,r){return t("div",{style:"text-align:center;"},[e.row[r]?t("i",{class:"ivu-icon ivu-icon-md-close",style:"font-size: 16px; color: #ed4014;"}):t("i",{class:"ivu-icon ivu-icon-md-checkmark",style:"font-size: 16px; color: #19be6b;"})])},renderExtras:function(t,e){return e.row.extra_attributes?t("div",[Object.entries(e.row.extra_attributes).map((function(t){return t.join(": ")})).join(", ")]):""},renderActions:function(e,a){return e("actions-component",{props:{params:a,deleteFn:this.deleteRecord,editFn:this.editRecord,record:{model:t,code:r,name:s}}})},renderNumber:function(t,e,r,s,a,i){return t("div",{class:"text-right ".concat(s?"bold":"")},[(a||"")+this.$options.filters.formatNumber(e.row[r],this.$store.getters.settings.decimals)+(i||"")])},renderMyNumber:function(t,e){return(0,this.$createElement)("div",{class:"text-right ".concat(e?"bold":"")},[this.formatNumber(t)])},renderDate:function(t,e,r){return r=r||"date",t("div",[e.row[r]?this.$options.filters.formatDate(e.row[r],this.$store.state.settings.dateformat):""])},renderDateTime:function(t,e){return this.renderCreatedAt(t,e)},renderCreatedAt:function(t,e){return t("div",[this.$options.filters.formatDate(e.row.created_at,this.$store.state.settings.dateformat+" HH:mm A")])},renderUpdatedAt:function(t,e){return t("div",[this.$options.filters.formatDate(e.row.updated_at,this.$store.state.settings.dateformat+" HH:mm A")])},renderUser:function(t,e){return t("div",[e.row.user?e.row.user.name:""])},renderAddress:function(t,e){return t("div",["".concat(e.row.house_no||""," ").concat(e.row.street_no||""," ").concat(e.row.address||""," ").concat(e.row.city||""," ").concat(e.row.postal_code||"")])}}}}},70273:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".scroll--indicator-wrapper[data-v-98931c06]{width:100%}.scroll--indicator[data-v-98931c06]{height:100%;width:0}",""]);const i=a},70177:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".user-card{margin:0 auto 16px;max-width:250px;min-width:250px;padding-top:16px;text-align:center;width:250px}.user-card .qr-code{margin:16px auto 0;max-width:180px}",""]);const i=a},52080:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".stripe-card .StripeElement{border:1px solid #dcdee2!important;border-radius:4px!important;box-shadow:none!important}",""]);const i=a},5423:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".sr-info{background:#eee;border-radius:5px;padding:8px 16px}.sr-error{background:#ffafaf;color:#af0000}",""]);const i=a},51804:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".register .table-wrapper{padding:0!important;width:100%}.register .table td,.register .table th{border-bottom:1px solid #e8eaec;padding:5px 10px}",""]);const i=a},99848:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".sr-info{background:#eee;border-radius:5px;padding:8px 16px}.sr-error{background:#ffafaf;color:#af0000}",""]);const i=a},66047:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".permissions .v-check{display:flex}.permissions .v-check .ivu-checkbox{margin-right:8px}.permissions .ivu-list-item-action{min-width:50%}",""]);const i=a},45991:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".input-number[data-v-a81d4f58]{align-items:center;background-color:#fff;border:1px solid #dcdee2;border-radius:4px;display:flex;flex-direction:row;justify-content:space-between;margin:0 auto;max-width:300px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:50%}.input-number .field-container[data-v-a81d4f58]{flex:1}.input-number .field-container input[data-v-a81d4f58]{border:none;font-size:15px;padding:3px;text-align:center;width:100px}.input-number .field-container input[data-v-a81d4f58]:focus{outline:none}.input-number .input-button[data-v-a81d4f58]{background-color:#f5f5f5;cursor:pointer;padding:4px 10px;width:50px}.input-number .input-button.first[data-v-a81d4f58]{border-radius:3px 0 0 3px;border-right:1px solid #dcdee2}.input-number .input-button.last[data-v-a81d4f58]{border-left:1px solid #dcdee2;border-radius:0 3px 3px 0}.input-number .input-button[data-v-a81d4f58]:active,.input-number .input-button[data-v-a81d4f58]:hover{background-color:#ddd}",""]);const i=a},19270:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".cardp{margin-bottom:16px}.cardp .ivu-card-body{padding-bottom:0}.ivu-radio-group-button .ivu-radio-wrapper{border-radius:0!important;height:auto!important;padding:5px 20px}.ivu-form .ivu-form-item-label{font-size:14px;font-weight:700}",""]);const i=a},82276:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".serials .ivu-cell-main{display:block!important}@media (max-width:480px){.serials .ivu-cell-main{display:inline-block!important}}",""]);const i=a},69199:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".calendar{border:1px solid #e8eaec;border-radius:4px;box-sizing:content-box;margin:0;padding:0;position:relative;transition:all 5s ease-in-out}.calendar .events{border-radius:4px;color:#fff;height:100%;position:absolute;top:0;transition:all .25s ease-in-out;width:100%}.calendar .event-enter-active{-webkit-animation:circleAnimation .25s ease-in forwards;animation:circleAnimation .25s ease-in forwards}.calendar .event-leave-active{animation:circleAnimation .25s ease-out reverse}@-webkit-keyframes circleAnimation{0%{-webkit-clip-path:circle(0 at 50% 50%);clip-path:circle(0 at 50% 50%)}to{-webkit-clip-path:circle(100%);clip-path:circle(100%)}}@keyframes circleAnimation{0%{-webkit-clip-path:circle(0 at 50% 50%);clip-path:circle(0 at 50% 50%)}to{-webkit-clip-path:circle(100%);clip-path:circle(100%)}}.calendar .got-event{background:#19be6b;border-radius:3px;height:6px;left:5px;position:absolute;top:10px;width:6px}.calendar .day-events{height:56.5217391304vh!important;min-height:315px;overflow:hidden;overflow-y:auto;padding-bottom:16px;width:100%}.calendar .event{color:#495060}.calendar .event h3{border-bottom:1px solid #e8eaec;margin:-16px -16px 8px;padding:8px 16px}.calendar .event p{margin-bottom:-8px;text-align:justify}.calendar .event .time{align-items:center;border-top:1px solid #e8eaec;display:flex;margin:16px -16px -16px}.calendar .event .time span{display:inline-block;padding:8px 16px}.calendar .event .time span:not(:first-child){border-left:1px solid #e8eaec}@media only screen and (max-width:767px){.calendar .event .time{display:block}.calendar .event .time span:not(:first-child){border-left:none}}.calendar .ivu-date-picker{width:100%}.calendar .ivu-select-dropdown{box-shadow:none!important;box-sizing:content-box;display:block;position:static!important;width:100%}.calendar .ivu-date-picker-header{box-sizing:content-box;padding-bottom:6px}.calendar .ivu-date-picker-header,.calendar .ivu-picker-panel-icon-btn{height:48px;line-height:48px}.calendar .ivu-picker-panel-icon-btn{width:48px}.calendar .ivu-date-picker-cells,.calendar .ivu-date-picker-cells-header,.calendar .ivu-picker-panel-body,.calendar .ivu-picker-panel-content{margin:0;width:100%}.calendar .ivu-date-picker-cells-header span{color:#495060;font-weight:700;height:36px!important;line-height:36px!important;margin:0}.calendar .ivu-date-picker-cells-header{background:#f5f5f5;display:flex;height:36px!important;line-height:36px!important}.calendar .ivu-date-picker-cells span{width:14.2857%}.calendar .ivu-date-picker-cells.ivu-date-picker-cells-month span,.calendar .ivu-date-picker-cells.ivu-date-picker-cells-year span{width:33.333%}.calendar .ivu-date-picker-cells-cell{border-top:1px solid #e8eaec;margin:0;padding:0;text-align:center}.calendar .ivu-date-picker-cells-cell-today:not(.ivu-date-picker-cells-focused) em{background:#f5f5f5;border:0}.calendar .ivu-date-picker-cells-cell-today em:after{display:none}.calendar span.ivu-date-picker-cells-cell{box-sizing:border-box;height:49px!important;padding:2px 1px 1px;position:relative}.calendar .ivu-date-picker-header-label{font-size:16px;font-weight:700}.calendar .ivu-date-picker-cells span{display:inline-block;height:9.0909090909vh!important;min-height:50px!important}.calendar .ivu-date-picker-cells span em{display:inline-block;height:8.6956521739vh!important;line-height:8.6956521739vh!important;margin:-1px 0 2px;min-height:47px!important;width:100%!important}.calendar .events *{background:#515a6e!important;border-color:#495060!important;color:#fff!important}.calendar .events * .red-text{color:red!important}.calendar .events * .red-bg,.calendar .events * .red-bg *{background:red!important;border-color:red!important}",""]);const i=a},18552:(t,e,r)=>{var s=r(10852)(r(55639),"DataView");t.exports=s},1989:(t,e,r)=>{var s=r(51789),a=r(80401),i=r(57667),o=r(21327),n=r(81866);function l(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}l.prototype.clear=s,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=o,l.prototype.set=n,t.exports=l},38407:(t,e,r)=>{var s=r(27040),a=r(14125),i=r(82117),o=r(67518),n=r(54705);function l(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}l.prototype.clear=s,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=o,l.prototype.set=n,t.exports=l},57071:(t,e,r)=>{var s=r(10852)(r(55639),"Map");t.exports=s},83369:(t,e,r)=>{var s=r(24785),a=r(11285),i=r(96e3),o=r(49916),n=r(95265);function l(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}l.prototype.clear=s,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=o,l.prototype.set=n,t.exports=l},53818:(t,e,r)=>{var s=r(10852)(r(55639),"Promise");t.exports=s},58525:(t,e,r)=>{var s=r(10852)(r(55639),"Set");t.exports=s},88668:(t,e,r)=>{var s=r(83369),a=r(90619),i=r(72385);function o(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new s;++e<r;)this.add(t[e])}o.prototype.add=o.prototype.push=a,o.prototype.has=i,t.exports=o},46384:(t,e,r)=>{var s=r(38407),a=r(37465),i=r(63779),o=r(67599),n=r(44758),l=r(34309);function c(t){var e=this.__data__=new s(t);this.size=e.size}c.prototype.clear=a,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=n,c.prototype.set=l,t.exports=c},11149:(t,e,r)=>{var s=r(55639).Uint8Array;t.exports=s},70577:(t,e,r)=>{var s=r(10852)(r(55639),"WeakMap");t.exports=s},96874:t=>{t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},34963:t=>{t.exports=function(t,e){for(var r=-1,s=null==t?0:t.length,a=0,i=[];++r<s;){var o=t[r];e(o,r,t)&&(i[a++]=o)}return i}},14636:(t,e,r)=>{var s=r(22545),a=r(35694),i=r(1469),o=r(44144),n=r(65776),l=r(36719),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=i(t),d=!r&&a(t),u=!r&&!d&&o(t),m=!r&&!d&&!u&&l(t),p=r||d||u||m,_=p?s(t.length,String):[],f=_.length;for(var v in t)!e&&!c.call(t,v)||p&&("length"==v||u&&("offset"==v||"parent"==v)||m&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||n(v,f))||_.push(v);return _}},62488:t=>{t.exports=function(t,e){for(var r=-1,s=e.length,a=t.length;++r<s;)t[a+r]=e[r];return t}},82908:t=>{t.exports=function(t,e){for(var r=-1,s=null==t?0:t.length;++r<s;)if(e(t[r],r,t))return!0;return!1}},18470:(t,e,r)=>{var s=r(77813);t.exports=function(t,e){for(var r=t.length;r--;)if(s(t[r][0],e))return r;return-1}},38845:t=>{t.exports=function(t,e,r){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout((function(){t.apply(void 0,r)}),e)}},68866:(t,e,r)=>{var s=r(62488),a=r(1469);t.exports=function(t,e,r){var i=e(t);return a(t)?i:s(i,r(t))}},9454:(t,e,r)=>{var s=r(44239),a=r(37005);t.exports=function(t){return a(t)&&"[object Arguments]"==s(t)}},90939:(t,e,r)=>{var s=r(2492),a=r(37005);t.exports=function t(e,r,i,o,n){return e===r||(null==e||null==r||!a(e)&&!a(r)?e!=e&&r!=r:s(e,r,i,o,t,n))}},2492:(t,e,r)=>{var s=r(46384),a=r(67114),i=r(18351),o=r(16096),n=r(64160),l=r(1469),c=r(44144),d=r(36719),u="[object Arguments]",m="[object Array]",p="[object Object]",_=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,f,v,h){var g=l(t),b=l(e),y=g?m:n(t),$=b?m:n(e),x=(y=y==u?p:y)==p,w=($=$==u?p:$)==p,k=y==$;if(k&&c(t)){if(!c(e))return!1;g=!0,x=!1}if(k&&!x)return h||(h=new s),g||d(t)?a(t,e,r,f,v,h):i(t,e,y,r,f,v,h);if(!(1&r)){var C=x&&_.call(t,"__wrapped__"),F=w&&_.call(e,"__wrapped__");if(C||F){var I=C?t.value():t,O=F?e.value():e;return h||(h=new s),v(I,O,r,f,h)}}return!!k&&(h||(h=new s),o(t,e,r,f,v,h))}},79190:(t,e,r)=>{var s=r(23560),a=r(15346),i=r(13218),o=r(80346),n=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,m=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||a(t))&&(s(t)?m:n).test(o(t))}},38749:(t,e,r)=>{var s=r(44239),a=r(41780),i=r(37005),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&a(t.length)&&!!o[s(t)]}},280:(t,e,r)=>{var s=r(25726),a=r(86916),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!s(t))return a(t);var e=[];for(var r in Object(t))i.call(t,r)&&"constructor"!=r&&e.push(r);return e}},5976:(t,e,r)=>{var s=r(6557),a=r(45357),i=r(30061);t.exports=function(t,e){return i(a(t,e,s),t+"")}},56560:(t,e,r)=>{var s=r(75703),a=r(38777),i=r(6557),o=a?function(t,e){return a(t,"toString",{configurable:!0,enumerable:!1,value:s(e),writable:!0})}:i;t.exports=o},22545:t=>{t.exports=function(t,e){for(var r=-1,s=Array(t);++r<t;)s[r]=e(r);return s}},7518:t=>{t.exports=function(t){return function(e){return t(e)}}},74757:t=>{t.exports=function(t,e){return t.has(e)}},14429:(t,e,r)=>{var s=r(55639)["__core-js_shared__"];t.exports=s},38777:(t,e,r)=>{var s=r(10852),a=function(){try{var t=s(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=a},67114:(t,e,r)=>{var s=r(88668),a=r(82908),i=r(74757);t.exports=function(t,e,r,o,n,l){var c=1&r,d=t.length,u=e.length;if(d!=u&&!(c&&u>d))return!1;var m=l.get(t),p=l.get(e);if(m&&p)return m==e&&p==t;var _=-1,f=!0,v=2&r?new s:void 0;for(l.set(t,e),l.set(e,t);++_<d;){var h=t[_],g=e[_];if(o)var b=c?o(g,h,_,e,t,l):o(h,g,_,t,e,l);if(void 0!==b){if(b)continue;f=!1;break}if(v){if(!a(e,(function(t,e){if(!i(v,e)&&(h===t||n(h,t,r,o,l)))return v.push(e)}))){f=!1;break}}else if(h!==g&&!n(h,g,r,o,l)){f=!1;break}}return l.delete(t),l.delete(e),f}},18351:(t,e,r)=>{var s=r(62705),a=r(11149),i=r(77813),o=r(67114),n=r(68776),l=r(21814),c=s?s.prototype:void 0,d=c?c.valueOf:void 0;t.exports=function(t,e,r,s,c,u,m){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!u(new a(t),new a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=n;case"[object Set]":var _=1&s;if(p||(p=l),t.size!=e.size&&!_)return!1;var f=m.get(t);if(f)return f==e;s|=2,m.set(t,e);var v=o(p(t),p(e),s,c,u,m);return m.delete(t),v;case"[object Symbol]":if(d)return d.call(t)==d.call(e)}return!1}},16096:(t,e,r)=>{var s=r(58234),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,i,o,n){var l=1&r,c=s(t),d=c.length;if(d!=s(e).length&&!l)return!1;for(var u=d;u--;){var m=c[u];if(!(l?m in e:a.call(e,m)))return!1}var p=n.get(t),_=n.get(e);if(p&&_)return p==e&&_==t;var f=!0;n.set(t,e),n.set(e,t);for(var v=l;++u<d;){var h=t[m=c[u]],g=e[m];if(i)var b=l?i(g,h,m,e,t,n):i(h,g,m,t,e,n);if(!(void 0===b?h===g||o(h,g,r,i,n):b)){f=!1;break}v||(v="constructor"==m)}if(f&&!v){var y=t.constructor,$=e.constructor;y==$||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof $&&$ instanceof $||(f=!1)}return n.delete(t),n.delete(e),f}},58234:(t,e,r)=>{var s=r(68866),a=r(99551),i=r(3674);t.exports=function(t){return s(t,i,a)}},45050:(t,e,r)=>{var s=r(37019);t.exports=function(t,e){var r=t.__data__;return s(e)?r["string"==typeof e?"string":"hash"]:r.map}},10852:(t,e,r)=>{var s=r(79190),a=r(47801);t.exports=function(t,e){var r=a(t,e);return s(r)?r:void 0}},99551:(t,e,r)=>{var s=r(34963),a=r(70479),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,n=o?function(t){return null==t?[]:(t=Object(t),s(o(t),(function(e){return i.call(t,e)})))}:a;t.exports=n},64160:(t,e,r)=>{var s=r(18552),a=r(57071),i=r(53818),o=r(58525),n=r(70577),l=r(44239),c=r(80346),d="[object Map]",u="[object Promise]",m="[object Set]",p="[object WeakMap]",_="[object DataView]",f=c(s),v=c(a),h=c(i),g=c(o),b=c(n),y=l;(s&&y(new s(new ArrayBuffer(1)))!=_||a&&y(new a)!=d||i&&y(i.resolve())!=u||o&&y(new o)!=m||n&&y(new n)!=p)&&(y=function(t){var e=l(t),r="[object Object]"==e?t.constructor:void 0,s=r?c(r):"";if(s)switch(s){case f:return _;case v:return d;case h:return u;case g:return m;case b:return p}return e}),t.exports=y},47801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},51789:(t,e,r)=>{var s=r(94536);t.exports=function(){this.__data__=s?s(null):{},this.size=0}},80401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},57667:(t,e,r)=>{var s=r(94536),a=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(s){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return a.call(e,t)?e[t]:void 0}},21327:(t,e,r)=>{var s=r(94536),a=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return s?void 0!==e[t]:a.call(e,t)}},81866:(t,e,r)=>{var s=r(94536);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=s&&void 0===e?"__lodash_hash_undefined__":e,this}},65776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,r){var s=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==s||"symbol"!=s&&e.test(t))&&t>-1&&t%1==0&&t<r}},37019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},15346:(t,e,r)=>{var s,a=r(14429),i=(s=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";t.exports=function(t){return!!i&&i in t}},25726:t=>{var e=Object.prototype;t.exports=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}},27040:t=>{t.exports=function(){this.__data__=[],this.size=0}},14125:(t,e,r)=>{var s=r(18470),a=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=s(e,t);return!(r<0)&&(r==e.length-1?e.pop():a.call(e,r,1),--this.size,!0)}},82117:(t,e,r)=>{var s=r(18470);t.exports=function(t){var e=this.__data__,r=s(e,t);return r<0?void 0:e[r][1]}},67518:(t,e,r)=>{var s=r(18470);t.exports=function(t){return s(this.__data__,t)>-1}},54705:(t,e,r)=>{var s=r(18470);t.exports=function(t,e){var r=this.__data__,a=s(r,t);return a<0?(++this.size,r.push([t,e])):r[a][1]=e,this}},24785:(t,e,r)=>{var s=r(1989),a=r(38407),i=r(57071);t.exports=function(){this.size=0,this.__data__={hash:new s,map:new(i||a),string:new s}}},11285:(t,e,r)=>{var s=r(45050);t.exports=function(t){var e=s(this,t).delete(t);return this.size-=e?1:0,e}},96e3:(t,e,r)=>{var s=r(45050);t.exports=function(t){return s(this,t).get(t)}},49916:(t,e,r)=>{var s=r(45050);t.exports=function(t){return s(this,t).has(t)}},95265:(t,e,r)=>{var s=r(45050);t.exports=function(t,e){var r=s(this,t),a=r.size;return r.set(t,e),this.size+=r.size==a?0:1,this}},68776:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,s){r[++e]=[s,t]})),r}},94536:(t,e,r)=>{var s=r(10852)(Object,"create");t.exports=s},86916:(t,e,r)=>{var s=r(5569)(Object.keys,Object);t.exports=s},31167:(t,e,r)=>{t=r.nmd(t);var s=r(31957),a=e&&!e.nodeType&&e,i=a&&t&&!t.nodeType&&t,o=i&&i.exports===a&&s.process,n=function(){try{var t=i&&i.require&&i.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=n},5569:t=>{t.exports=function(t,e){return function(r){return t(e(r))}}},45357:(t,e,r)=>{var s=r(96874),a=Math.max;t.exports=function(t,e,r){return e=a(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,n=a(i.length-e,0),l=Array(n);++o<n;)l[o]=i[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=i[o];return c[e]=r(l),s(t,this,c)}}},90619:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},72385:t=>{t.exports=function(t){return this.__data__.has(t)}},21814:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}},30061:(t,e,r)=>{var s=r(56560),a=r(21275)(s);t.exports=a},21275:t=>{var e=Date.now;t.exports=function(t){var r=0,s=0;return function(){var a=e(),i=16-(a-s);if(s=a,i>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}},37465:(t,e,r)=>{var s=r(38407);t.exports=function(){this.__data__=new s,this.size=0}},63779:t=>{t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},67599:t=>{t.exports=function(t){return this.__data__.get(t)}},44758:t=>{t.exports=function(t){return this.__data__.has(t)}},34309:(t,e,r)=>{var s=r(38407),a=r(57071),i=r(83369);t.exports=function(t,e){var r=this.__data__;if(r instanceof s){var o=r.__data__;if(!a||o.length<199)return o.push([t,e]),this.size=++r.size,this;r=this.__data__=new i(o)}return r.set(t,e),this.size=r.size,this}},80346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},75703:t=>{t.exports=function(t){return function(){return t}}},98066:(t,e,r)=>{var s=r(38845),a=r(5976),i=r(14841),o=a((function(t,e,r){return s(t,i(e)||0,r)}));t.exports=o},77813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},6557:t=>{t.exports=function(t){return t}},35694:(t,e,r)=>{var s=r(9454),a=r(37005),i=Object.prototype,o=i.hasOwnProperty,n=i.propertyIsEnumerable,l=s(function(){return arguments}())?s:function(t){return a(t)&&o.call(t,"callee")&&!n.call(t,"callee")};t.exports=l},1469:t=>{var e=Array.isArray;t.exports=e},98612:(t,e,r)=>{var s=r(23560),a=r(41780);t.exports=function(t){return null!=t&&a(t.length)&&!s(t)}},44144:(t,e,r)=>{t=r.nmd(t);var s=r(55639),a=r(95062),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,n=o&&o.exports===i?s.Buffer:void 0,l=(n?n.isBuffer:void 0)||a;t.exports=l},18446:(t,e,r)=>{var s=r(90939);t.exports=function(t,e){return s(t,e)}},23560:(t,e,r)=>{var s=r(44239),a=r(13218);t.exports=function(t){if(!a(t))return!1;var e=s(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},41780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},36719:(t,e,r)=>{var s=r(38749),a=r(7518),i=r(31167),o=i&&i.isTypedArray,n=o?a(o):s;t.exports=n},3674:(t,e,r)=>{var s=r(14636),a=r(280),i=r(98612);t.exports=function(t){return i(t)?s(t):a(t)}},70479:t=>{t.exports=function(){return[]}},95062:t=>{t.exports=function(){return!1}},96192:(t,e)=>{var r,s,a,i=function(){var t=function(t,e){var r=t,s=d[e],a=null,i=0,o=null,n=[],l={},c=function(t,e){a=function(t){for(var e=new Array(t),r=0;r<t;r+=1){e[r]=new Array(t);for(var s=0;s<t;s+=1)e[r][s]=null}return e}(i=4*r+17),u(0,0),u(i-7,0),u(0,i-7),p(),m(),f(t,e),r>=7&&_(t),null==o&&(o=h(r,s,n)),v(o,e)},u=function(t,e){for(var r=-1;r<=7;r+=1)if(!(t+r<=-1||i<=t+r))for(var s=-1;s<=7;s+=1)e+s<=-1||i<=e+s||(a[t+r][e+s]=0<=r&&r<=6&&(0==s||6==s)||0<=s&&s<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=s&&s<=4)},m=function(){for(var t=8;t<i-8;t+=1)null==a[t][6]&&(a[t][6]=t%2==0);for(var e=8;e<i-8;e+=1)null==a[6][e]&&(a[6][e]=e%2==0)},p=function(){for(var t=b.getPatternPosition(r),e=0;e<t.length;e+=1)for(var s=0;s<t.length;s+=1){var i=t[e],o=t[s];if(null==a[i][o])for(var n=-2;n<=2;n+=1)for(var l=-2;l<=2;l+=1)a[i+n][o+l]=-2==n||2==n||-2==l||2==l||0==n&&0==l}},_=function(t){for(var e=b.getBCHTypeNumber(r),s=0;s<18;s+=1){var o=!t&&1==(e>>s&1);a[Math.floor(s/3)][s%3+i-8-3]=o}for(s=0;s<18;s+=1){o=!t&&1==(e>>s&1);a[s%3+i-8-3][Math.floor(s/3)]=o}},f=function(t,e){for(var r=s<<3|e,o=b.getBCHTypeInfo(r),n=0;n<15;n+=1){var l=!t&&1==(o>>n&1);n<6?a[n][8]=l:n<8?a[n+1][8]=l:a[i-15+n][8]=l}for(n=0;n<15;n+=1){l=!t&&1==(o>>n&1);n<8?a[8][i-n-1]=l:n<9?a[8][15-n-1+1]=l:a[8][15-n-1]=l}a[i-8][8]=!t},v=function(t,e){for(var r=-1,s=i-1,o=7,n=0,l=b.getMaskFunction(e),c=i-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var d=0;d<2;d+=1)if(null==a[s][c-d]){var u=!1;n<t.length&&(u=1==(t[n]>>>o&1)),l(s,c-d)&&(u=!u),a[s][c-d]=u,-1==(o-=1)&&(n+=1,o=7)}if((s+=r)<0||i<=s){s-=r,r=-r;break}}},h=function(t,e,r){for(var s=x.getRSBlocks(t,e),a=w(),i=0;i<r.length;i+=1){var o=r[i];a.put(o.getMode(),4),a.put(o.getLength(),b.getLengthInBits(o.getMode(),t)),o.write(a)}var n=0;for(i=0;i<s.length;i+=1)n+=s[i].dataCount;if(a.getLengthInBits()>8*n)throw"code length overflow. ("+a.getLengthInBits()+">"+8*n+")";for(a.getLengthInBits()+4<=8*n&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=8*n||(a.put(236,8),a.getLengthInBits()>=8*n));)a.put(17,8);return function(t,e){for(var r=0,s=0,a=0,i=new Array(e.length),o=new Array(e.length),n=0;n<e.length;n+=1){var l=e[n].dataCount,c=e[n].totalCount-l;s=Math.max(s,l),a=Math.max(a,c),i[n]=new Array(l);for(var d=0;d<i[n].length;d+=1)i[n][d]=255&t.getBuffer()[d+r];r+=l;var u=b.getErrorCorrectPolynomial(c),m=$(i[n],u.getLength()-1).mod(u);for(o[n]=new Array(u.getLength()-1),d=0;d<o[n].length;d+=1){var p=d+m.getLength()-o[n].length;o[n][d]=p>=0?m.getAt(p):0}}var _=0;for(d=0;d<e.length;d+=1)_+=e[d].totalCount;var f=new Array(_),v=0;for(d=0;d<s;d+=1)for(n=0;n<e.length;n+=1)d<i[n].length&&(f[v]=i[n][d],v+=1);for(d=0;d<a;d+=1)for(n=0;n<e.length;n+=1)d<o[n].length&&(f[v]=o[n][d],v+=1);return f}(a,s)};l.addData=function(t,e){var r=null;switch(e=e||"Byte"){case"Numeric":r=k(t);break;case"Alphanumeric":r=C(t);break;case"Byte":r=F(t);break;case"Kanji":r=I(t);break;default:throw"mode:"+e}n.push(r),o=null},l.isDark=function(t,e){if(t<0||i<=t||e<0||i<=e)throw t+","+e;return a[t][e]},l.getModuleCount=function(){return i},l.make=function(){if(r<1){for(var t=1;t<40;t++){for(var e=x.getRSBlocks(t,s),a=w(),i=0;i<n.length;i++){var o=n[i];a.put(o.getMode(),4),a.put(o.getLength(),b.getLengthInBits(o.getMode(),t)),o.write(a)}var d=0;for(i=0;i<e.length;i++)d+=e[i].dataCount;if(a.getLengthInBits()<=8*d)break}r=t}c(!1,function(){for(var t=0,e=0,r=0;r<8;r+=1){c(!0,r);var s=b.getLostPoint(l);(0==r||t>s)&&(t=s,e=r)}return e}())},l.createTableTag=function(t,e){t=t||2;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",r+='">',r+="<tbody>";for(var s=0;s<l.getModuleCount();s+=1){r+="<tr>";for(var a=0;a<l.getModuleCount();a+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+t+"px;",r+=" height: "+t+"px;",r+=" background-color: ",r+=l.isDark(s,a)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>"}return r+="</tbody>",r+="</table>"},l.createSvgTag=function(t,e,r,s){var a={};"object"==typeof arguments[0]&&(t=(a=arguments[0]).cellSize,e=a.margin,r=a.alt,s=a.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(s="string"==typeof s?{text:s}:s||{}).text=s.text||null,s.id=s.text?s.id||"qrcode-title":null;var i,o,n,c,d=l.getModuleCount()*t+2*e,u="";for(c="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",u+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',u+=a.scalable?"":' width="'+d+'px" height="'+d+'px"',u+=' viewBox="0 0 '+d+" "+d+'" ',u+=' preserveAspectRatio="xMinYMin meet"',u+=s.text||r.text?' role="img" aria-labelledby="'+g([s.id,r.id].join(" ").trim())+'"':"",u+=">",u+=s.text?'<title id="'+g(s.id)+'">'+g(s.text)+"</title>":"",u+=r.text?'<description id="'+g(r.id)+'">'+g(r.text)+"</description>":"",u+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',u+='<path d="',o=0;o<l.getModuleCount();o+=1)for(n=o*t+e,i=0;i<l.getModuleCount();i+=1)l.isDark(o,i)&&(u+="M"+(i*t+e)+","+n+c);return u+='" stroke="transparent" fill="black"/>',u+="</svg>"},l.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var r=l.getModuleCount()*t+2*e,s=e,a=r-e;return S(r,r,(function(e,r){if(s<=e&&e<a&&s<=r&&r<a){var i=Math.floor((e-s)/t),o=Math.floor((r-s)/t);return l.isDark(o,i)?0:1}return 1}))},l.createImgTag=function(t,e,r){t=t||2,e=void 0===e?4*t:e;var s=l.getModuleCount()*t+2*e,a="";return a+="<img",a+=' src="',a+=l.createDataURL(t,e),a+='"',a+=' width="',a+=s,a+='"',a+=' height="',a+=s,a+='"',r&&(a+=' alt="',a+=g(r),a+='"'),a+="/>"};var g=function(t){for(var e="",r=0;r<t.length;r+=1){var s=t.charAt(r);switch(s){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=s}}return e};return l.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,r,s,a,i,o=1*l.getModuleCount()+2*t,n=t,c=o-t,d={"██":"█","█ ":"▀"," █":"▄","  ":" "},u={"██":"▀","█ ":"▀"," █":" ","  ":" "},m="";for(e=0;e<o;e+=2){for(s=Math.floor((e-n)/1),a=Math.floor((e+1-n)/1),r=0;r<o;r+=1)i="█",n<=r&&r<c&&n<=e&&e<c&&l.isDark(s,Math.floor((r-n)/1))&&(i=" "),n<=r&&r<c&&n<=e+1&&e+1<c&&l.isDark(a,Math.floor((r-n)/1))?i+=" ":i+="█",m+=t<1&&e+1>=c?u[i]:d[i];m+="\n"}return o%2&&t>0?m.substring(0,m.length-o-1)+Array(o+1).join("▀"):m.substring(0,m.length-1)}(e);t-=1,e=void 0===e?2*t:e;var r,s,a,i,o=l.getModuleCount()*t+2*e,n=e,c=o-e,d=Array(t+1).join("██"),u=Array(t+1).join("  "),m="",p="";for(r=0;r<o;r+=1){for(a=Math.floor((r-n)/t),p="",s=0;s<o;s+=1)i=1,n<=s&&s<c&&n<=r&&r<c&&l.isDark(a,Math.floor((s-n)/t))&&(i=0),p+=i?d:u;for(a=0;a<t;a+=1)m+=p+"\n"}return m.substring(0,m.length-1)},l.renderTo2dContext=function(t,e){e=e||2;for(var r=l.getModuleCount(),s=0;s<r;s++)for(var a=0;a<r;a++)t.fillStyle=l.isDark(s,a)?"black":"white",t.fillRect(s*e,a*e,e,e)},l};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],r=0;r<t.length;r+=1){var s=t.charCodeAt(r);e.push(255&s)}return e}}).default,t.createStringToBytes=function(t,e){var r=function(){for(var r=q(t),s=function(){var t=r.read();if(-1==t)throw"eof";return t},a=0,i={};;){var o=r.read();if(-1==o)break;var n=s(),l=s()<<8|s();i[String.fromCharCode(o<<8|n)]=l,a+=1}if(a!=e)throw a+" != "+e;return i}(),s="?".charCodeAt(0);return function(t){for(var e=[],a=0;a<t.length;a+=1){var i=t.charCodeAt(a);if(i<128)e.push(i);else{var o=r[t.charAt(a)];"number"==typeof o?(255&o)==o?e.push(o):(e.push(o>>>8),e.push(255&o)):e.push(s)}}return e}};var e,r,s,a,i,o=1,n=2,l=4,c=8,d={L:1,M:0,Q:3,H:2},u=0,m=1,p=2,_=3,f=4,v=5,h=6,g=7,b=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=1335,s=7973,i=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(a={}).getBCHTypeInfo=function(t){for(var e=t<<10;i(e)-i(r)>=0;)e^=r<<i(e)-i(r);return 21522^(t<<10|e)},a.getBCHTypeNumber=function(t){for(var e=t<<12;i(e)-i(s)>=0;)e^=s<<i(e)-i(s);return t<<12|e},a.getPatternPosition=function(t){return e[t-1]},a.getMaskFunction=function(t){switch(t){case u:return function(t,e){return(t+e)%2==0};case m:return function(t,e){return t%2==0};case p:return function(t,e){return e%3==0};case _:return function(t,e){return(t+e)%3==0};case f:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case v:return function(t,e){return t*e%2+t*e%3==0};case h:return function(t,e){return(t*e%2+t*e%3)%2==0};case g:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},a.getErrorCorrectPolynomial=function(t){for(var e=$([1],0),r=0;r<t;r+=1)e=e.multiply($([1,y.gexp(r)],0));return e},a.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case o:return 10;case n:return 9;case l:case c:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case o:return 12;case n:return 11;case l:return 16;case c:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case o:return 14;case n:return 13;case l:return 16;case c:return 12;default:throw"mode:"+t}}},a.getLostPoint=function(t){for(var e=t.getModuleCount(),r=0,s=0;s<e;s+=1)for(var a=0;a<e;a+=1){for(var i=0,o=t.isDark(s,a),n=-1;n<=1;n+=1)if(!(s+n<0||e<=s+n))for(var l=-1;l<=1;l+=1)a+l<0||e<=a+l||0==n&&0==l||o==t.isDark(s+n,a+l)&&(i+=1);i>5&&(r+=3+i-5)}for(s=0;s<e-1;s+=1)for(a=0;a<e-1;a+=1){var c=0;t.isDark(s,a)&&(c+=1),t.isDark(s+1,a)&&(c+=1),t.isDark(s,a+1)&&(c+=1),t.isDark(s+1,a+1)&&(c+=1),0!=c&&4!=c||(r+=3)}for(s=0;s<e;s+=1)for(a=0;a<e-6;a+=1)t.isDark(s,a)&&!t.isDark(s,a+1)&&t.isDark(s,a+2)&&t.isDark(s,a+3)&&t.isDark(s,a+4)&&!t.isDark(s,a+5)&&t.isDark(s,a+6)&&(r+=40);for(a=0;a<e;a+=1)for(s=0;s<e-6;s+=1)t.isDark(s,a)&&!t.isDark(s+1,a)&&t.isDark(s+2,a)&&t.isDark(s+3,a)&&t.isDark(s+4,a)&&!t.isDark(s+5,a)&&t.isDark(s+6,a)&&(r+=40);var d=0;for(a=0;a<e;a+=1)for(s=0;s<e;s+=1)t.isDark(s,a)&&(d+=1);return r+=Math.abs(100*d/e/e-50)/5*10},a),y=function(){for(var t=new Array(256),e=new Array(256),r=0;r<8;r+=1)t[r]=1<<r;for(r=8;r<256;r+=1)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8];for(r=0;r<255;r+=1)e[t[r]]=r;var s={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return s}();function $(t,e){if(void 0===t.length)throw t.length+"/"+e;var r=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var s=new Array(t.length-r+e),a=0;a<t.length-r;a+=1)s[a]=t[a+r];return s}(),s={getAt:function(t){return r[t]},getLength:function(){return r.length},multiply:function(t){for(var e=new Array(s.getLength()+t.getLength()-1),r=0;r<s.getLength();r+=1)for(var a=0;a<t.getLength();a+=1)e[r+a]^=y.gexp(y.glog(s.getAt(r))+y.glog(t.getAt(a)));return $(e,0)},mod:function(t){if(s.getLength()-t.getLength()<0)return s;for(var e=y.glog(s.getAt(0))-y.glog(t.getAt(0)),r=new Array(s.getLength()),a=0;a<s.getLength();a+=1)r[a]=s.getAt(a);for(a=0;a<t.getLength();a+=1)r[a]^=y.gexp(y.glog(t.getAt(a))+e);return $(r,0).mod(t)}};return s}var x=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var r={};return r.totalCount=t,r.dataCount=e,r},r={};return r.getRSBlocks=function(r,s){var a=function(e,r){switch(r){case d.L:return t[4*(e-1)+0];case d.M:return t[4*(e-1)+1];case d.Q:return t[4*(e-1)+2];case d.H:return t[4*(e-1)+3];default:return}}(r,s);if(void 0===a)throw"bad rs block @ typeNumber:"+r+"/errorCorrectionLevel:"+s;for(var i=a.length/3,o=[],n=0;n<i;n+=1)for(var l=a[3*n+0],c=a[3*n+1],u=a[3*n+2],m=0;m<l;m+=1)o.push(e(c,u));return o},r}(),w=function(){var t=[],e=0,r={getBuffer:function(){return t},getAt:function(e){var r=Math.floor(e/8);return 1==(t[r]>>>7-e%8&1)},put:function(t,e){for(var s=0;s<e;s+=1)r.putBit(1==(t>>>e-s-1&1))},getLengthInBits:function(){return e},putBit:function(r){var s=Math.floor(e/8);t.length<=s&&t.push(0),r&&(t[s]|=128>>>e%8),e+=1}};return r},k=function(t){var e=o,r=t,s={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=r,s=0;s+2<e.length;)t.put(a(e.substring(s,s+3)),10),s+=3;s<e.length&&(e.length-s==1?t.put(a(e.substring(s,s+1)),4):e.length-s==2&&t.put(a(e.substring(s,s+2)),7))}},a=function(t){for(var e=0,r=0;r<t.length;r+=1)e=10*e+i(t.charAt(r));return e},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return s},C=function(t){var e=n,r=t,s={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=r,s=0;s+1<e.length;)t.put(45*a(e.charAt(s))+a(e.charAt(s+1)),11),s+=2;s<e.length&&t.put(a(e.charAt(s)),6)}},a=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return s},F=function(e){var r=l,s=t.stringToBytes(e),a={getMode:function(){return r},getLength:function(t){return s.length},write:function(t){for(var e=0;e<s.length;e+=1)t.put(s[e],8)}};return a},I=function(e){var r=c,s=t.stringToBytesFuncs.SJIS;if(!s)throw"sjis not supported.";!function(t,e){var r=s("友");if(2!=r.length||38726!=(r[0]<<8|r[1]))throw"sjis not supported."}();var a=s(e),i={getMode:function(){return r},getLength:function(t){return~~(a.length/2)},write:function(t){for(var e=a,r=0;r+1<e.length;){var s=(255&e[r])<<8|255&e[r+1];if(33088<=s&&s<=40956)s-=33088;else{if(!(57408<=s&&s<=60351))throw"illegal char at "+(r+1)+"/"+s;s-=49472}s=192*(s>>>8&255)+(255&s),t.put(s,13),r+=2}if(r<e.length)throw"illegal char at "+(r+1)}};return i},O=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,r,s){r=r||0,s=s||t.length;for(var a=0;a<s;a+=1)e.writeByte(t[a+r])},writeString:function(t){for(var r=0;r<t.length;r+=1)e.writeByte(t.charCodeAt(r))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var r=0;r<t.length;r+=1)r>0&&(e+=","),e+=t[r];return e+="]"}};return e},q=function(t){var e=t,r=0,s=0,a=0,i={read:function(){for(;a<8;){if(r>=e.length){if(0==a)return-1;throw"unexpected end of file./"+a}var t=e.charAt(r);if(r+=1,"="==t)return a=0,-1;t.match(/^\s$/)||(s=s<<6|o(t.charCodeAt(0)),a+=6)}var i=s>>>a-8&255;return a-=8,i}},o=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return i},S=function(t,e,r){for(var s=function(t,e){var r=t,s=e,a=new Array(t*e),i={setPixel:function(t,e,s){a[e*r+t]=s},write:function(t){t.writeString("GIF87a"),t.writeShort(r),t.writeShort(s),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(r),t.writeShort(s),t.writeByte(0);var e=o(2);t.writeByte(2);for(var a=0;e.length-a>255;)t.writeByte(255),t.writeBytes(e,a,255),a+=255;t.writeByte(e.length-a),t.writeBytes(e,a,e.length-a),t.writeByte(0),t.writeString(";")}},o=function(t){for(var e=1<<t,r=1+(1<<t),s=t+1,i=n(),o=0;o<e;o+=1)i.add(String.fromCharCode(o));i.add(String.fromCharCode(e)),i.add(String.fromCharCode(r));var l,c,d,u=O(),m=(l=u,c=0,d=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;c+e>=8;)l.writeByte(255&(t<<c|d)),e-=8-c,t>>>=8-c,d=0,c=0;d|=t<<c,c+=e},flush:function(){c>0&&l.writeByte(d)}});m.write(e,s);var p=0,_=String.fromCharCode(a[p]);for(p+=1;p<a.length;){var f=String.fromCharCode(a[p]);p+=1,i.contains(_+f)?_+=f:(m.write(i.indexOf(_),s),i.size()<4095&&(i.size()==1<<s&&(s+=1),i.add(_+f)),_=f)}return m.write(i.indexOf(_),s),m.write(r,s),m.flush(),u.toByteArray()},n=function(){var t={},e=0,r={add:function(s){if(r.contains(s))throw"dup key:"+s;t[s]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return r};return i}(t,e),a=0;a<e;a+=1)for(var i=0;i<t;i+=1)s.setPixel(i,a,r(i,a));var o=O();s.write(o);for(var n=function(){var t=0,e=0,r=0,s="",a={},i=function(t){s+=String.fromCharCode(o(63&t))},o=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return a.writeByte=function(s){for(t=t<<8|255&s,e+=8,r+=1;e>=6;)i(t>>>e-6),e-=6},a.flush=function(){if(e>0&&(i(t<<6-e),t=0,e=0),r%3!=0)for(var a=3-r%3,o=0;o<a;o+=1)s+="="},a.toString=function(){return s},a}(),l=o.toByteArray(),c=0;c<l.length;c+=1)n.writeByte(l[c]);return n.flush(),"data:image/gif;base64,"+n};return t}();i.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],r=0;r<t.length;r++){var s=t.charCodeAt(r);s<128?e.push(s):s<2048?e.push(192|s>>6,128|63&s):s<55296||s>=57344?e.push(224|s>>12,128|s>>6&63,128|63&s):(r++,s=65536+((1023&s)<<10|1023&t.charCodeAt(r)),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s))}return e}(t)},s=[],void 0===(a="function"==typeof(r=function(){return i})?r.apply(e,s):r)||(t.exports=a)},73952:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(48921);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var n=function(t,e){return t.attributes&&(e.attributes=t.attributes,delete t.attributes),t.extra_attributes=e.formatAttributes(e.attributes,t.extra_attributes),t.customer_group_id=t.customer_group?t.customer_group.id:"",t.due_limit=t.due_limit?parseFloat(t.due_limit):null,delete t.customer_group,e.form=i(i({},t),t.extra_attributes),e.form};const l={mixins:[(0,s.Z)("customer","app/customers",!0,n)],data:function(){return{countries:[],attributes:[],searching:!1,customer_groups:[],states:[{value:"",label:this.$t("select_country")}],form:{id:"",name:"",email:"",phone:"",state:"",number:"",footer:"",address:"",country:"",show_tax:0,due_limit:null,show_discount:0,require_country:0,customer_group_id:"",opening_balance:null},rules:{name:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("name")})}],phone:[{required:!1,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("phone")})}],email:[{required:!1,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("email")})}],address:[{required:!1,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("address")})}],country:[{trigger:"change",required:this.$store.getters.require_country,message:this.$t("field_is_required",{field:this.$t("country")})}],state:[{trigger:"change",required:this.$store.getters.require_country,message:this.$t("field_is_required",{field:this.$t("state")})}],customer_group_id:[{required:!1,trigger:"change",message:this.$t("field_is_required",{field:this.$tc("customer_group")})}]}}},created:function(){var t=this;this.$http.get("app/countries").then((function(e){var r=e.data;return t.countries=r})),this.$http.get("app/customer_groups/search").then((function(e){var r=e.data;return t.customer_groups=r}))},methods:{create:function(){var t=this;this.$http.get("app/customers/create").then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t){var e=this;this.$http.get("app/customers/".concat(t)).then((function(t){return e.form=n(t.data,e)})).finally((function(){return e.loading=!1}))},countryChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t?(this.searching=!0,this.getStates(t,e),this.form.state=""):(this.form.state="",this.form.country="",this.states=[{value:"",label:this.$t("select_country")}])},getStates:function(t,e){var r=this;this.$http.get("app/states",{params:{country:t}}).then((function(t){r.states=t.data,e&&(r.form.state=r.states.find((function(t){return t.value==e})).value),r.searching=!1})).catch((function(t){return r.$event.fire("appError",t.response)}))}}};const c=(0,r(51900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("customer")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/customers"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("customer",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"customer",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("company"),prop:"company",error:t._f("a2s")(t.errors.form.company)}},[r("Input",{model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}})],1),t._v(" "),t.form.id?t._e():r("FormItem",{attrs:{error:t._f("a2s")(t.errors.form.title),label:t.$t("opening_balance"),prop:"opening_balance"}},[r("InputNumber",{model:{value:t.form.opening_balance,callback:function(e){t.$set(t.form,"opening_balance",e)},expression:"form.opening_balance"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("phone"),prop:"phone",error:t._f("a2s")(t.errors.form.phone)}},[r("Input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("email"),prop:"email",error:t._f("a2s")(t.errors.form.email)}},[r("Input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("due_limit"),prop:"due_limit",error:t._f("a2s")(t.errors.form.due_limit)}},[r("InputNumber",{model:{value:t.form.due_limit,callback:function(e){t.$set(t.form,"due_limit",e)},expression:"form.due_limit"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("customer_group"),prop:"customer_group",error:t._f("a2s")(t.errors.form.customer_group)}},[r("Select",{attrs:{clearable:"",placeholder:t.$t("select_x",{x:t.$tc("customer_group")})},model:{value:t.form.customer_group_id,callback:function(e){t.$set(t.form,"customer_group_id",e)},expression:"form.customer_group_id"}},t._l(t.customer_groups,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("house_no"),prop:"house_no",error:t._f("a2s")(t.errors.form.house_no)}},[r("Input",{model:{value:t.form.house_no,callback:function(e){t.$set(t.form,"house_no",e)},expression:"form.house_no"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("street_no"),prop:"street_no",error:t._f("a2s")(t.errors.form.street_no)}},[r("Input",{model:{value:t.form.street_no,callback:function(e){t.$set(t.form,"street_no",e)},expression:"form.street_no"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("address"),prop:"address",error:t._f("a2s")(t.errors.form.address)}},[r("Input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("city"),prop:"city",error:t._f("a2s")(t.errors.form.city)}},[r("Input",{model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("postal_code"),prop:"postal_code",error:t._f("a2s")(t.errors.form.postal_code)}},[r("Input",{model:{value:t.form.postal_code,callback:function(e){t.$set(t.form,"postal_code",e)},expression:"form.postal_code"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("country"),prop:"country",error:t._f("a2s")(t.errors.form.country)}},[r("Select",{attrs:{placeholder:"",filterable:""},on:{"on-change":t.countryChange},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.countries,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("state"),prop:"state",error:t._f("a2s")(t.errors.form.state)}},[r("Select",{attrs:{placeholder:"",filterable:"",loading:t.searching},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.states,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("customers")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("customers",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},4599:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>u});var s=r(92704);const a={props:{customer_id:{required:!0},current:{required:!1}},data:function(){return{saving:!1,address:[],countries:[],attributes:[],searching:!1,customer_groups:[],errors:{message:"",form:{}},states:[{value:"",label:this.$t("select_country")}],form:{first_name:"",last_name:"",email:"",phone:"",country:"",state:"",house_no:"",street_no:"",company:"",address:"",city:"",postal_code:"",default:""},rules:{first_name:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("first_name")})}],last_name:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("last_name")})}],phone:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("phone")})}],email:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("email")})}],house_no:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("house_no")})}],street_no:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("street_no")})}],address:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("address")})}],country:[{required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("country")})}],state:[{required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("state")})}],city:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$tc("city")})}],postal_code:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$tc("postal_code")})}]}}},created:function(){var t=this;this.$http.get("app/countries").then((function(e){var r=e.data;return t.countries=r}))},watch:{current:function(t){t?(this.getStates(t.country,t.state),this.form=t):(this.form.id=null,this.$refs.address.resetFields())}},methods:{submit:function(){var t=this;this.$refs.address.validate((function(e){e&&(t.form.customer_id=t.customer_id,t.form.id?t.$http.put("app/customers/update_address/"+t.form.id,t.form).then((function(e){e.data.success?(t.$Notice.destroy(),t.$Notice.success({title:t.$tc("address")+" "+t.$t("updated"),desc:t.$t("record_updated")}),t.$emit("added",e.data.address)):t.$Notice.error({title:t.$t("failed"),desc:t.$t("failed_error_text")})})).catch((function(e){return t.errors=e})).finally((function(){return t.saving=!1})):t.$http.post("app/customers/add_address",t.form).then((function(e){e.data.success?(t.$Notice.destroy(),t.$Notice.success({title:t.$tc("address")+" "+t.$t("added"),desc:t.$t("record_added")}),t.$emit("added",e.data.address)):t.$Notice.error({title:t.$t("failed"),desc:t.$t("failed_error_text")})})).catch((function(e){return t.errors=e})).finally((function(){return t.saving=!1})))}))},handleReset:function(){this.$refs.address.resetFields(),this.saving=!1},deleteAddress:function(){var t=this;this.$http.delete("app/customers/delete_address/"+this.form.id).then((function(e){e.data.success?(t.$Notice.destroy(),t.$Notice.success({title:t.$tc("address")+" "+t.$t("deleted"),desc:t.$t("record_deleted")}),t.$emit("removed",t.form.id)):t.$Notice.error({title:t.$tc("failed"),desc:e.data.error||t.$t("failed_record_delete_text"),duration:15})})).catch((function(e){return t.errors=e})).finally((function(){return t.saving=!1}))},countryChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t?(this.searching=!0,this.getStates(t,e),this.form.state=""):(this.form.state="",this.form.country="",this.states=[{value:"",label:this.$t("select_country")}])},getStates:function(t,e){var r=this;this.$http.get("app/states",{params:{country:t}}).then((function(t){r.states=t.data,e&&(r.form.state=r.states.find((function(t){return t.value==e})).value),r.searching=!1})).catch((function(t){return r.$event.fire("appError",t.response)}))}}};var i=r(51900);const o=(0,i.Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{ref:"address",attrs:{model:t.form,rules:t.rules,"label-position":"top",autocomplete:"off"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("first_name"),prop:"first_name",error:t._f("a2s")(t.errors.form.first_name)}},[r("Input",{model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("last_name"),prop:"last_name",error:t._f("a2s")(t.errors.form.last_name)}},[r("Input",{model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("email"),prop:"email",error:t._f("a2s")(t.errors.form.email)}},[r("Input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("phone"),prop:"phone",error:t._f("a2s")(t.errors.form.phone)}},[r("Input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{attrs:{label:t.$tc("company"),prop:"company",error:t._f("a2s")(t.errors.form.company)}},[r("Input",{model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("house_no"),prop:"house_no",error:t._f("a2s")(t.errors.form.house_no)}},[r("Input",{model:{value:t.form.house_no,callback:function(e){t.$set(t.form,"house_no",e)},expression:"form.house_no"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("street_no"),prop:"street_no",error:t._f("a2s")(t.errors.form.street_no)}},[r("Input",{model:{value:t.form.street_no,callback:function(e){t.$set(t.form,"street_no",e)},expression:"form.street_no"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{attrs:{label:t.$t("address"),prop:"address",error:t._f("a2s")(t.errors.form.address)}},[r("Input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("city"),prop:"city",error:t._f("a2s")(t.errors.form.city)}},[r("Input",{model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("postal_code"),prop:"postal_code",error:t._f("a2s")(t.errors.form.postal_code)}},[r("Input",{model:{value:t.form.postal_code,callback:function(e){t.$set(t.form,"postal_code",e)},expression:"form.postal_code"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("country"),prop:"country",error:t._f("a2s")(t.errors.form.country),autocomplete:"off"}},[r("Select",{attrs:{placeholder:"",filterable:""},on:{"on-change":t.countryChange},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.countries,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("state"),prop:"state",error:t._f("a2s")(t.errors.form.state),autocomplete:"off"}},[r("Select",{attrs:{placeholder:"",filterable:"",loading:t.searching},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.states,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.submit()}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))]),t._v(" "),t.form.id?r("Button",{staticStyle:{"margin-left":"8px",float:"right"},attrs:{type:"error"},on:{click:function(e){return t.deleteAddress()}}},[t._v(t._s(t.$t("delete")))]):t._e()],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports;const n={props:{customer:{required:!0},addUserFn:{type:Function,required:!1},addAddressFn:{type:Function,required:!1},listUsersFn:{type:Function,required:!1},listAddressesFn:{type:Function,required:!1}}};function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const d={components:{AddressFormComponent:o,CustomerViewComponent:(0,i.Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.customer?r("div",[r("div",{staticClass:"table-responsive mb16"},[r("div",{staticClass:"ivu-table-wrapper ivu-table-wrapper-with-border"},[r("div",{staticClass:"ivu-table ivu-table-default ivu-table-border"},[r("div",{staticClass:"ivu-table-body"},[r("table",{staticStyle:{width:"100%","min-width":"300px"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[r("tbody",{staticClass:"ivu-table-tbody"},[r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("name")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[r("strong",[t._v(t._s(t.customer.name))]),t._v(" "),t.customer.company?r("span",[t._v("("+t._s(t.customer.company)+")")]):t._e()])])]),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("phone")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[r("strong",[t._v(t._s(t.customer.phone))]),t._v(" "),t.customer.email?r("span",[t._v("("+t._s(t.customer.email)+")")]):t._e()])])]),t._v(" "),t.customer.journal&&t.customer.journal.balance?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.customer.journal.balance.amount>0?t.$t("due"):t.$t("deposit")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v("\n                    "+t._s(t.customer.journal.balance.amount>0?t.$t("due"):t.$t("advance"))+":\n                    "),r("strong",[t._v(t._s(t.customer.journal?t.formatJournalBalance(t.customer.journal.balance.amount>0?t.customer.journal.balance.amount:0-t.customer.journal.balance.amount,t.$store.getters.settings.decimals):""))])])])]):t._e(),t._v(" "),t.customer.customer_group?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$tc("customer_group")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[r("strong",[t._v(t._s(t.customer.customer_group?t.customer.customer_group.name:""))])])])]):t._e(),t._v(" "),t.customer.points?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("loyalty_points")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[r("strong",[t._v(t._s(t.formatNumber(t.customer.points)))])])])]):t._e(),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("address")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v("\n                    "+t._s(t.customer.address+" "+t.customer.state_name+" "+t.customer.country_name)+"\n                  ")])])]),t._v(" "),t.customer.extra_attributes&&t.customer.extra_attributes.length?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$tc("field",2)))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v("\n                    "+t._s(Object.entries(t.customer.extra_attributes).map((function(t){return t.join(": ")})).join(", "))+"\n                  ")])])]):t._e()])])])])])]),t._v(" "),r("div",{staticClass:"text-center"},[t.addUserFn?r("Button",{on:{click:function(e){return t.addUserFn(t.customer)}}},[t._v(t._s(t.$t("add_x",{x:t.$tc("user")})))]):t._e(),t._v(" "),t.listUsersFn?r("Button",{on:{click:function(e){return t.listUsersFn(t.customer)}}},[t._v(t._s(t.$t("list_x",{x:t.$tc("user",2)})))]):t._e(),t._v(" "),t.addAddressFn?r("Button",{on:{click:function(e){return t.addAddressFn(t.customer)}}},[t._v(t._s(t.$t("add_x",{x:t.$t("address")})))]):t._e(),t._v(" "),t.listAddressesFn?r("Button",{on:{click:function(e){return t.listAddressesFn(t.customer)}}},[t._v(t._s(t.$t("list_x",{x:t.$t("addresses")})))]):t._e()],1)]):t._e()}),[],!1,null,null,null).exports},mixins:[(0,s.Z)("customer","app/customers","name","company")],data:function(){var t=this,e=function(e,r,s){t.user_form.email||t.user_form.phone?s():s(new Error(t.$t("field_is_required",{field:t.$t("email_or_phone")})))};return{row:{},users:[],view:!1,current:null,addresses:[],saving:!1,loading:!1,add_user:!1,view_users:!1,add_address:!1,selected_user:null,view_addresses:!1,errors:{message:"",form:{}},user_form:{id:"",name:"",active:1,phone:"",email:"",employee:0,username:"",password:"",email_verified_at:1,password_confirmation:""},address_form:{},columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("name"),sortable:!0,key:"name",sortType:"asc",minWidth:200},{title:this.$tc("company"),sortable:!0,key:"company",width:175},{title:this.$t("phone"),sortable:!0,key:"phone",width:150},{title:this.$t("email"),sortable:!0,key:"email",minWidth:200},{title:this.$t("points"),sortable:!1,key:"points",width:125,render:this.renderPoints},{title:this.$t("balance"),sortable:!1,key:"journal",width:125,render:this.renderBalance},{minWidth:150,key:"customer_group_id",title:this.$tc("customer_group"),render:this.renderCustomerGroup},{title:this.$t("address"),sortable:!0,key:"address",minWidth:200,render:this.renderAddress},{title:this.$t("state"),sortable:!0,key:"state_name",maxWidth:150,minWidth:150},{title:this.$t("country"),sortable:!0,key:"country_name",maxWidth:150,minWidth:150},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:200,render:this.renderExtras},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-dropdown-component",{props:{params:r,editFn:t.editRecord,listFn:t.listRecord,payFn:t.paymentRecord,listUsersFn:t.listUsers,deleteFn:t.deleteRecord,addUserFn:t.showUserForm,addAddressFn:t.showAddressForm,listAddressesFn:t.listAddresses,record:{model:"item",name:"name",title:t.$tc("customer")}}})}}],options:{orderBy:"name",perPage:this.$store.state.settings.rows},user_rules:{name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}],username:[{required:!0,message:this.$t("field_is_required",{field:this.$t("username")}),trigger:"blur"}],phone:[{validator:e,required:!1,trigger:"change"}],email:[{validator:e,required:!1,trigger:"change"},{type:"email",message:this.$t("email_invalid"),trigger:["change","blur"]}],password:[{required:!this.selected_user,min:6,message:this.$t("password_error"),trigger:"blur"}],password_confirmation:[{trigger:"blur",required:!this.selected_user,message:this.$t("field_is_required",{field:this.$t("confirm_password")})},{validator:function(e,r,s){r!==t.user_form.password?s(new Error(t.$t("confirm_password_not_match"))):s()},required:!this.selected_user,trigger:"change"}]}}},computed:{url:function(){return"app/customers"+(this.$route.query.due_limit?"?due_limit="+parseInt(this.$route.query.due_limit):"")}},watch:{"$route.query.due_limit":function(){this.refresh++}},methods:{showInfo:function(t){this.row=t,this.view=!0},paymentRecord:function(t){this.$router.push("/payments/add?customer_id=".concat(t.id).concat(t.journal.balance.amount<0?"&amount="+(0-t.journal.balance.amount/100):""))},listRecord:function(t){this.$router.push("/customers/transactions/"+t.id)},showUserForm:function(t,e){this.row=t,e&&(this.user_form=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e)),this.add_user=!0},showAddressForm:function(t,e){this.row=t,this.current=e,this.add_address=!0},resetUserForm:function(t){var e=this;t||(this.selected_user=null,this.$refs.user_form.resetFields(),this.saving=!1,setTimeout((function(){e.user_form.id=null}),250))},addUser:function(){var t=this;this.$refs.user_form.validate((function(e){e?(t.saving=!0,t.user_form.customer_id=t.row.id,t.user_form.id?t.$http.put("app/customers/update_user/"+t.user_form.id,t.user_form).then((function(e){if(e.data&&e.data.success){t.add_user=!1;var r=e.data.user;t.selected_user=null,t.users=t.users.map((function(t){return t.id==r.id?r:t})),t.$Notice.success({title:t.$t("success"),desc:t.$t("record_updated")})}else t.$Notice.error({title:t.$t("failed"),desc:t.$t("failed_error_text"),duration:10})})).catch().finally((function(){return t.saving=!1})):t.$http.post("app/customers/add_user",t.user_form).then((function(e){e.data&&e.data.success?(t.add_user=!1,t.users.push(e.data.user),t.$Notice.success({title:t.$t("success"),desc:t.$t("record_added")})):t.$Notice.error({title:t.$t("failed"),desc:t.$t("failed_error_text"),duration:10})})).catch().finally((function(){return t.saving=!1}))):t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10})}))},deleteUser:function(){var t=this;this.$http.delete("app/customers/delete_user/"+this.user_form.id).then((function(e){e.data.success?(t.$Notice.destroy(),t.$Notice.success({title:t.$tc("user")+" "+t.$t("deleted"),desc:t.$t("record_deleted")}),t.userRemoved(t.user_form.id)):t.$Notice.error({title:t.$tc("failed"),desc:e.data.error||t.$t("failed_record_delete_text"),duration:15})})).catch((function(e){return t.errors=e})).finally((function(){return t.saving=!1}))},userRemoved:function(t){this.add_user=!1,this.users=this.users.filter((function(e){return e.id!=t}))},addressRemoved:function(t){this.add_address=!1,this.addresses=this.addresses.filter((function(e){return e.id!=t}))},addressAdded:function(t){this.current?(this.current=null,this.addresses=this.addresses.map((function(e){return e.id==t.id?t:e}))):this.addresses.push(t),this.add_address=!1},listUsers:function(t){var e=this;this.users=[],this.view_users=!0,this.loading=!0,this.$http.get("app/customers/users/"+t.id).then((function(t){return e.users=t.data})).catch().finally((function(){return e.loading=!1}))},listAddresses:function(t){var e=this;this.addresses=[],this.view_addresses=!0,this.loading=!0,this.$http.get("app/customers/addresses/"+t.id).then((function(t){return e.addresses=t.data})).catch().finally((function(){return e.loading=!1}))},renderCustomerGroup:function(t,e){return t("div",[e.row.customer_group?e.row.customer_group.name:""])},renderTransactions:function(t,e){return t("transactions-icon-component",{props:{id:e.row.id,url:"/customers/transactions/"}})},renderPoints:function(t,e){return t("div",{class:"text-right"},[e.row.points?this.formatNumber(e.row.points):""])},renderBalance:function(t,e){return t("div",{class:"text-right"},[e.row.journal?this.formatJournalBalance(e.row.journal.balance.amount,this.$store.getters.settings.decimals):""])}}};const u=(0,i.Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("customer",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/customers/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add"))+" "+t._s(t.$tc("customer"))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:t.url,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("pre",{staticStyle:{"font-size":"10px"}},[t._v(t._s(t.$t("customer_balance_tip")))]),t._v(" "),r("Modal",{attrs:{"footer-hide":"",scrollable:"",width:750},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("\n        "+t._s(t.row.name)+"\n        "),t.row.company?r("span",[t._v("("+t._s(t.row.company)+")")]):t._e()])]),t._v(" "),r("customer-view-component",{attrs:{customer:t.row,listUsersFn:t.listUsers,addUserFn:t.showUserForm,addAddressFn:t.showAddressForm,listAddressesFn:t.listAddresses}})],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"500","footer-hide":"","mask-closable":!1,title:t.user_form.id?t.$t("edit_x",{x:t.$tc("user")}):t.$t("add_x",{x:t.$tc("user")})},on:{"on-visible-change":t.resetUserForm},model:{value:t.add_user,callback:function(e){t.add_user=e},expression:"add_user"}},[r("Form",{ref:"user_form",staticClass:"form-responsive",attrs:{model:t.user_form,rules:t.user_rules,"label-width":150}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.user_form.name,callback:function(e){t.$set(t.user_form,"name",e)},expression:"user_form.name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("phone"),prop:"phone",error:t._f("a2s")(t.errors.form.phone)}},[r("Input",{model:{value:t.user_form.phone,callback:function(e){t.$set(t.user_form,"phone",e)},expression:"user_form.phone"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("email"),prop:"email",error:t._f("a2s")(t.errors.form.email)}},[r("Input",{model:{value:t.user_form.email,callback:function(e){t.$set(t.user_form,"email",e)},expression:"user_form.email"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("username"),prop:"username",error:t._f("a2s")(t.errors.form.username)}},[r("Input",{model:{value:t.user_form.username,callback:function(e){t.$set(t.user_form,"username",e)},expression:"user_form.username"}})],1),t._v(" "),t.user_form.id?t._e():[r("FormItem",{attrs:{label:t.$t("new_password"),prop:"password",error:t._f("a2s")(t.errors.form.password)}},[r("Input",{attrs:{type:"password",password:""},model:{value:t.user_form.password,callback:function(e){t.$set(t.user_form,"password",e)},expression:"user_form.password"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"password_confirmation",label:t.$t("confirm_password"),error:t._f("a2s")(t.errors.form.password_confirmation)}},[r("Input",{attrs:{type:"password",password:""},model:{value:t.user_form.password_confirmation,callback:function(e){t.$set(t.user_form,"password_confirmation",e)},expression:"user_form.password_confirmation"}})],1)],t._v(" "),r("FormItem",{attrs:{prop:"active",error:t._f("a2s")(t.errors.form.active)}},[r("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.user_form.active,callback:function(e){t.$set(t.user_form,"active",e)},expression:"user_form.active"}},[r("span",[t._v(t._s(t.$t("active")))])])],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.addUser()}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),t.user_form.id?r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"error",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.deleteUser()}}},[t.saving?r("span",[t._v(t._s(t.$t("deleting"))+"...")]):r("span",[t._v(t._s(t.$t("delete")))])]):t._e()],1)],2)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"550","footer-hide":"","mask-closable":!1,title:t.current?t.$t("edit_x",{x:t.$t("address")}):t.$t("add_x",{x:t.$t("address")})},model:{value:t.add_address,callback:function(e){t.add_address=e},expression:"add_address"}},[r("address-form-component",{attrs:{current:t.current,customer_id:t.row.id},on:{added:t.addressAdded,removed:t.addressRemoved}})],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{title:t.$tc("user",2),width:t.users&&t.users.length?550:350,"footer-hide":""},model:{value:t.view_users,callback:function(e){t.view_users=e},expression:"view_users"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):r("div",[t.users&&t.users.length?r("div",[r("div",{staticStyle:{"margin-top":"-16px"}}),t._v(" "),t._l(t.users,(function(e,s){return[r("Button",{key:"u_"+s,staticClass:"mt16",staticStyle:{height:"auto","white-space":"normal",padding:"8px","text-align":"left"},attrs:{long:""},on:{click:function(r){return t.showUserForm(t.row,e)}}},[t._v("\n            "+t._s(e.name)+" ( "),r("strong",[t._v(t._s(e.username))]),t._v(" )\n            "),e.phone?r("div",[t._v(t._s(t.$t("phone"))+": "+t._s(e.phone))]):t._e(),t._v(" "),e.email?r("div",[t._v(t._s(t.$t("email"))+": "+t._s(e.email))]):t._e(),t._v(" "),r("div",[t._v(t._s(t.$t("active"))+": "+t._s(1==e.active?t.$t("yes"):t.$t("no")))])])]}))],2):r("h4",[t._v(t._s(t.$t("no_data")))])])]),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{"footer-hide":"",title:t.$t("addresses"),width:t.addresses&&t.addresses.length?550:350},model:{value:t.view_addresses,callback:function(e){t.view_addresses=e},expression:"view_addresses"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):r("div",[t.addresses&&t.addresses.length?r("div",[r("div",{staticStyle:{"margin-top":"-16px"}}),t._v(" "),t._l(t.addresses,(function(e,s){return[r("Button",{key:"a_"+s,staticClass:"mt16",staticStyle:{height:"auto","white-space":"normal",padding:"8px","text-align":"left"},attrs:{long:""},on:{click:function(r){return t.showAddressForm(t.row,e)}}},[t._v("\n            "+t._s(e.first_name)+" "+t._s(e.last_name)+" "),e.company?r("span",[t._v(" ("+t._s(e.company)+")")]):t._e(),r("br"),t._v("\n            "+t._s(e.house_no)+" "+t._s(e.street_no)+" "+t._s(e.address)+" "+t._s(e.city)+" "+t._s(e.postal_code)+"\n            "+t._s(e.state_name_name)+" "+t._s(e.country_name_name)+" "),r("br"),t._v(t._s(e.phone)+" "+t._s(e.email)+"\n          ")])]}))],2):r("h4",[t._v(t._s(t.$t("no_data")))])])])],1)}),[],!1,null,null,null).exports},82536:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>l});var s=r(40895);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const n={components:{PaymentViewComponent:r(69697).Z,ReportFormComponent:s.Z},data:function(){return{url:"",data:{},refresh:1,updated:0,reportForm:{},loading:!1,showForm:!1,payment:{},view_payment:!1,fields:["created_at","user_id"],columns:[{type:"expand",width:50,render:function(t,e){return t("pre",{style:{margin:"0"}},JSON.stringify(e.row.subject,null,"  "))}},{title:this.$t("created_at"),sortable:!0,key:"created_at",sortType:"asc",width:175,render:this.renderCreatedAt},{title:this.$tc("account"),sortable:!1,key:"account",render:this.renderAccount},{title:this.$tc("customer"),sortable:!1,key:"customer",render:this.renderCustomer},{title:this.$tc("debit"),sortable:!0,key:"debit",width:150,render:this.renderDebit},{title:this.$tc("credit"),sortable:!0,key:"credit",width:150,render:this.renderCredit},{title:this.$t("type"),sortable:!1,key:"type",width:200,render:this.renderType}],options:{hideSearch:!0,showSummary:!0,orderBy:"created_at desc",summaryMethod:this.handleSummary,perPage:this.$store.state.settings.rows}}},created:function(){var t=this;this.fields.map((function(e){t.reportForm[e]=""})),this.url="app/customers/transactions/".concat(this.$route.params.id,"/table"),this.$http.get("app/customers/transactions/".concat(this.$route.params.id),{params:i(i({},this.reportForm),{},{date:""})}).then((function(e){t.prepareData(e.data.transactions),t.reportForm.end_date=new Date(e.data.end_date),t.reportForm.start_date=new Date(e.data.start_date),t.reportForm.created_at=[new Date(e.data.start_date),new Date(e.data.end_date)],t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.created_at&&this.reportForm.created_at[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.created_at[0]).format(this.datetimeFormatString())),this.reportForm.created_at&&this.reportForm.created_at[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.created_at[1]).format(this.datetimeFormatString())),delete this.reportForm.created_at,this.url="app/customers/transactions/".concat(this.$route.params.id,"/table?").concat(this.queryString(this.reportForm)),this.refresh++,this.$http.get("app/customers/transactions/".concat(this.$route.params.id),{params:i(i({},this.reportForm),{},{date:""})}).then((function(t){e.prepareData(t.data.transactions),e.reportForm.created_at=[new Date(t.data.start_date),new Date(t.data.end_date)],e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.data=[{label:this.$t("start_balance"),value:t.start_balance},{label:this.$t("close_balance"),value:t.close_balance}]},showInfo:function(t){t.subject_type&&t.subject_type.includes("Payment")&&this.viewPayment(t.subject_id)},viewPayment:function(t){var e=this;this.view_payment=!0,t!=this.payment.id&&(this.loading=!0,this.$http.get("app/payments/".concat(t)).then((function(t){return e.payment=t.data})).finally((function(){return e.loading=!1})))},renderType:function(t,e){var r=e.row.type.split("_"),s=r[0],a="opening"==s?"success":"primary",i=r[1],o="created"==i?"success":"updated"==i?"warning":"deleted"==i?"error":"default";return t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-".concat(a," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[this.capitalize(s)])]),t("div",{class:"ivu-tag ivu-tag-".concat(o," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ".concat("default"==o?"":"ivu-tag-color-white")},[this.capitalize(i)])])])},renderCustomer:function(t,e){return t("div",[e.row.journal.morphed?e.row.journal.morphed.name+" ("+e.row.journal.morphed.company+")":""])},renderAccount:function(t,e){return t("div",[e.row.subject&&e.row.subject.account?e.row.subject.account.name:""])},renderCredit:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatJournalBalance(e.row.credit,this.$store.getters.settings.decimals)])},renderDebit:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatJournalBalance(e.row.debit,this.$store.getters.settings.decimals)])},renderCreatedAt:function(t,e){return t("div",[this.$options.filters.formatDate(e.row.created_at,this.$store.state.settings.dateformat+" HH:mm A")])},rowClassName:function(t,e){return t.debit>0?"ivu-table-warning-row":t.credit>0?"ivu-table-success-row":""},handleSummary:function(t){var e=this,r=t.columns,s=t.data,a=["debit","credit"],i={};return r.forEach((function(t,r){var o=t.key;if(a.includes(o)){var n=s.map((function(t){return t.void||t.draft?0:Number(e.formatDecimal(t[o]))}));if(!n.every((function(t){return isNaN(t)}))){var l=n.reduce((function(t,e){return isNaN(Number(e))?t:t+e}),0);i[o]={key:o,value:e.formatJournalBalance(l)}}}else i[o]={key:o,value:""}})),i}}};const l=(0,r(51900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("transactions"))+" ("+t._s(t.datetime(new Date(t.reportForm.start_date)))+" - "+t._s(t.datetime(new Date(t.reportForm.end_date)))+")\n    ")]),t._v(" "),r("span",{attrs:{slot:"extra"},slot:"extra"},[r("router-link",{attrs:{to:"/customers"}},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n        "+t._s(t.$t("list"))+" "+t._s(t.$tc("customer",2))+"\n      ")],1),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n        "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n      ")],1)],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,updated:t.updated,reportForm:t.reportForm},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[r("Col",{key:s,attrs:{sm:12,md:12}},[r("div",{staticClass:"box static",class:"box"+(s+5)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatJournalBalance(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])])]}))],2),t._v(" "),r("table-component",{attrs:{url:t.url,stripe:!1,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.showInfo,"row-class-name":t.rowClassName}})],1)]),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,title:t.$tc("payment")},model:{value:t.view_payment,callback:function(e){t.view_payment=e},expression:"view_payment"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("payment-view-component",{attrs:{payment:t.payment}})],1)],1)}),[],!1,null,null,null).exports},23713:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>m});var s=r(48921),a=r(68116);function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=function(t,e){return t.items=t.items.map((function(t){return t.item.id=t.id,t.item.guid=e.guid(),t.item.item_id=t.item_id,t.item.unit_id=t.unit_id,t.item.batch_no=t.batch_no,t.item.delivery_item_id=t.id,t.item.sale_item_id=t.sale_item_id,t.item.item_unit_id=t.item.unit_id,t.item.quantity=parseFloat(t.quantity),t.item.expiry_date=new Date(t.expiry_date),t.item.selected={modifiers:[],serials:[],variations:[],portions:[]},t.modifier_options&&t.modifier_options.length&&(t.item.selected.modifiers=t.modifier_options.map((function(e){var r=t.item.modifiers.find((function(t){return t.id==e.modifier_id})),s=r.options.find((function(t){return t.id==e.id}));return{id:e.id,meta:e.meta,title:r.title,mId:e.modifier_id,option:s.name,quantity:parseFloat(e.pivot.quantity)}}))),t.variations&&t.variations.length&&(t.item.selected.variations=t.variations.map((function(t){return{id:t.id,meta:t.meta,quantity:parseFloat(t.pivot.quantity)}}))),t.portions&&t.portions.length&&(t.item.selected.portions=t.portions.map((function(t){return{id:t.id,name:t.name,quantity:parseFloat(t.pivot.quantity),choosables:t.pivot&&t.pivot.choosables?t.pivot.choosables.map((function(t){return{id:t.id,selected:t.item_id}})):[]}}))),t.item})),t.date&&(t.date=new Date(t.date)),t.delivered_at&&(t.delivered_at=new Date(t.delivered_at)),e.form=l({},t),e.form};const u={components:{AttachmentsComponent:a.Z},mixins:[(0,s.Z)("delivery","app/deliveries",!1,d)],data:function(){var t=this;return{query:"",item:null,result:[],qty:!1,show:!1,saving:!1,loading:!1,searching:!1,variantModal:!1,form:{id:"",items:[],driver:"",sale_id:"",details:"",reference:"",attachments:[],customer_id:"",location_id:"",date:new Date,delivered_at:"",delivered_by:"",status:"preparing",new_attachments:[]},rules:{date:[{required:!0,type:"date",message:this.$t("field_is_required",{field:this.$t("date")}),trigger:"change"}],status:[{required:!0,message:this.$t("field_is_required",{field:this.$t("status")}),trigger:"change"}],delivered_by:[{trigger:"blur",required:!0,validator:function(e,r,s){"delivered"!=t.form.status||r&&""!=r?s():s(new Error(t.$t("field_is_required",{field:t.$t("delivered_by")})))},message:this.$t("field_is_required",{field:this.$t("delivered_by")})}],received_by:[{trigger:"blur",required:!0,validator:function(e,r,s){"delivered"!=t.form.status||r&&""!=r?s():s(new Error(t.$t("field_is_required",{field:t.$t("received_by")})))},message:this.$t("field_is_required",{field:this.$t("received_by")})}],delivered_at:[{trigger:"change",required:!0,validator:function(e,r,s){"delivered"!=t.form.status||r&&""!=r?s():s(new Error(t.$t("field_is_required",{field:t.$t("delivered_at")})))},message:this.$t("field_is_required",{field:this.$t("delivered_at")})}]}}},created:function(){var t=this;this.loading=!0,this.$route.query.sale_id?(this.form.sale_id=this.$route.query.sale_id,this.$http.get("app/sales/"+this.form.sale_id).then((function(e){e.data.draft&&(t.$Notice.warning({title:t.$tc("draft"),desc:t.$t("order_draft_text")}),t.$router.back()),t.form.customer_id=e.data.customer_id,t.form.location_id=e.data.location_id,t.form.items=e.data.items.map((function(t){return t.item.id=t.id,t.item.item_id=t.item_id,t.item.sale_item_id=t.id,t.item.unit_id=t.unit_id,t.item.batch_no=t.batch_no,t.item.item_unit_id=t.item.unit_id,t.item.quantity=parseFloat(t.quantity),t.item.expiry_date=new Date(t.expiry_date),t.item.selected={modifiers:[],serials:[],variations:[],portions:[]},t.modifier_options&&t.modifier_options.length&&(t.item.selected.modifiers=t.modifier_options.map((function(e){var r=t.item.modifiers.find((function(t){return t.id==e.modifier_id})),s=r.options.find((function(t){return t.id==e.id}));return{id:e.id,meta:e.meta,title:r.title,mId:e.modifier_id,option:s.name,quantity:parseFloat(e.pivot.quantity)}}))),t.variations&&t.variations.length&&(t.item.selected.variations=t.variations.map((function(t){return{id:t.id,meta:t.meta,quantity:parseFloat(t.pivot.quantity)}}))),t.portions&&t.portions.length&&(t.item.selected.portions=t.portions.map((function(t){return{id:t.id,name:t.name,quantity:parseFloat(t.pivot.quantity),choosables:t.pivot&&t.pivot.choosables?t.pivot.choosables.map((function(t){return{id:t.id,selected:t.item_id}})):[]}}))),t.item}))})).finally((function(){return t.loading=!1}))):this.$route.params.id||this.$router.push(this.$store.getters.previous("/"))},methods:{fetch:function(t){var e=this;this.$http.get("app/deliveries/".concat(t)).then((function(t){return d(t.data,e)})).catch((function(t){return console.log(t)})).finally((function(){return e.loading=!1}))},renderFileList:function(){fileList.forEach((function(t,e){console.log(e+1+": "+t.name)}))},addToOrder:function(t,e,r,s){if(this.qty=0,t.selected||(t.selected={variations:[],serials:[],portions:[],modifiers:[]}),t.meta||(t.meta={}),!r&&(t.serials&&t.serials.length||t.variants&&t.variants.length>0&&t.variations&&t.variations.length>0))return this.item=JSON.parse(JSON.stringify(t)),this.variantModal=!0,!1;var a={},o=this.form.items.length>0&&this.form.items.find((function(e){return e.id==t.id&&(!e.variation||e.variation&&t.variation&&e.variation.id==t.variation.id)}));o?(o.quantity=s?parseFloat(e):parseFloat(o.quantity)+(e?parseFloat(e):1),t.selected_variation&&o.selected.variations.push(t.selected_variation),this.alert(this.$root.$t("cart_item_updated",{item:t.name}))):(t.unit&&(t.allUnits=[l(l({},t.unit),{},{subunits:null})].concat(i(t.unit.subunits))),t.selected.variations.length&&t.selected.variations.push(t.selected_variation),a=l(l({},t),{},{id:"",comment:"",item_id:t.id,guid:this.guid(),selected:l({},t.selected),quantity:e?parseFloat(e):1}),this.form.items.push(a),this.alert(this.$root.$t("added_to_cart",{item:a.name})))},deleteItem:function(t){this.form.items=this.form.items.filter((function(e){return e.guid!==t.guid}))},deleteItemVariation:function(t,e){var r=this.form.items.find((function(e){return e.guid==t.guid}));r.selected_variation=null,r.selected.variations=r.selected.variations.filter((function(t){return t.id!==e.id})),r.quantity=r.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),r.selected.variations.length<=0&&this.deleteItem(r)},itemVariationQuantityChanged:function(t){t.selected_variation=null,t.quantity=t.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),this.addToOrder(t,t.quantity,!0,!0)},getPortionChoosable:function(t,e,r){return t.choosables.find((function(t){return t.id==e})).selected==r},handleUpload:function(t){this.form.attachments.push(t)},clearAttachments:function(){this.form.attachments=[],this.form.new_attachments=[]},addDelivery:function(t,e){var r=this;this.$refs.delivery.validate((function(s){if(s){r.saving=!0;var a="app/sales/".concat(r.form.sale_id,"/deliveries"),o="added";r.errors.message="";var n="record_added";r.form.id&&""!=r.form.id&&(o="updated",a="app/deliveries/"+r.form.id,n="record_updated",r.form._method="PUT"),a+=e?"?stay=1":"";var c=l({},r.form);if(c.items=c.items.map((function(t){var e={code:t.code,name:t.name,item_id:t.item_id,quantity:t.quantity,sale_item_id:t.sale_item_id,id:r.form.id?t.id:"",selected:(l({},t.selected),{modifiers:[],variations:[],portions:[]}),serials:t.selected.serials};return t.selected.modifiers.length&&(e.selected.modifiers=t.selected.modifiers.map((function(t){return{id:t.mId,selected:t.id,quantity:t.quantity}}))),t.selected.portions.length&&(e.selected.portions=t.selected.portions.map((function(t){return{id:t.id,quantity:t.quantity,choosables:t.choosables}}))),t.selected.variations.length&&(e.selected.variations=i(t.selected.variations)),e})),r.attributes&&r.attributes.length>0){var u=r.attributes.map((function(t){var e={};return delete c[t.slug],e[t.slug]=r.form[t.slug],e}));c.extra_attributes=Object.assign.apply(Object,i(u))}c.date&&(c.date=r.$moment(c.date).format(r.$moment.HTML5_FMT.DATE)),c.delivered_at&&(c.delivered_at=r.$moment(c.delivered_at).format(r.$moment.HTML5_FMT.DATE)),c=r.$form(c),r.$http.post(a,c).then((function(s){s.data.success?(r.$Notice.destroy(),r.$Notice.success({title:r.$tc("delivery")+" "+r.$t(o),desc:r.$t(n)}),e?"updated"==o?r.form=d(s.data.data,r):r.handleReset():r.$router.push({name:t+".list"})):r.$Notice.error({title:r.$t("failed"),desc:r.$t("failed_error_text")})})).catch((function(t){return r.errors=t})).finally((function(){return r.saving=!1}))}else r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10})}))}}};const m=(0,r(51900).Z)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("delivery")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/deliveries"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("delivery",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"delivery",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("status"),prop:"status",error:t._f("a2s")(t.errors.form.status)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[r("Option",{attrs:{value:"preparing"}},[t._v(t._s(t.$t("preparing")))]),t._v(" "),r("Option",{attrs:{value:"delivering"}},[t._v(t._s(t.$t("delivering")))]),t._v(" "),r("Option",{attrs:{value:"delivered"}},[t._v(t._s(t.$t("delivered")))])],1)],1),t._v(" "),r("FormItem",{attrs:{prop:"delivered_by",label:t.$tc("delivered_by"),error:t._f("a2s")(t.errors.form.delivered_by)}},[r("Input",{model:{value:t.form.delivered_by,callback:function(e){t.$set(t.form,"delivered_by",e)},expression:"form.delivered_by"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"delivered_at",label:t.$tc("delivered_at"),error:t._f("a2s")(t.errors.form.delivered_at)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm"},model:{value:t.form.delivered_at,callback:function(e){t.$set(t.form,"delivered_at",e)},expression:"form.delivered_at"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("driver"),prop:"driver",error:t._f("a2s")(t.errors.form.driver)}},[r("Input",{model:{value:t.form.driver,callback:function(e){t.$set(t.form,"driver",e)},expression:"form.driver"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"received_by",label:t.$tc("received_by"),error:t._f("a2s")(t.errors.form.received_by)}},[r("Input",{model:{value:t.form.received_by,callback:function(e){t.$set(t.form,"received_by",e)},expression:"form.received_by"}})],1)],1)],1),t._v(" "),r("transition",{attrs:{mode:"out-in",name:"slide-in","enter-active-class":"animate__animated faster animate__fadeInDown","leave-active-class":"animate__animated fastest animate__fadeOutDown"}},[r("div",{staticClass:"order-contents"},[!t.form.items||t.form.items.length<1?r("div",[r("Alert",{attrs:{"show-icon":""}},[t._v("\n                    "+t._s(t.$t("empty_order"))+"\n                    "),r("template",{slot:"desc"},[t._v("\n                      "+t._s(t.$t("empty_order_text"))+"\n                    ")])],2)],1):r("div",[r("div",{staticClass:"order-items"},[r("div",{staticClass:"header"},[r("span",{staticClass:"index"},[t._v("#")]),t._v(" "),r("span",{staticClass:"details"},[t._v(t._s(t.$t("description")))]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(t._s(t.$t("quantity")))])]),t._v(" "),t._l(t.form.items,(function(e,s){return r("div",{key:s+"_"+e.id,staticClass:"order-item"},[r("span",{staticClass:"item"},[r("span",{staticClass:"index"},[r("span",{staticClass:"number-rmdash"},[t._v(t._s(s+1))])]),t._v(" "),r("span",{staticClass:"details"},[r("strong",[t._v(t._s(e.name))])]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!0,size:e.selected.variations.length||e.selected.portions.length?"small":"default"},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"row.quantity"}})],1)]),t._v(" "),e.selected.variations&&e.selected.variations.length?t._l(e.selected.variations,(function(e,a){return r("div",{key:"svi_"+a,staticClass:"combo-item variation"},[r("span",{staticClass:"index"},[r("span",{staticClass:"number-rmdash"})]),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n                            "+t._s(a+1)+".\n                            "),r("span",{domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!0},on:{"on-change":function(e){return t.itemVariationQuantityChanged(t.form.items[s])}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"sv.quantity"}})],1)])})):t._e(),t._v(" "),e.selected.portions.length?t._l(e.selected.portions,(function(a,i){return r("div",{key:"spi_"+i,staticClass:"combo"},t._l(e.portions.filter((function(t){return t.id==a.id})),(function(e){return r("div",{key:"pi_"+e.id,staticClass:"combo"},[r("div",{staticClass:"combo-item variation"},[r("span",{staticClass:"index"},[r("span",{staticClass:"number-rmdash"})]),t._v(" "),r("span",{staticClass:"details leading-medium"},[r("p",[t._v("\n                                  "+t._s(i+1)+". "+t._s(t.$tc("portion"))+":\n                                  "),r("strong",[t._v(t._s("regular"==e.name?t.$t("regular"):e.name))])])]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!0},on:{"on-change":function(e){return t.itemPortionQuantityChanged(t.form.items[s])}},model:{value:a.quantity,callback:function(e){t.$set(a,"quantity",e)},expression:"sp.quantity"}})],1)]),t._v(" "),t._l(e.essentials,(function(e,s){return r("div",{key:"ei_"+s,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"remove"}),t._v(" "),r("span",{staticClass:"details"},[t._v(" #"+t._s(s+1)+" "+t._s(e.item.name)+" ")]),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n                                "+t._s(parseFloat(e.quantity*a.quantity))+"\n                              ")])])})),t._v(" "),t._l(e.choosables,(function(s,i){return t._l(s.items,(function(o,n){return t.getPortionChoosable(a,s.id,o.item_id)?r("div",{key:"gii_"+n+"_"+i,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"remove"}),t._v(" "),r("span",{staticClass:"details"},[t._v("\n                                  #"+t._s(i+1+e.essentials.length)+"\n                                  "+t._s(o.item.name)+"\n                                ")]),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n                                  "+t._s(parseFloat(o.quantity*a.quantity))+"\n                                ")])]):t._e()}))}))],2)})),0)})):t._e(),t._v(" "),e.selected.modifiers.length?[r("div",{staticClass:"combo-item bg"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"details"},[r("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.$tc("modifier",2)))])]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(" ")])]),t._v(" "),t._l(e.selected.modifiers,(function(e,s){return r("div",{key:"mi_"+s},[r("div",{staticClass:"combo-item pt pb"},[r("span",{staticClass:"index"},[r("span",{staticClass:"number-rmdash"})]),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n                              "+t._s(s+1)+". "),r("strong",[t._v(t._s(e.option))]),t._v(" ("+t._s(e.title)+")\n                            ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!0},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"m.quantity"}})],1)])])}))]:t._e()],2)}))],2)])])]),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}}),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details",error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.addDelivery("deliveries")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.addDelivery("deliveries",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},9797:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var s=r(92704);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const i={components:{OrderViewComponent:r(79478).Z},mixins:[(0,s.Z)("delivery","app/deliveries","reference")],data:function(){var t,e=this;return{view:!1,loading:!1,delivery:{id:null,reference:null},columns:[{type:"selection",width:50,align:"center",fixed:"left"},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{width:175,sortable:!1,key:"delivered_by",render:this.renderDeliveredBy,title:this.$t("delivered_by")},{width:175,sortable:!1,key:"delivered_at",render:this.renderDeliveredAt,title:this.$t("delivered_at")},(t={title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0},a(t,"ellipsis",!0),a(t,"minWidth",250),a(t,"maxWidth",600),t),{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(t,r){return t("actions-component",{props:{params:r,viewFn:e.viewModal,editFn:e.editRecord,deleteFn:e.deleteRecord,record:{model:"delivery",name:"reference",title:e.$tc("delivery")}}})}}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.delivery.id&&(this.loading=!0,this.$http.get("app/deliveries/".concat(t.id)).then((function(t){return e.delivery=t.data})).finally((function(){return e.loading=!1})))},editRecord:function(t){this.$router.push({name:"deliveries.edit",params:{id:t.id}})},renderDeliveredBy:function(t,e){return t("div",[e.row.delivered_by&&e.row.delivered_by.name?e.row.delivered_by.name:e.row.delivered_by])},renderDeliveredAt:function(t,e){return t("div",[e.row.delivered_at?this.$options.filters.formatDate(e.row.delivered_at,this.$store.state.settings.dateformat+" HH:mm A"):""])}}};const o=(0,r(51900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("delivery",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/deliveries/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add_x",{x:t.$tc("delivery")}))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,url:"app/deliveries",bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("delivery")+" ("+t.delivery.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{"to-text":"",to:!1,field:"cost",extra:!1,payment:!1,"only-qty":!0,delivery:!0,record:t.delivery,heading:t.$tc("delivery")},on:{remove:function(e){return t.deleteAttachment(e,t.delivery)}}})],1)],1)}),[],!1,null,null,null).exports},75063:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>m});var s=r(48921),a=r(44605);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var d=function(t,e){return t.attributes&&(e.attributes=t.attributes,delete t.attributes),t.extra_attributes=e.formatAttributes(e.attributes,t.extra_attributes),t.amount=parseFloat(t.amount),t.category_id=t.categories[0].id,t.recurring=1==t.recurring?"1":"0",e.attachments=t.attachments&&t.attachments.length?l(t.attachments):[],e.form=o(o({},t),t.extra_attributes),e.form};const u={mixins:[a.Z,(0,s.Z)("expense","app/expenses",!0,d)],data:function(){return{admins:[],accounts:[],categories:[],attributes:[],form:{id:"",title:"",details:"",amount:null,reference:"",account_id:"",category_id:"",approved_by_id:"",date:new Date,recurring:!1,repeat:"monthly",start_date:new Date,create_before:null},rules:{title:[{required:!0,message:this.$t("field_is_required",{field:this.$t("title")}),trigger:"blur"}],reference:[{required:!1,message:this.$t("field_is_required",{field:this.$t("reference")}),trigger:"blur"}],account_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("account")}),trigger:"change"}],category_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("category")}),trigger:"change"}],date:[{type:"date",required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("date")})}],approved_by_id:[{trigger:"change",required:!this.$store.getters.superAdmin,message:this.$t("field_is_required",{field:this.$t("require_approval_by")})}],amount:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("amount")}),trigger:"blur"}]}}},created:function(){var t=this;this.$http.get("app/accounts/search").then((function(e){return t.accounts=e.data})),this.$http.get("app/users/search?roles=admin").then((function(e){return t.admins=e.data})),this.$http.get("app/all_categories/search").then((function(e){return t.categories=t.flattenDeep(e.data)}))},methods:{create:function(){var t=this;this.$http.get("app/expenses/create").then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t){var e=this;this.$http.get("app/expenses/".concat(t)).then((function(t){return d(t.data,e)})).finally((function(){return e.loading=!1}))}}};const m=(0,r(51900).Z)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("expense")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/expenses"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("expense",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"expense",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("title"),prop:"title",error:t._f("a2s")(t.errors.form.title)}},[r("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("amount"),prop:"amount",error:t._f("a2s")(t.errors.form.amount)}},[r("InputNumber",{model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1)],1),t._v(" "),r("Col",{staticClass:"sm-pt-24",attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("account"),prop:"account_id",error:t._f("a2s")(t.errors.form.account_id)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.account_id,callback:function(e){t.$set(t.form,"account_id",e)},expression:"form.account_id"}},t._l(t.accounts,(function(e,s){return t.accounts.length>0?r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))]):t._e()})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("category"),prop:"category_id",error:t._f("a2s")(t.errors.form.category_id)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categories,(function(e,s){return t.categories.length>0?r("Option",{key:s,attrs:{value:e.id}},[t._v("\n                    "+t._s(e.name)+"\n                  ")]):t._e()})),1)],1)],1)],1),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[t.$store.getters.superAdmin?t._e():r("FormItem",{attrs:{prop:"approved_by_id",label:t.$tc("require_approval_by"),error:t._f("a2s")(t.errors.form.approved_by_id)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.approved_by_id,callback:function(e){t.$set(t.form,"approved_by_id",e)},expression:"form.approved_by_id"}},[t.accounts.length>0?t._l(t.admins,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v("\n                      "+t._s(e.label)+"\n                    ")])})):t._e()],2)],1)],1)],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details",error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"recurring"}},[r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.recurring,callback:function(e){t.$set(t.form,"recurring",e)},expression:"form.recurring"}},[r("span",[t._v(t._s(t.$t("recurring_expense_text")))])])],1),t._v(" "),r("transition",{attrs:{mode:"out-in",name:"slide-in","enter-active-class":"animate__animated faster animate__fadeInDown","leave-active-class":"animate__animated fastest animate__fadeOutDown"}},[1==t.form.recurring?r("div",[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("start_date"),prop:"start_date",error:t._f("a2s")(t.errors.form.start_date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("repeat"),prop:"repeat",error:t._f("a2s")(t.errors.form.repeat)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.repeat,callback:function(e){t.$set(t.form,"repeat",e)},expression:"form.repeat"}},[r("Option",{attrs:{value:"daily"}},[t._v(t._s(t.$t("daily")))]),t._v(" "),r("Option",{attrs:{value:"weekly"}},[t._v(t._s(t.$t("weekly")))]),t._v(" "),r("Option",{attrs:{value:"monthly"}},[t._v(t._s(t.$t("monthly")))]),t._v(" "),r("Option",{attrs:{value:"quarterly"}},[t._v(t._s(t.$t("quarterly")))]),t._v(" "),r("Option",{attrs:{value:"semiannually"}},[t._v(t._s(t.$t("semiannually")))]),t._v(" "),r("Option",{attrs:{value:"annually"}},[t._v(t._s(t.$t("annually")))]),t._v(" "),r("Option",{attrs:{value:"biennially"}},[t._v(t._s(t.$t("biennially")))]),t._v(" "),r("Option",{attrs:{value:"triennially"}},[t._v(t._s(t.$t("triennially")))])],1)],1)],1)],1),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{prop:"approved_by_id",label:t.$tc("require_approval_by"),error:t._f("a2s")(t.errors.form.approved_by_id)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.approved_by_id,callback:function(e){t.$set(t.form,"approved_by_id",e)},expression:"form.approved_by_id"}},[t.accounts.length>0?t._l(t.admins,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v("\n                          "+t._s(e.label)+"\n                        ")])})):t._e()],2)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("create_before"),prop:"create_before",error:t._f("a2s")(t.errors.form.create_before)}},[r("InputNumber",{model:{value:t.form.create_before,callback:function(e){t.$set(t.form,"create_before",e)},expression:"form.create_before"}})],1)],1)],1)],1):t._e()]),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("expenses")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("expenses",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},30773:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(92704),a=r(39657);const i={props:{expense:{required:!0},updateFn:{required:!0}},methods:{approve:function(){var t=this;this.$Modal.confirm({title:this.$t("approve_x",{x:this.$tc("expense")})+" ("+this.expense.reference+")",content:this.$t("approve_text")+"<br><br><strong>"+this.$t("r_u_sure")+"</strong>",okText:this.$t("yes"),cancelText:this.$t("cancel"),loading:!0,onOk:function(){t.$http.post("/app/expenses/".concat(t.expense.id,"/approve")).then((function(e){e.data.success?(t.updateFn(),t.$Notice.success({title:t.$t("success"),desc:e.data.message||t.$t("expense_approved_text")})):t.$Notice.error({title:t.$t("failed"),desc:e.data.message||t.$t("no_permissions"),duration:10})})).finally((function(){return t.$Modal.remove()}))}})}}};var o=r(51900);const n=(0,o.Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.approve()}}},[r("Icon",{attrs:{type:"ios-checkmark-circle"}})],1)],1)}),[],!1,null,null,null).exports,l={components:{ExpenseViewComponent:a.Z},mixins:[(0,s.Z)("expense","app/expenses","title","reference")],data:function(){var t=this;return{view:!1,loading:!1,expense:{id:null,reference:null},columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",minWidth:125,render:this.renderDate},{title:this.$t("title"),sortable:!0,key:"title",minWidth:200},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$t("amount"),sortable:!0,key:"amount",maxWidth:125,minWidth:125,render:this.renderAmount},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{title:this.$tc("category"),sortable:!1,key:"categories",minWidth:175,render:this.renderCategory},{title:this.$tc("account"),sortable:!1,key:"account",minWidth:175,render:this.renderAccount},{title:this.$tc("created_by"),sortable:!1,key:"user",minWidth:175,render:this.renderUser},{title:this.$tc("recurring"),sortable:!1,key:"recurring",minWidth:90,render:this.renderRecurring},{title:this.$tc("approved"),sortable:!1,key:"approved",minWidth:90,render:this.renderApproved},{title:this.$tc("approval"),sortable:!1,key:"approved_by",minWidth:175,render:this.renderApproval},{title:this.$t("details"),sortable:!0,key:"details",ellipsis:!0,minWidth:250},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:250,render:this.renderExtras},{width:105,sortable:!0,sortType:"desc",key:"start_date",render:this.renderStartDate,title:this.$t("start_date")},{title:this.$t("repeat"),sortable:!0,key:"repeat",width:125,render:this.renderRepeat},{title:this.$t("before"),sortable:!0,key:"create_before",width:90},{title:this.$t("created_at"),sortable:!0,key:"created_at",sortType:"desc",minWidth:175,render:this.renderDateTime},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,viewFn:t.viewModal,editFn:t.editRecord,deleteFn:t.deleteRecord,record:{model:"expense",name:"reference",title:t.$tc("expense")}}})}}],options:{perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},computed:{url:function(){return"app/expenses"+(this.$route.query.require_approval?"?require_approval="+parseInt(this.$route.query.require_approval):"")}},watch:{"$route.query.require_approval":function(t){t?this.columns.splice(1,0,{width:50,title:"✓",fixed:"left",key:"approve",align:"center",render:this.renderApprovalNow}):this.columns=this.columns.filter((function(t){return"approve"!=t.key})),this.refresh++}},created:function(){var t=this;this.$route.query.require_approval?this.columns.splice(1,0,{title:"✓",width:50,key:"approve",align:"center",fixed:"left",render:this.renderApprovalNow}):this.columns=this.columns.filter((function(t){return"approve"!=t.key})),this.$event.listen("location:changed",(function(e){return t.refresh++}))},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.expense.id&&(this.loading=!0,this.$http.get("app/expenses/".concat(t.id)).then((function(t){return e.expense=t.data})).finally((function(){return e.loading=!1})))},reloadExpenses:function(){this.refresh++},renderApprovalNow:function(t,e){return t(n,{props:{expense:e.row,updateFn:this.reloadExpenses}})},renderAmount:function(t,e){return this.renderNumber(t,e,"amount")},renderAccount:function(t,e){return t("div",[e.row.account.name])},renderLocation:function(t,e){return t("div",[e.row.location.name])},renderCategory:function(t,e){return t("div",[e.row.categories.map((function(t){return t.name})).join("")])},renderRecurring:function(t,e){return this.renderBoolean(t,e,"recurring")},renderApproved:function(t,e){return this.renderBoolean(t,e,"approved")},renderApproval:function(t,e){return t("div",[e.row.approved_by?e.row.approved_by.name:""])},renderUser:function(t,e){return t("div",[e.row.user?e.row.user.name:""])},renderStartDate:function(t,e){return t("div",[e.row.start_date?this.date(e.row.start_date):""])},renderRepeat:function(t,e){return t("div",{class:"text-center"},[e.row.repeat?t("div",{class:"ivu-tag ivu-tag-".concat(this.repeatColor(e.row.repeat)," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[this.$t(e.row.repeat)])]):""])},repeatColor:function(t){var e={daily:"blue",weekly:"magenta",monthly:"primary",quarterly:"geekblue",semiannually:"purple",annually:"success",biennially:"green",triennially:"orange"};return e[t]?e[t]:"default"}}};const c=(0,o.Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("expense",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/expenses/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add"))+" "+t._s(t.$tc("expense"))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:t.url,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{title:t.$tc("expense"),width:"750","footer-hide":!0,"mask-closable":!1},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("expense-view-component",{attrs:{expense:t.expense},on:{remove:function(e){return t.deleteAttachment(e,t.expense)}}})],1)],1)}),[],!1,null,null,null).exports},39657:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});var s=r(7174),a=r.n(s),i=r(37148);const o={props:{expense:{type:Object,required:!0}},components:{VueBarcode:a(),ListAttachmentsComponent:i.Z},data:function(){return{loading:!1}},methods:{print:function(){window.print()},deleteAttachment:function(t){this.$emit("remove",t)}}};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{}},[t.expense.id?r("div",{staticClass:"order"},[r("div",{staticClass:"order-header"},[r("div",{staticClass:"details"},[r("img",{staticClass:"logo",attrs:{src:t.expense.location&&t.expense.location.logo?t.expense.location.logo:t.$store.state.settings.default_logo}}),t._v(" "),r("div",{staticClass:"header-text"},[r("ul",[r("li",[r("strong",[t._v(t._s(t.$store.getters.settings.name)+" ("+t._s(t.$store.getters.settings.short_name)+")")])]),t._v(" "),r("li",[r("strong",[t._v(t._s(t.$store.getters.settings.company))])]),t._v(" "),r("li",[t._v(t._s(t.$store.getters.settings.email)+" "),r("span",{staticClass:"text-muted"},[t._v("|")]),t._v(" "+t._s(t.$store.getters.settings.phone))]),t._v(" "),r("li",[t._v(t._s(t.$store.getters.settings.address))])])])]),t._v(" "),r("vue-barcode",{staticClass:"barcode",attrs:{width:1,margin:0,height:50,fontSize:12,"margin-top":0,format:"code39","margin-bottom":2,value:t.expense.reference}},[t._v("\n        "+t._s(t.$t("barcode_error"))+"\n      ")])],1),t._v(" "),r("Row",{staticClass:"border-t",attrs:{gutter:16}},[r("Col",{staticClass:"border-y py-2",attrs:{xs:24}},[r("h3",{staticClass:"text-center",staticStyle:{"text-transform":"uppercase"}},[t._v("\n          "+t._s(t.$tc("expense"))+"\n        ")])])],1),t._v(" "),r("Row",{staticClass:"border-y py-2",attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[t._v("\n        "+t._s(t.$t("date"))+": "),r("strong",[t._v(t._s(t._f("date")(t.expense.date)))]),t._v(" "),r("br"),t._v("\n        "+t._s(t.$t("reference"))+": "),r("strong",[t._v(t._s(t.expense.reference))]),t._v(" "),r("br"),t._v("\n        "+t._s(t.$t("created_by"))+": "),r("strong",[t._v(t._s(t.expense.user.name))])]),t._v(" "),r("Col",{attrs:{xs:24,sm:12}},[t._v("\n        "+t._s(t.$t("created_at"))+": "),r("strong",[t._v(t._s(t._f("datetime")(t.expense.created_at)))]),t._v(" "),r("br"),t._v("\n        "+t._s(t.$t("approval"))+": "),t.expense.approved_by?r("strong",[t._v(t._s(t._f("capitalize")(t.expense.approved_by.name)))]):t._e(),t._v(" "),r("br"),t._v("\n        "+t._s(t.$tc("approved"))+": "),r("span",{domProps:{innerHTML:t._s(t.booleanView(t.expense.approved))}})])],1),t._v(" "),r("Row",{staticClass:"mt16",attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[r("p",[t._v(t._s(t.$tc("store"))+":")]),t._v(" "),t.expense.location?r("div",[r("strong",[t._v(t._s(t.expense.location.name))]),r("br"),t._v(" "),t.expense.location.address?r("span",[t._v(t._s(t.expense.location.address))]):t._e(),t._v(" "),t.expense.location.state_name?r("span",[t._v(t._s(t.expense.location.state_name))]):t._e(),t._v(" "),t.expense.location.country_name?r("span",[t._v(t._s(t.expense.location.country_name))]):t._e(),r("br"),t._v(" "),t.expense.location.phone?r("span",[t._v(t._s(t.expense.location.phone))]):t._e(),r("br"),t._v(" "),t.expense.location.email?r("span",[t._v(t._s(t.expense.location.email))]):t._e(),r("br")]):t._e()])],1),t._v(" "),r("div",{staticClass:"table-wrapper"},[r("table",{staticClass:"table"},[r("tbody",[r("tr",[r("td",[t._v(t._s(t.$t("title")))]),t._v(" "),r("td",[t._v(t._s(t.expense.title))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$tc("account")))]),t._v(" "),r("td",[t._v(t._s(t.expense.account.name))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$tc("category")))]),t._v(" "),r("td",[t._v(t._s(t.expense.categories[0].name))])]),t._v(" "),r("tr",[r("td",{staticClass:"bold"},[t._v(t._s(t.$t("amount")))]),t._v(" "),r("td",{staticClass:"bold"},[t._v(t._s(t.formatNumber(t.expense.amount)))])])])])]),t._v(" "),t.checkExtraAttributes(t.expense.extra_attributes)?r("Card",{staticClass:"mt16",attrs:{"dis-hover":""}},[r("span",{domProps:{innerHTML:t._s(t.renderExtraAttributes(t.expense.extra_attributes,t.expense.attributes))}})]):t._e(),t._v(" "),r("list-attachments-component",{staticClass:"mt16",attrs:{attachments:t.expense.attachments},on:{remove:t.deleteAttachment}}),t._v(" "),t.expense.details?r("Card",{staticClass:"mt16",attrs:{"dis-hover":""}},[t._v(t._s(t.expense.details))]):t._e()],1):t._e(),t._v(" "),r("div",{staticClass:"np text-center"},[r("Button",{staticClass:"mt16 mx8",attrs:{type:"primary",loading:t.loading,disabled:t.loading,icon:"md-print"},on:{click:function(e){return t.print()}}},[t._v("\n      "+t._s(t.$t("print"))+"\n    ")])],1)])}),[],!1,null,null,null).exports},90706:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d});var s=r(48921),a=r(23279),i=r.n(a);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var l=function(t,e){return t.amount=t.amount?parseFloat(t.amount):null,t.points=t.points?parseFloat(t.points):null,t.expiry_date=t.expiry_date?new Date(t.expiry_date):null,e.form=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t),e.form};const c={mixins:[(0,s.Z)("gift_card","app/gift_cards",!1,l)],data:function(){var t=this;return{customer:{},customers:[],searching:!1,form:{id:"",number:"",amount:null,customer_id:null,points:null,expiry_date:null,details:""},rules:{number:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("number")}),trigger:"change"}],amount:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("amount")}),trigger:"change"}],points:[{validator:function(e,r,s){r&&t.customer&&t.customer.points&&parseFloat(r)>parseFloat(t.customer.points)?s(new Error(t.$t("low_points_error"))):s()},type:"number",trigger:"change"}]}}},created:function(){var t=new Date,e=t.getDate(),r=t.getMonth(),s=t.getFullYear();this.form.expiry_date=new Date(s+2,r,e)},methods:{fetch:function(t){var e=this;this.$http.get("app/gift_cards/".concat(t)).then((function(t){return l(t.data,e)})).finally((function(){return e.loading=!1}))},generateNumber:function(){this.form.number=Math.floor(1e9+9e9*Math.random())},customerChanged:function(t){this.customer=this.customers.find((function(e){return e.value==t})),this.customer.points||(this.form.points=null)},searchCustomers:function(t){""===t||this.customers.find((function(e){return e.label==t}))||this.getCustomers(t,this)},getCustomers:i()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/customers/search?q="+t).then((function(t){e.customers=t.data,e.form.customer_id&&(e.customer=e.customers.find((function(t){return t.value==e.form.customer_id})),e.customer.points=parseFloat(e.customer.points)+parseFloat(e.form.points))})).finally((function(){return e.searching=!1}))}),search_delay||250)}};const d=(0,r(51900).Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("gift_card")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/gift_cards"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("gift_card",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"gift_card",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:18,lg:12}},[t.form.id?[r("FormItem",{attrs:{label:t.$tc("number")}},[r("Alert",{staticClass:"mb0"},[t._v("\n                    "+t._s(t.form.number)+"\n                  ")])],1)]:[r("FormItem",{attrs:{label:t.$tc("number"),prop:"number",error:t._f("a2s")(t.errors.form.number)}},[r("Input",{model:{value:t.form.number,callback:function(e){t.$set(t.form,"number",e)},expression:"form.number"}},[r("Button",{attrs:{slot:"append",icon:"md-refresh"},on:{click:t.generateNumber},slot:"append"})],1)],1)],t._v(" "),r("FormItem",{attrs:{label:t.$t("amount"),prop:"amount",error:t._f("a2s")(t.errors.form.amount)}},[r("InputNumber",{model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("expiry_date"),prop:"expiry_date",error:t._f("a2s")(t.errors.form.expiry_date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.expiry_date,callback:function(e){t.$set(t.form,"expiry_date",e)},expression:"form.expiry_date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("customer"),error:t._f("a2s")(t.errors.form.customer_id)}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchCustomers,placeholder:t.$t("type_to_search",{x:t.$tc("customer")})},on:{"on-change":t.customerChanged},model:{value:t.form.customer_id,callback:function(e){t.$set(t.form,"customer_id",e)},expression:"form.customer_id"}},t._l(t.customers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("transition",{attrs:{mode:"out-in",name:"slide-fade","enter-active-class":"animate__animated faster animate__fadeInDown","leave-active-class":"animate__animated fastest animate__fadeOutDown"}},[t.customer&&t.customer.points?[r("div",[r("FormItem",{attrs:{label:t.$t("points"),prop:"points",error:t._f("a2s")(t.errors.form.points)}},[r("InputNumber",{model:{value:t.form.points,callback:function(e){t.$set(t.form,"points",e)},expression:"form.points"}})],1),t._v(" "),r("FormItem",[r("Alert",{staticClass:"mb0"},[t._v("\n                        "+t._s(t.$t("available_x",{x:t.$t("points")}))+": "+t._s(t.formatNumber(t.customer.points-t.form.points))+"\n                      ")])],1)],1)]:t._e()],2),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details",error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1)],2),t._v(" "),r("Col",{attrs:{sm:24,md:6,lg:12}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("gift_cards")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("gift_cards",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},98252:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={mixins:[(0,r(92704).Z)("gift_card","app/gift_cards","name")],data:function(){var t=this;return{columns:[{title:"",width:50,key:"id",align:"center",fixed:"left",render:this.renderTransactions},{title:this.$t("created_at"),sortable:!0,sortType:"desc",key:"created_at",minWidth:175,render:this.renderCreatedAt},{title:this.$t("number"),sortable:!0,key:"number",minWidth:200},{title:this.$tc("amount"),sortable:!0,key:"amount",minWidth:90,maxWidth:125,render:this.renderAmount},{title:this.$t("balance"),sortable:!0,key:"balance",minWidth:90,maxWidth:125,render:this.renderBalance},{title:this.$t("points"),sortable:!0,key:"points",minWidth:80,maxWidth:125,render:this.renderPoints},{title:this.$tc("expiry_date"),sortable:!0,key:"expiry_date",width:125,render:this.renderExpiryDate},{title:this.$tc("customer"),sortable:!0,key:"customer",minWidth:150,maxWidth:250,render:this.renderCustomer},{title:this.$t("details"),sortable:!0,key:"details",ellipsis:!0,minWidth:250},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,editFn:t.editRecord,deleteFn:t.deleteRecord,record:{model:"gift_card",name:"number",title:t.$tc("gift_card")}}})}}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},methods:{renderTransactions:function(t,e){return t("transactions-icon-component",{props:{id:e.row.id,url:"/gift_cards/logs/"}})},renderAmount:function(t,e){return this.renderNumber(t,e,"amount",!0)},renderBalance:function(t,e){return this.renderNumber(t,e,"balance",!0)},renderPoints:function(t,e){return this.renderNumber(t,e,"points",!0)},renderCustomer:function(t,e){return t("div",[e.row.customer?e.row.customer.name:""])},renderExpiryDate:function(t,e){return t("div",[e.row.expiry_date?this.$options.filters.formatDate(e.row.expiry_date,this.$store.state.settings.dateformat):""])}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("gift_card",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/gift_cards/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("add"))+" "+t._s(t.$tc("gift_card"))+"\n  ")],1),t._v(" "),r("div",[r("table-component",{attrs:{columns:t.columns,options:t.options,url:"app/gift_cards",dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1)}),[],!1,null,null,null).exports},75931:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={data:function(){return{refresh:1,columns:[{title:this.$t("created_at"),sortable:!0,sortType:"desc",key:"created_at",width:175,render:this.renderCreatedAt},{title:this.$tc("amount"),sortable:!0,key:"amount",minWidth:100,maxWidth:150,render:this.renderAmount},{title:this.$t("description"),sortable:!0,key:"description",minWidth:250}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},computed:{url:function(){return"app/gift_cards/logs/".concat(this.$route.params.id?this.$route.params.id:"")}},methods:{renderCreatedAt:function(t,e){return t("div",[this.$options.filters.formatDate(e.row.created_at,this.$store.state.settings.dateformat+" HH:mm A")])},renderAmount:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.amount,this.$store.getters.settings.decimals)])}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("gift_card_log",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/gift_cards"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list_x",{x:t.$tc("gift_card",2)}))+"\n  ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:t.url,columns:t.columns,options:t.options,refresh:t.refresh}})],1)],1)}),[],!1,null,null,null).exports},68116:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});const s={props:["error"],data:function(){return{uploadList:[],rules:{}}},methods:{handleUpload:function(t){return this.uploadList.push(t),this.$emit("selected",t),!1},clearAttachments:function(){this.$emit("clear"),this.uploadList=[]},removeAttachment:function(t){var e=this.$refs.attachments.fileList;this.$refs.attachments.fileList.splice(e.indexOf(t),1)}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("FormItem",{attrs:{label:t.$tc("attachment",2),prop:"attachments",error:t.error}},[r("Upload",{ref:"attachments",attrs:{action:"",multiple:"",type:"drag","max-size":2048,"before-upload":t.handleUpload,accept:".png, .jpeg, .jpg, .gif"}},[r("div",{staticStyle:{height:"60px",display:"flex","align-items":"center","justify-content":"space-between",padding:"0 16px","line-height":"1.5"}},[r("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[r("Icon",{staticStyle:{color:"#3399ff","margin-right":"8px"},attrs:{type:"ios-cloud-upload",size:"32"}}),t._v(" "),r("p",[t._v("\n          "+t._s(t.$t("click_or_drag_files"))+"\n        ")])],1),t._v(" "),t.uploadList&&t.uploadList.length?r("div",{staticStyle:{"margin-left":"8px"}},[t._v("\n        "+t._s(t.$t("x_files_selected",{x:t.uploadList.length}))+"\n      ")]):t._e()])]),t._v(" "),t.uploadList&&t.uploadList.length?r("div",[r("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap"}},t._l(t.uploadList,(function(e,s){return r("div",{key:"attachment_"+s,staticStyle:{display:"inline-block","padding-right":"8px","line-height":"1.8"}},[r("strong",[t._v(t._s(s+1)+".")]),t._v(" "+t._s(e.name)+"\n      ")])})),0),t._v(" "),r("Button",{staticStyle:{"margin-bottom":"3px"},attrs:{type:"error",size:"small",icon:"ios-trash"},on:{click:t.clearAttachments}},[t._v("\n      "+t._s(t.$t("clear_x",{x:t.$tc("file",t.uploadList.length)}))+"\n    ")])],1):t._e(),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports},52917:(t,e,r)=>{"use strict";r.d(e,{Z:()=>l});const s={props:{value:{type:[Number,String],default:0},step:{default:.1},min:{default:0,type:Number},max:{type:Number}},data:function(){return{newValue:0}},methods:{plus:function(){(void 0===this.max||this.newValue<this.max)&&(this.newValue=parseFloat(parseFloat(parseFloat(this.newValue)+parseFloat(this.step)).toFixed(2)),this.$emit("input",this.newValue))},minus:function(){this.newValue>this.min&&(this.newValue=parseFloat(parseFloat(parseFloat(this.newValue)-parseFloat(this.step)).toFixed(2)),this.$emit("input",this.newValue))}},watch:{value:{handler:function(t,e){this.newValue=t}}},created:function(){this.newValue=parseFloat(this.value)}};var a=r(93379),i=r.n(a),o=r(45991),n={insert:"head",singleton:!1};i()(o.Z,n);o.Z.locals;const l=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-number text-center"},[r("div",{staticClass:"input-button first",on:{click:function(e){return t.minus()}}},[r("Icon",{attrs:{type:"md-remove",size:"16"}})],1),t._v(" "),r("div",{staticClass:"field-container"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.newValue,expression:"newValue"}],staticStyle:{width:"100%"},attrs:{step:t.step,type:"number"},domProps:{value:t.newValue},on:{input:[function(e){e.target.composing||(t.newValue=e.target.value)},function(e){return t.$emit("input",t.newValue)}]}})]),t._v(" "),r("div",{staticClass:"input-button last",on:{click:function(e){return t.plus()}}},[r("Icon",{attrs:{type:"md-add",size:"16"}})],1)])}),[],!1,null,"a81d4f58",null).exports},71837:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});const s={props:{payments:{required:!0}},data:function(){return{columns1:[{width:175,sortable:!1,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{title:this.$t("reference"),className:"reference",sortable:!1,key:"reference",width:150},{title:this.$t("amount"),sortable:!1,key:"amount",minWidth:90,maxWidth:150,render:this.renderAmount},{title:this.$t("received"),sortable:!1,key:"received",width:100,render:this.renderIconReceived},{title:this.$t("gateway"),sortable:!1,key:"gateway",minWidth:100,maxWidth:150},{title:this.$tc("account"),sortable:!1,key:"for",maxWidth:300,minWidth:150,render:this.renderAccount},{title:this.$tc("created_for"),sortable:!1,key:"for",maxWidth:300,minWidth:150,render:this.renderPayable},{title:this.$t("payment_amount"),sortable:!1,key:"amount",minWidth:150,maxWidth:175,render:this.renderPaymentAmount},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")}]}},methods:{renderAccount:function(t,e){return t("div",[e.row.account.name])},renderPayable:function(t,e){return t("div",[e.row.payable.name])},renderUser:function(t,e){return t("div",[e.row.user.name])},renderAmount:function(t,e){return t("div",{class:"text-right bold"},[this.$options.filters.formatNumber(e.row.pivot.amount,this.$store.getters.settings.decimals)])},renderPaymentAmount:function(t,e){return t("div",{class:"text-right bold"},[this.$options.filters.formatNumber(e.row.amount,this.$store.getters.settings.decimals)])},renderCreatedAt:function(t,e){return t("div",[this.$options.filters.formatDate(e.row.created_at,this.$store.state.settings.dateformat+" HH:mm A")])},renderIconReceived:function(t,e){return t("div",{style:"text-align:center;"},[1==e.row.received?t("i",{class:"ivu-icon ivu-icon-md-checkmark",style:"font-size: 16px; color: #19be6b;"}):t("i",{class:"ivu-icon ivu-icon-md-close",style:"font-size: 16px; color: #ed4014;"})])}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[!t.payments||t.payments.length<1?r("p",[t._v("\n    "+t._s(t.$t("no_payment_added"))+"\n  ")]):r("div",{staticClass:"bordered"},[r("Table",{attrs:{stripe:"",columns:t.columns1,data:t.payments}})],1)])}),[],!1,null,null,null).exports},14514:(t,e,r)=>{"use strict";r.d(e,{Z:()=>f});var s=r(18446),a=r.n(s);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var s,a,i=[],o=!0,n=!1;try{for(r=r.call(t);!(o=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(n)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const d={components:{InputNumberComponent:r(52917).Z},props:{item:{required:!0},purchase:{type:Boolean,default:!1,required:!1}},data:function(){return{show:!1,form:{quantity:1,portion_id:null,variation_id:null,meta:{},portion:null,modifiers:[],serials:[]}}},watch:{item:function(t){this.setPortion()}},mounted:function(){this.setPortion()},methods:{setPortion:function(){var t=this;this.form={quantity:1,portion_id:null,variation_id:null,meta:{},portion:null,modifiers:[],serials:[]},this.$nextTick((function(){if(t.item.portions&&t.item.portions.length){var e=t.item.portions.find((function(t){return"regular"==t.name}));t.form.portion=l({},e),t.form.portion_id=e.id,t.form.portion.essentials.map((function(t){if(t.variation_id)for(var e=t.item.variations.find((function(e){return e.id==t.variation_id})),r=0,s=Object.entries(e.meta);r<s.length;r++){var a=i(s[r],2),o=a[0],n=a[1];t[o]=n}})),t.form.portion.choosables.map((function(t){t.items.map((function(e){if(e.variation_id)for(var r=e.item.variations.find((function(t){return t.id==e.variation_id})),s=0,a=Object.entries(r.meta);s<a.length;s++){var o=i(a[s],2),n=o[0],l=o[1];t[n]=l}}))}))}}))},modOptLabel:function(t){return t.item.name+" (+"+this.formatDecimal(t.item.price)+")"},selectChoosableVariant:function(t){this.form.portion.choosables=this.form.portion.choosables.map((function(e){return e.selected&&e.id==t&&(e.items=e.items.map((function(t){if(t.item.id==e.selected){var r={};if(t&&t.item.variants){t.item.variants.map((function(e){return t[e.name]?r[e.name]=t[e.name]:""}));var s=t.item.variations.find((function(t){return a()(t.meta,r)}));t.variation_id=s?s.id:null}}return t}))),e}))},selectPortionItemVariant:function(t){this.form.portion.portion_items=this.form.portion.portion_items.map((function(e){if(e.id==t){var r={};e.item.variants.map((function(t){return e[t.name]?r[t.name]=e[t.name]:""}));var s=e.item.variations.find((function(t){return a()(t.meta,r)}));e.variation_id=s?s.id:null}return e}))},selectEssentialVariant:function(t){this.form.portion.essentials=this.form.portion.essentials.map((function(e){if(e.id==t){var r={};e.item.variants.map((function(t){return e[t.name]?r[t.name]=e[t.name]:""}));var s=e.item.variations.find((function(t){return a()(t.meta,r)}));e.variation_id=s?s.id:null}return e}))},selectVariant:function(){var t=this,e=this.item.variations.find((function(e){return a()(e.meta,t.form.meta)}));e&&(this.qty=this.formatDecimal(e.location_stock[0].quantity),this.show=!0,this.form.variation_id=e.id)},portionChanged:function(t){var e=t?this.item.portions.find((function(e){return e.id==t})):{};this.form.portion=l({},e)},submit:function(){var t=this;this.$refs.form.validate((function(e){if(e){if(t.item.serials&&t.item.serials.length&&t.form.serials.length!=t.form.quantity)return t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10}),!1;if(t.item.modifiers&&t.item.modifiers.length&&t.item.modifiers.map((function(e){e.selected&&("checkbox"==e.show_as||"select_multiple"==e.show_as?e.selected.map((function(r){e.options.map((function(s){r==s.id&&t.form.modifiers.push({id:s.id,mId:e.id,quantity:1,cost:s.item.cost,option:s.item.name,price:s.item.price,title:e.title})}))})):e.options.map((function(r){e.selected==r.id&&t.form.modifiers.push({id:r.id,mId:e.id,quantity:1,cost:r.item.cost,option:r.item.name,price:r.item.price,title:e.title})})))})),t.form.portion){var r={choosables:[],essentials:[],portion_items:[],id:t.form.portion.id,name:t.form.portion.name,quantity:t.form.quantity,cost:t.form.portion.cost,price:t.form.portion.price};t.form.portion.portion_items.map((function(t){var e=t.item.variations.find((function(e){return e.id==t.variation_id}));r.portion_items.push({id:t.id,item_id:t.item.id,variants:t.item.variants,variation_id:t.variation_id,variations:t.item.variations,meta:e?e.meta:null})})),t.form.portion.essentials.map((function(t){var e=t.item.variations.find((function(e){return e.id==t.variation_id}));r.essentials.push({id:t.id,item_id:t.item.id,variants:t.item.variants,variation_id:t.variation_id,variations:t.item.variations,meta:e?e.meta:null})})),t.form.portion.choosables.map((function(t){var e=t.items.find((function(e){return e.item_id==t.selected})),s=e.item.variations.find((function(t){return t.id==e.variation_id}));r.choosables.push({id:t.id,selected:t.selected,variants:e.item.variants,variation_id:e.variation_id,variations:e.item.variations,meta:s?s.meta:null})})),t.form.selected_portion=r}else t.form.selected_portion=null;if(t.form.variation_id){var s=t.item.variations?t.item.variations.find((function(e){return e.id==t.form.variation_id})):null,a=s?{id:s.id,meta:s.meta,quantity:t.form.quantity,cost:s.location_stock[0].cost,price:s.location_stock[0].price,available:t.formatDecimal(s.location_stock[0].quantity)}:null;t.form.selected_variation=s?a:null}else t.form.selected_variation=null;t.$emit("on-submit",t.form)}else t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10})}))}}};var u=r(93379),m=r.n(u),p=r(19270),_={insert:"head",singleton:!1};m()(p.Z,_);p.Z.locals;const f=(0,r(51900).Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{ref:"form",attrs:{model:t.form,"label-position":"top"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{staticClass:"text-center",attrs:{label:t.$t("quantity")}},[r("InputNumber",{attrs:{size:"large"},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}})],1)],1),t._v(" "),t.item.serials&&t.item.serials.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.item.serials.length?r("FormItem",{attrs:{label:t.$tc("serial_number",2),prop:"serials",rules:[{required:!0,type:"array",size:t.form.quantity,message:t.$t("field_are_required",{field:t.$tc("serial_number",2)}),trigger:"change"}]}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.form.serials,callback:function(e){t.$set(t.form,"serials",e)},expression:"form.serials"}},t._l(t.item.serials,(function(e,s){return r("Option",{key:"serial_"+s,attrs:{value:e.id}},[t._v("\n                "+t._s(e.number)+"\n              ")])})),1)],1):t._e()],1)]:t._e(),t._v(" "),t.item.portions&&t.item.portions.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Card",{staticClass:"cardp",attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"ios-option"}}),t._v("\n              "+t._s(t.$tc("portion"))+":\n              "+t._s(t.item&&t.form.portion_id?" ("+("regular"==t.form.portion.name?t.$t("regular"):t.form.portion.name)+")":"")+"\n            ")],1),t._v(" "),r("Row",[t.item.portions.length>1?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("RadioGroup",{staticClass:"mb16",attrs:{type:"button"},on:{"on-change":t.portionChanged},model:{value:t.form.portion_id,callback:function(e){t.$set(t.form,"portion_id",e)},expression:"form.portion_id"}},t._l(t.item.portions,(function(e,s){return r("Radio",{key:"pi_"+s,attrs:{label:e.id}},[t._v("\n                      "+t._s("regular"==e.name?t.$t("regular"):e.name)+"\n                    ")])})),1)],1)]:t._e(),t._v(" "),t.form.portion_id?r("Col",{attrs:{sm:24,md:24,lg:24}},[t.form.portion.portion_items&&t.form.portion.portion_items.length?[r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                      "+t._s(t.$tc("item",t.form.portion.portion_items.length))+"\n                    ")])]),t._v(" "),r("p",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[t._v("\n                    "+t._s(t.form.portion.portion_items.map((function(t){return t.item.name})).join(", "))+"\n                  ")])]:t._e(),t._v(" "),t.form.portion.essentials&&t.form.portion.essentials.length?r("span",[r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                      "+t._s(t.$t("essential_items"))+"\n                    ")])]),t._v(" "),r("p",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[t._v("\n                    "+t._s(t.form.portion.essentials.map((function(t){return t.item.name})).join(", "))+"\n                  ")])],1):t._e(),t._v(" "),t.form.portion.choosables&&t.form.portion.choosables.length?r("span",[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                      "+t._s(t.$t("choosable_items"))+"\n                    ")])]),t._v(" "),t._l(t.form.portion.choosables,(function(e,s){return r("div",{key:"gi_"+s},[r("FormItem",{attrs:{label:e.name,prop:"portion.choosables."+s+".selected",rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("item")})}}},[r("RadioGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"g.selected"}},t._l(e.items,(function(e,s){return r("Radio",{key:"gii_"+s,attrs:{"false-value":"",label:e.item_id,"true-value":e.item_id}},[t._v("\n                          "+t._s(e.item.name)+"\n                        ")])})),1)],1)],1)}))],2):t._e(),t._v(" "),t.form.portion.portion_items&&t.form.portion.portion_items.length?t._l(t.form.portion.portion_items,(function(e,s){return r("div",{key:"eiv_"+s},[e.item.variants&&e.item.variants.length?[r("div",{key:"t_"+s,staticClass:"mb16"},[r("span",{staticClass:"bold"},[t._v(t._s(e.item.name)+" ("+t._s(t.$tc("variation"))+")")])]),t._v(" "),r("Row",{key:"r_"+s,attrs:{gutter:16}},t._l(e.item.variants,(function(a,i){return r("Col",{key:"pcsv_"+i,attrs:{xs:24,sm:12}},[r("FormItem",{key:"picsvf_"+a.id,attrs:{label:a.name,prop:"portion.portion_items["+s+"]."+a.name,rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("variant")})}}},[r("Select",{on:{"on-change":function(r){return t.selectPortionItemVariant(e.id)}},model:{value:e[a.name],callback:function(r){t.$set(e,a.name,r)},expression:"e[v.name]"}},t._l(a.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),1)]:t._e()],2)})):t._e(),t._v(" "),t.form.portion.essentials&&t.form.portion.essentials.length?t._l(t.form.portion.essentials,(function(e,s){return r("div",{key:"eiv_"+s},[e.item.variants&&e.item.variants.length?[r("div",{key:"t_"+s,staticClass:"mb16"},[r("span",{staticClass:"bold"},[t._v(t._s(e.item.name)+" ("+t._s(t.$tc("variation"))+")")])]),t._v(" "),r("Row",{key:"r_"+s,attrs:{gutter:16}},t._l(e.item.variants,(function(a,i){return r("Col",{key:"pcsv_"+i,attrs:{xs:24,sm:12}},[r("FormItem",{key:"pcsvf_"+a.id,attrs:{label:a.name,prop:"portion.essentials["+s+"]."+a.name,rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("variant")})}}},[r("Select",{on:{"on-change":function(r){return t.selectEssentialVariant(e.id)}},model:{value:e[a.name],callback:function(r){t.$set(e,a.name,r)},expression:"e[v.name]"}},t._l(a.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),1)]:t._e()],2)})):t._e(),t._v(" "),t.form.portion.choosables&&t.form.portion.choosables.length?t._l(t.form.portion.choosables,(function(e,s){return r("div",{key:"giv_"+s},[t._l(e.items,(function(a,i){return[e.selected&&e.selected==a.item.id&&a.item.variants&&a.item.variants.length?[r("div",{key:"t_"+s,staticClass:"mb16"},[r("span",{staticClass:"bold"},[t._v(t._s(e.name))]),t._v(": "+t._s(a.item.name)+" ("+t._s(t.$tc("variation"))+")\n                        ")]),t._v(" "),r("Row",{key:"r_"+s,attrs:{gutter:16}},t._l(a.item.variants,(function(a,o){return r("Col",{key:"pcsv_"+o,attrs:{xs:24,sm:12}},[r("FormItem",{key:"pcsvf_"+a.id,attrs:{label:a.name,prop:"portion.choosables["+s+"].items["+i+"]."+a.name,rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("variant")})}}},[r("Select",{on:{"on-change":function(r){return t.selectChoosableVariant(e.id)}},model:{value:e.items[i][a.name],callback:function(r){t.$set(e.items[i],a.name,r)},expression:"g.items[optionI][v.name]"}},t._l(a.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),1)]:t._e()]}))],2)})):t._e()],2):t._e()],2)],1)],1)]:t._e(),t._v(" "),t.item.variants&&t.item.variants.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n              "+t._s(t.$tc("variant",2))+"\n            ")])])],1),t._v(" "),t._l(t.item.variants,(function(e,s){return r("Col",{key:"sv_"+s,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:e.name,prop:"meta."+e.name,rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("variant")})}}},[r("Select",{on:{"on-change":t.selectVariant},model:{value:t.form.meta[e.name],callback:function(r){t.$set(t.form.meta,e.name,r)},expression:"form.meta[v.name]"}},t._l(e.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),t._v(" "),t.item.variants.length%2==1?r("Col",{attrs:{sm:24,md:12,lg:12}}):t._e(),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[t.show?r("Alert",{staticClass:"mb16",attrs:{type:"info","show-icon":""}},[r("strong",[t.purchase?r("span",[t._v(t._s(this.$t("current_stock")))]):r("span",[t._v(t._s(this.$t("available_x",{x:this.$t("quantity")})))]),t._v(": "+t._s(this.qty))])]):t._e()],1)]:t._e(),t._v(" "),!t.purchase&&t.item.modifiers&&t.item.modifiers.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n              "+t._s(t.$tc("modifier",2))+"\n            ")])])],1),t._v(" "),t._l(t.item.modifiers,(function(e,s){return r("Col",{key:"mi_"+s,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:e.title,prop:"modifiers"}},["radio"==e.show_as?r("span",[r("RadioGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"checkbox"==e.show_as?r("span",[r("CheckboxGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select"==e.show_as?r("span",[r("Select",{model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select_multiple"==e.show_as?r("span",[r("Select",{attrs:{multiple:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):t._e()])],1)}))]:t._e()],2)],1),t._v(" "),r("div",{staticClass:"text-right"},[r("Button",{attrs:{long:"",type:"primary",disabled:t.form.quantity<1},on:{click:t.submit}},[t._v("\n      "+t._s(this.$t("add"))+"\n    ")])],1)],1)}),[],!1,null,null,null).exports},12527:(t,e,r)=>{"use strict";r.d(e,{Z:()=>d});var s=r(96192),a=r.n(s);const i={props:["u"],data:function(){return{qr:"",image:null,loading:!1,qrcode:a()}},computed:{user:function(){return this.u?this.u:this.$store.getters.user}},watch:{u:function(t){this.loadCard()}},mounted:function(){this.loadCard()},methods:{loadCard:function(){var t=this;this.user.active&&this.user.can_impersonate&&(this.loading=!0,this.$http.post("/app/impersonate/".concat(this.user.username,"/url")).then((function(e){e.data.success&&(t.qr=t.qrcode(0,"L"),t.qr.addData(e.data.url),t.qr.make(),t.image=t.qr.createSvgTag({scalable:!0}))})).catch((function(){return t.$emit("close",!0)})).finally((function(){return t.loading=!1})))},print:function(){window.print()}}};var o=r(93379),n=r.n(o),l=r(70177),c={insert:"head",singleton:!1};n()(l.Z,c);l.Z.locals;const d=(0,r(51900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{staticClass:"user-card",attrs:{"dis-hover":""}},[t.user.avatar?r("Avatar",{staticClass:"mb16 mt16",attrs:{src:t.user.avatar,size:"120"}}):t._e(),t._v(" "),r("h3",[t._v(t._s(t.user.name))]),t._v(" "),r("p",{staticClass:"mt16"},[t._v("\n      "+t._s(t.user.username)),r("br"),t._v("\n      "+t._s(t.user.phone)+"\n    ")]),t._v(" "),t.loading?r("div",{staticStyle:{height:"180px"}},[r("Loading")],1):r("div",{staticClass:"qr-code",domProps:{innerHTML:t._s(t.image)}})],1),t._v(" "),r("Button",{staticClass:"np",attrs:{type:"primary",icon:"ios-print",long:""},on:{click:function(e){return t.print()}}},[t._v("Print")])],1)}),[],!1,null,null,null).exports},72729:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>m});var s=r(48921),a=r(44605);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var d=function(t,e){return t.attributes&&(e.attributes=t.attributes,delete t.attributes),t.extra_attributes=e.formatAttributes(e.attributes,t.extra_attributes),t.amount=parseFloat(t.amount),t.category_id=t.categories[0].id,e.attachments=t.attachments&&t.attachments.length?l(t.attachments):[],e.form=o(o({},t),t.extra_attributes),e.form};const u={mixins:[a.Z,(0,s.Z)("income","app/incomes",!0,d)],data:function(){return{accounts:[],categories:[],attributes:[],form:{id:"",date:new Date,title:"",reference:"",amount:null,details:"",account_id:"",category_id:""},rules:{title:[{required:!0,message:this.$t("field_is_required",{field:this.$t("title")}),trigger:"blur"}],reference:[{required:!1,message:this.$t("field_is_required",{field:this.$t("reference")}),trigger:"blur"}],account_id:[{required:!0,message:this.$t("field_is_required",{field:this.$t("account")}),trigger:"change"}],category_id:[{required:!0,message:this.$t("field_is_required",{field:this.$t("category")}),trigger:"change"}],date:[{type:"date",required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("date")})}],amount:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("amount")}),trigger:"blur"}]}}},created:function(){var t=this;this.$http.get("app/accounts/search").then((function(e){return t.accounts=e.data})),this.$http.get("app/all_categories/search").then((function(e){return t.categories=t.flattenDeep(e.data)}))},methods:{create:function(){var t=this;this.$http.get("app/incomes/create").then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t){var e=this;this.$http.get("app/incomes/".concat(t)).then((function(t){return d(t.data,e)})).finally((function(){return e.loading=!1}))}}};const m=(0,r(51900).Z)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("income")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/incomes"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("income",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"income",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("title"),prop:"title",error:t._f("a2s")(t.errors.form.title)}},[r("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("amount"),prop:"amount",error:t._f("a2s")(t.errors.form.amount)}},[r("InputNumber",{model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1)],1),t._v(" "),r("Col",{staticClass:"sm-pt-24",attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("account"),prop:"account_id",error:t._f("a2s")(t.errors.form.account_id)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.account_id,callback:function(e){t.$set(t.form,"account_id",e)},expression:"form.account_id"}},t._l(t.accounts,(function(e,s){return t.accounts.length>0?r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))]):t._e()})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("category"),prop:"category_id",error:t._f("a2s")(t.errors.form.category_id)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categories,(function(e,s){return t.categories.length>0?r("Option",{key:s,attrs:{value:e.id}},[t._v("\n                    "+t._s(e.name)+"\n                  ")]):t._e()})),1)],1)],1)],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details",error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("incomes")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("incomes",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},13331:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var s=r(92704);const a={components:{IncomeViewComponent:r(69303).Z},mixins:[(0,s.Z)("income","app/incomes","title","reference")],data:function(){var t=this;return{view:!1,loading:!1,income:{id:null,reference:null},columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",minWidth:125,render:this.renderDate},{title:this.$t("title"),sortable:!0,key:"title",minWidth:200},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$t("amount"),sortable:!0,key:"amount",maxWidth:125,minWidth:125,render:this.renderAmount},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{title:this.$tc("category"),sortable:!1,key:"categories",minWidth:175,render:this.renderCategory},{title:this.$tc("account"),sortable:!1,key:"account",minWidth:175,render:this.renderAccount},{title:this.$tc("created_by"),sortable:!1,key:"user",minWidth:175,render:this.renderUser},{title:this.$t("details"),sortable:!0,key:"details",ellipsis:!0,minWidth:300},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:250,render:this.renderExtras},{title:this.$t("created_at"),sortable:!0,key:"created_at",sortType:"desc",minWidth:175,render:this.renderDateTime},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,viewFn:t.viewModal,editFn:t.editRecord,deleteFn:t.deleteRecord,record:{model:"income",name:"reference",title:t.$tc("income")}}})}}],options:{perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.income.id&&(this.loading=!0,this.$http.get("app/incomes/".concat(t.id)).then((function(t){return e.income=t.data})).finally((function(){return e.loading=!1})))},renderAmount:function(t,e){return this.renderNumber(t,e,"amount")},renderAccount:function(t,e){return t("div",[e.row.account.name])},renderLocation:function(t,e){return t("div",[e.row.location.name])},renderCategory:function(t,e){return t("div",[e.row.categories.map((function(t){return t.name})).join("")])},renderUser:function(t,e){return t("div",[e.row.user?e.row.user.name:""])}}};const i=(0,r(51900).Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("income",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/incomes/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add"))+" "+t._s(t.$tc("income"))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/incomes",columns:t.columns,options:t.options,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{title:t.$tc("income"),width:"750","footer-hide":!0,"mask-closable":!1},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("income-view-component",{attrs:{income:t.income},on:{remove:function(e){return t.deleteAttachment(e,t.income)}}})],1)],1)}),[],!1,null,null,null).exports},69303:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});var s=r(7174),a=r.n(s),i=r(37148);const o={props:{income:{type:Object,required:!0}},components:{VueBarcode:a(),ListAttachmentsComponent:i.Z},data:function(){return{loading:!1}},methods:{print:function(){window.print()},deleteAttachment:function(t){this.$emit("remove",t)}}};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{}},[t.income.id?r("div",{staticClass:"order"},[r("div",{staticClass:"order-header"},[r("div",{staticClass:"details"},[r("img",{staticClass:"logo",attrs:{src:t.income.location&&t.income.location.logo?t.income.location.logo:t.$store.state.settings.default_logo}}),t._v(" "),r("div",{staticClass:"header-text"},[r("ul",[r("li",[r("strong",[t._v(t._s(t.$store.getters.settings.name)+" ("+t._s(t.$store.getters.settings.short_name)+")")])]),t._v(" "),r("li",[r("strong",[t._v(t._s(t.$store.getters.settings.company))])]),t._v(" "),r("li",[t._v(t._s(t.$store.getters.settings.email)+" "),r("span",{staticClass:"text-muted"},[t._v("|")]),t._v(" "+t._s(t.$store.getters.settings.phone))]),t._v(" "),r("li",[t._v(t._s(t.$store.getters.settings.address))])])])]),t._v(" "),r("vue-barcode",{staticClass:"barcode",attrs:{width:1,margin:0,height:50,fontSize:12,"margin-top":0,format:"code39","margin-bottom":2,value:t.income.reference}},[t._v("\n        "+t._s(t.$t("barcode_error"))+"\n      ")])],1),t._v(" "),r("Row",{staticClass:"border-t",attrs:{gutter:16}},[r("Col",{staticClass:"border-y py-2",attrs:{xs:24}},[r("h3",{staticClass:"text-center",staticStyle:{"text-transform":"uppercase"}},[t._v("\n          "+t._s(t.$tc("income"))+"\n        ")])])],1),t._v(" "),r("Row",{staticClass:"border-y py-2",attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[t._v("\n        "+t._s(t.$t("date"))+": "),r("strong",[t._v(t._s(t._f("date")(t.income.date)))]),t._v(" "),r("br"),t._v("\n        "+t._s(t.$t("reference"))+": "),r("strong",[t._v(t._s(t.income.reference))])]),t._v(" "),r("Col",{attrs:{xs:24,sm:12}},[t._v("\n        "+t._s(t.$t("created_at"))+": "),r("strong",[t._v(t._s(t._f("datetime")(t.income.created_at)))]),t._v(" "),r("br"),t._v("\n        "+t._s(t.$t("created_by"))+": "),r("strong",[t._v(t._s(t.income.user.name))])])],1),t._v(" "),r("Row",{staticClass:"mt16",attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[r("p",[t._v(t._s(t.$tc("store"))+":")]),t._v(" "),t.income.location?r("div",[r("strong",[t._v(t._s(t.income.location.name))]),r("br"),t._v(" "),t.income.location.address?r("span",[t._v(t._s(t.income.location.address))]):t._e(),t._v(" "),t.income.location.state_name?r("span",[t._v(t._s(t.income.location.state_name))]):t._e(),t._v(" "),t.income.location.country_name?r("span",[t._v(t._s(t.income.location.country_name))]):t._e(),r("br"),t._v(" "),t.income.location.phone?r("span",[t._v(t._s(t.income.location.phone))]):t._e(),r("br"),t._v(" "),t.income.location.email?r("span",[t._v(t._s(t.income.location.email))]):t._e(),r("br")]):t._e()])],1),t._v(" "),r("div",{staticClass:"table-wrapper"},[r("table",{staticClass:"table"},[r("tbody",[r("tr",[r("td",[t._v(t._s(t.$t("title")))]),t._v(" "),r("td",[t._v(t._s(t.income.title))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$tc("account")))]),t._v(" "),r("td",[t._v(t._s(t.income.account.name))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$tc("category")))]),t._v(" "),r("td",[t._v(t._s(t.income.categories[0].name))])]),t._v(" "),r("tr",[r("td",{staticClass:"bold"},[t._v(t._s(t.$t("amount")))]),t._v(" "),r("td",{staticClass:"bold"},[t._v(t._s(t.formatNumber(t.income.amount)))])])])])]),t._v(" "),t.checkExtraAttributes(t.income.extra_attributes)?r("Card",{staticClass:"mt16",attrs:{"dis-hover":""}},[r("span",{domProps:{innerHTML:t._s(t.renderExtraAttributes(t.income.extra_attributes,t.income.attributes))}})]):t._e(),t._v(" "),r("list-attachments-component",{staticClass:"mt16",attrs:{attachments:t.income.attachments},on:{remove:t.deleteAttachment}}),t._v(" "),t.income.details?r("Card",{staticClass:"mt16",attrs:{"dis-hover":""}},[t._v(t._s(t.income.details))]):t._e()],1):t._e(),t._v(" "),r("div",{staticClass:"np text-center"},[r("Button",{staticClass:"mt16 mx8",attrs:{type:"primary",loading:t.loading,disabled:t.loading,icon:"md-print"},on:{click:function(e){return t.print()}}},[t._v("\n      "+t._s(t.$t("print"))+"\n    ")])],1)])}),[],!1,null,null,null).exports},76212:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>y});var s=r(48921),a=r(23279);function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const d={props:{pportions:{type:Array,required:!0},loading:{type:Boolean,required:!0}},data:function(){return{local:[],result:[],portions:[],group:!1,minCost:null,saving:!1,option:!1,searching:!1,current:{name:""},choosable_group_type:{name:""},portionRules:{name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}]},groupRules:{name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}]}}},created:function(){var t=this;this.pportions.map((function(e){e.essentials.map((function(e){e.item?t.local.push(l(l({},e.item),{},{id:e.item_id,value:e.item_id,label:e.item.name})):t.local.push(l(l({},e),{},{id:e.item_id,value:e.item_id,label:e.name}))})),e.choosables.map((function(e){return e.items.map((function(e){e.item?t.local.push(l(l({},e.item),{},{id:e.item_id,value:e.item_id,label:e.item.name})):t.local.push(l(l({},e),{},{id:e.item_id,value:e.item_id,label:e.name}))}))}))})),this.result=i(this.local),this.portions=this.pportions.map((function(t){return t.cost=t.cost?parseFloat(t.cost):null,t.price=t.price?parseFloat(t.price):null,t.essentials&&t.essentials.length&&(t.essentials=t.essentials.map((function(t){return t.quantity=t.quantity?parseFloat(t.quantity):null,t.item&&(t.sku=t.item.sku,t.name=t.item.name,t.cost=t.item.cost,t.item_id=t.item.id,delete t.item),t}))),t.choosables&&t.choosables.length&&(t.choosables=t.choosables.map((function(t){return t.items&&t.items.length&&(t.items=t.items.map((function(t){return t.quantity=t.quantity?parseFloat(t.quantity):null,t.item&&(t.id=t.item.id,t.sku=t.item.sku,t.name=t.item.name,t.cost=t.item.cost,t.item_id=t.item.id,delete t.item),t}))),t}))),t}))},methods:{modalChanged:function(t){t?window&&this.$nextTick((function(){document.querySelector("#group_name").focus(),document.querySelector("#portion_name").focus()})):(this.$refs.group.resetFields(),this.$refs.current.resetFields())},addItemRow:function(t,e,r){t.essentials.push({quantity:1})},addPortion:function(){var t=this;this.$refs.current.validate((function(e){if(e){if(t.current.name){var r=t.portions.find((function(t){return"regular"==t.name})),s=JSON.parse(JSON.stringify(l(l({},r),{},{name:t.current.name})));s.id=null,s.sku=t.sku(),t.portions.push(s),t.$refs.current.resetFields(),t.option=!1}}else t.$Notice.error({title:t.$t("invalid_input"),desc:t.$t("invalid_input_error"),duration:10})}))},addChoosableTypeGroup:function(){var t=this;this.$refs.group.validate((function(e){e?t.choosable_group_type.name&&(t.portions=t.portions.map((function(e){return e.choosables.push({name:t.choosable_group_type.name,items:[{quantity:1}]}),e})),t.$refs.group.resetFields(),t.group=!1):t.$Notice.error({title:t.$t("invalid_input"),desc:t.$t("invalid_input_error"),duration:10})}))},addChoosableRow:function(t,e,r){t&&e&&e.items.push({quantity:1})},removePortion:function(t){this.portions.splice(t,1)},portionCost:function(t,e){var r=0;if(t.essentials.length&&(r+=t.essentials.reduce((function(t,e){return t+(e.cost?parseFloat(e.cost)*parseFloat(e.quantity):0)}),0)),t.choosables.length){var s=0;t.choosables.map((function(t){var e=t.items.reduce((function(t,e){return t.cost>e.cost?t:e}),{cost:0});s+=e.cost?parseFloat(e.cost):0}));r+=s}return r},searchItems:function(t){""===(t=t.trim())||this.result.find((function(e){return e.id==t||e.name==t}))||this.getItems(t,this)},getItems:r.n(a)()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/items/search?with=variations&cost=yes&q="+t).then((function(t){e.result=t.data,e.result=[].concat(i(e.result),i(e.local))})).finally((function(){return e.searching=!1}))}),search_delay||250),itemChanged:function(t,e,r,s){if(t){var a=this.result.find((function(e){return e.id==t})),i={quantity:1,id:a.id,sku:a.sku,cost:a.cost,name:a.name,variation_id:null,item_id:a.item_id?a.item_id:a.id,variations:a.variations.map((function(t){return{id:t.id,variation_id:t.id,sku:t.sku,meta:t.meta}}))};!1!==s?e.choosables[r].items.splice(s,1,i):e.essentials.splice(r,1,i)}this.portionCost(e)},goToStep:function(t){this.$emit("step-changed",t)},onReset:function(){this.$emit("on-reset")},onSubmit:function(t,e){var r=this;this.$emit("portions-changed",this.portions),this.$nextTick((function(){r.$emit("on-submit",{page:t,stay:e})}))}}};var u=r(51900);const m=(0,u.Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",{attrs:{gutter:16}},t._l(t.portions,(function(e,s){return r("Col",{key:"portion_"+s,attrs:{sm:24,md:12,lg:12}},[r("Card",{staticClass:"portion-card dark-border",staticStyle:{"line-height":"1em"},attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s("regular"==e.name?t.$t("regular"):e.name))]),t._v(" "),s?r("Button",{attrs:{slot:"extra",size:"small",type:"error"},on:{click:function(e){return t.removePortion(s)}},slot:"extra"},[r("Icon",{attrs:{type:"ios-trash"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("delete_x",{x:t.$tc("portion")})))])],1):r("Button",{attrs:{slot:"extra",size:"small",type:"success"},on:{click:function(e){t.option=!0}},slot:"extra"},[r("Icon",{attrs:{type:"ios-options"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("add_x",{x:t.$tc("portion")})))])],1),t._v(" "),r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("essential_items")))]),t._v(" "),r("Button",{attrs:{slot:"extra",size:"small",type:"primary"},on:{click:function(r){return t.addItemRow(e,s,!0)}},slot:"extra"},[r("Icon",{attrs:{type:"ios-add-circle"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("add_x",{x:t.$tc("item")})))])],1),t._v(" "),r("div",{staticClass:"variant-table mb16"},[r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",[t._v(t._s(t.$t("name")))]),t._v(" "),r("th",[t._v(t._s(t.$tc("variation")))]),t._v(" "),r("th",[t._v(t._s(t.$t("quantity")))])])]),t._v(" "),r("tbody",t._l(e.essentials,(function(s,a){return r("tr",{key:"ei_"+a},[r("td",{attrs:{width:"40%"}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchItems,label:e.essentials.map((function(t){return t.name}))},on:{"on-change":function(r){return t.itemChanged(r,e,a,!1)}},model:{value:s.id,callback:function(e){t.$set(s,"id",e)},expression:"essential.id"}},t._l(t.result,(function(t,e){return r("Option",{key:"eioi_"+e,attrs:{value:t.id,label:t.name}})})),1)],1),t._v(" "),r("td",{attrs:{width:"40%"}},[s.variations&&s.variations.length?[r("Select",{attrs:{filterable:"",clearable:""},model:{value:s.variation_id,callback:function(e){t.$set(s,"variation_id",e)},expression:"essential.variation_id"}},t._l(s.variations,(function(e,s){return r("Option",{key:"eivoi_"+s,attrs:{value:e.id,label:t.metaString(e.meta,!0)}})})),1)]:t._e()],2),t._v(" "),r("td",[r("InputNumber",{model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",e)},expression:"essential.quantity"}})],1)])})),0)])])],1),t._v(" "),r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("choosable_items")))]),t._v(" "),r("Button",{attrs:{slot:"extra",size:"small",type:"primary"},on:{click:function(e){t.group=!0}},slot:"extra"},[r("Icon",{attrs:{type:"ios-folder"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("add_x",{x:t.$tc("group_type")})))])],1),t._v(" "),t._l(e.choosables,(function(s,a){return r("Card",{key:"gi_"+a,staticClass:"mb16",attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(s.name))]),t._v(" "),r("Button",{attrs:{slot:"extra",size:"small",type:"primary"},on:{click:function(r){return t.addChoosableRow(e,s,a)}},slot:"extra"},[r("Icon",{attrs:{type:"ios-add-circle"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("add_x",{x:t.$tc("item")})))])],1),t._v(" "),r("div",{staticClass:"variant-table mb16"},[r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",[t._v(t._s(t.$t("name")))]),t._v(" "),r("th",[t._v(t._s(t.$tc("variation")))]),t._v(" "),r("th",[t._v(t._s(t.$t("quantity")))])])]),t._v(" "),r("tbody",t._l(s.items,(function(s,i){return r("tr",{key:"gii_"+i},[r("td",{attrs:{width:"40%"}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"filter-by-label":!0,"remote-method":t.searchItems},on:{"on-change":function(r){return t.itemChanged(r,e,a,i)}},model:{value:s.id,callback:function(e){t.$set(s,"id",e)},expression:"gItem.id"}},t._l(t.result,(function(t,e){return r("Option",{key:"giioi_"+e,attrs:{value:t.id,label:t.name}})})),1)],1),t._v(" "),r("td",{attrs:{width:"40%"}},[s.variations&&s.variations.length?[r("Select",{attrs:{filterable:""},model:{value:s.variation_id,callback:function(e){t.$set(s,"variation_id",e)},expression:"gItem.variation_id"}},t._l(s.variations,(function(e,s){return r("Option",{key:"giivoi_"+s,attrs:{value:e.id,label:t.metaString(e.meta,!0)}})})),1)]:t._e()],2),t._v(" "),r("td",[r("InputNumber",{model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",e)},expression:"gItem.quantity"}})],1)])})),0)])])],1)}))],2),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"input-tip smaller-label",attrs:{label:t.$t("cost")}},[r("InputNumber",{model:{value:e.cost,callback:function(r){t.$set(e,"cost",r)},expression:"portion.cost"}}),t._v(" "),r("small",{staticClass:"text-primary"},[t._v(t._s(t.$t("min_cost_error",{min:t.portionCost(e)})))])],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"input-tip smaller-label",attrs:{label:t.$t("price")}},[r("InputNumber",{model:{value:e.price,callback:function(r){t.$set(e,"price",r)},expression:"portion.price"}}),t._v(" "),r("small",{staticClass:"text-primary"},[t._v(t._s(t.$t("price_tip")))])],1)],1)],1)],1)],1)})),1),t._v(" "),r("div",{staticClass:"mb16"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.onSubmit("items")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.onSubmit("items",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning",ghost:""},on:{click:function(e){return t.goToStep(0)}}},[t._v(t._s(t.$t("back")))]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"error",ghost:""},on:{click:t.onReset}},[t._v(t._s(t.$t("reset")))])],1),t._v(" "),r("Modal",{attrs:{"footer-hide":"",width:"300",title:t.$t("add_x",{x:t.$tc("portion")})},on:{"on-visible-change":t.modalChanged},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[r("Form",{ref:"current",attrs:{model:t.current,rules:t.portionRules,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.addPortion.apply(null,arguments)}}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name"}},[r("Input",{attrs:{placeholder:t.$t("name"),"element-id":"portion_name"},model:{value:t.current.name,callback:function(e){t.$set(t.current,"name",e)},expression:"current.name"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",long:""},on:{click:t.addPortion}},[t._v(t._s(t.$t("add")))])],1)],1)],1),t._v(" "),r("Modal",{attrs:{"footer-hide":"",width:"300",title:t.$t("add_x",{x:t.$t("group_type")})},on:{"on-visible-change":t.modalChanged},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[r("Form",{ref:"group",attrs:{rules:t.groupRules,"label-position":"top",model:t.choosable_group_type},nativeOn:{submit:function(e){return e.preventDefault(),t.addChoosableTypeGroup.apply(null,arguments)}}},[r("FormItem",{attrs:{label:t.$t("group_type"),prop:"name"}},[r("Input",{attrs:{placeholder:t.$t("group_type"),"element-id":"group_name"},model:{value:t.choosable_group_type.name,callback:function(e){t.$set(t.choosable_group_type,"name",e)},expression:"choosable_group_type.name"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",long:""},on:{click:t.addChoosableTypeGroup}},[t._v(t._s(t.$t("add")))])],1)],1)],1)],1)}),[],!1,null,null,null).exports;function p(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=function(t,e){return t.attributes&&(e.attributes=t.attributes,delete t.attributes),t.extra_attributes=e.formatAttributes(e.attributes,t.extra_attributes),t.images=[],delete t.photo,t.location_stock&&delete t.location_stock,t.valid_promotions&&delete t.valid_promotions,t.cost=parseFloat(t.cost),t.price=parseFloat(t.price),t.category_id=t.categories[0].id,t.sku=t.sku?t.sku:e.sku(),t.max_price=t.max_price?parseFloat(t.max_price):null,t.min_price=t.min_price?parseFloat(t.min_price):null,t.max_discount=t.max_discount?parseFloat(t.max_discount):null,t.taxes=t.taxes.map((function(t){return t.id})),t.modifiers||(t.modifiers=[]),t.modifiers=t.modifiers.map((function(t){return t.id})),(!t.portions||t.portions.length<1)&&(t.portions=[{sku:e.sku(),name:"regular",essentials:[{}],choosables:[],cost:null,price:null}]),t.portions=t.portions.map((function(t,r){return t.cost=t.cost?parseFloat(t.cost):null,t.price=t.price?parseFloat(t.price):null,t.essentials&&t.essentials.length&&(t.essentials=t.essentials.map((function(t,e){return t.item&&(t.id=t.item_id,t.sku=t.item.sku,t.name=t.item.name,t.cost=t.item.cost,t.variations=t.item.variations,t.variation=t.item.variations&&t.item.variations.length?t.item.variations.find((function(e){return e.id==t.variation_id})):null),t}))),e.errors.form.portions.push({price:null}),t})),e.attributes.filter((function(t){return"number"==t.type})).map((function(e){t.extra_attributes[e.slug]=t.extra_attributes[e.slug]?parseFloat(t.extra_attributes[e.slug]):null})),e.form=v(v({},t),t.extra_attributes),e.form};const b={components:{ComboPortionComponent:m},mixins:[(0,s.Z)("item","app/items",!0,g,"combos")],data:function(){var t=this,e=function(e,r,s){r&&parseFloat(r)<parseFloat(t.minCost)?s(new Error(t.$t("min_cost_error",{min:parseFloat(t.minCost)}))):s()},r=function(e,r,s){r&&parseFloat(r)<parseFloat(t.minCost)?s(new Error(t.$t("min_price_error",{min:parseFloat(t.minCost)}))):s()};return{step:0,taxes:[],photo:null,costV:e,modifiers:[],priceV:r,categories:[],attributes:[],new_photo:null,sloading:!1,searching:!1,minCost:null,form:{id:"",code:"",name:"",stock:{},taxes:[],cost:null,details:"",photo:null,summary:"",images:[],video:null,price:null,is_stock:0,alt_name:"",weight:null,changeable:0,modifiers:[],dimensions:"",type:"combo",has_serials:0,has_variants:0,min_price:null,max_price:null,sku:this.sku(),tax_included:"",category_id:null,supplier_id:null,max_discount:null,supplier_item_id:"",portions:[{sku:this.sku(),name:"regular",essentials:[{}],choosables:[],cost:null,price:null}]},rules:{type:[{required:!0,message:this.$t("field_is_required",{field:this.$t("type")}),trigger:"change"}],name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}],code:[{required:!0,message:this.$t("field_is_required",{field:this.$t("code")}),trigger:"blur"},{required:!0,trigger:["blur","change"],pattern:/^([a-zA-Z0-9-_]{2,25})$/,message:this.$t("alpha_dash_error")}],category_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("category")}),trigger:"change"}],symbology:[{required:!0,message:this.$t("field_is_required",{field:this.$t("symbology")}),trigger:"change"}],taxes:[{type:"array",trigger:"change",message:this.$t("field_are_required",{field:this.$tc("tax",2)})}],combo_items:[{type:"array",required:!0,trigger:"change",message:this.$t("field_are_required",{field:this.$tc("combo_item",2)})}],portions:{type:"array",fields:{0:{type:"object",fields:{cost:[{validator:e,type:"number",trigger:["change","blur"]},{required:!0,type:"number",trigger:["change","blur"],message:this.$t("field_is_required",{field:this.$t("cost")})}],price:[{validator:r,type:"number",trigger:["change","blur"]},{required:!0,type:"number",trigger:["change","blur"],message:this.$t("field_is_required",{field:this.$t("price")})}]}}}}}}},created:function(){var t=this;this.$http.get("app/taxes/search").then((function(e){return t.taxes=e.data})),this.$http.get("app/modifiers/search").then((function(e){return t.modifiers=e.data})),this.$http.get("app/all_categories/search").then((function(e){return t.categories=t.flattenDeep(e.data)})),this.errors.form.portions=[{}]},methods:{create:function(){var t=this;this.$http.get("app/items/create").then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t){var e=this;this.$http.get("app/items/".concat(t)).then((function(t){return e.form=g(t.data,e)})).finally((function(){return e.loading=!1}))},goToStep:function(t,e,r){var s=this;this.sloading=!0,1==t&&e?this.$refs.item.validate((function(e){e?(s.step=parseInt(t),s.sloading=!1,window.scrollTo(0,0)):(s.sloading=!1,s.$Notice.error({title:s.$t("invalid_form"),desc:s.$t("invalid_form_error"),duration:10}))})):(window.scrollTo(0,0),this.sloading=!1,this.step=parseInt(t)),r&&this.handleReset()},handleImages:function(t){var e=new FileReader;return this.form.images.push(t),e.readAsDataURL(t),!1},deleteImage:function(t){this.form.images.splice(t,1)},handleUpload:function(t){var e=this,r=new FileReader;return r.addEventListener("load",(function(){return e.new_photo=r.result}),!1),this.form.photo=t,r.readAsDataURL(t),!1},clearPhoto:function(){this.new_photo=null,this.form.photo=null},portionsChanged:function(t){this.form.portions=t.map((function(t){return t.essentials&&t.essentials.length&&(t.essentials=t.essentials.map((function(t){return delete t.variants,delete t.variation,delete t.variations,t}))),t.choosables&&t.choosables.length&&(t.choosables=t.choosables.map((function(t){return t.items&&t.items.length&&(t.items=t.items.map((function(t){return delete t.variants,delete t.variation,delete t.variations,delete t.portion_choosable_id,t}))),t}))),t}))},onSubmit:function(t){this.submit(t.page,t.stay)},submit:function(t,e){var r=this,s="app/items",a="added";this.errors.message="";var i="record_added";this.form.id&&""!=this.form.id&&(a="updated",s="app/items/"+this.form.id,i="record_updated",this.form._method="PUT");var o=this.form.portions.find((function(t){return"regular"==t.name}));this.form.cost=o&&o.cost?o.cost:0,this.form.price=o&&o.price?o.price:0;var n=v({},this.form);if(this.attributes.length>0){var l=this.attributes.map((function(t){var e={};return delete n[t.slug],e[t.slug]=r.form[t.slug],e}));n.extra_attributes=Object.assign.apply(Object,p(l))}n=this.$form(n),this.$http.post(s,n).then((function(s){s.data.success?(r.$Notice.destroy(),r.$Notice.success({title:r.$tc("item")+" "+r.$t(a),desc:r.$t(i)}),e?("updated"==a||r.handleReset(),r.step=0):r.$router.push({name:t+".combos.list"})):r.$Notice.error({title:r.$t("failed"),desc:r.$t("failed_error_text")})})).catch((function(t){return r.errors=t})).finally((function(){return r.loading=!1}))}}};const y=(0,u.Z)(b,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("combo")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/items/combos"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("combo",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"item",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),r("div",{staticStyle:{margin:"-16px -16px 16px -16px","border-bottom":"1px solid #e8eaec",padding:"16px"}},[r("Steps",{attrs:{current:t.step,status:"wait"}},[r("Step",{attrs:{title:t.$t("general_step"),content:t.$t("general_step_text")}}),t._v(" "),r("Step",{attrs:{title:t.$t("combo_items_step"),content:t.$t("combo_items_step_text")}})],1)],1),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),0==t.step?r("div",[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("code"),prop:"code",error:t._f("a2s")(t.errors.form.code)}},[r("Input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),t._v(" "),r("small",[t._v(t._s(t.$t("item_code_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("symbology"),prop:"symbology",error:t._f("a2s")(t.errors.form.symbology)}},[r("Select",{model:{value:t.form.symbology,callback:function(e){t.$set(t.form,"symbology",e)},expression:"form.symbology"}},[r("Option",{attrs:{value:"code128"}},[t._v("Code128")]),t._v(" "),r("Option",{attrs:{value:"code39"}},[t._v("Code39")]),t._v(" "),r("Option",{attrs:{value:"ean5"}},[t._v("EAN5")]),t._v(" "),r("Option",{attrs:{value:"ean8"}},[t._v("EAN8")]),t._v(" "),r("Option",{attrs:{value:"ean13"}},[t._v("EAN13")]),t._v(" "),r("Option",{attrs:{value:"upce"}},[t._v("UPC (E)")]),t._v(" "),r("Option",{attrs:{value:"upca"}},[t._v("UPC (A)")])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("category"),prop:"category_id",error:t._f("a2s")(t.errors.form.category_id)}},[r("Select",{model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categories,(function(e){return r("Option",{key:"cat_"+e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("taxes"),prop:"taxes",error:t._f("a2s")(t.errors.form.taxes)}},[r("Select",{attrs:{filterable:"",multiple:""},model:{value:t.form.taxes,callback:function(e){t.$set(t.form,"taxes",e)},expression:"form.taxes"}},t._l(t.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("sku"),prop:"sku",error:t._f("a2s")(t.errors.form.sku)}},[r("Input",{attrs:{readonly:""},model:{value:t.form.sku,callback:function(e){t.$set(t.form,"sku",e)},expression:"form.sku"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("alt_name"),prop:"alt_name",error:t._f("a2s")(t.errors.form.alt_name)}},[r("Input",{model:{value:t.form.alt_name,callback:function(e){t.$set(t.form,"alt_name",e)},expression:"form.alt_name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("hsn_number"),prop:"hsn_number",error:t._f("a2s")(t.errors.form.hsn_number)}},[r("Input",{model:{value:t.form.hsn_number,callback:function(e){t.$set(t.form,"hsn_number",e)},expression:"form.hsn_number"}})],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{prop:"max_discount",label:t.$t("max_discount"),error:t._f("a2s")(t.errors.form.max_discount)}},[r("InputNumber",{attrs:{formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")}},model:{value:t.form.max_discount,callback:function(e){t.$set(t.form,"max_discount",e)},expression:"form.max_discount"}}),t._v(" "),r("small",[t._v(t._s(t.$t("max_discount_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("modifier",2),prop:"modifier",error:t._f("a2s")(t.errors.form.modifier)}},[r("Select",{attrs:{clearable:"",multiple:""},model:{value:t.form.modifiers,callback:function(e){t.$set(t.form,"modifiers",e)},expression:"form.modifiers"}},t._l(t.modifiers,(function(e){return r("Option",{key:"modifier_"+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",{attrs:{label:t.$tc("photo"),prop:"photo",error:t._f("a2s")(t.errors.form.photo)}},[r("Upload",{attrs:{"before-upload":t.handleUpload,"max-size":1024,action:"",accept:".png, .jpeg, .jpg, .gif"}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v(t._s(t.$t("select_x",{x:t.$t("photo")})))])],1),t._v(" "),t.photo||t.new_photo?r("div",{staticClass:"primary",staticStyle:{"margin-bottom":"16px"}},[t.form.photo?r("span",[r("span",{staticStyle:{margin:"10px 10px 10px 0"}},[t._v(t._s(t.$t("selected_file"))+": "+t._s(t.form.photo.name))]),t._v(" "),r("Button",{attrs:{type:"error",shape:"circle",size:"small",icon:"ios-trash"},on:{click:function(e){return t.clearPhoto()}}})],1):t._e(),t._v(" "),r("br"),t._v(" "),t.photo||t.new_photo?r("img",{staticStyle:{"max-width":"160px","max-height":"110px","border-radius":"4px 4px 0 0"},attrs:{alt:"photo",src:t.new_photo?t.new_photo:t.photo}}):t._e()]):t._e()],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("gallery_images"),prop:"images",error:t._f("a2s")(t.errors.form.images)}},[r("Upload",{attrs:{multiple:"","before-upload":t.handleImages,"max-size":2048,action:"",accept:".png, .jpeg, .jpg"}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("\n                    "+t._s(t.$t("select_x",{x:t.$t("gallery_images")}))+"\n                  ")])],1),t._v(" "),t.form.images.length?[r("span",{staticStyle:{margin:"10px 10px 10px 0"}},[t._v(t._s(t.$t("selected_file")))]),t._v(" "),t._l(t.form.images,(function(e,s){return r("span",{key:"gallery_"+s,staticClass:"primary",staticStyle:{margin:"0 16px 16px 0"}},[t._v("\n                    "+t._s(s+1)+". "+t._s(e.name)+"\n                    "),r("Button",{attrs:{type:"error",shape:"circle",size:"small",icon:"ios-trash"},on:{click:function(e){return t.deleteImage(s)}}})],1)}))]:t._e()],2),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("video_url"),prop:"video",error:t._f("a2s")(t.errors.form.video)}},[r("Input",{model:{value:t.form.video,callback:function(e){t.$set(t.form,"video",e)},expression:"form.video"}}),t._v(" "),r("small",[t._v(t._s(t.$t("video_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("summary"),prop:"summary",error:t._f("a2s")(t.errors.form.summary)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),t._v(" "),r("FormItem",{staticStyle:{"margin-bottom":"16px"},attrs:{prop:"details",label:t.$t("details"),error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:12}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.sloading},on:{click:function(e){return t.goToStep(1,!0)}}},[t._v(t._s(t.$t("next")))])],1)],1):1==t.step?r("div",[r("div",{staticClass:"mb16"},[r("combo-portion-component",{attrs:{loading:t.loading,pportions:t.form.portions},on:{"on-submit":t.onSubmit,"portions-changed":t.portionsChanged,"step-changed":t.goToStep,"on-reset":function(e){return t.goToStep(0,!1,!0)}}})],1)]):t._e()],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},74743:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var s=r(7174),a=r.n(s),i=r(92704);const o={components:{ItemViewComponent:r(487).Z,VueBarcode:a()},mixins:[(0,i.Z)("item","app/items","name","code","combos")],data:function(){var t=this;return{row:{},view:!1,barModal:!1,barcodeSVG:null,columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("name"),sortable:!0,key:"name",width:200},{title:this.$t("code"),sortable:!0,key:"code",sortType:"asc",minWidth:150},{title:this.$t("cost"),sortable:!0,key:"cost",minWidth:125,render:this.renderCost},{title:this.$t("price"),sortable:!0,key:"price",minWidth:125,render:this.renderPrice},{title:this.$t("alt_name"),sortable:!0,key:"alt_name",minWidth:175},{title:this.$tc("category"),sortable:!1,key:"categories",minWidth:175,render:this.renderCategory},{title:this.$tc("taxes"),sortable:!1,key:"taxes",minWidth:200,render:this.renderTaxes},{title:this.$tc("portion",2),sortable:!1,key:"portions",minWidth:200,render:this.renderPortion},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("changeable"),sortable:!0,key:"changeable",minWidth:120,render:this.renderChangeable},{title:this.$t("min_price"),sortable:!0,key:"min_price",minWidth:150,render:this.renderMinPrice},{title:this.$t("max_price"),sortable:!0,key:"max_price",minWidth:150,render:this.renderMaxPrice},{title:this.$t("max_discount"),sortable:!0,key:"max_discount",minWidth:150,render:this.renderMaxDiscount},{title:this.$t("summary"),sortable:!0,key:"summary",ellipsis:!0,minWidth:400},{title:this.$t("created_at"),sortable:!0,key:"created_at",minWidth:175,render:this.renderCreatedAt},{title:this.$t("updated_at"),sortable:!0,key:"updated_at",minWidth:175,render:this.renderUpdatedAt},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,editFn:t.editRecord,labelFn:t.labelModal,deleteFn:t.deleteRecord,record:{model:"item",name:"name"}}})}}],options:{orderBy:"code",perPage:this.$store.state.settings.rows}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},mounted:function(){this.$store.getters.stock||(this.columns=this.columns.filter((function(t){return"stock"!=t.key})))},methods:{showInfo:function(t){this.row=t,this.view=!0},labelModal:function(t){var e=this;this.row=t,this.barModal=!0,this.barcodeSVG=this.$store.state.settings.svg_string.replace("--- Item Name ---",this.row.name).replace("--- Other info for item. ---",this.row.alt_name).replace("--- Price: 1,000.00 ---",this.$t("price")+": "+this.formatNumber(this.row.price)),this.$nextTick((function(){document.getElementById("replace-barcode").innerHTML="",document.getElementById("replace-barcode").removeAttribute("transform");var t=document.getElementById("drawBarcode").childNodes[0].cloneNode(!0);document.getElementById("replace-barcode").setAttribute("transform","matrix(1 0 0 1 10 "+(e.$store.state.settings.label_height-60)+")"),document.getElementById("replace-barcode").appendChild(t),1==e.$store.getters.settings.print_dialog&&setTimeout((function(){window.print()}),400)}))},print:function(){window.print()},renderChangeable:function(t,e){return this.renderBoolean(t,e,"changeable")},renderPortion:function(t,e){var r=this;return t("div",[e.row.portions.map((function(t){return r.$t(t.name)})).join(", ")])},renderMinPrice:function(t,e){return this.renderNumber(t,e,"min_price")},renderMaxPrice:function(t,e){return this.renderNumber(t,e,"max_price")},renderMaxDiscount:function(t,e){return this.renderNumber(t,e,"max_discount")},renderCategory:function(t,e){return t("div",[e.row.categories.map((function(t){return t.name})).join("")])},renderCost:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.location_stock.length>0&&e.row.location_stock[0].cost?e.row.location_stock[0].cost:e.row.cost,this.$store.getters.settings.decimals)])},renderPrice:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.location_stock.length>0&&e.row.location_stock[0].price?e.row.location_stock[0].price:e.row.price,this.$store.getters.settings.decimals)])},renderStock:function(t,e){return t("div",{class:"text-center"},[e.row.location_stock.length>0?this.$options.filters.formatNumber(e.row.location_stock[0].quantity,this.$store.getters.settings.decimals):this.$options.filters.formatNumber(e.row.stock.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),this.$store.getters.settings.decimals)])},renderRack:function(t,e){return t("div",[e.row.location_stock.length>0&&e.row.location_stock[0].rack?e.row.location_stock[0].rack:e.row.location])},renderTaxMethod:function(t,e){return 1==e.row.tax_included?t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-success ivu-tag-border ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-success"},[this.$t("inclusive")])])]):t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-primary ivu-tag-border ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-primary"},[this.$t("exclusive")])])])},renderTaxes:function(t,e){return t("div",[e.row.taxes.map((function(t){return t.name})).join(", ")])}}};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("combo",2)))]),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/items?type=combo",columns:t.columns,options:t.options,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)]),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"500","footer-hide":!0,"mask-closable":!1,title:t.$t("print_x",{x:t.$t("barcode")})},model:{value:t.barModal,callback:function(e){t.barModal=e},expression:"barModal"}},[r("div",{staticClass:"label text-center",domProps:{innerHTML:t._s(t.barcodeSVG)}}),t._v(" "),r("div",{staticClass:"np"},[r("Divider",{attrs:{dashed:""}}),t._v(" "),r("div",{staticClass:"text-center",staticStyle:{display:"none"}},[r("vue-barcode",{attrs:{width:1,margin:0,height:30,fontSize:12,"margin-top":0,id:"drawBarcode",value:t.row.code,"margin-bottom":4,format:t.row.symbology}},[t._v("\n          "+t._s(t.$t("barcode_error"))+"\n        ")])],1),t._v(" "),r("Alert",{domProps:{innerHTML:t._s(t.$t("label_print_instructions"))}}),t._v(" "),r("Button",{staticClass:"np",attrs:{type:"primary",icon:"ios-print",long:""},on:{click:function(e){return t.print()}}},[t._v(t._s(t.$t("print")))])],1)]),t._v(" "),r("Modal",{attrs:{"footer-hide":"",scrollable:"",width:750},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("\n        "+t._s(t.row.name)+"\n        ("+t._s(t.row.code)+")\n      ")])]),t._v(" "),r("item-view-component",{attrs:{item:t.row}})],1)],1)}),[],!1,null,null,null).exports},72134:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>R});r(98066);var s=r(48921),a=r(23279),i=r.n(a);const o={props:{serials:{type:Array,twoWay:!0,required:!0},hasVariants:{required:!0},totalVariationsQty:{type:Number,required:!0},totalStockQty:{type:Number,required:!0}},computed:{provided:function(){var t=this;return this.serials.reduce((function(e,r){return e+t.countSerials(r.number,r.till)}),0)}},methods:{countSerials:function(t,e){if(!t&&!e)return 0;if(t&&!e)return 1;var r=e-t;return r>0?r+1:e==t?1:"?"},addNew:function(t){t==this.serials.length-1&&this.serials.push({number:"",till:""})}}};var n=r(93379),l=r.n(n),c=r(82276),d={insert:"head",singleton:!1};l()(c.Z,d);c.Z.locals;var u=r(51900);const m=(0,u.Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"serials form-responsive"},[r("CellGroup",[t._l(t.serials,(function(e,s){return r("Cell",{key:"serial_"+s},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:9,lg:9}},[r("FormItem",{staticClass:"mb0",attrs:{label:t.$tc("serial_number"),prop:"serial"}},[r("Input",{on:{"on-focus":function(e){return t.addNew(s)}},model:{value:e.number,callback:function(r){t.$set(e,"number",r)},expression:"serial.number"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:9,lg:9}},[r("FormItem",{staticClass:"mb0",attrs:{label:t.$t("till"),prop:"serial"}},[r("Input",{model:{value:e.till,callback:function(r){t.$set(e,"till",r)},expression:"serial.till"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:6,lg:6}},[e.number||e.till&&e.number<e.till?r("span",[r("p",{staticStyle:{"line-height":"34px"}},[r("strong",[t._v(t._s(t.countSerials(e.number,e.till)))]),t._v("\n              "+t._s(t.$tc("serial_number",t.countSerials(e.number,e.till)))+"\n            ")])]):t._e()])],1)],1)})),t._v(" "),r("Cell",[r("p",[t._v("\n        "+t._s(t.$t("total_serials",{n:t.provided,serials:t.$tc("serial_number",t.provided),total:this.hasVariants?this.totalVariationsQty:this.totalStockQty}))+"\n      ")])])],2)],1)}),[],!1,null,null,null).exports;const p={props:{height:{type:String,default:"2px",required:!1},color:{type:String,required:!1,default:"linear-gradient(to right, #ec008c, #fc6767)"},background:{type:String,required:!1,default:"#eaeaea"},selector:{type:String,required:!0}},data:function(){return{width:"",elWidth:"",scrolled:""}},created:function(){var t=this;this.$nextTick((function(){document.querySelector(t.selector).addEventListener("load",t.scrollHandler),document.querySelector(t.selector).addEventListener("scroll",t.scrollHandler)}))},destroyed:function(){document.querySelector(this.selector)&&(document.querySelector(this.selector).removeEventListener("load",this.scrollHandler),document.querySelector(this.selector).removeEventListener("scroll",this.scrollHandler))},methods:{scrollHandler:function(){this.scrolled=document.querySelector(this.selector).scrollLeft,this.elWidth=document.querySelector(this.selector).scrollWidth-document.querySelector(this.selector).clientWidth,this.width=this.scrolled/this.elWidth*100+"%"}}};var _=r(70273),f={insert:"head",singleton:!1};l()(_.Z,f);_.Z.locals;function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}const $={components:{HScrollIndicatorComponent:(0,u.Z)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"scroll--indicator-wrapper",style:{height:t.height,background:t.background}},[r("div",{staticClass:"scroll--indicator",style:{background:t.color,width:t.width}})])}),[],!1,null,"98931c06",null).exports},props:{ivariants:{type:Array,required:!0},ivariations:{type:Array,required:!0},hasVariants:{required:!0}},data:function(){var t=this;return{option:!1,variants:[],variations:[],has_variants:0,current:{name:"",options:""},variantsColumns:[{key:"sku",slot:"sku",width:150,sortable:!1,title:this.$t("sku")},{key:"code",slot:"code",minWidth:150,sortable:!1,title:this.$t("code")},{width:125,key:"cost",slot:"cost",sortable:!1,title:this.$t("cost")},{width:125,key:"price",slot:"price",sortable:!1,title:this.$t("price")},{width:125,key:"rack",slot:"rack",sortable:!1,title:this.$t("rack")},{width:125,key:"weight",slot:"weight",sortable:!1,title:this.$t("weight")},{width:150,key:"dimensions",slot:"dimensions",sortable:!1,title:this.$t("dimensions")},{width:50,key:"del",slot:"del",title:" ",align:"center",sortable:!1}],variantRules:{name:[{validator:function(e,r,s){t.variants.find((function(t){return t.name==r}))?s(new Error(t.$t("variant_exists"))):s()},trigger:"blur"},{required:!0,message:this.$t("field_is_required",{field:this.$t("variant_name")}),trigger:"blur"}]}}},created:function(){var t=this;this.has_variants=this.hasVariants,this.variants=b(this.ivariants),this.variations=b(this.ivariations),this.$store.getters.stock&&this.variantsColumns.splice(4,0,{width:125,key:"quantity",slot:"quantity",sortable:!1,title:this.$t("quantity")}),this.$nextTick((function(){t.variants.length>0&&t.variants.map((function(e){t.variantsColumns.splice(t.variantsColumns.length-1,0,{minWidth:150,sortable:!1,key:e.name,slot:e.name,title:e.name})}))}))},methods:{modalChanged:function(t){t?window&&this.$nextTick((function(){document.querySelector("#variant_name").focus()})):this.$refs.current.resetFields()},hasVariantChanged:function(t){this.$emit("has-variants-changed",t)},validateToStep:function(t){this.variations=this.variations.map((function(t){return t.quantity=t.quantity||0,t})),this.goToStep(t)},goToStep:function(t){2==t&&(this.$emit("variants-changed",b(this.variants)),this.$emit("variations-changed",b(this.variations))),this.$emit("step-changed",t)},addVariantOption:function(){var t=this;this.$refs.current.validate((function(e){if(e){var r=h({},t.current);if(r.name){t.variantsColumns.splice(t.variantsColumns.length-1,0,{minWidth:150,sortable:!1,key:r.name,slot:r.name,title:r.name}),r.options&&(r.options=r.options.split("|"));var s=b(t.variations);r.options&&r.options.length>0?r.options.map((function(e,a){if(a){var i={sku:t.sku(!0),code:"",cost:null,price:null,quantity:null,weight:null,dimensions:"",del:null,meta:[]};i.meta[r.name]=e,s.push(i)}else s=s.map((function(t){return t.meta[r.name]=e,t}))})):s=s.map((function(t){return t.meta[r.name]="",t})),t.variations=b(s),t.variants=[].concat(b(t.variants),[r]),t.option=!1,setTimeout((function(){t.current.name="",t.current.options="",t.$refs.current.resetFields()}),50)}}else t.$Notice.error({title:t.$t("invalid_variant"),desc:t.$t("invalid_variant_error"),duration:10})}))},doAllVariations:function(){var t=this;this.variants.length>1?this.$Modal.confirm({title:this.$t("generate_variations"),content:this.$t("generate_variations_text"),onOk:function(){var e=[],r=[];t.variants.map((function(t){var r={};r[t.name]=t.options,e.push(r)})),t.variants.map((function(s){e.map((function(a){a[s.name]&&a[s.name].length>0&&a[s.name].map((function(a){t.variants.map((function(i){e.map((function(e){e[i.name]&&e[i.name].length>0&&e[i.name].map((function(e){if(i.name!=s.name&&a!=e&&!r.find((function(t){return t.meta[s.name]==a&&t.meta[i.name]==e}))){var o={sku:t.sku(!0),code:"",cost:null,price:null,quantity:null,weight:null,dimensions:"",del:null,meta:[]};o.meta[s.name]=a,o.meta[i.name]=e,r.push(o)}}))}))}))}))}))})),t.variations=[].concat(r)}}):this.$Modal.info({title:this.$t("invalid_variants"),content:this.$t("invalid_variants_error")})},addVariantRow:function(){var t={sku:this.sku(),code:"",cost:null,price:null,quantity:null,weight:null,dimensions:"",del:null,meta:[]};t.stock=this.$store.getters.locations.map((function(t){return h(h({},t),{},{location_id:t.value,price:null,cost:null,quantity:null,rack:""})})),this.variants.map((function(e){return t[e.name]=""})),this.variations.splice(this.variations.length,0,t)},removeVariant:function(t){this.variations.splice(t,1)},colStyle:function(t){var e={};return t.width&&(e.width=t.width+"px",e.minWidth=t.width+"px"),t.minWidth&&(e.minWidth=t.minWidth+"px"),t.maxWidth&&(e.maxWidth=t.maxWidth+"px"),e}}};const x=(0,u.Z)($,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"mb16"},[r("Checkbox",{attrs:{label:"price_variants","true-value":1,"false-value":0},on:{"on-change":t.hasVariantChanged},model:{value:t.has_variants,callback:function(e){t.has_variants=e},expression:"has_variants"}},[t._v("\n      "+t._s(t.$t("item_has_variants"))+"\n    ")])],1),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},[1==t.has_variants?r("div",{staticStyle:{"margin-top":"16px"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24}},[r("Card",{staticStyle:{"margin-bottom":"16px","line-height":"1em"},attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("variant")))]),t._v(" "),r("ButtonGroup",{attrs:{slot:"extra",size:"small"},slot:"extra"},[r("Button",{attrs:{size:"small",type:"success"},on:{click:function(e){t.option=!0}}},[r("Icon",{attrs:{type:"ios-options"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("add_x",{x:t.$tc("option")})))])],1),t._v(" "),r("Button",{attrs:{size:"small",type:"warning"},on:{click:t.doAllVariations}},[r("Icon",{attrs:{type:"ios-shuffle"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("generate")))])],1),t._v(" "),r("Button",{attrs:{size:"small",type:"primary"},on:{click:t.addVariantRow}},[r("Icon",{attrs:{type:"ios-list-box-outline"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("add_x",{x:t.$t("row")})))])],1)],1),t._v(" "),r("div",{staticClass:"variants-form"},[r("h-scroll-indicator-component",{attrs:{height:"1px",color:"#2b85e4",background:"#ffffff",selector:".variant-table"}}),t._v(" "),r("div",{staticClass:"table-responsive variant-table"},[r("table",{staticClass:"table"},[r("thead",[r("tr",t._l(t.variantsColumns,(function(e,s){return r("th",{key:"col_"+s,style:t.colStyle(e)},["del"==e.key?r("span",[r("Icon",{attrs:{size:"16",type:"md-trash"}})],1):r("span",[t._v(t._s(e.title))])])})),0)]),t._v(" "),r("tbody",t._l(t.variations,(function(e,s){return r("tr",{key:"variation_"+s},[r("td",[r("Input",{attrs:{readonly:""},model:{value:e.sku,callback:function(r){t.$set(e,"sku",r)},expression:"variation.sku"}})],1),t._v(" "),r("td",[r("Input",{model:{value:e.code,callback:function(r){t.$set(e,"code",r)},expression:"variation.code"}})],1),t._v(" "),r("td",[r("InputNumber",{model:{value:e.cost,callback:function(r){t.$set(e,"cost",r)},expression:"variation.cost"}})],1),t._v(" "),r("td",[r("InputNumber",{model:{value:e.price,callback:function(r){t.$set(e,"price",r)},expression:"variation.price"}})],1),t._v(" "),t.$store.getters.stock?r("td",[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"variation.quantity"}})],1):t._e(),t._v(" "),r("td",[r("Input",{model:{value:e.rack,callback:function(r){t.$set(e,"rack",r)},expression:"variation.rack"}})],1),t._v(" "),r("td",[r("InputNumber",{model:{value:e.weight,callback:function(r){t.$set(e,"weight",r)},expression:"variation.weight"}})],1),t._v(" "),r("td",[r("Input",{attrs:{placeholder:t.$t("dimensions_tip")},model:{value:e.dimensions,callback:function(r){t.$set(e,"dimensions",r)},expression:"variation.dimensions"}})],1),t._v(" "),t.variations.length?t._l(t.variants,(function(s,a){return r("td",{key:"option"+a},[s.options?r("span",[r("Select",{model:{value:e.meta[s.name],callback:function(r){t.$set(e.meta,s.name,r)},expression:"variation.meta[va.name]"}},t._l(s.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1):r("span",[r("Input",{model:{value:e[s.name],callback:function(r){t.$set(e,s.name,r)},expression:"variation[va.name]"}})],1)])})):t._e(),t._v(" "),r("td",{staticClass:"text-center"},[r("Icon",{staticClass:"pointer",attrs:{size:"16",color:"#ed3f14",type:"md-trash"},on:{click:function(e){return t.removeVariant(s)}}})],1)],2)})),0)])])],1)],1)],1)],1)],1):t._e()]),t._v(" "),r("div",[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.validateToStep(2)}}},[t._v(t._s(t.$t("next")))]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"warning"},on:{click:function(e){return t.goToStep(0)}}},[t._v(t._s(t.$t("back")))])],1),t._v(" "),r("Modal",{attrs:{"footer-hide":"",width:"300",title:t.$t("add_x",{x:t.$tc("variant")})},on:{"on-visible-change":t.modalChanged},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[r("Form",{ref:"current",attrs:{model:t.current,rules:t.variantRules,"label-position":"top"}},[r("FormItem",{attrs:{label:t.$tc("variant_name"),prop:"name"}},[r("Input",{attrs:{placeholder:t.$t("variant_name_tip"),"element-id":"variant_name"},model:{value:t.current.name,callback:function(e){t.$set(t.current,"name",e)},expression:"current.name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("variant_options"),prop:"options"}},[r("Input",{attrs:{placeholder:t.$t("variant_options_tip")},model:{value:t.current.options,callback:function(e){t.$set(t.current,"options",e)},expression:"current.options"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",long:""},on:{click:t.addVariantOption}},[t._v(t._s(t.$t("add")))])],1)],1)],1)],1)}),[],!1,null,null,null).exports;function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){C(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function C(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}const O={props:{istock:{type:Array,required:!0},isStock:{type:Number,required:!0},variants:{type:Array,required:!0},ivariations:{type:Array,required:!0},hasVariants:{required:!0}},data:function(){return{stock:[],option:!1,variations:[],is_stock:!1,current:{name:"",options:""},variantsColumns:[{key:"sku",slot:"sku",width:150,sortable:!1,title:this.$t("sku")},{minWidth:125,key:"cost",slot:"cost",sortable:!1,title:this.$t("cost")},{minWidth:125,key:"price",slot:"price",sortable:!1,title:this.$t("price")},{minWidth:125,key:"rack",slot:"rack",sortable:!1,title:this.$t("rack")}]}},created:function(){var t=this;this.is_stock=this.isStock,this.stock=JSON.parse(JSON.stringify(this.istock)),this.variations=F(this.ivariations),this.variations=this.variations.map((function(e){return e.stock||(e.stock=t.$store.getters.locations.map((function(t){return k(k({},t),{},{location_id:t.value,price:null,cost:null,quantity:null,rack:""})}))),e})),this.$store.getters.stock&&this.variantsColumns.splice(3,0,{minWidth:125,key:"quantity",slot:"quantity",sortable:!1,title:this.$t("quantity")}),this.$nextTick((function(){t.variants.length>0&&t.variants.map((function(e){t.variantsColumns.splice(t.variantsColumns.length,0,{minWidth:150,sortable:!1,key:e.name,slot:e.name,title:e.name})}))}))},methods:{isStockChanged:function(t){this.$emit("is-stock-changed",t)},goToStep:function(t){var e=this;this.is_stock&&3==t&&1==this.hasVariants?this.variations.reduce((function(t,e){return t+e.quantity}),0)==this.variations.reduce((function(t,e){return t+e.stock.reduce((function(t,e){return t+e.quantity}),0)}),0)?(this.$emit("variations-changed",F(this.variations)),this.$emit("step-changed",t)):this.$Modal.confirm({title:this.$t("variations_qty_error"),content:this.$t("variations_qty_error_text"),okText:this.$t("auto_adjust"),onOk:function(){e.autoAdjustQty(),e.$emit("variations-changed",F(e.variations)),e.$emit("step-changed",t)}}):(this.$emit("stock-changed",F(this.stock)),this.$emit("step-changed",t))},autoAdjustQty:function(){this.variations=this.variations.map((function(t){return t.quantity=t.stock.reduce((function(t,e){return t+e.quantity}),0),t}))},colStyle:function(t){var e={};return t.width&&(e.width=t.width+"px",e.minWidth=t.width+"px"),t.minWidth&&(e.minWidth=t.minWidth+"px"),t.maxWidth&&(e.maxWidth=t.maxWidth+"px"),e}}};const q=(0,u.Z)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("div",{staticClass:"mb16"},[r("Checkbox",{attrs:{label:"different_price","true-value":1,"false-value":0},on:{"on-change":t.isStockChanged},model:{value:t.is_stock,callback:function(e){t.is_stock=e},expression:"is_stock"}},[t._v("\n      "+t._s(t.$t("set_different_text",{values:t.$store.getters.stock?t.$t("rack")+", "+t.$t("quantity")+" & "+t.$t("price"):t.$t("rack")+" & "+t.$t("price")}))+"\n    ")])],1),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},[t.is_stock?r("div",{staticStyle:{"margin-top":"16px","margin-bottom":"16px"}},[1==t.hasVariants?r("span",t._l(t.$store.getters.locations,(function(e,s){return r("div",{key:e.value},[r("h4",{staticStyle:{margin:"8px 0"}},[t._v("#"+t._s(s+1)+" "+t._s(e.label))]),t._v(" "),r("div",{staticClass:"variant-table"},[r("table",{staticClass:"table"},[r("thead",[r("tr",t._l(t.variantsColumns,(function(e,s){return r("th",{key:"col_"+s,style:t.colStyle(e)},[t._v("\n                    "+t._s(e.title)+"\n                  ")])})),0)]),t._v(" "),r("tbody",t._l(t.variations,(function(e,a){return r("tr",{key:"variation_"+a},[r("td",[r("Input",{attrs:{readonly:""},model:{value:e.sku,callback:function(r){t.$set(e,"sku",r)},expression:"variation.sku"}})],1),t._v(" "),r("td",[r("InputNumber",{model:{value:e.stock[s].cost,callback:function(r){t.$set(e.stock[s],"cost",r)},expression:"variation.stock[li].cost"}})],1),t._v(" "),r("td",[r("InputNumber",{model:{value:e.stock[s].price,callback:function(r){t.$set(e.stock[s],"price",r)},expression:"variation.stock[li].price"}})],1),t._v(" "),t.$store.getters.stock?r("td",[r("InputNumber",{model:{value:e.stock[s].quantity,callback:function(r){t.$set(e.stock[s],"quantity",r)},expression:"variation.stock[li].quantity"}})],1):t._e(),t._v(" "),r("td",[r("Input",{model:{value:e.stock[s].rack,callback:function(r){t.$set(e.stock[s],"rack",r)},expression:"variation.stock[li].rack"}})],1),t._v(" "),t.variants.length?t._l(t.variants,(function(s,a){return r("td",{key:"option"+a},[s.options?r("span",[r("Input",{attrs:{readonly:""},model:{value:e.meta[s.name],callback:function(r){t.$set(e.meta,s.name,r)},expression:"variation.meta[va.name]"}})],1):r("span",[r("Input",{attrs:{readonly:""},model:{value:e[s.name],callback:function(r){t.$set(e,s.name,r)},expression:"variation[va.name]"}})],1)])})):t._e()],2)})),0)])])])})),0):r("span",[t.isStock?r("Row",{attrs:{gutter:16}},t._l(t.$store.getters.locations,(function(e,s){return r("Col",{key:e.value,attrs:{sm:24,md:12,lg:12}},[r("Card",{staticStyle:{"margin-bottom":"16px"},attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.label))]),t._v(" "),r("div",{staticClass:"ivu-form-label-top ivu-form-inline"},[t.$store.getters.stock?[r("FormItem",{attrs:{label:t.$t("quantity"),prop:"stock"}},[r("InputNumber",{model:{value:t.stock[s].quantity,callback:function(e){t.$set(t.stock[s],"quantity",e)},expression:"stock[index].quantity"}})],1)]:t._e(),t._v(" "),r("FormItem",{attrs:{label:t.$t("cost"),prop:"lcost"}},[r("InputNumber",{model:{value:t.stock[s].cost,callback:function(e){t.$set(t.stock[s],"cost",e)},expression:"stock[index].cost"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("price"),prop:"lprice"}},[r("InputNumber",{model:{value:t.stock[s].price,callback:function(e){t.$set(t.stock[s],"price",e)},expression:"stock[index].price"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("rack_location"),prop:"lrack"}},[r("Input",{model:{value:t.stock[s].rack,callback:function(e){t.$set(t.stock[s],"rack",e)},expression:"stock[index].rack"}})],1),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},[t.stock[s].units&&t.stock[s].units.length?r("div",t._l(t.stock[s].units,(function(e,a){return r("Card",{key:"loc_unit_"+e.id,attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name)+" ("+t._s(e.code)+")")]),t._v(" "),r("FormItem",{attrs:{label:t.$t("cost")}},[r("InputNumber",{model:{value:t.stock[s].units[a].cost,callback:function(e){t.$set(t.stock[s].units[a],"cost",e)},expression:"stock[index].units[ui].cost"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("price")}},[r("InputNumber",{model:{value:t.stock[s].units[a].price,callback:function(e){t.$set(t.stock[s].units[a],"price",e)},expression:"stock[index].units[ui].price"}})],1)],1)})),1):t._e()])],2)])],1)})),1):t._e()],1)]):t._e()]),t._v(" "),r("div",[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.goToStep(3)}}},[t._v(t._s(t.$t("next")))]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"warning"},on:{click:function(e){return t.goToStep(1)}}},[t._v(t._s(t.$t("back")))])],1)],1)}),[],!1,null,null,null).exports;function S(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){A(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var N=function(t,e){return t.attributes&&(e.attributes=t.attributes,delete t.attributes),t.extra_attributes=e.formatAttributes(e.attributes,t.extra_attributes),t.images=[],delete t.photo,t.location_stock&&delete t.location_stock,t.valid_promotions&&delete t.valid_promotions,t.cost=parseFloat(t.cost),t.price=parseFloat(t.price),t.category_id=t.categories[0].id,t.sku=t.sku?t.sku:e.sku(),t.hide_in_pos=1==t.hide_in_pos?1:0,t.hide_in_shop=1==t.hide_in_shop?1:0,t.changeable=1==t.changeable?1:0,t.tax_included=1==t.tax_included?1:0,t.max_price=t.max_price?parseFloat(t.max_price):null,t.min_price=t.min_price?parseFloat(t.min_price):null,t.max_discount=t.max_discount?parseFloat(t.max_discount):null,t.taxes=t.taxes.map((function(t){return t.id})),t.stock=t.stock.map((function(t){return{rack:t.rack,location_id:t.location_id,cost:t.cost?parseFloat(t.cost):null,price:t.price?parseFloat(t.price):null,quantity:t.quantity?parseFloat(t.quantity):null}})),t.serials||(t.serials=[{number:"",till:""}]),t.modifiers||(t.modifiers=[]),t.variants||(t.variants=[]),(!t.variations||t.variations.length<1)&&(t.variations=[{sku:e.sku(),code:"",cost:null,price:null,quantity:null,weight:null,dimensions:"",del:null,meta:[]}]),t.modifiers=t.modifiers.map((function(t){return t.id})),t.variations=t.variations.map((function(t){return t.cost=t.cost?parseFloat(t.cost):null,t.price=t.price?parseFloat(t.price):null,t.weight=t.weight?parseFloat(t.weight):null,t.quantity=t.quantity?parseFloat(t.quantity):null,t.stock?t.stock=t.stock.map((function(t){return t.cost=t.cost?parseFloat(t.cost):null,t.price=t.price?parseFloat(t.price):null,t.quantity=t.quantity?parseFloat(t.quantity):null,t})):t.stock=e.$store.getters.locations.map((function(t){return D(D({},t),{},{location_id:t.value,price:null,cost:null,quantity:null,rack:""})})),t})),t.stock=e.$store.getters.locations.map((function(e){return t.unit&&t.unit.subunits.length&&(t.unit.subunits=t.unit.subunits.map((function(t){return t.price||(t.price=null),t.cost||(t.cost=null),t}))),D(D({},e),{},{rack:"",cost:null,price:null,quantity:null,location_id:e.value,units:t.unit&&t.unit.subunits.length?t.unit.subunits:null})})),t.variations=t.variations.map((function(t){return t.stock=e.$store.getters.locations.map((function(t){return D(D({},t),{},{location_id:t.value,price:null,cost:null,quantity:null,rack:""})})),t})),e.form=D(D({},t),t.extra_attributes),e.form};const T={components:{ItemSerialComponent:m,ItemVariationComponent:x,ItemLocationDataComponent:q},mixins:[(0,s.Z)("item","app/items",!0,N)],data:function(){return{step:0,taxes:[],photo:null,units:[],brands:[],modifiers:[],suppliers:[],categories:[],attributes:[],new_photo:null,sloading:!1,searching:!1,form:{id:"",code:"",name:"",stock:[],expiry:0,taxes:[],cost:null,images:[],details:"",unit_id:"",brand_id:"",photo:null,video:null,summary:"",price:null,is_stock:0,alt_name:"",weight:null,changeable:0,dimensions:"",has_serials:0,has_variants:0,min_price:null,max_price:null,type:"standard",tax_included:"",sale_unit_id:"",sale_unit_price:"",category_id:null,supplier_id:null,max_discount:null,purchase_unit_id:"",purchase_unit_price:"",supplier_item_id:"",sku:this.sku(),variations:[{sku:this.sku(),code:"",cost:null,price:null,quantity:null,weight:null,dimensions:"",del:null,meta:[]}],serials:[{number:"",till:""}],variants:[],modifiers:[]},rules:{type:[{required:!0,message:this.$t("field_is_required",{field:this.$t("type")}),trigger:"change"}],name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}],code:[{required:!0,message:this.$t("field_is_required",{field:this.$t("code")}),trigger:"blur"},{required:!0,pattern:/^([a-zA-Z0-9-_]{2,25})$/,message:this.$t("alpha_dash_error"),trigger:["blur","change"]}],cost:[{required:!0,type:"number",trigger:["change","blur"],message:this.$t("field_is_required",{field:this.$t("cost")})}],price:[{required:!0,type:"number",trigger:["change","blur"],message:this.$t("field_is_required",{field:this.$t("price")})}],category_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("category")}),trigger:"change"}],symbology:[{required:!0,message:this.$t("field_is_required",{field:this.$t("symbology")}),trigger:"change"}],taxes:[{type:"array",trigger:"change",message:this.$t("field_are_required",{field:this.$tc("tax",2)})}]}}},computed:{totalVariationsQty:function(){return this.form.variations.reduce((function(t,e){return t+e.quantity}),0)},totalStockQty:function(){return this.form.stock.reduce((function(t,e){return t+e.quantity}),0)},isQtyOk:function(){return this.totalVariationsQty==this.totalStockQty}},created:function(){var t=this;this.$http.get("app/taxes/search").then((function(e){return t.taxes=e.data})),this.$http.get("app/units/search").then((function(e){return t.units=e.data})),this.$http.get("app/brands/search").then((function(e){return t.brands=e.data})),this.$http.get("app/modifiers/search").then((function(e){return t.modifiers=e.data})),this.$http.get("app/all_categories/search").then((function(e){return t.categories=t.flattenDeep(e.data)})),this.form.stock=this.$store.getters.locations.map((function(e){return D(D({},e),{},{rack:"",cost:null,price:null,quantity:null,location_id:e.value,units:t.form.unit&&t.form.unit.subunits.length?t.form.unit.subunits:null})}))},methods:{create:function(){var t=this;this.$http.get("app/items/create").then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t){var e=this;this.$http.get("app/items/".concat(t)).then((function(t){return e.form=N(t.data,e)})).finally((function(){return e.loading=!1}))},setHasVariants:function(t){this.form.has_variants=t},setIsStock:function(t){this.form.is_stock=t},setStock:function(t){this.form.stock=t},setVariants:function(t){this.form.variants=t},setVariations:function(t){this.form.variations=t},goToStep:function(t,e){var r=this;this.sloading=!0,1==t&&e?this.$refs.item.validate((function(e){e?(r.step=parseInt(t),r.sloading=!1,window.scrollTo(0,0)):(r.sloading=!1,r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10}))})):(window.scrollTo(0,0),this.sloading=!1,this.step=parseInt(t))},unitChanged:function(t){var e=this;t?(this.loading=!0,this.$http.get("app/units/"+t).then((function(t){e.form.unit=t.data,e.form.unit.subunits=e.form.unit.subunits.map((function(t){return t.price||(t.price=null),t.cost||(t.cost=null),t})),e.form.stock=e.form.stock.map((function(t){return t.units=e.form.unit.subunits.length?e.form.unit.subunits.map((function(t){return{id:t.id,cost:null,price:null}})):null,t}))})).finally((function(){return e.loading=!1}))):(this.form.unit=null,this.form.stock=this.form.stock.map((function(t){return t.units=null,t})))},handleImages:function(t){var e=new FileReader;return this.form.images.push(t),e.readAsDataURL(t),!1},deleteImage:function(t){this.form.images.splice(t,1)},handleUpload:function(t){var e=this,r=new FileReader;return r.addEventListener("load",(function(){return e.new_photo=r.result}),!1),this.form.photo=t,r.readAsDataURL(t),!1},clearPhoto:function(){this.new_photo=null,this.form.photo=null},searchSuppliers:function(t){""===t||this.suppliers.find((function(e){return e.label==t}))||this.getSuppliers(t,this)},getSuppliers:i()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/suppliers/search?q="+t).then((function(t){return e.suppliers=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),submit:function(t,e){var r=this,s="app/items",a="added";this.errors.message="";var i="record_added";this.form.id&&""!=this.form.id&&(a="updated",s="app/items/"+this.form.id,i="record_updated",this.form._method="PUT");var o=D({},this.form);if(this.attributes.length>0){var n=this.attributes.map((function(t){var e={};return delete o[t.slug],e[t.slug]=r.form[t.slug],e}));o.extra_attributes=Object.assign.apply(Object,S(n))}o=this.$form(o),this.$http.post(s,o).then((function(s){s.data.success?(r.$Notice.destroy(),r.$Notice.success({title:r.$tc("item")+" "+r.$t(a),desc:r.$t(i)}),e?("updated"==a||r.handleReset(),r.step=0):r.$router.push({name:t+".list"})):r.$Notice.error({title:r.$t("failed"),desc:r.$t("failed_error_text")})})).catch((function(t){return r.errors=t})).finally((function(){return r.loading=!1}))}}};const R=(0,u.Z)(T,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("item")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/items"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("item",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"item",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),r("div",{staticClass:"hidden-sm",staticStyle:{margin:"-16px -16px 16px -16px","border-bottom":"1px solid #e8eaec",padding:"16px"}},[r("Steps",{attrs:{current:t.step,status:"wait"}},[r("Step",{attrs:{title:t.$t("general_step"),content:t.$t("general_step_text")}}),t._v(" "),r("Step",{attrs:{title:t.$t("variants_step"),content:t.$t("variants_step_text")}}),t._v(" "),r("Step",{attrs:{title:t.$t("location_step"),content:t.$t("location_step_text")}}),t._v(" "),r("Step",{attrs:{title:t.$t("serials_step"),content:t.$t("serials_step_text")}})],1)],1),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),0==t.step?r("div",[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("sku"),prop:"sku",error:t._f("a2s")(t.errors.form.sku)}},[r("Input",{attrs:{readonly:""},model:{value:t.form.sku,callback:function(e){t.$set(t.form,"sku",e)},expression:"form.sku"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("alt_name"),prop:"alt_name",error:t._f("a2s")(t.errors.form.alt_name)}},[r("Input",{model:{value:t.form.alt_name,callback:function(e){t.$set(t.form,"alt_name",e)},expression:"form.alt_name"}})],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("code"),prop:"code",error:t._f("a2s")(t.errors.form.code)}},[r("Input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),t._v(" "),r("small",[t._v(t._s(t.$t("item_code_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("symbology"),prop:"symbology",error:t._f("a2s")(t.errors.form.symbology)}},[r("Select",{model:{value:t.form.symbology,callback:function(e){t.$set(t.form,"symbology",e)},expression:"form.symbology"}},[r("Option",{attrs:{value:"code128"}},[t._v("Code128")]),t._v(" "),r("Option",{attrs:{value:"code39"}},[t._v("Code39")]),t._v(" "),r("Option",{attrs:{value:"ean5"}},[t._v("EAN5")]),t._v(" "),r("Option",{attrs:{value:"ean8"}},[t._v("EAN8")]),t._v(" "),r("Option",{attrs:{value:"ean13"}},[t._v("EAN13")]),t._v(" "),r("Option",{attrs:{value:"upce"}},[t._v("UPC (E)")]),t._v(" "),r("Option",{attrs:{value:"upca"}},[t._v("UPC (A)")])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("category"),prop:"category_id",error:t._f("a2s")(t.errors.form.category_id)}},[r("Select",{model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categories,(function(e){return r("Option",{key:e.value,attrs:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                      ")])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("cost"),prop:"cost",error:t._f("a2s")(t.errors.form.cost)}},[r("InputNumber",{model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",e)},expression:"form.cost"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("price"),prop:"price",error:t._f("a2s")(t.errors.form.price)}},[r("InputNumber",{model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("tax",2),prop:"taxes",error:t._f("a2s")(t.errors.form.taxes)}},[r("Select",{attrs:{multiple:""},model:{value:t.form.taxes,callback:function(e){t.$set(t.form,"taxes",e)},expression:"form.taxes"}},t._l(t.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                      ")])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("brand"),prop:"brand",error:t._f("a2s")(t.errors.form.brand)}},[r("Select",{attrs:{clearable:""},model:{value:t.form.brand_id,callback:function(e){t.$set(t.form,"brand_id",e)},expression:"form.brand_id"}},t._l(t.brands,(function(e){return r("Option",{key:"brand_"+e.id,attrs:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                      ")])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("modifier",2),prop:"modifier",error:t._f("a2s")(t.errors.form.modifier)}},[r("Select",{attrs:{clearable:"",multiple:""},model:{value:t.form.modifiers,callback:function(e){t.$set(t.form,"modifiers",e)},expression:"form.modifiers"}},t._l(t.modifiers,(function(e){return r("Option",{key:"modifier_"+e.value,attrs:{value:e.value}},[t._v("\n                        "+t._s(e.label)+"\n                      ")])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("hsn_number"),prop:"hsn_number",error:t._f("a2s")(t.errors.form.hsn_number)}},[r("Input",{model:{value:t.form.hsn_number,callback:function(e){t.$set(t.form,"hsn_number",e)},expression:"form.hsn_number"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("weight"),prop:"weight",error:t._f("a2s")(t.errors.form.weight)}},[r("InputNumber",{model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("dimensions"),prop:"dimensions",error:t._f("a2s")(t.errors.form.dimensions)}},[r("Input",{attrs:{placeholder:t.$t("dimensions_tip")},model:{value:t.form.dimensions,callback:function(e){t.$set(t.form,"dimensions",e)},expression:"form.dimensions"}})],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("rack_location"),prop:"location",error:t._f("a2s")(t.errors.form.rack)}},[r("Input",{model:{value:t.form.rack,callback:function(e){t.$set(t.form,"rack",e)},expression:"form.rack"}}),t._v(" "),r("small",[t._v(t._s(t.$t("rack_location_tip")))])],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{prop:"max_discount",label:t.$t("max_discount"),error:t._f("a2s")(t.errors.form.max_discount)}},[r("InputNumber",{attrs:{formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")}},model:{value:t.form.max_discount,callback:function(e){t.$set(t.form,"max_discount",e)},expression:"form.max_discount"}}),t._v(" "),r("small",[t._v(t._s(t.$t("max_discount_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("supplier"),prop:"supplier_id",error:t._f("a2s")(t.errors.form.supplier_id)}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchSuppliers,placeholder:t.$t("type_to_search_x",{x:t.$tc("supplier")})},model:{value:t.form.supplier_id,callback:function(e){t.$set(t.form,"supplier_id",e)},expression:"form.supplier_id"}},t._l(t.suppliers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),t.form.supplier_id?r("FormItem",{attrs:{prop:"supplier_item_id",label:t.$t("supplier_item_id"),error:t._f("a2s")(t.errors.form.supplier_item_id)}},[r("Input",{model:{value:t.form.supplier_item_id,callback:function(e){t.$set(t.form,"supplier_item_id",e)},expression:"form.supplier_item_id"}})],1):t._e()],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{attrs:{label:t.$tc("unit"),prop:"unit",error:t._f("a2s")(t.errors.form.unit)}},[r("Select",{attrs:{clearable:""},on:{"on-change":t.unitChanged},model:{value:t.form.unit_id,callback:function(e){t.$set(t.form,"unit_id",e)},expression:"form.unit_id"}},t._l(t.units,(function(e){return r("Option",{key:"unit_"+e.id,attrs:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                      ")])})),1)],1),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},[t.form.unit&&t.form.unit.subunits.length?r("div",[r("Row",[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("sale_unit"),prop:"unit",error:t._f("a2s")(t.errors.form.unit)}},[r("Select",{attrs:{clearable:""},model:{value:t.form.sale_unit_id,callback:function(e){t.$set(t.form,"sale_unit_id",e)},expression:"form.sale_unit_id"}},t._l(t.form.unit.subunits,(function(e,s){return r("Option",{key:"sunit_"+s,attrs:{value:e.id}},[t._v("\n                                "+t._s(e.name)+"\n                              ")])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("purchase_unit"),prop:"unit",error:t._f("a2s")(t.errors.form.unit)}},[r("Select",{attrs:{clearable:""},model:{value:t.form.purchase_unit_id,callback:function(e){t.$set(t.form,"purchase_unit_id",e)},expression:"form.purchase_unit_id"}},t._l(t.form.unit.subunits,(function(e,s){return r("Option",{key:"punit_"+s,attrs:{value:e.id}},[t._v("\n                                "+t._s(e.name)+"\n                              ")])})),1)],1)],1)],1),t._v(" "),r("FormItem",{attrs:{label:""}},t._l(t.form.unit.subunits,(function(e,s){return r("Card",{key:"unit_"+e.id,attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name)+" ("+t._s(e.code)+")")]),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("span",[t._v(t._s(t.$t("cost")))]),t._v(" "),r("InputNumber",{model:{value:t.form.unit.subunits[s].cost,callback:function(e){t.$set(t.form.unit.subunits[s],"cost",e)},expression:"form.unit.subunits[ui].cost"}})],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("span",[t._v(t._s(t.$t("price")))]),t._v(" "),r("InputNumber",{model:{value:t.form.unit.subunits[s].price,callback:function(e){t.$set(t.form.unit.subunits[s],"price",e)},expression:"form.unit.subunits[ui].price"}})],1)],1)],1)})),1)],1):t._e()])],1)],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Checkbox",{attrs:{label:"tax_included","true-value":1,"false-value":0},model:{value:t.form.tax_included,callback:function(e){t.$set(t.form,"tax_included",e)},expression:"form.tax_included"}},[t._v("\n                  "+t._s(t.$t("tax_inclusive"))+"\n                ")])],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Checkbox",{attrs:{label:"price_changeable","true-value":1,"false-value":0},model:{value:t.form.changeable,callback:function(e){t.$set(t.form,"changeable",e)},expression:"form.changeable"}},[t._v("\n                  "+t._s(t.$t("allow_price_change"))+"\n                ")])],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.expiry,callback:function(e){t.$set(t.form,"expiry",e)},expression:"form.expiry"}},[t._v("\n                  "+t._s(t.$t("item_has_expiry_date"))+"\n                ")])],1),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},[t.form.changeable?r("div",{staticStyle:{"margin-top":"16px"}},[r("Row",[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("min_price"),prop:"min_price",error:t._f("a2s")(t.errors.form.min_price)}},[r("InputNumber",{model:{value:t.form.min_price,callback:function(e){t.$set(t.form,"min_price",e)},expression:"form.min_price"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("max_price"),prop:"max_price",error:t._f("a2s")(t.errors.form.max_price)}},[r("InputNumber",{model:{value:t.form.max_price,callback:function(e){t.$set(t.form,"max_price",e)},expression:"form.max_price"}})],1)],1)],1)],1):t._e()]),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",{attrs:{label:t.$tc("photo"),prop:"photo",error:t._f("a2s")(t.errors.form.photo)}},[r("Upload",{attrs:{"before-upload":t.handleUpload,"max-size":1024,action:"",accept:".png, .jpeg, .jpg, .gif"}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v(t._s(t.$t("select_x",{x:t.$t("photo")})))])],1),t._v(" "),t.photo||t.new_photo?r("div",{staticClass:"primary",staticStyle:{"margin-bottom":"16px"}},[t.form.photo?r("span",[r("span",{staticStyle:{margin:"10px 10px 10px 0"}},[t._v(t._s(t.$t("selected_file"))+": "+t._s(t.form.photo.name))]),t._v(" "),r("Button",{attrs:{type:"error",shape:"circle",size:"small",icon:"ios-trash"},on:{click:function(e){return t.clearPhoto()}}})],1):t._e(),t._v(" "),r("br"),t._v(" "),t.photo||t.new_photo?r("img",{staticStyle:{"max-width":"160px","max-height":"110px","border-radius":"4px 4px 0 0"},attrs:{alt:"photo",src:t.new_photo?t.new_photo:t.photo}}):t._e(),t._v(" "),r("div",[t.new_photo?r("small",{staticClass:"warning"},[t._v(t._s(t.$t("not_uploaded_yet")))]):t._e()])]):t._e()],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("gallery_images"),prop:"images",error:t._f("a2s")(t.errors.form.images)}},[r("Upload",{attrs:{multiple:"","before-upload":t.handleImages,"max-size":2048,action:"",accept:".png, .jpeg, .jpg"}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("\n                    "+t._s(t.$t("select_x",{x:t.$t("gallery_images")}))+"\n                  ")])],1),t._v(" "),t.form.images.length?[r("span",{staticStyle:{margin:"10px 10px 10px 0"}},[t._v(t._s(t.$t("selected_file")))]),t._v(" "),t._l(t.form.images,(function(e,s){return r("span",{key:"gallery_"+s,staticClass:"primary",staticStyle:{margin:"0 16px 16px 0"}},[t._v("\n                    "+t._s(s+1)+". "+t._s(e.name)+"\n                    "),r("Button",{attrs:{type:"error",shape:"circle",size:"small",icon:"ios-trash"},on:{click:function(e){return t.deleteImage(s)}}})],1)}))]:t._e()],2),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("video_url"),prop:"video",error:t._f("a2s")(t.errors.form.video)}},[r("Input",{model:{value:t.form.video,callback:function(e){t.$set(t.form,"video",e)},expression:"form.video"}}),t._v(" "),r("small",[t._v(t._s(t.$t("video_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("summary"),prop:"summary",error:t._f("a2s")(t.errors.form.summary)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),t._v(" "),r("FormItem",{staticStyle:{"margin-bottom":"16px"},attrs:{label:t.$t("details"),prop:"details",error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:12}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0",attrs:{label:t.$t("hide_in_x",{x:t.$t("pos")})}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.form.hide_in_pos,callback:function(e){t.$set(t.form,"hide_in_pos",e)},expression:"form.hide_in_pos"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("yes")))]),t._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("no")))])])],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("hide_in_x",{x:t.$t("shop")})}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.form.hide_in_shop,callback:function(e){t.$set(t.form,"hide_in_shop",e)},expression:"form.hide_in_shop"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("yes")))]),t._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("no")))])])],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.submit("items")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save")))])]),t._v(" "),r("Button",{attrs:{type:"primary",loading:t.sloading},on:{click:function(e){return t.goToStep(1,!0)}}},[t._v(t._s(t.$t("next")))])],1)],1):1==t.step?r("div",[r("item-variation-component",{attrs:{ivariants:t.form.variants,ivariations:t.form.variations,hasVariants:t.form.has_variants},on:{"step-changed":t.goToStep,"variants-changed":t.setVariants,"variations-changed":t.setVariations,"has-variants-changed":t.setHasVariants}})],1):2==t.step?r("div",[r("item-location-data-component",{attrs:{istock:t.form.stock,isStock:t.form.is_stock,variants:t.form.variants,ivariations:t.form.variations,hasVariants:t.form.has_variants},on:{"step-changed":t.goToStep,"stock-changed":t.setStock,"is-stock-changed":t.setIsStock,"variations-changed":t.setVariations}})],1):3==t.step?r("div",[r("div",{staticClass:"mb16"},[r("Checkbox",{attrs:{label:"has_serials","true-value":1,"false-value":0},model:{value:t.form.has_serials,callback:function(e){t.$set(t.form,"has_serials",e)},expression:"form.has_serials"}},[t._v("\n                  "+t._s(t.$t("item_has_serial"))+"\n                ")])],1),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},[1==t.form.has_serials?r("div",{staticClass:"mb16",staticStyle:{"margin-top":"16px","margin-bottom":"0"}},[r("item-serial-component",{attrs:{serials:t.form.serials,totalStockQty:t.totalStockQty,hasVariants:t.form.has_variants,totalVariationsQty:t.totalVariationsQty}})],1):t._e()]),t._v(" "),r("div",{staticClass:"mb16"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.submit("items")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.submit("items",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning",ghost:""},on:{click:function(e){return t.goToStep(2)}}},[t._v("\n                  "+t._s(t.$t("back"))+"\n                ")]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"error",ghost:""},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1):t._e()],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},62702:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var s=r(7174),a=r.n(s),i=r(92704);const o={components:{ItemViewComponent:r(487).Z,VueBarcode:a()},mixins:[(0,i.Z)("item","app/items")],data:function(){var t=this;return{row:{},view:!1,barModal:!1,barcodeSVG:null,columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("name"),sortable:!0,key:"name",width:200},{title:this.$t("code"),sortable:!0,key:"code",sortType:"asc",minWidth:150},{title:this.$t("cost"),sortable:!0,key:"cost",minWidth:125,render:this.renderCost},{title:this.$t("price"),sortable:!0,key:"price",minWidth:125,render:this.renderPrice},{title:this.$t("quantity"),sortable:!0,key:"stock",minWidth:125,render:this.renderStock},{title:this.$t("rack_location"),sortable:!0,key:"location",minWidth:130,render:this.renderRack},{title:this.$t("alt_name"),sortable:!0,key:"alt_name",minWidth:175},{title:this.$tc("category"),sortable:!1,key:"categories",minWidth:175,render:this.renderCategory},{title:this.$tc("taxes"),sortable:!1,key:"taxes",minWidth:200,render:this.renderTaxes},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("tax_method"),sortable:!0,key:"tax_included",minWidth:120,render:this.renderTaxMethod},{title:this.$t("changeable"),sortable:!0,key:"changeable",minWidth:120,render:this.renderChangeable},{title:this.$tc("serial",2),sortable:!0,key:"has_serials",minWidth:90,render:this.renderHasSerials},{title:this.$tc("variant",2),sortable:!0,key:"has_variants",minWidth:90,render:this.renderHasVariants},{title:this.$t("min_price"),sortable:!0,key:"min_price",minWidth:120,render:this.renderMinPrice},{title:this.$t("max_price"),sortable:!0,key:"max_price",minWidth:120,render:this.renderMaxPrice},{title:this.$t("max_discount"),sortable:!0,key:"max_discount",minWidth:150,render:this.renderMaxDiscount},{title:this.$t("summary"),sortable:!0,key:"summary",ellipsis:!0,minWidth:400},{title:this.$t("created_at"),sortable:!0,key:"created_at",minWidth:175,render:this.renderCreatedAt},{title:this.$t("updated_at"),sortable:!0,key:"updated_at",minWidth:175,render:this.renderUpdatedAt},{width:120,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,editFn:t.editRecord,labelFn:t.labelModal,deleteFn:t.deleteRecord,record:{model:"item",name:"name"},trailsFn:function(e){t.$router.push("/items/trails/"+e)}}})}}],options:{orderBy:"code",perPage:this.$store.state.settings.rows}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},mounted:function(){this.$store.getters.stock||(this.columns=this.columns.filter((function(t){return"stock"!=t.key})))},methods:{showInfo:function(t){this.row=t,this.view=!0},labelModal:function(t){var e=this;this.row=t,this.barModal=!0,this.barcodeSVG=this.$store.state.settings.svg_string.replace("--- Item Name ---",this.row.name).replace("--- Other info for item. ---",this.row.alt_name).replace("--- Price: 1,000.00 ---",this.$t("price")+": "+this.formatNumber(this.row.price)),this.$nextTick((function(){document.getElementById("replace-barcode").innerHTML="",document.getElementById("replace-barcode").removeAttribute("transform");var t=document.getElementById("drawBarcode").childNodes[0].cloneNode(!0);document.getElementById("replace-barcode").setAttribute("transform","matrix(1 0 0 1 10 "+(e.$store.state.settings.label_height-60)+")"),document.getElementById("replace-barcode").appendChild(t),1==e.$store.getters.settings.print_dialog&&setTimeout((function(){window.print()}),400)}))},print:function(){window.print()},renderChangeable:function(t,e){return this.renderBoolean(t,e,"changeable")},renderHasSerials:function(t,e){return this.renderBoolean(t,e,"has_serials")},renderHasVariants:function(t,e){return this.renderBoolean(t,e,"has_variants")},renderMinPrice:function(t,e){return this.renderNumber(t,e,"min_price")},renderMaxPrice:function(t,e){return this.renderNumber(t,e,"max_price")},renderMaxDiscount:function(t,e){return this.renderNumber(t,e,"max_discount")},renderCategory:function(t,e){return t("div",[e.row.categories.map((function(t){return t.name})).join("")])},renderCost:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.location_stock.length>0&&e.row.location_stock[0].cost?e.row.location_stock[0].cost:e.row.cost,this.$store.getters.settings.decimals)])},renderPrice:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.location_stock.length>0&&e.row.location_stock[0].price?e.row.location_stock[0].price:e.row.price,this.$store.getters.settings.decimals)])},renderStock:function(t,e){return t("div",{class:"text-center"},[e.row.location_stock.length>0?this.$options.filters.formatNumber(e.row.location_stock[0].quantity,this.$store.getters.settings.decimals):this.$options.filters.formatNumber(e.row.stock.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),this.$store.getters.settings.decimals)])},renderRack:function(t,e){return t("div",[e.row.location_stock.length>0&&e.row.location_stock[0].rack?e.row.location_stock[0].rack:e.row.location])},renderTaxMethod:function(t,e){return 1==e.row.tax_included?t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-success ivu-tag-border ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-success"},[this.$t("inclusive")])])]):t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-primary ivu-tag-border ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-primary"},[this.$t("exclusive")])])])},renderTaxes:function(t,e){return t("div",[e.row.taxes.map((function(t){return t.name})).join(", ")])}}};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("item",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/items/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add_x",{x:t.$tc("item")}))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/items",columns:t.columns,options:t.options,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"500","footer-hide":!0,"mask-closable":!1,title:t.$t("print_x",{x:t.$t("barcode")})},model:{value:t.barModal,callback:function(e){t.barModal=e},expression:"barModal"}},[r("div",{staticClass:"label text-center",domProps:{innerHTML:t._s(t.barcodeSVG)}}),t._v(" "),r("div",{staticClass:"np"},[r("Divider",{attrs:{dashed:""}}),t._v(" "),r("div",{staticClass:"text-center",staticStyle:{display:"none"}},[r("vue-barcode",{attrs:{width:1,margin:0,height:30,fontSize:12,"margin-top":0,id:"drawBarcode",value:t.row.code,"margin-bottom":4,format:t.row.symbology}},[t._v("\n          "+t._s(t.$t("barcode_error"))+"\n        ")])],1),t._v(" "),r("Alert",{domProps:{innerHTML:t._s(t.$t("label_print_instructions"))}}),t._v(" "),r("Button",{staticClass:"np",attrs:{type:"primary",icon:"ios-print",long:""},on:{click:function(e){return t.print()}}},[t._v(t._s(t.$t("print")))])],1)]),t._v(" "),r("Modal",{attrs:{"footer-hide":"",scrollable:"",width:750},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("\n        "+t._s(t.row.name)+"\n        ("+t._s(t.row.code)+")\n      ")])]),t._v(" "),r("item-view-component",{attrs:{item:t.row}})],1)],1)}),[],!1,null,null,null).exports},56824:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(36940),a=r.n(s);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l={components:{ReportFormComponent:r(40895).Z},data:function(){return{url:"",data:{},refresh:1,updated:0,reportForm:{},loading:!1,showForm:!1,fields:["created_at","location_id"],columns:[{minWidth:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{title:this.$t("type"),sortable:!0,key:"memo",width:150},{title:this.$tc("item"),sortable:!1,key:"item",minWidth:250,render:this.renderItem},{title:this.$t("quantity"),sortable:!1,key:"quantity",minWidth:125,render:this.renderQuantity},{title:this.$tc("unit"),sortable:!1,key:"unit",minWidth:150,render:this.renderUnit},{title:this.$tc("location"),sortable:!1,key:"location",minWidth:150,render:this.renderLocation},{title:this.$tc("variation"),sortable:!1,key:"variation",minWidth:250,render:this.renderVariation}],options:{hideSearch:!0,showSummary:!0,orderBy:"created_at desc",summaryMethod:this.handleSummary,perPage:this.$store.state.settings.rows}}},created:function(){var t=this;this.fields.map((function(e){t.reportForm[e]=""})),this.url="app/items/trails/".concat(this.$route.params.id,"/table"),this.$event.listen("location:changed",(function(e){return t.refresh++})),this.$http.get("app/items/trails/".concat(this.$route.params.id),{params:o(o({},this.reportForm),{},{date:""})}).then((function(e){t.prepareData(e.data.stock),t.reportForm.end_date=new Date(e.data.end_date),t.reportForm.start_date=new Date(e.data.start_date),t.reportForm.created_at=[new Date(e.data.start_date),new Date(e.data.end_date)],t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.created_at&&this.reportForm.created_at[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.created_at[0]).format(this.datetimeFormatString())),this.reportForm.created_at&&this.reportForm.created_at[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.created_at[1]).format(this.datetimeFormatString())),delete this.reportForm.created_at,this.url="app/items/trails/".concat(this.$route.params.id,"/table?").concat(this.queryString(this.reportForm)),this.refresh++,this.$http.get("app/items/trails/".concat(this.$route.params.id),{params:o(o({},this.reportForm),{},{date:""})}).then((function(t){e.prepareData(t.data.stock),e.reportForm.created_at=[new Date(t.data.start_date),new Date(t.data.end_date)],e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.data=[{label:this.$t("start_stock"),value:t.start_stock},{label:this.$t("close_stock"),value:t.close_stock}]},renderLocation:function(t,e){return t("div",[e.row.location?e.row.location.name:""])},renderItem:function(t,e){return t("div",[e.row.item?e.row.item.name:""])},renderUnit:function(t,e){return t("div",[e.row.unit?e.row.unit.name:""])},renderPortion:function(t,e){return t("div",[e.row.portion?e.row.portion.name:""])},renderVariation:function(t,e){return t("div",[e.row.variation?e.row.variation.code:""])},renderCreatedAt:function(t,e){return t("div",[this.$options.filters.formatDate(e.row.created_at,this.$store.state.settings.dateformat+" HH:mm A")])},renderQuantity:function(t,e){return t("div",{class:"text-center"},[this.$options.filters.formatNumber(e.row.quantity,this.$store.getters.settings.decimals)])},renderType:function(t,e){return t("div",[a().humanize(e.row.type)])},rowClassName:function(t,e){return t.quantity<0?"ivu-table-warning-row":t.quantity>0?"ivu-table-success-row":""},handleSummary:function(t){var e=this,r=t.columns,s=t.data,a=["quantity"],i={};return r.forEach((function(t,r){var o=t.key;if(a.includes(o)){var n=s.map((function(t){return t.void||t.draft?0:Number(e.formatDecimal(t[o]))}));if(!n.every((function(t){return isNaN(t)}))){var l=n.reduce((function(t,e){return isNaN(Number(e))?t:t+e}),0);i[o]={key:o,value:e.formatNumber(l)}}}else i[o]={key:o,value:""}})),i}}};const c=(0,r(51900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n    "+t._s(t.$t("item_trails"))+" ("+t._s(t.datetime(new Date(t.reportForm.start_date)))+" - "+t._s(t.datetime(new Date(t.reportForm.end_date)))+")\n  ")]),t._v(" "),r("span",{attrs:{slot:"extra"},slot:"extra"},[r("router-link",{attrs:{to:"/items"}},[r("Button",{attrs:{type:"text",ghost:""}},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n        "+t._s(t.$t("list"))+" "+t._s(t.$tc("item",2))+"\n      ")],1)],1),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1)],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,updated:t.updated,reportForm:t.reportForm},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[r("Col",{key:s,attrs:{sm:12,md:12}},[r("div",{staticClass:"box static",class:"box"+(s+5)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatNumber(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])])]}))],2),t._v(" "),r("table-component",{attrs:{url:t.url,stripe:!1,columns:t.columns,options:t.options,refresh:t.refresh,"row-class-name":t.rowClassName}})],1)])}),[],!1,null,null,null).exports},487:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});const s={props:{item:{required:!0}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.item?r("div",{staticClass:"table-responsive"},[r("div",{staticClass:"ivu-table-wrapper ivu-table-wrapper-with-border"},[r("div",{staticClass:"ivu-table ivu-table-default ivu-table-border"},[r("div",{staticClass:"ivu-table-body"},[r("table",{staticStyle:{width:"100%","min-width":"300px"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[r("tbody",{staticClass:"ivu-table-tbody"},[r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("code")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[r("strong",[t._v(t._s(t.item.code))]),t._v(" "),r("span",{staticStyle:{"text-transform":"uppercase"}},[t._v("("+t._s(t.item.symbology)+")")])])])]),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("name")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[r("strong",[t._v(t._s(t.item.name))]),t._v(" "),t.item.alt_name?r("span",[t._v("("+t._s(t.item.alt_name)+")")]):t._e()])])]),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("sku")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v(t._s(t.item.sku))])])]),t._v(" "),t.item.photo||t.item.video?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("photo"))+" / "+t._s(t.$t("video")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell",staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[t.item.photo?r("a",{attrs:{href:t.item.photo,target:"_blank"}},[r("img",{staticStyle:{"max-width":"100px","max-height":"50px","margin-top":"5px","border-radius":"5px"},attrs:{alt:t.item.name,src:t.item.photo}})]):t._e(),t._v(" "),t.item.video?r("Button",{attrs:{to:t.item.video,target:"_blank"}},[t._v(t._s(t.$t("view_x",{x:t.$t("video")})))]):t._e()],1)])]):t._e(),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("cost")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v("\n                  "+t._s(t.formatNumber(t.item.cost))+"\n                ")])])]),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("price")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v("\n                  "+t._s(t.formatNumber(t.item.price))+"\n                  "),t.item.min_price||t.item.max_price?r("small",[t._v("\n                    ("+t._s(t.$t("min_price")+": "+t.formatNumber(t.item.min_price)+" - "+t.$t("max_price")+": "+t.formatNumber(t.item.max_price))+")\n                  ")]):t._e()])])]),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("max_discount")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v(t._s(t.formatNumber(t.item.max_discount))+"%")])])]),t._v(" "),t.item.categories&&t.item.categories.length?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$tc("category")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v("\n                  "+t._s(t.item.categories[0].name)+"\n                ")])])]):t._e(),t._v(" "),t.item.unit?[r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$tc("unit")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v(t._s(t.item.unit.name)+" ("+t._s(t.item.unit.code)+")")])])])]:t._e(),t._v(" "),"recipe"==t.item.type&&t.item.portions?[r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$tc("portion",2)))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell",staticStyle:{margin:"5px 0"}},t._l(t.item.portions,(function(e){return r("div",{key:e.id},[r("div",[r("strong",[t._v(t._s(t.$t(e.name)))]),t._v(" "),r("div",t._l(e.portion_items,(function(e,s){return r("div",{key:e.id,staticStyle:{"padding-left":"16px"}},[t._v("\n                            #"+t._s(s+1)+" ⇢ "+t._s(e.item.name)+" ↣ "+t._s(t.$t("qty"))+" "+t._s(t.formatQuantity(e.quantity))+"\n                            ")])})),0)])])})),0)])])]:t._e(),t._v(" "),"combo"==t.item.type&&t.item.portions?[r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$tc("portion",2)))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell",staticStyle:{margin:"5px 0"}},t._l(t.item.portions,(function(e){return r("div",{key:e.id},[r("div",[r("strong",[t._v(t._s(t.$t(e.name)))]),t._v(" ("+t._s(t.$t("price"))+" "+t._s(t.formatNumber(e.price))+")\n                        "),r("div",t._l(e.essentials,(function(e,s){return r("div",{key:e.id,staticStyle:{"padding-left":"16px"}},[t._v("\n                            #"+t._s(s+1)+" ⇢ "+t._s(e.item.name)+" ↣ "+t._s(t.$t("qty"))+" "+t._s(t.formatQuantity(e.quantity))+"\n                            ")])})),0),t._v(" "),r("div",t._l(e.choosables,(function(s,a){return r("div",{key:s.id,staticStyle:{"padding-left":"16px"}},[t._v("\n                            #"+t._s(e.essentials.length+a+1)+" ⇢ "+t._s(s.name)+"\n                            "),t._l(s.items,(function(e,s){return r("div",{key:e.id,staticStyle:{"padding-left":"16px"}},[r("small",[t._v("\n                                #"+t._s(s+1)+" ⇢ "+t._s(e.item.name)+" ↣ "+t._s(t.$t("qty"))+"\n                                "+t._s(t.formatQuantity(e.quantity))+"\n                                ")])])}))],2)})),0)])])})),0)])])]:t._e(),t._v(" "),t.item.taxes&&t.item.taxes.length?[r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$tc("tax",2)))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v("\n                    "+t._s(t.item.taxes.map((function(t){return t.name})).join(", "))+"\n                  ")])])]),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$tc("tax_method")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[1==t.item.tax_included?r("div",{staticClass:"ivu-tag ivu-tag-success ivu-tag-border ivu-tag-checked"},[r("span",{staticClass:"ivu-tag-text ivu-tag-color-success"},[t._v(t._s(t.$t("inclusive")))])]):r("div",{staticClass:"ivu-tag ivu-tag-primary ivu-tag-border ivu-tag-checked"},[r("span",{staticClass:"ivu-tag-text ivu-tag-color-primary"},[t._v(t._s(t.$t("exclusive")))])])])])])]:t._e(),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("misc")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell",staticStyle:{margin:"5px 0"}},[r("div",[1==t.item.changeable?r("Icon",{attrs:{type:"md-checkmark",size:"16",color:"#19be6b"}}):r("Icon",{attrs:{type:"md-close",size:"16",color:"#ed4014"}}),t._v("\n                    "+t._s(t.$t("allow_price_change"))+"\n                  ")],1),t._v(" "),"standard"==t.item.type?r("div",[1==t.item.has_variants?r("Icon",{attrs:{type:"md-checkmark",size:"16",color:"#19be6b"}}):r("Icon",{attrs:{type:"md-close",size:"16",color:"#ed4014"}}),t._v("\n                    "+t._s(t.$t("item_has_variants"))+"\n                  ")],1):t._e(),t._v(" "),"standard"==t.item.type?r("div",[1==t.item.has_serials?r("Icon",{attrs:{type:"md-checkmark",size:"16",color:"#19be6b"}}):r("Icon",{attrs:{type:"md-close",size:"16",color:"#ed4014"}}),t._v("\n                    "+t._s(t.$t("item_has_serial"))+"\n                  ")],1):t._e()])])]),t._v(" "),t.item.is_stock&&"standard"==t.item.type&&t.item.stock?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("current_stock")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell",staticStyle:{margin:"5px 0"}},t._l(t.item.stock,(function(e){return r("div",{key:e.id},[r("div",[t._v("\n                      "+t._s(e.location.name)+": "),r("strong",[t._v(t._s(t.formatQuantity(e.quantity)))]),t._v(" "),t.item.unit?r("span",[t._v(t._s(t.item.unit.name))]):t._e()])])})),0)])]):t._e(),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("created_at")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell",staticStyle:{margin:"5px 0"}},[t._v(t._s(t.datetime(t.item.created_at)))])])]),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("updated_at")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell",staticStyle:{margin:"5px 0"}},[t._v(t._s(t.datetime(t.item.updated_at)))])])]),t._v(" "),t.item.summary?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("summary")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell",staticStyle:{margin:"5px 0"}},[t._v(t._s(t.item.summary))])])]):t._e(),t._v(" "),t.item.details?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("details")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell",staticStyle:{margin:"5px 0"}},[t._v(t._s(t.item.details))])])]):t._e()],2)])])])])]):t._e()}),[],!1,null,null,null).exports},30396:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>y});var s=r(48921),a=r(23279);function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const d={props:{pportions:{type:Array,required:!0},loading:{type:Boolean,required:!0}},data:function(){var t=this;return{local:[],result:[],portions:[],group:!1,costV:function(e,r,s){r&&parseFloat(r)<parseFloat(t.minCost)?s(new Error(t.$t("min_cost_error",{min:parseFloat(t.minCost)}))):s()},minCost:null,saving:!1,option:!1,priceV:function(e,r,s){r&&parseFloat(r)<parseFloat(t.minCost)?s(new Error(t.$t("min_price_error",{min:parseFloat(t.minCost)}))):s()},sloading:!1,searching:!1,can_search:!1,form:{},current:{name:""},errors:{message:"",form:{portions:[{price:null}]}},portionRules:{name:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("name")})}]},rules:{}}},created:function(){var t=this;this.pportions?(this.pportions.map((function(e){e.portion_items.map((function(e){return e.item?t.local.push(l(l({},e.item),{},{value:e.item_id,label:e.item.name})):t.local.push(l(l({},e),{},{value:e.item_id,label:e.name}))}))})),this.result=i(this.local),this.form.portions=this.pportions.map((function(e,r){return e.cost=e.cost?parseFloat(e.cost):null,e.price=e.price?parseFloat(e.price):null,e.portion_items&&e.portion_items.length&&(e.portion_items=e.portion_items.map((function(t){return t.quantity=t.quantity?parseFloat(t.quantity):null,t.item&&(t.id=t.item.id,t.sku=t.item.sku,t.name=t.item.name,t.cost=t.item.cost,t.item_id=t.item.id,delete t.item),t}))),t.errors.form.portions[r]||(t.errors.form.portions[r]={}),t.errors.form.portions[r].cost="",t.errors.form.portions[r].price="",t.errors.form.portions[r].item=[],e}))):this.form.portions=[{sku:this.sku(),name:this.$t("regular"),portion_items:[{name:"",item_id:null,quantity:1}],cost:null,price:null}],this.can_search=!0},methods:{modalChanged:function(t){t?window&&this.$nextTick((function(){document.querySelector("#portion_name").focus()})):this.$refs.current.resetFields()},addPortion:function(){var t=this;this.$refs.current.validate((function(e){if(e){if(t.current.name){var r=t.form.portions.find((function(t){return"regular"==t.name})),s={cost:null,price:null,sku:t.sku(),name:t.current.name,portion_items:r.portion_items.map((function(t){return l({},t)}))};t.form.portions.push(s),t.errors.form.portions.push({price:null}),t.$refs.current.resetFields(),t.option=!1}}else t.$Notice.error({title:t.$t("invalid_input"),desc:t.$t("invalid_input_error"),duration:10})}))},addItemRow:function(){this.form.portions=this.form.portions.map((function(t){return t.portion_items.push({quantity:1}),t}))},deleteItemRow:function(t){this.form.portions=this.form.portions.map((function(e){return e.portion_items.splice(t,1),e}))},removePortion:function(t){var e=this;this.form.portions.splice(t,1),this.saving=!0,this.$nextTick((function(){return e.saving=!1}))},itemChanged:function(t,e,r){if(t){var s=this.result.find((function(e){return e.id==t}));e.portion_items=e.portion_items.map((function(e){return e.item_id==t&&(e.cost=s.cost,e.name=s.name,e.item_name=s.name),e}))}this.portionCost(e,r)},portionCost:function(t,e){return t.portion_items.reduce((function(t,e){return t+(e.cost?parseFloat(e.cost)*parseFloat(e.quantity):0)}),0)},searchItems:function(t){this.can_search&&(""===(t=t.trim())||this.result.find((function(e){return e.id==t||e.name==t}))||this.getItems(t,this))},getItems:r.n(a)()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/items/search?cost=yes&q="+t).then((function(t){e.result=t.data,e.result=[].concat(i(e.result),i(e.local))})).finally((function(){return e.searching=!1}))}),search_delay||250),goToStep:function(t){this.$emit("portions-changed",this.form.portions),this.$emit("step-changed",t)},onReset:function(){this.$emit("on-reset"),this.$emit("step-changed",0)},onSubmit:function(t,e){var r=this,s=!1;this.form.portions.map((function(t,e){if(null===t.cost&&(s=!0,r.errors.form.portions[e].cost=r.$t("field_is_required",{field:r.$t("cost")})),null===t.price&&(s=!0,r.errors.form.portions[e].price=r.$t("field_is_required",{field:r.$t("price")})),t.portion_items&&t.portion_items.length){var a=[];t.portion_items.map((function(t){t.item_id||(s=!0,a.push(r.$t("field_is_required",{field:r.$tc("item")+(e+1)}))),t.quantity||(s=!0,a.push(r.$t("field_is_required",{field:r.$tc("item")+(e+1)+"("+r.$t("quantity")+")"})))})),r.errors.form.portions[e].item=a}})),s||this.$refs.portionsForm.validate((function(s){s?(r.$emit("portions-changed",r.form.portions),r.$nextTick((function(){r.$emit("on-submit",{page:t,stay:e})}))):r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10})}))}}};var u=r(51900);const m=(0,u.Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{ref:"portionsForm",attrs:{model:t.form,"label-position":"top"}},[r("div",{staticClass:"mb16"},[r("Row",{attrs:{gutter:16}},t._l(t.form.portions,(function(e,s){return r("Col",{key:"portion_"+s,attrs:{sm:24,md:12,lg:12}},[r("Card",{staticStyle:{"margin-bottom":"16px","line-height":"1em"},attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s("regular"==e.name?t.$t("regular"):e.name))]),t._v(" "),r("span",{attrs:{slot:"extra"},slot:"extra"},[s?r("Button",{attrs:{slot:"extra",size:"small",type:"error"},on:{click:function(e){return t.removePortion(s)}},slot:"extra"},[r("Icon",{attrs:{type:"ios-trash"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("delete_x",{x:t.$tc("portion")})))])],1):r("Button",{attrs:{size:"small",type:"success"},on:{click:function(e){t.option=!0}}},[r("Icon",{attrs:{type:"ios-options"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("add_x",{x:t.$tc("portion")})))])],1),t._v(" "),s?t._e():r("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.addItemRow()}}},[r("Icon",{attrs:{type:"ios-add-circle"}}),t._v(" "),r("span",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("add_x",{x:t.$tc("item")})))])],1)],1),t._v(" "),r("div",{staticClass:"variant-table"},[r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",[t._v(t._s(t.$t("name")))]),t._v(" "),r("th",[t._v(t._s(t.$t("quantity")))]),t._v(" "),r("th",{staticStyle:{padding:"0","max-width":"40px","min-width":"40px",width:"40px"}},[r("icon",{attrs:{type:"md-trash"}})],1)])]),t._v(" "),r("tbody",t._l(e.portion_items,(function(a,i){return r("tr",{key:"item_"+i},[r("td",{attrs:{width:"70%"}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",label:a.name,loading:t.searching,"remote-method":t.searchItems},on:{"on-change":function(r){return t.itemChanged(r,e,s)}},model:{value:a.item_id,callback:function(e){t.$set(a,"item_id",e)},expression:"item.item_id"}},t._l(t.result,(function(t,e){return r("Option",{key:"item_"+e,attrs:{value:t.id,label:t.name}})})),1)],1),t._v(" "),r("td",[r("InputNumber",{on:{"on-change":function(r){return t.itemChanged(null,e,s)}},model:{value:a.quantity,callback:function(e){t.$set(a,"quantity",e)},expression:"item.quantity"}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:a.cost,expression:"item.cost"}],attrs:{type:"hidden"},domProps:{value:a.cost},on:{input:function(e){e.target.composing||t.$set(a,"cost",e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:a.name,expression:"item.name"}],attrs:{type:"hidden"},domProps:{value:a.name},on:{input:function(e){e.target.composing||t.$set(a,"name",e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:a.item_name,expression:"item.item_name"}],attrs:{type:"hidden"},domProps:{value:a.item_name},on:{input:function(e){e.target.composing||t.$set(a,"item_name",e.target.value)}}})],1),t._v(" "),r("td",{staticClass:"text-center"},[i?r("Icon",{staticClass:"pointer",attrs:{size:"16",color:"#ed3f14",type:"md-trash"},on:{click:function(e){return t.deleteItemRow(i)}}}):t._e()],1)])})),0)])]),t._v(" "),t.errors.form.portions[s]&&t.errors.form.portions[s].item&&t.errors.form.portions[s].item.length?r("Alert",{staticClass:"mt16",attrs:{type:"error"},domProps:{innerHTML:t._s(t.errors.form.portions[s].item.join("<br />"))}}):t._e(),t._v(" "),r("Row",{staticClass:"mt16",attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("cost"),prop:"portions."+s+".cost",error:t.errors.form.portions[s].cost,rules:{validator:t.costV,type:"number",trigger:"change"}}},[r("InputNumber",{model:{value:e.cost,callback:function(r){t.$set(e,"cost",r)},expression:"portion.cost"}}),t._v(" "),r("small",[t._v(t._s(t.$t("min_cost_error",{min:t.portionCost(e,s)})))])],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("price"),prop:"portions."+s+".price",error:t.errors.form.portions[s].price,rules:{validator:t.priceV,type:"number",trigger:"change"}}},[r("InputNumber",{model:{value:e.price,callback:function(r){t.$set(e,"price",r)},expression:"portion.price"}})],1)],1)],1)],1)],1)})),1)],1),t._v(" "),r("div",{staticClass:"mb16"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.onSubmit("items")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.onSubmit("items",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning",ghost:""},on:{click:function(e){return t.goToStep(0)}}},[t._v("\n        "+t._s(t.$t("back"))+"\n      ")]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"error",ghost:""},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)]),t._v(" "),r("Modal",{attrs:{"footer-hide":"",width:"300",title:t.$t("add_x",{x:t.$tc("portion")})},on:{"on-visible-change":t.modalChanged},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[r("Form",{ref:"current",attrs:{model:t.current,rules:t.portionRules,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.addPortion.apply(null,arguments)}}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name"}},[r("Input",{attrs:{placeholder:t.$t("name"),"element-id":"portion_name"},model:{value:t.current.name,callback:function(e){t.$set(t.current,"name",e)},expression:"current.name"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",long:""},on:{click:t.addPortion}},[t._v(t._s(t.$t("add")))])],1)],1)],1)],1)}),[],!1,null,null,null).exports;function p(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=function(t,e){return t.attributes&&(e.attributes=t.attributes,delete t.attributes),t.extra_attributes=e.formatAttributes(e.attributes,t.extra_attributes),t.images=[],delete t.photo,t.location_stock&&delete t.location_stock,t.valid_promotions&&delete t.valid_promotions,t.cost=parseFloat(t.cost),t.price=parseFloat(t.price),t.category_id=t.categories[0].id,t.sku=t.sku?t.sku:e.sku(),t.max_price=t.max_price?parseFloat(t.max_price):null,t.min_price=t.min_price?parseFloat(t.min_price):null,t.max_discount=t.max_discount?parseFloat(t.max_discount):null,t.taxes=t.taxes.map((function(t){return t.id})),t.modifiers||(t.modifiers=[]),t.items||(t.items=[]),t.portions||(t.portions=[{sku:e.sku(),name:"regular",portion_items:[],cost:null,price:null}]),t.modifiers=t.modifiers.map((function(t){return t.id})),t.items=t.items.map((function(t){return t.id})),t.portions=t.portions.map((function(t){return t.cost=t.cost?parseFloat(t.cost):null,t.price=t.price?parseFloat(t.price):null,t.portion_items&&t.portion_items.length?t.portion_items=t.portion_items.map((function(t){return e.result.push(t.item),t.item_name=t.item.name,t.cost=parseFloat(t.item.cost),t.quantity=t.quantity?parseFloat(t.quantity):null,t})):t.portion_items=[],e.errors.form.portions.push({price:null}),t})),e.attributes.filter((function(t){return"number"==t.type})).map((function(e){t.extra_attributes[e.slug]=t.extra_attributes[e.slug]?parseFloat(t.extra_attributes[e.slug]):null})),e.form=v(v({},t),t.extra_attributes),e.form};const b={components:{RecipePortionComponent:m},mixins:[(0,s.Z)("item","app/items",!0,g,"recipes")],data:function(){return{step:0,taxes:[],result:[],photo:null,option:!1,modifiers:[],categories:[],attributes:[],new_photo:null,sloading:!1,searching:!1,form:{id:"",code:"",name:"",stock:{},taxes:[],cost:null,details:"",photo:null,summary:"",images:[],video:null,price:null,is_stock:0,alt_name:"",weight:null,changeable:0,modifiers:[],dimensions:"",type:"recipe",has_serials:0,has_variants:0,min_price:null,max_price:null,sku:this.sku(),tax_included:"",category_id:null,supplier_id:null,max_discount:null,supplier_item_id:"",portions:[{sku:this.sku(),name:"regular",portion_items:[{name:"",item_id:null,quantity:1}],cost:null,price:null}]},current:{name:""},rules:{type:[{required:!0,message:this.$t("field_is_required",{field:this.$t("type")}),trigger:"change"}],name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}],code:[{required:!0,message:this.$t("field_is_required",{field:this.$t("code")}),trigger:"blur"},{required:!0,trigger:["blur","change"],pattern:/^([a-zA-Z0-9-_]{2,25})$/,message:this.$t("alpha_dash_error")}],category_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("category")}),trigger:"change"}],symbology:[{required:!0,message:this.$t("field_is_required",{field:this.$t("symbology")}),trigger:"change"}],taxes:[{type:"array",trigger:"change",message:this.$t("field_are_required",{field:this.$tc("tax",2)})}]},variantRules:{quantity:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("quantity")}),trigger:"blur"}],name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}]}}},created:function(){var t=this;this.$http.get("app/taxes/search").then((function(e){return t.taxes=e.data})),this.$http.get("app/modifiers/search").then((function(e){return t.modifiers=e.data})),this.$http.get("app/all_categories/search").then((function(e){return t.categories=t.flattenDeep(e.data)})),this.errors.form.portions=[{}]},methods:{create:function(){var t=this;this.$http.get("app/items/create").then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t){var e=this;this.$http.get("app/items/".concat(t)).then((function(t){return e.form=g(t.data,e)})).finally((function(){return e.loading=!1}))},goToStep:function(t,e){var r=this;this.sloading=!0,1==t&&e?this.$refs.item.validate((function(e){e?(r.step=parseInt(t),r.sloading=!1,window.scrollTo(0,0)):(r.sloading=!1,r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10}))})):(window.scrollTo(0,0),this.sloading=!1,this.step=parseInt(t))},handleImages:function(t){var e=new FileReader;return this.form.images.push(t),e.readAsDataURL(t),!1},deleteImage:function(t){this.form.images.splice(t,1)},handleUpload:function(t){var e=this,r=new FileReader;return r.addEventListener("load",(function(){return e.new_photo=r.result}),!1),this.form.photo=t,r.readAsDataURL(t),!1},clearPhoto:function(){this.new_photo=null,this.form.photo=null},portionsChanged:function(t){this.form.portions=t},onSubmit:function(t){this.submit(t.page,t.stay)},submit:function(t,e){var r=this,s="app/items",a="added";this.errors.message="";var i="record_added";this.form.id&&""!=this.form.id&&(a="updated",s="app/items/"+this.form.id,i="record_updated",this.form._method="PUT");var o=this.form.portions.find((function(t){return"regular"==t.name}));this.form.cost=o.cost,this.form.price=o.price;var n=v({},this.form);if(this.attributes.length>0){var l=this.attributes.map((function(t){var e={};return delete n[t.slug],e[t.slug]=r.form[t.slug],e}));n.extra_attributes=Object.assign.apply(Object,p(l))}n.portions=n.portions.map((function(t){return t.portion_items=t.portion_items.map((function(t){return{item_id:t.item_id,quantity:t.quantity}})),t})),n=this.$form(n),this.$http.post(s,n).then((function(s){s.data.success?(r.$Notice.destroy(),r.$Notice.success({title:r.$tc("item")+" "+r.$t(a),desc:r.$t(i)}),e?("updated"==a||r.handleReset(),r.step=0):r.$router.push({name:t+".recipes.list"})):r.$Notice.error({title:r.$t("failed"),desc:r.$t("failed_error_text")})})).catch((function(t){return r.errors=t})).finally((function(){return r.loading=!1}))}}};const y=(0,u.Z)(b,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("recipe")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/items/recipes"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("recipe",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"item",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),r("div",{staticStyle:{margin:"-16px -16px 16px -16px","border-bottom":"1px solid #e8eaec",padding:"16px"}},[r("Steps",{attrs:{current:t.step,status:"wait"}},[r("Step",{attrs:{title:t.$t("general_step"),content:t.$t("general_step_text")}}),t._v(" "),r("Step",{attrs:{title:t.$t("variations_step"),content:t.$t("variations_step_text")}})],1)],1),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),0==t.step?r("div",[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("code"),prop:"code",error:t._f("a2s")(t.errors.form.code)}},[r("Input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),t._v(" "),r("small",[t._v(t._s(t.$t("item_code_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("symbology"),prop:"symbology",error:t._f("a2s")(t.errors.form.symbology)}},[r("Select",{model:{value:t.form.symbology,callback:function(e){t.$set(t.form,"symbology",e)},expression:"form.symbology"}},[r("Option",{attrs:{value:"code128"}},[t._v("Code128")]),t._v(" "),r("Option",{attrs:{value:"code39"}},[t._v("Code39")]),t._v(" "),r("Option",{attrs:{value:"ean5"}},[t._v("EAN5")]),t._v(" "),r("Option",{attrs:{value:"ean8"}},[t._v("EAN8")]),t._v(" "),r("Option",{attrs:{value:"ean13"}},[t._v("EAN13")]),t._v(" "),r("Option",{attrs:{value:"upce"}},[t._v("UPC (E)")]),t._v(" "),r("Option",{attrs:{value:"upca"}},[t._v("UPC (A)")])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("category"),prop:"category_id",error:t._f("a2s")(t.errors.form.category_id)}},[r("Select",{model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categories,(function(e){return r("Option",{key:e.value,attrs:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                      ")])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("taxes"),prop:"taxes",error:t._f("a2s")(t.errors.form.taxes)}},[r("Select",{attrs:{filterable:"",multiple:""},model:{value:t.form.taxes,callback:function(e){t.$set(t.form,"taxes",e)},expression:"form.taxes"}},t._l(t.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                      ")])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("sku"),prop:"sku",error:t._f("a2s")(t.errors.form.sku)}},[r("Input",{attrs:{readonly:""},model:{value:t.form.sku,callback:function(e){t.$set(t.form,"sku",e)},expression:"form.sku"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("alt_name"),prop:"alt_name",error:t._f("a2s")(t.errors.form.alt_name)}},[r("Input",{model:{value:t.form.alt_name,callback:function(e){t.$set(t.form,"alt_name",e)},expression:"form.alt_name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("hsn_number"),prop:"hsn_number",error:t._f("a2s")(t.errors.form.hsn_number)}},[r("Input",{model:{value:t.form.hsn_number,callback:function(e){t.$set(t.form,"hsn_number",e)},expression:"form.hsn_number"}})],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{prop:"max_discount",label:t.$t("max_discount"),error:t._f("a2s")(t.errors.form.max_discount)}},[r("InputNumber",{attrs:{formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")}},model:{value:t.form.max_discount,callback:function(e){t.$set(t.form,"max_discount",e)},expression:"form.max_discount"}}),t._v(" "),r("small",[t._v(t._s(t.$t("max_discount_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("modifier",2),prop:"modifier",error:t._f("a2s")(t.errors.form.modifier)}},[r("Select",{attrs:{clearable:"",multiple:""},model:{value:t.form.modifiers,callback:function(e){t.$set(t.form,"modifiers",e)},expression:"form.modifiers"}},t._l(t.modifiers,(function(e){return r("Option",{key:"modifier_"+e.value,attrs:{value:e.value}},[t._v("\n                        "+t._s(e.label)+"\n                      ")])})),1)],1)],1)],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",{attrs:{label:t.$tc("photo"),prop:"photo",error:t._f("a2s")(t.errors.form.photo)}},[r("Upload",{attrs:{"before-upload":t.handleUpload,"max-size":1024,action:"",accept:".png, .jpeg, .jpg, .gif"}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v(t._s(t.$t("select_x",{x:t.$t("photo")})))])],1),t._v(" "),t.photo||t.new_photo?r("div",{staticClass:"primary",staticStyle:{"margin-bottom":"16px"}},[t.form.photo?r("span",[r("span",{staticStyle:{margin:"10px 10px 10px 0"}},[t._v(t._s(t.$t("selected_file"))+": "+t._s(t.form.photo.name))]),t._v(" "),r("Button",{attrs:{type:"error",shape:"circle",size:"small",icon:"ios-trash"},on:{click:function(e){return t.clearPhoto()}}})],1):t._e(),t._v(" "),r("br"),t._v(" "),t.photo||t.new_photo?r("img",{staticStyle:{"max-width":"160px","max-height":"110px","border-radius":"4px 4px 0 0"},attrs:{alt:"photo",src:t.new_photo?t.new_photo:t.photo}}):t._e()]):t._e()],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("gallery_images"),prop:"images",error:t._f("a2s")(t.errors.form.images)}},[r("Upload",{attrs:{multiple:"","before-upload":t.handleImages,"max-size":2048,action:"",accept:".png, .jpeg, .jpg"}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("\n                    "+t._s(t.$t("select_x",{x:t.$t("gallery_images")}))+"\n                  ")])],1),t._v(" "),t.form.images.length?[r("span",{staticStyle:{margin:"10px 10px 10px 0"}},[t._v(t._s(t.$t("selected_file")))]),t._v(" "),t._l(t.form.images,(function(e,s){return r("span",{key:"gallery_"+s,staticClass:"primary",staticStyle:{margin:"0 16px 16px 0"}},[t._v("\n                    "+t._s(s+1)+". "+t._s(e.name)+"\n                    "),r("Button",{attrs:{type:"error",shape:"circle",size:"small",icon:"ios-trash"},on:{click:function(e){return t.deleteImage(s)}}})],1)}))]:t._e()],2),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("video_url"),prop:"video",error:t._f("a2s")(t.errors.form.video)}},[r("Input",{model:{value:t.form.video,callback:function(e){t.$set(t.form,"video",e)},expression:"form.video"}}),t._v(" "),r("small",[t._v(t._s(t.$t("video_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("summary"),prop:"summary",error:t._f("a2s")(t.errors.form.summary)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),t._v(" "),r("FormItem",{staticStyle:{"margin-bottom":"16px"},attrs:{prop:"details",label:t.$t("details"),error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:12}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.sloading},on:{click:function(e){return t.goToStep(1,!0)}}},[t._v(t._s(t.$t("next")))])],1)],1):1==t.step?r("div",[r("div",{staticClass:"mb16"},[r("recipe-portion-component",{attrs:{loading:t.loading,pportions:t.form.portions},on:{"on-submit":t.onSubmit,"step-changed":t.goToStep,"portions-changed":t.portionsChanged,"on-reset":function(e){return t.goToStep(0,!1,!0)}}})],1)]):t._e()],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},40175:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var s=r(7174),a=r.n(s),i=r(92704);const o={components:{ItemViewComponent:r(487).Z,VueBarcode:a()},mixins:[(0,i.Z)("item","app/items","name","code","recipes")],data:function(){var t=this;return{row:{},view:!1,barModal:!1,barcodeSVG:null,columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("name"),sortable:!0,key:"name",width:200},{title:this.$t("code"),sortable:!0,key:"code",sortType:"asc",minWidth:150},{title:this.$t("cost"),sortable:!0,key:"cost",minWidth:125,render:this.renderCost},{title:this.$t("price"),sortable:!0,key:"price",minWidth:125,render:this.renderPrice},{title:this.$t("alt_name"),sortable:!0,key:"alt_name",minWidth:175},{title:this.$tc("category"),sortable:!1,key:"categories",minWidth:175,render:this.renderCategory},{title:this.$tc("taxes"),sortable:!1,key:"taxes",minWidth:200,render:this.renderTaxes},{title:this.$tc("portion",2),sortable:!1,key:"portions",minWidth:200,render:this.renderPortion},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("changeable"),sortable:!0,key:"changeable",minWidth:120,render:this.renderChangeable},{title:this.$t("min_price"),sortable:!0,key:"min_price",minWidth:150,render:this.renderMinPrice},{title:this.$t("max_price"),sortable:!0,key:"max_price",minWidth:150,render:this.renderMaxPrice},{title:this.$t("max_discount"),sortable:!0,key:"max_discount",minWidth:150,render:this.renderMaxDiscount},{title:this.$t("summary"),sortable:!0,key:"summary",ellipsis:!0,minWidth:400},{title:this.$t("created_at"),sortable:!0,key:"created_at",minWidth:175,render:this.renderCreatedAt},{title:this.$t("updated_at"),sortable:!0,key:"updated_at",minWidth:175,render:this.renderUpdatedAt},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,editFn:t.editRecord,labelFn:t.labelModal,deleteFn:t.deleteRecord,record:{model:"item",name:"name"}}})}}],options:{orderBy:"code",perPage:this.$store.state.settings.rows}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},mounted:function(){this.$store.getters.stock||(this.columns=this.columns.filter((function(t){return"stock"!=t.key})))},methods:{showInfo:function(t){this.row=t,this.view=!0},labelModal:function(t){var e=this;this.row=t,this.barModal=!0,this.barcodeSVG=this.$store.state.settings.svg_string.replace("--- Item Name ---",this.row.name).replace("--- Other info for item. ---",this.row.alt_name).replace("--- Price: 1,000.00 ---",this.$t("price")+": "+this.formatNumber(this.row.price)),this.$nextTick((function(){document.getElementById("replace-barcode").innerHTML="",document.getElementById("replace-barcode").removeAttribute("transform");var t=document.getElementById("drawBarcode").childNodes[0].cloneNode(!0);document.getElementById("replace-barcode").setAttribute("transform","matrix(1 0 0 1 10 "+(e.$store.state.settings.label_height-60)+")"),document.getElementById("replace-barcode").appendChild(t),1==e.$store.getters.settings.print_dialog&&setTimeout((function(){window.print()}),400)}))},print:function(){window.print()},renderChangeable:function(t,e){return this.renderBoolean(t,e,"changeable")},renderMinPrice:function(t,e){return this.renderNumber(t,e,"min_price")},renderPortion:function(t,e){var r=this;return t("div",[e.row.portions.map((function(t){return r.$t(t.name)})).join(", ")])},renderMaxPrice:function(t,e){return this.renderNumber(t,e,"max_price")},renderMaxDiscount:function(t,e){return this.renderNumber(t,e,"max_discount")},renderCategory:function(t,e){return t("div",[e.row.categories.map((function(t){return t.name})).join("")])},renderCost:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.location_stock.length>0&&e.row.location_stock[0].cost?e.row.location_stock[0].cost:e.row.cost,this.$store.getters.settings.decimals)])},renderPrice:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.location_stock.length>0&&e.row.location_stock[0].price?e.row.location_stock[0].price:e.row.price,this.$store.getters.settings.decimals)])},renderStock:function(t,e){return t("div",{class:"text-center"},[e.row.location_stock.length>0?this.$options.filters.formatNumber(e.row.location_stock[0].quantity,this.$store.getters.settings.decimals):this.$options.filters.formatNumber(e.row.stock.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),this.$store.getters.settings.decimals)])},renderRack:function(t,e){return t("div",[e.row.location_stock.length>0&&e.row.location_stock[0].rack?e.row.location_stock[0].rack:e.row.location])},renderTaxMethod:function(t,e){return 1==e.row.tax_included?t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-success ivu-tag-border ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-success"},[this.$t("inclusive")])])]):t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-primary ivu-tag-border ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-primary"},[this.$t("exclusive")])])])},renderTaxes:function(t,e){return t("div",[e.row.taxes.map((function(t){return t.name})).join(", ")])}}};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("recipe",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/items/recipes/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add_x",{x:t.$tc("recipe")}))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/items?type=recipe",columns:t.columns,options:t.options,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"500","footer-hide":!0,"mask-closable":!1,title:t.$t("print_x",{x:t.$t("barcode")})},model:{value:t.barModal,callback:function(e){t.barModal=e},expression:"barModal"}},[r("div",{staticClass:"label text-center",domProps:{innerHTML:t._s(t.barcodeSVG)}}),t._v(" "),r("div",{staticClass:"np"},[r("Divider",{attrs:{dashed:""}}),t._v(" "),r("div",{staticClass:"text-center",staticStyle:{display:"none"}},[r("vue-barcode",{attrs:{width:1,margin:0,height:30,fontSize:12,"margin-top":0,id:"drawBarcode",value:t.row.code,"margin-bottom":4,format:t.row.symbology}},[t._v("\n          "+t._s(t.$t("barcode_error"))+"\n        ")])],1),t._v(" "),r("Alert",{domProps:{innerHTML:t._s(t.$t("label_print_instructions"))}}),t._v(" "),r("Button",{staticClass:"np",attrs:{type:"primary",icon:"ios-print",long:""},on:{click:function(e){return t.print()}}},[t._v(t._s(t.$t("print")))])],1)]),t._v(" "),r("Modal",{attrs:{"footer-hide":"",scrollable:"",width:750},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("\n        "+t._s(t.row.name)+"\n        ("+t._s(t.row.code)+")\n      ")])]),t._v(" "),r("item-view-component",{attrs:{item:t.row}})],1)],1)}),[],!1,null,null,null).exports},74905:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>u});var s=r(48921);r(23279);function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(t,e){return t.attributes&&(e.attributes=t.attributes,delete t.attributes),t.extra_attributes=e.formatAttributes(e.attributes,t.extra_attributes),t.images=[],delete t.photo,t.location_stock&&delete t.location_stock,t.valid_promotions&&delete t.valid_promotions,t.cost=parseFloat(t.cost),t.price=parseFloat(t.price),t.category_id=t.categories[0].id,t.sku=t.sku?t.sku:e.sku(),t.max_price=t.max_price?parseFloat(t.max_price):null,t.min_price=t.min_price?parseFloat(t.min_price):null,t.max_discount=t.max_discount?parseFloat(t.max_discount):null,t.taxes=t.taxes.map((function(t){return t.id})),t.modifiers||(t.modifiers=[]),t.modifiers=t.modifiers.map((function(t){return t.id})),e.attributes.filter((function(t){return"number"==t.type})).map((function(e){t.extra_attributes[e.slug]=t.extra_attributes[e.slug]?parseFloat(t.extra_attributes[e.slug]):null})),e.form=n(n({},t),t.extra_attributes),e.form};const d={mixins:[(0,s.Z)("item","app/items",!0,c,"services")],data:function(){var t=this,e=function(e,r,s){r&&parseFloat(r)<parseFloat(t.minCost)?s(new Error(t.$t("min_cost_error",{min:parseFloat(t.minCost)}))):s()},r=function(e,r,s){r&&parseFloat(r)<parseFloat(t.minCost)?s(new Error(t.$t("min_price_error",{min:parseFloat(t.minCost)}))):s()};return{step:0,taxes:[],photo:null,costV:e,option:!1,modifiers:[],priceV:r,categories:[],attributes:[],new_photo:null,sloading:!1,searching:!1,minCost:null,form:{id:"",code:"",name:"",stock:{},taxes:[],cost:null,details:"",photo:null,summary:"",images:[],video:null,price:null,is_stock:0,alt_name:"",weight:null,changeable:0,modifiers:[],dimensions:"",type:"service",has_serials:0,has_variants:0,min_price:null,max_price:null,sku:this.sku(),tax_included:"",category_id:null,supplier_id:null,max_discount:null,supplier_item_id:""},current:{name:""},rules:{type:[{required:!0,message:this.$t("field_is_required",{field:this.$t("type")}),trigger:"change"}],name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}],code:[{required:!0,message:this.$t("field_is_required",{field:this.$t("code")}),trigger:"blur"},{required:!0,trigger:["blur","change"],pattern:/^([a-zA-Z0-9-_]{2,25})$/,message:this.$t("alpha_dash_error")}],category_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("category")}),trigger:"change"}],symbology:[{required:!0,message:this.$t("field_is_required",{field:this.$t("symbology")}),trigger:"change"}],taxes:[{type:"array",trigger:"change",message:this.$t("field_are_required",{field:this.$tc("tax",2)})}],cost:[{required:!0,type:"number",trigger:["change","blur"],message:this.$t("field_is_required",{field:this.$t("cost")})},{validator:e,type:"number",trigger:["change","blur"]}],price:[{required:!0,type:"number",trigger:["change","blur"],message:this.$t("field_is_required",{field:this.$t("price")})},{validator:r,type:"number",trigger:["change","blur"]}]}}},created:function(){var t=this;this.$http.get("app/taxes/search").then((function(e){return t.taxes=e.data})),this.$http.get("app/modifiers/search").then((function(e){return t.modifiers=e.data})),this.$http.get("app/all_categories/search").then((function(e){return t.categories=t.flattenDeep(e.data)}))},methods:{create:function(){var t=this;this.$http.get("app/items/create").then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t){var e=this;this.$http.get("app/items/".concat(t)).then((function(t){return e.form=c(t.data,e)})).finally((function(){return e.loading=!1}))},handleImages:function(t){var e=new FileReader;return this.form.images.push(t),e.readAsDataURL(t),!1},deleteImage:function(t){this.form.images.splice(t,1)},handleUpload:function(t){var e=this,r=new FileReader;return r.addEventListener("load",(function(){return e.new_photo=r.result}),!1),this.form.photo=t,r.readAsDataURL(t),!1},clearPhoto:function(){this.new_photo=null,this.form.photo=null},submit:function(t,e){var r=this;this.$refs.item.validate((function(s){if(s){var i="app/items",o="added";r.errors.message="";var l="record_added";r.form.id&&""!=r.form.id&&(o="updated",i="app/items/"+r.form.id,l="record_updated",r.form._method="PUT");var c=n({},r.form);if(r.attributes.length>0){var d=r.attributes.map((function(t){var e={};return delete c[t.slug],e[t.slug]=r.form[t.slug],e}));c.extra_attributes=Object.assign.apply(Object,a(d))}c=r.$form(c),r.$http.post(i,c).then((function(s){s.data.success?(r.$Notice.destroy(),r.$Notice.success({title:r.$tc("item")+" "+r.$t(o),desc:r.$t(l)}),e?"updated"==o||r.handleReset():r.$router.push({name:t+".services.list"})):r.$Notice.error({title:r.$t("failed"),desc:r.$t("failed_error_text")})})).catch((function(t){return r.errors=t})).finally((function(){return r.loading=!1}))}else r.sloading=!1,r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10})}))}}};const u=(0,r(51900).Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("service")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/items/services"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("service",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"item",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("code"),prop:"code",error:t._f("a2s")(t.errors.form.code)}},[r("Input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),t._v(" "),r("small",[t._v(t._s(t.$t("item_code_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("symbology"),prop:"symbology",error:t._f("a2s")(t.errors.form.symbology)}},[r("Select",{model:{value:t.form.symbology,callback:function(e){t.$set(t.form,"symbology",e)},expression:"form.symbology"}},[r("Option",{attrs:{value:"code128"}},[t._v("Code128")]),t._v(" "),r("Option",{attrs:{value:"code39"}},[t._v("Code39")]),t._v(" "),r("Option",{attrs:{value:"ean5"}},[t._v("EAN5")]),t._v(" "),r("Option",{attrs:{value:"ean8"}},[t._v("EAN8")]),t._v(" "),r("Option",{attrs:{value:"ean13"}},[t._v("EAN13")]),t._v(" "),r("Option",{attrs:{value:"upce"}},[t._v("UPC (E)")]),t._v(" "),r("Option",{attrs:{value:"upca"}},[t._v("UPC (A)")])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("category"),prop:"category_id",error:t._f("a2s")(t.errors.form.category_id)}},[r("Select",{model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categories,(function(e){return r("Option",{key:e.value,attrs:{value:e.id}},[t._v("\n                      "+t._s(e.name)+"\n                    ")])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("cost"),prop:"cost",error:t._f("a2s")(t.errors.form.cost)}},[r("InputNumber",{model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",e)},expression:"form.cost"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("price"),prop:"price",error:t._f("a2s")(t.errors.form.price)}},[r("InputNumber",{model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("taxes"),prop:"taxes",error:t._f("a2s")(t.errors.form.taxes)}},[r("Select",{attrs:{filterable:"",multiple:""},model:{value:t.form.taxes,callback:function(e){t.$set(t.form,"taxes",e)},expression:"form.taxes"}},t._l(t.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n                      "+t._s(e.name)+"\n                    ")])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("sku"),prop:"sku",error:t._f("a2s")(t.errors.form.sku)}},[r("Input",{attrs:{readonly:""},model:{value:t.form.sku,callback:function(e){t.$set(t.form,"sku",e)},expression:"form.sku"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("alt_name"),prop:"alt_name",error:t._f("a2s")(t.errors.form.alt_name)}},[r("Input",{model:{value:t.form.alt_name,callback:function(e){t.$set(t.form,"alt_name",e)},expression:"form.alt_name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("sac_number"),prop:"hsn_number",error:t._f("a2s")(t.errors.form.hsn_number)}},[r("Input",{model:{value:t.form.hsn_number,callback:function(e){t.$set(t.form,"hsn_number",e)},expression:"form.hsn_number"}})],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{prop:"max_discount",label:t.$t("max_discount"),error:t._f("a2s")(t.errors.form.max_discount)}},[r("InputNumber",{attrs:{formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")}},model:{value:t.form.max_discount,callback:function(e){t.$set(t.form,"max_discount",e)},expression:"form.max_discount"}}),t._v(" "),r("small",[t._v(t._s(t.$t("max_discount_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("modifier",2),prop:"modifier",error:t._f("a2s")(t.errors.form.modifier)}},[r("Select",{attrs:{clearable:"",multiple:""},model:{value:t.form.modifiers,callback:function(e){t.$set(t.form,"modifiers",e)},expression:"form.modifiers"}},t._l(t.modifiers,(function(e){return r("Option",{key:"modifier_"+e.value,attrs:{value:e.value}},[t._v("\n                      "+t._s(e.label)+"\n                    ")])})),1)],1)],1)],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Checkbox",{attrs:{label:"tax_included","true-value":1,"false-value":0},model:{value:t.form.tax_included,callback:function(e){t.$set(t.form,"tax_included",e)},expression:"form.tax_included"}},[t._v("\n                "+t._s(t.$t("tax_inclusive"))+"\n              ")])],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Checkbox",{attrs:{label:"price_changeable","true-value":1,"false-value":0},model:{value:t.form.changeable,callback:function(e){t.$set(t.form,"changeable",e)},expression:"form.changeable"}},[t._v("\n                "+t._s(t.$t("allow_price_change"))+"\n              ")])],1),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},[t.form.changeable?r("div",{staticStyle:{"margin-top":"16px"}},[r("Row",[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("min_price"),prop:"min_price",error:t._f("a2s")(t.errors.form.min_price)}},[r("InputNumber",{model:{value:t.form.min_price,callback:function(e){t.$set(t.form,"min_price",e)},expression:"form.min_price"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("max_price"),prop:"max_price",error:t._f("a2s")(t.errors.form.max_price)}},[r("InputNumber",{model:{value:t.form.max_price,callback:function(e){t.$set(t.form,"max_price",e)},expression:"form.max_price"}})],1)],1)],1)],1):t._e()]),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",{attrs:{label:t.$tc("photo"),prop:"photo",error:t._f("a2s")(t.errors.form.photo)}},[r("Upload",{attrs:{"before-upload":t.handleUpload,"max-size":1024,action:"",accept:".png, .jpeg, .jpg, .gif"}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v(t._s(t.$t("select_x",{x:t.$t("photo")})))])],1),t._v(" "),t.photo||t.new_photo?r("div",{staticClass:"primary",staticStyle:{"margin-bottom":"16px"}},[t.form.photo?r("span",[r("span",{staticStyle:{margin:"10px 10px 10px 0"}},[t._v(t._s(t.$t("selected_file"))+": "+t._s(t.form.photo.name))]),t._v(" "),r("Button",{attrs:{type:"error",shape:"circle",size:"small",icon:"ios-trash"},on:{click:function(e){return t.clearPhoto()}}})],1):t._e(),t._v(" "),r("br"),t._v(" "),t.photo||t.new_photo?r("img",{staticStyle:{"max-width":"160px","max-height":"110px","border-radius":"4px 4px 0 0"},attrs:{alt:"photo",src:t.new_photo?t.new_photo:t.photo}}):t._e()]):t._e()],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("gallery_images"),prop:"images",error:t._f("a2s")(t.errors.form.images)}},[r("Upload",{attrs:{multiple:"","before-upload":t.handleImages,"max-size":2048,action:"",accept:".png, .jpeg, .jpg"}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("\n                  "+t._s(t.$t("select_x",{x:t.$t("gallery_images")}))+"\n                ")])],1),t._v(" "),t.form.images.length?[r("span",{staticStyle:{margin:"10px 10px 10px 0"}},[t._v(t._s(t.$t("selected_file")))]),t._v(" "),t._l(t.form.images,(function(e,s){return r("span",{key:"gallery_"+s,staticClass:"primary",staticStyle:{margin:"0 16px 16px 0"}},[t._v("\n                  "+t._s(s+1)+". "+t._s(e.name)+"\n                  "),r("Button",{attrs:{type:"error",shape:"circle",size:"small",icon:"ios-trash"},on:{click:function(e){return t.deleteImage(s)}}})],1)}))]:t._e()],2),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("video_url"),prop:"video",error:t._f("a2s")(t.errors.form.video)}},[r("Input",{model:{value:t.form.video,callback:function(e){t.$set(t.form,"video",e)},expression:"form.video"}}),t._v(" "),r("small",[t._v(t._s(t.$t("video_tip")))])],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("summary"),prop:"summary",error:t._f("a2s")(t.errors.form.summary)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),t._v(" "),r("FormItem",{staticStyle:{"margin-bottom":"16px"},attrs:{prop:"details",label:t.$t("details"),error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:12}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.submit("items")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.submit("items",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"error",ghost:""},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},91495:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var s=r(7174),a=r.n(s),i=r(92704);const o={components:{ItemViewComponent:r(487).Z,VueBarcode:a()},mixins:[(0,i.Z)("item","app/items","name","code","services")],data:function(){var t=this;return{row:{},view:!1,barModal:!1,barcodeSVG:null,columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("name"),sortable:!0,key:"name",width:200},{title:this.$t("code"),sortable:!0,key:"code",sortType:"asc",minWidth:150},{title:this.$t("cost"),sortable:!0,key:"cost",minWidth:125,render:this.renderCost},{title:this.$t("price"),sortable:!0,key:"price",minWidth:125,render:this.renderPrice},{title:this.$t("alt_name"),sortable:!0,key:"alt_name",minWidth:175},{title:this.$tc("category"),sortable:!1,key:"categories",minWidth:175,render:this.renderCategory},{title:this.$tc("taxes"),sortable:!1,key:"taxes",minWidth:200,render:this.renderTaxes},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("tax_method"),sortable:!0,key:"tax_included",minWidth:120,render:this.renderTaxMethod},{title:this.$t("changeable"),sortable:!0,key:"changeable",minWidth:120,render:this.renderChangeable},{title:this.$t("min_price"),sortable:!0,key:"min_price",minWidth:150,render:this.renderMinPrice},{title:this.$t("max_price"),sortable:!0,key:"max_price",minWidth:150,render:this.renderMaxPrice},{title:this.$t("max_discount"),sortable:!0,key:"max_discount",minWidth:150,render:this.renderMaxDiscount},{title:this.$t("summary"),sortable:!0,key:"summary",ellipsis:!0,minWidth:400},{title:this.$t("created_at"),sortable:!0,key:"created_at",minWidth:175,render:this.renderCreatedAt},{title:this.$t("updated_at"),sortable:!0,key:"updated_at",minWidth:175,render:this.renderUpdatedAt},{width:120,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,editFn:t.editRecord,labelFn:t.labelModal,deleteFn:t.deleteRecord,record:{model:"item",name:"name"},trailsFn:function(e){t.$router.push("/items/trails/"+e)}}})}}],options:{orderBy:"code",perPage:this.$store.state.settings.rows}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},mounted:function(){this.$store.getters.stock||(this.columns=this.columns.filter((function(t){return"stock"!=t.key})))},methods:{showInfo:function(t){this.row=t,this.view=!0},labelModal:function(t){var e=this;this.row=t,this.barModal=!0,this.barcodeSVG=this.$store.state.settings.svg_string.replace("--- Item Name ---",this.row.name).replace("--- Other info for item. ---",this.row.alt_name).replace("--- Price: 1,000.00 ---",this.$t("price")+": "+this.formatNumber(this.row.price)),this.$nextTick((function(){document.getElementById("replace-barcode").innerHTML="",document.getElementById("replace-barcode").removeAttribute("transform");var t=document.getElementById("drawBarcode").childNodes[0].cloneNode(!0);document.getElementById("replace-barcode").setAttribute("transform","matrix(1 0 0 1 10 "+(e.$store.state.settings.label_height-60)+")"),document.getElementById("replace-barcode").appendChild(t),1==e.$store.getters.settings.print_dialog&&setTimeout((function(){window.print()}),400)}))},print:function(){window.print()},renderChangeable:function(t,e){return this.renderBoolean(t,e,"changeable")},renderMinPrice:function(t,e){return this.renderNumber(t,e,"min_price")},renderMaxPrice:function(t,e){return this.renderNumber(t,e,"max_price")},renderMaxDiscount:function(t,e){return this.renderNumber(t,e,"max_discount")},renderCategory:function(t,e){return t("div",[e.row.categories.map((function(t){return t.name})).join("")])},renderCost:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.location_stock.length>0&&e.row.location_stock[0].cost?e.row.location_stock[0].cost:e.row.cost,this.$store.getters.settings.decimals)])},renderPrice:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.location_stock.length>0&&e.row.location_stock[0].price?e.row.location_stock[0].price:e.row.price,this.$store.getters.settings.decimals)])},renderStock:function(t,e){return t("div",{class:"text-center"},[e.row.location_stock.length>0?this.$options.filters.formatNumber(e.row.location_stock[0].quantity,this.$store.getters.settings.decimals):this.$options.filters.formatNumber(e.row.stock.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),this.$store.getters.settings.decimals)])},renderRack:function(t,e){return t("div",[e.row.location_stock.length>0&&e.row.location_stock[0].rack?e.row.location_stock[0].rack:e.row.location])},renderTaxMethod:function(t,e){return 1==e.row.tax_included?t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-success ivu-tag-border ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-success"},[this.$t("inclusive")])])]):t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-primary ivu-tag-border ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-primary"},[this.$t("exclusive")])])])},renderTaxes:function(t,e){return t("div",[e.row.taxes.map((function(t){return t.name})).join(", ")])}}};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("service",2)))]),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/items?type=service",columns:t.columns,options:t.options,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)]),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"500","footer-hide":!0,"mask-closable":!1,title:t.$t("print_x",{x:t.$t("barcode")})},model:{value:t.barModal,callback:function(e){t.barModal=e},expression:"barModal"}},[r("div",{staticClass:"label text-center",domProps:{innerHTML:t._s(t.barcodeSVG)}}),t._v(" "),r("div",{staticClass:"np"},[r("Divider",{attrs:{dashed:""}}),t._v(" "),r("div",{staticClass:"text-center",staticStyle:{display:"none"}},[r("vue-barcode",{attrs:{width:1,margin:0,height:30,fontSize:12,"margin-top":0,id:"drawBarcode",value:t.row.code,"margin-bottom":4,format:t.row.symbology}},[t._v("\n          "+t._s(t.$t("barcode_error"))+"\n        ")])],1),t._v(" "),r("Alert",{domProps:{innerHTML:t._s(t.$t("label_print_instructions"))}}),t._v(" "),r("Button",{staticClass:"np",attrs:{type:"primary",icon:"ios-print",long:""},on:{click:function(e){return t.print()}}},[t._v(t._s(t.$t("print")))])],1)]),t._v(" "),r("Modal",{attrs:{"footer-hide":"",scrollable:"",width:750},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("\n        "+t._s(t.row.name)+"\n        ("+t._s(t.row.code)+")\n      ")])]),t._v(" "),r("item-view-component",{attrs:{item:t.row}})],1)],1)}),[],!1,null,null,null).exports},81751:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>u});var s=r(48921),a=r(23279),i=r.n(a);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(t,e){return t.attributes&&(e.attributes=t.attributes,delete t.attributes),t.extra_attributes=e.formatAttributes(e.attributes,t.extra_attributes),t.options=t.options.map((function(t){return e.result.push(t.item),t.item_name=t.item.name,t.quantity=t.quantity?parseFloat(t.quantity):null,delete t.item,t})),e.form=n(n({},t),t.extra_attributes),e.form};const d={mixins:[(0,s.Z)("modifier","app/modifiers",!0,c)],data:function(){return{item:"",items:[],result:[],attributes:[],searching:!1,form:{id:"",code:"",name:"",show_as:"radio",details:"",options:[{sku:this.sku(),item_id:"",item_name:"",quantity:1}]},rules:{code:[{required:!0,message:this.$t("field_is_required",{field:this.$t("code")}),trigger:"blur"}],title:[{required:!0,message:this.$t("field_is_required",{field:this.$t("title")}),trigger:"blur"}],name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}],show_as:[{required:!0,message:this.$t("field_is_required",{field:this.$t("show_as")}),trigger:"change"}],cost:[{required:!0,type:"number",trigger:"change",message:this.$t("field_is_required",{field:this.$t("cost")})}],price:[{required:!0,type:"number",trigger:"change",message:this.$t("field_is_required",{field:this.$t("price")})}]}}},methods:{create:function(){var t=this;this.$http.get("app/modifiers/create").then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t){var e=this;this.$http.get("app/modifiers/".concat(t)).then((function(t){return c(t.data,e)})).finally((function(){return e.loading=!1}))},searchItems:function(t){""===(t=t.trim())||this.result.find((function(e){return e.id==t||e.name==t}))||this.getItems(t,this)},getItems:i()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/items/search?q="+t).then((function(t){return e.result=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),addOption:function(){this.form.options.push({sku:this.sku(),item_id:"",item_name:"",quantity:1})},deleteOption:function(t){this.form.options.splice(t,1)}}};const u=(0,r(51900).Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("modifier")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/modifiers"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("modifier",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"modifier",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:18,lg:12}},[r("FormItem",{attrs:{label:t.$t("code"),prop:"code",error:t._f("a2s")(t.errors.form.code)}},[r("Input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("title"),prop:"title",error:t._f("a2s")(t.errors.form.title)}},[r("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("show_as"),prop:"show_as",error:t._f("a2s")(t.errors.form.show_as)}},[r("Select",{model:{value:t.form.show_as,callback:function(e){t.$set(t.form,"show_as",e)},expression:"form.show_as"}},[r("Option",{attrs:{value:"radio"}},[t._v(t._s(t.$t("radio")))]),t._v(" "),r("Option",{attrs:{value:"checkbox"}},[t._v(t._s(t.$t("checkbox")))]),t._v(" "),r("Option",{attrs:{value:"select"}},[t._v(t._s(t.$t("select")))]),t._v(" "),r("Option",{attrs:{value:"select_multiple"}},[t._v(t._s(t.$t("select_multiple")))])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details",error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:6,lg:12}})],1),t._v(" "),r("FormItem",{attrs:{label:""}},[r("Card",{attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("options")))]),t._v(" "),r("Button",{attrs:{slot:"extra",size:"small",type:"success"},on:{click:t.addOption},slot:"extra"},[r("Icon",{attrs:{type:"ios-options"}}),t._v("\n                "+t._s(t.$t("add_x",{x:t.$tc("option")}))+"\n              ")],1),t._v(" "),r("div",{staticClass:"variants-form"},[r("div",{staticClass:"variant-table"},[r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",{staticStyle:{padding:"0","min-width":"150px"}},[t._v(t._s(t.$t("x_name",{x:t.$tc("item")})))]),t._v(" "),r("th",{staticStyle:{padding:"0","min-width":"100px",width:"200px"}},[t._v("\n                          "+t._s(t.$t("quantity"))+"\n                        ")]),t._v(" "),r("th",{staticStyle:{padding:"0","max-width":"40px","min-width":"40px",width:"40px"}},[r("icon",{attrs:{type:"md-trash"}})],1)])]),t._v(" "),r("tbody",t._l(t.form.options,(function(e,s){return r("tr",{key:"opt_"+s},[r("td",[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,label:e.item_name,"remote-method":t.searchItems},model:{value:e.item_id,callback:function(r){t.$set(e,"item_id",r)},expression:"option.item_id"}},t._l(t.result,(function(t,e){return r("Option",{key:"item_"+e,attrs:{value:t.id,label:t.name}})})),1)],1),t._v(" "),r("td",[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"option.quantity"}})],1),t._v(" "),r("td",{staticClass:"text-center"},[s?r("Icon",{staticClass:"pointer",attrs:{size:"16",color:"#ed3f14",type:"md-trash"},on:{click:function(e){return t.deleteOption(s)}}}):t._e()],1)])})),0)])])])],1)],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("modifiers")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("modifiers",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},48179:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={mixins:[(0,r(92704).Z)("modifier","app/modifiers","title","reference")],data:function(){return{columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("created_at"),sortable:!0,key:"created_at",sortType:"asc",width:175,render:this.renderCreatedAt},{title:this.$t("code"),sortable:!0,key:"code",minWidth:150},{title:this.$t("title"),sortable:!0,key:"title",minWidth:200},{title:this.$tc("show_as"),sortable:!0,key:"show_as",width:200,render:this.renderShowAs},{title:this.$t("details"),sortable:!0,key:"details",ellipsis:!0,minWidth:250},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:200,render:this.renderExtras},{title:this.$t("actions"),key:"actions",align:"center",fixed:"right",width:100,render:this.renderActions}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},methods:{renderShowAs:function(t,e){return t("div",[this.$t(e.row.show_as)])},renderOptions:function(t,e){var r=this,s=[];return e.row.options&&e.row.options.length&&(s=e.row.options.map((function(t){return"".concat(r.$t("name"),": ").concat(t.name,",\n                            ").concat(r.$t("cost"),": ").concat(t.cost,",\n                            ").concat(r.$t("price"),": ").concat(t.price,",\n                            ").concat(r.$t("quantity"),": ").concat(t.quantity)}))),console.log(s),t("div",[s])}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("modifier",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/modifiers/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("add"))+" "+t._s(t.$tc("modifier"))+"\n  ")],1),t._v(" "),r("div",[r("table-component",{attrs:{columns:t.columns,options:t.options,refresh:t.refresh,url:"app/modifiers",dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords}})],1)],1)}),[],!1,null,null,null).exports},41443:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>b});var s=r(48921),a=r(23279),i=r.n(a),o=r(44605),n=r(41804);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var p=function(t,e){t.amount=parseFloat(t.amount);var r="customer",s="",a="",i={id:t.payable.id,name:t.payable.name,value:t.payable.id,label:t.payable.name};return t.payable_type.indexOf("Supplier")>-1?(r="supplier",e.suppliers=[i],s=t.payable.id):(r="customer",e.customers=[i],a=t.payable.id),e.attachments=t.attachments&&t.attachments.length?u(t.attachments):[],e.form=c(c({},t),{},{type:r,customer_id:a,supplier_id:s}),e.form};const _={components:{StripeElementCard:n.UA},mixins:[o.Z,(0,s.Z)("payment","app/payments",!1,p)],data:function(){var t=this;return{accounts:[],customers:[],suppliers:[],gift_cards:[],gift_card:null,searching:!1,max_amount:null,form:{id:"",title:"",details:"",amount:null,reference:"",account_id:"",customer_id:"",supplier_id:"",sale_id:"",purchase_id:"",type:"customer",gateway:"",token:null,token_id:null,firstName:"",lastName:"",billingAddress1:"",billingCity:"",billingPostcode:"",billingState:"",billingCountry:""},rules:{title:[{required:!0,message:this.$t("field_is_required",{field:this.$t("title")}),trigger:"blur"}],account_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("account")}),trigger:"change"}],customer_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("customer")}),trigger:"change"}],supplier_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("supplier")}),trigger:"change"}],amount:[{required:!0,type:"number",validator:function(e,r,s){r&&""!=r?r&&t.max_amount&&r>t.max_amount?s(new Error(t.$t("payment_amount_error",{min:0,max:t.max_amount}))):s():s(new Error(t.$t("field_is_required",{field:t.$t("amount")})))},trigger:"blur"}],gateway:[{message:this.$t("field_is_required",{field:this.$t("gateway")}),trigger:"change"}],cheque_number:[{required:!0,message:this.$t("field_is_required",{field:this.$t("cheque_number")}),trigger:"blur"}],gift_card_number:[{required:!0,message:this.$t("field_is_required",{field:this.$t("gift_card_number")}),trigger:"blur"},{validator:function(e,r,s){r||s(),t.form.amount&&"gift_card"==t.form.gateway&&parseFloat(t.gift_card.balance)<t.form.amount?s(new Error(t.$t("gift_card_payment_error"))):s()},trigger:["change","blur"]}],card_holder:[{required:!0,message:this.$t("field_is_required",{field:this.$t("card_holder")}),trigger:"blur"}],card_number:[{required:!0,message:this.$t("field_is_required",{field:this.$t("card_number")}),trigger:"blur"}],expiry_date:[{required:!0,type:"date",message:this.$t("field_is_required",{field:this.$t("expiry_date")}),trigger:"blur"}],cvv:[{required:!0,message:this.$t("field_is_required",{field:this.$t("cvv")}),trigger:"blur"}],firstName:[{required:!0,message:this.$t("field_is_required",{field:this.$t("first_name")}),trigger:"blur"}],lastName:[{required:!0,message:this.$t("field_is_required",{field:this.$t("last_name")}),trigger:"blur"}],billingAddress1:[{required:!0,message:this.$t("field_is_required",{field:this.$t("billing_address")}),trigger:"blur"}],billingCity:[{required:!0,message:this.$t("field_is_required",{field:this.$t("billing_city")}),trigger:"blur"}],billingPostcode:[{required:!0,message:this.$t("field_is_required",{field:this.$t("billing_postcode")}),trigger:"blur"}],billingState:[{required:!0,message:this.$t("field_is_required",{field:this.$t("billing_state")}),trigger:"blur"}],billingCountry:[{required:!0,message:this.$t("field_is_required",{field:this.$t("billing_country")}),trigger:"blur"}]}}},watch:{"paymentForm.swipe":function(t,e){var r=this;t&&"%"==t.charAt(0)?setTimeout((function(){var e=t.split("^"),s=e&&e[1]?e[1].split("/"):"",a=s?s[0].trim().split(".")[0]:"",i=s&&s[1]?s[1].trim():"",o=e&&e[2]?e[2].substring(2,4)+"/"+e[2].substring(0,2):"",n=e&&e[2]?e[2].split(";"):"",l=n&&n[1]?n[1].split("="):null,c=l&&l[1]?l[1].trim():null,d=c?c.substring(2,4)+"/"+c.substring(0,2):o;r.form.card_number=e[0].substring(2),r.form.expiry_date=d||o,r.form.card_holder="".concat(i," ").concat(a),r.$nextTick((function(){this.form.swipe="",document.querySelector("#cvv").focus()}))}),400):t?(this.errors.payment.swipe=this.$t("unknown_value"),document.querySelector("#swipe_holder").classList.add("ivu-form-item-error")):(this.errors.payment.swipe="",document.querySelector("#swipe_holder").classList.remove("ivu-form-item-error"))}},created:function(){var t=this;this.$route.query.sale_id&&(this.form.sale_id=this.$route.query.sale_id),this.$route.query.customer_id&&(this.form.type="customer",this.form.customer_id=this.$route.query.customer_id),this.$route.query.purchase_id&&(this.form.purchase_id=this.$route.query.purchase_id),this.$route.query.supplier_id&&(this.form.type="supplier",this.form.supplier_id=this.$route.query.supplier_id),this.$route.query.amount&&(this.max_amount=this.form.amount=parseFloat(this.$route.query.amount)),this.$http.get("app/accounts/search").then((function(e){return t.accounts=e.data}))},methods:{fetch:function(t){var e=this;this.$http.get("app/payments/".concat(t)).then((function(t){return p(t.data,e)})).finally((function(){return e.loading=!1}))},handleSubmit:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$refs.payment.validate((function(s){s?"PayPal_Pro"==e.form.gateway||"PayPal_Rest"==e.form.gateway||"AuthorizeNetApi_Api"==e.form.gateway?e.$refs.cardForm.validate((function(s){s?(e.loading=!0,e.submit(t,r)):e.$Notice.error({title:e.$t("invalid_form"),desc:e.$t("invalid_form_error"),duration:10})})):(e.loading=!0,"Stripe"!=e.form.gateway||e.form.token_id?e.submit(t,r):e.$refs.stripeCard.submit()):e.$Notice.error({title:e.$t("invalid_form"),desc:e.$t("invalid_form_error"),duration:10})}))},tokenCreated:function(t){this.form.token=t,this.form.token_id=t.id,this.submit()},searchCustomers:function(t){""===t||this.customers.find((function(e){return e.label==t}))||this.getCustomers(t,this)},getCustomers:i()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/customers/search?q="+t).then((function(t){return e.customers=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),searchSuppliers:function(t){""===t||this.suppliers.find((function(e){return e.label==t}))||this.getSuppliers(t,this)},getSuppliers:i()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/suppliers/search?q="+t).then((function(t){return e.suppliers=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),updatePaymentFormFocus:function(){var t=this;this.form.gateway&&"cash"!=this.form.gateway&&"other"!=this.form.gateway&&"Stripe"!=this.form.gateway&&this.form.gateway!=this.$store.getters.payment.gateway&&(this.$refs.payment.fields.map((function(t){"type"!=t.prop&&"amount"!=t.prop&&"gateway"!=t.prop&&"details"!=t.prop&&"account_id"!=t.prop&&"reference"!=t.prop&&"customer_id"!=t.prop&&"supplier_id"!=t.prop&&t.resetField()})),setTimeout((function(){return document.querySelector("#"+t.form.gateway)?document.querySelector("#"+t.form.gateway).focus():""}),100))},giftCardSelected:function(t){this.gift_card=this.gift_cards.find((function(e){return e.number==t}))},searchGiftCard:function(t){this.getGiftCard(t,this)},getGiftCard:i()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/gift_cards/search?q="+t).then((function(t){1==t.data.length?(e.gift_card=t.data[0],e.form.gift_card_number=t.data[0].number):e.gift_cards=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250)}};var f=r(93379),v=r.n(f),h=r(52080),g={insert:"head",singleton:!1};v()(h.Z,g);h.Z.locals;const b=(0,r(51900).Z)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("payment")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/payments"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("payment",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"payment",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,xl:12}},[r("FormItem",{attrs:{label:t.$t("type"),prop:"type",error:t._f("a2s")(t.errors.form.type)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[r("Option",{attrs:{value:"customer"}},[t._v(t._s(t.$tc("customer")))]),t._v(" "),r("Option",{attrs:{value:"supplier"}},[t._v(t._s(t.$tc("supplier")))])],1)],1),t._v(" "),"customer"==t.form.type?r("FormItem",{attrs:{prop:"customer_id",label:t.$tc("customer"),error:t._f("a2s")(t.errors.form.customer_id)}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchCustomers,placeholder:t.$t("type_to_search_x",{x:t.$tc("customer")})},model:{value:t.form.customer_id,callback:function(e){t.$set(t.form,"customer_id",e)},expression:"form.customer_id"}},t._l(t.customers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1):t._e(),t._v(" "),"supplier"==t.form.type?r("FormItem",{attrs:{prop:"supplier_id",label:t.$tc("supplier"),error:t._f("a2s")(t.errors.form.supplier_id)}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchSuppliers,placeholder:t.$t("type_to_search_x",{x:t.$tc("supplier")})},model:{value:t.form.supplier_id,callback:function(e){t.$set(t.form,"supplier_id",e)},expression:"form.supplier_id"}},t._l(t.suppliers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1):t._e(),t._v(" "),r("FormItem",{attrs:{label:t.$tc("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("account"),prop:"account_id",error:t._f("a2s")(t.errors.form.account_id)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.account_id,callback:function(e){t.$set(t.form,"account_id",e)},expression:"form.account_id"}},[t.accounts.length>0?t._l(t.accounts,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v("\n                      "+t._s(e.label)+"\n                    ")])})):t._e()],2)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("amount"),prop:"amount",error:t._f("a2s")(t.errors.form.amount)}},[r("InputNumber",{model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("gateway"),prop:"gateway",error:t.errors.form.gateway}},[r("Select",{attrs:{placeholder:""},on:{"on-change":function(e){return t.updatePaymentFormFocus()}},model:{value:t.form.gateway,callback:function(e){t.$set(t.form,"gateway",e)},expression:"form.gateway"}},[r("Option",{attrs:{value:""}},[t._v(t._s(t.$t("requesting")))]),t._v(" "),"customer"==t.form.type&&t.$store.getters.gateway?r("Option",{attrs:{value:t.$store.getters.gateway}},[t._v("\n                    "+t._s(t.$t(t.$store.getters.gateway))+"\n                  ")]):t._e(),t._v(" "),r("Option",{attrs:{value:"cash"}},[t._v(t._s(t.$t("cash")))]),t._v(" "),r("Option",{attrs:{value:"cheque"}},[t._v(t._s(t.$t("cheque")))]),t._v(" "),r("Option",{attrs:{value:"gift_card"}},[t._v(t._s(t.$tc("gift_card")))]),t._v(" "),r("Option",{attrs:{value:"credit_card"}},[t._v(t._s(t.$t("credit_card"))+" ("+t._s(t.$t("record"))+")")]),t._v(" "),r("Option",{attrs:{value:"other"}},[t._v(t._s(t.$t("other")))])],1)],1),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},["Stripe"==t.form.gateway?r("FormItem",{staticClass:"mb0"},[r("stripe-card-elements",{ref:"stripeCard",staticClass:"stripe-card",attrs:{amount:t.form.amount,pk:t.$store.state.payment.public_key},on:{token:t.tokenCreated,loading:function(e){t.loading=e}}})],1):"PayPal_Pro"==t.form.gateway||"PayPal_Rest"==t.form.gateway||"AuthorizeNetApi_Api"==t.form.gateway?r("FormItem",[r("Card",{attrs:{"dis-hover":""}},[r("Form",{ref:"cardForm",staticClass:"form-top",attrs:{model:t.form,rules:t.rules,"label-position":"top"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("first_name"),prop:"firstName",error:t._f("a2s")(t.errors.form.firstName)}},[r("Input",{model:{value:t.form.firstName,callback:function(e){t.$set(t.form,"firstName",e)},expression:"form.firstName"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("last_name"),prop:"lastName",error:t._f("a2s")(t.errors.form.lastName)}},[r("Input",{model:{value:t.form.lastName,callback:function(e){t.$set(t.form,"lastName",e)},expression:"form.lastName"}})],1)],1)],1),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:16,lg:16}},[r("FormItem",{attrs:{label:t.$tc("billing_address"),prop:"billingAddress1",error:t._f("a2s")(t.errors.form.billingAddress1)}},[r("Input",{model:{value:t.form.billingAddress1,callback:function(e){t.$set(t.form,"billingAddress1",e)},expression:"form.billingAddress1"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:8,lg:8}},[r("FormItem",{attrs:{label:t.$tc("billing_city"),prop:"billingCity",error:t._f("a2s")(t.errors.form.billingCity)}},[r("Input",{model:{value:t.form.billingCity,callback:function(e){t.$set(t.form,"billingCity",e)},expression:"form.billingCity"}})],1)],1)],1),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:8,lg:8}},[r("FormItem",{attrs:{label:t.$tc("billing_postcode"),prop:"billingPostcode",error:t._f("a2s")(t.errors.form.billingPostcode)}},[r("Input",{model:{value:t.form.billingPostcode,callback:function(e){t.$set(t.form,"billingPostcode",e)},expression:"form.billingPostcode"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:8,lg:8}},[r("FormItem",{attrs:{label:t.$tc("billing_state"),prop:"billingState",error:t._f("a2s")(t.errors.form.billingState)}},[r("Input",{model:{value:t.form.billingState,callback:function(e){t.$set(t.form,"billingState",e)},expression:"form.billingState"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:8,lg:8}},[r("FormItem",{attrs:{label:t.$tc("billing_country"),prop:"billingCountry",error:t._f("a2s")(t.errors.form.billingCountry)}},[r("Input",{model:{value:t.form.billingCountry,callback:function(e){t.$set(t.form,"billingCountry",e)},expression:"form.billingCountry"}})],1)],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("card_number"),prop:"card_number",error:t._f("a2s")(t.errors.form.card_number)}},[r("Input",{model:{value:t.form.card_number,callback:function(e){t.$set(t.form,"card_number",e)},expression:"form.card_number"}})],1),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:16,lg:16}},[r("FormItem",{attrs:{label:t.$t("expiry_date"),prop:"expiry_date",error:t.errors.form.expiry_date}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"month",format:"MM/yyyy"},model:{value:t.form.expiry_date,callback:function(e){t.$set(t.form,"expiry_date",e)},expression:"form.expiry_date"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:8,lg:8}},[r("FormItem",{attrs:{label:t.$tc("cvv"),prop:"cvv",error:t._f("a2s")(t.errors.form.cvv)}},[r("Input",{model:{value:t.form.cvv,callback:function(e){t.$set(t.form,"cvv",e)},expression:"form.cvv"}})],1)],1)],1)],1)],1)],1):"credit_card"==t.form.gateway?r("span",[r("FormItem",{attrs:{error:t.errors.form.swipe,id:"swipe_holder"}},[r("Input",{attrs:{placeholder:t.$t("swipe_card_text"),"element-id":"credit_card"},model:{value:t.form.swipe,callback:function(e){t.$set(t.form,"swipe",e)},expression:"form.swipe"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("card_holder"),prop:"card_holder",error:t.errors.form.card_holder}},[r("Input",{model:{value:t.form.card_holder,callback:function(e){t.$set(t.form,"card_holder",e)},expression:"form.card_holder"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("card_number"),prop:"card_number",error:t.errors.form.card_number}},[r("Input",{model:{value:t.form.card_number,callback:function(e){t.$set(t.form,"card_number",e)},expression:"form.card_number"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("expiry_date"),prop:"expiry_date",error:t.errors.form.expiry_date}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"month",format:"MM/yyyy"},model:{value:t.form.expiry_date,callback:function(e){t.$set(t.form,"expiry_date",e)},expression:"form.expiry_date"}})],1)],1):"gift_card"==t.form.gateway?r("span",[r("FormItem",{attrs:{label:t.$t("gift_card_number"),prop:"gift_card_number",error:t.errors.form.gift_card_number}},[r("AutoComplete",{staticStyle:{width:"100%"},attrs:{icon:"ios-search","element-id":"gift_card"},on:{"on-search":t.searchGiftCard,"on-select":t.giftCardSelected},model:{value:t.form.gift_card_number,callback:function(e){t.$set(t.form,"gift_card_number",e)},expression:"form.gift_card_number"}},t._l(t.gift_cards,(function(e,s){return r("Option",{key:"gift_card_"+s,attrs:{value:e.number}},[t._v(t._s(e.number))])})),1),t._v(" "),t.gift_card&&t.gift_card.number?r("span",[t._v("\n                      "+t._s(t.$t("balance"))+": "+t._s(t._f("formatNumber")(t.gift_card.balance,t.$store.state.settings.decimals))+"\n                    ")]):t._e()],1)],1):"cheque"==t.form.gateway?r("span",[r("FormItem",{attrs:{label:t.$t("cheque_number"),prop:"cheque_number",error:t.errors.form.cheque_number}},[r("Input",{attrs:{"element-id":"cheque"},model:{value:t.form.cheque_number,callback:function(e){t.$set(t.form,"cheque_number",e)},expression:"form.cheque_number"}})],1)],1):t._e()],1),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details",error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}})],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("payments")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("payments",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},46770:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var s=r(92704);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const i={components:{PaymentViewComponent:r(69697).Z},mixins:[(0,s.Z)("payment","app/payments","reference")],data:function(){var t,e=this;return{view:!1,loading:!1,payment:{},columns:[{type:"selection",width:50,align:"center",fixed:"left"},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$t("amount"),sortable:!1,key:"amount",width:150,render:this.renderAmount},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{title:this.$t("gateway"),sortable:!1,key:"gateway",width:150,render:this.renderGateway},{key:"for",maxWidth:300,minWidth:200,sortable:!1,title:this.$tc("account"),render:this.renderAccount},{key:"for",maxWidth:300,minWidth:200,sortable:!1,render:this.renderPayable,title:this.$tc("created_for")},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("received"),sortable:!0,key:"received",width:100,render:this.renderIconReceived},(t={title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0},a(t,"ellipsis",!0),a(t,"minWidth",250),a(t,"maxWidth",400),t),{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(t,r){return t("actions-dropdown-component",{props:{params:r,viewFn:e.viewModal,editFn:e.editRecord,emailFn:e.emailRecord,reviewFn:e.reviewRecord,deleteFn:e.deleteRecord,downloadFn:e.downloadRecord,record:{model:"payment",name:"reference",title:e.$tc("payment")}}})}}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},computed:{url:function(){return"app/payments"+(this.$route.query.review?"?review="+parseInt(this.$route.query.review):this.$route.query.due?"?due="+parseInt(this.$route.query.due):"")}},watch:{"$route.query.due":function(){this.refresh++},"$route.query.review":function(){this.refresh++}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.payment.id&&(this.loading=!0,this.$http.get("app/payments/".concat(t.id)).then((function(t){return e.payment=t.data})).finally((function(){return e.loading=!1})))},emailRecord:function(t){var e=this;this.$http.post("app/payments/email/"+t.id,{}).then((function(t){t.data.success?e.$Notice.success({title:e.$t("email_sent"),desc:e.$t("email_sent_text")}):e.$Notice.error({title:e.$tc("failed"),desc:e.$t("failed_error_text")})}))},downloadRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"download/payments/"+t.id}).click()},reviewRecord:function(t){var e=this;1!=t.review||t.reviewed_by||t.received||this.$http.post("app/payments/review/"+t.id,{}).then((function(t){t.data.success?(e.refresh++,e.view=!1,e.payment={},e.$Notice.success({title:e.$t("success"),desc:e.$t("review_payment_text")})):e.$Notice.error({title:e.$tc("failed"),desc:e.$t("failed_error_text")})}))},viewRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"view/payment/"+t.hash}).click()},renderAccount:function(t,e){return t("div",[e.row.account?e.row.account.name:""])},gatewayColor:function(t){var e={cash:"success",credit_card:"geekblue",cheque:"green",other:"purple"};return e[t]?e[t]:"primary"},renderGateway:function(t,e){return t("div",{class:"text-center"},[e.row.gateway?t("div",{class:"ivu-tag ivu-tag-".concat(this.gatewayColor(e.row.gateway)," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[this.$t(e.row.gateway)])]):""])},renderPayable:function(t,e){return t("div",[e.row.payable.name])},renderAmount:function(t,e){return this.renderNumber(t,e,"amount")},renderIconReceived:function(t,e){return this.renderBoolean(t,e,"received")}}};const o=(0,r(51900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("payment",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/payments/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add_x",{x:t.$tc("payment")}))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:t.url,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("payment")+" ("+t.payment.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("payment-view-component",{attrs:{payment:t.payment,review:t.reviewRecord},on:{remove:function(e){return t.deleteAttachment(e,t.payment)}}})],1)],1)}),[],!1,null,null,null).exports},16599:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>v});var s=r(21490),a=r(61402);const i={props:{editItem:{type:Function},deleteItem:{type:Function},calcRowTotal:{type:Function},customer:{type:[Boolean,Object]},row:{type:Object,required:!0},deleteItemVariation:{type:Function},index:{type:Number,required:!0},itemVariationQuantityChanged:{type:Function}}};var o=r(51900);const n=(0,o.Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-item"},[r("span",{staticClass:"item"},[r("span",{staticClass:"index"},[t._v(t._s(t.index+1))]),t._v(" "),r("span",{staticClass:"remove"},[t.row.selected.variations&&!t.row.selected.variations.length?r("span",[r("Icon",{staticClass:"pointer",attrs:{size:"18",type:"md-close",color:"#ed4014"},on:{click:function(e){return t.deleteItem(t.row)}}})],1):t._e()]),t._v(" "),r("span",{staticClass:"details pointer",on:{click:function(e){return t.editItem(t.index)}}},[r("strong",[t._v(t._s(t.row.name))]),t._v(" "),r("br"),t._v(" "),r("span",[t.customer&&t.customer.customer_group?r("span",{domProps:{innerHTML:t._s(t.customer.customer_group.name+" (<small>"+t.$t("discount")+": "+t.customer.customer_group.discount+"%</small>)<br />")}}):t._e(),t._v(" "),t.row.comment?r("span",[t._v(t._s(t.row.comment)+" ")]):t._e()])]),t._v(" "),t.row.selected.variations&&!t.row.selected.variations.length?[r("span",{staticClass:"price"},[t._v("\n        "+t._s(t.formatNumber(t.row.cost))+"\n        ")]),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!t.row.selected.variations.length,size:t.row.selected.variations.length?"small":"default"},model:{value:t.row.quantity,callback:function(e){t.$set(t.row,"quantity",e)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(t.row.taxes,(function(e){return r("div",{key:"tax_"+e.id},[t._v("\n          "+t._s(e.code)+"\n          "),r("span",{staticClass:"float-right"},[t._v("\n            "+t._s(t.formatNumber(e.amount*t.row.quantity))+"\n          ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n        "+t._s(t.formatNumber(t.calcRowTotal(t.row)))+"\n      ")])]:[r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!t.row.selected.variations.length,size:t.row.selected.variations.length?"small":"default"},model:{value:t.row.quantity,callback:function(e){t.$set(t.row,"quantity",e)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})]],2),t._v(" "),t.row.selected.variations&&t.row.selected.variations.length?t._l(t.row.selected.variations,(function(e,s){return r("div",{key:"svi_"+s,staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.deleteItemVariation(t.row,e)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n        "+t._s(s+1)+".\n        "),r("span",{domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("span",{staticClass:"price"},[t._v("\n        "+t._s(t.formatNumber(e.cost))+"\n      ")]),t._v(" "),r("span",{staticClass:"discount"},[t._v("\n        "+t._s(t.formatNumber(e.discount_amount))+"\n      ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemVariationQuantityChanged(t.form.items[t.index])}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"sv.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(e){return r("div",{key:"sv_"+e.id},[t._v("\n          "+t._s(e.code)+"\n          "),r("span",{staticClass:"float-right"},[t._v("\n            "+t._s(t.formatNumber(e.amount*t.row.quantity))+"\n          ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n        "+t._s(t.formatNumber((e.cost-(e.discount_amount||0)+e.total_tax_amount)*e.quantity))+"\n      ")])])})):t._e()],2)}),[],!1,null,null,null).exports;const l={props:{serials:{type:Array,twoWay:!0,required:!0},quantity:{type:Number,required:!0}},computed:{provided:function(){var t=this;return this.serials.reduce((function(e,r){return e+t.countSerials(r.number,r.till)}),0)}},methods:{countSerials:function(t,e){if(!t&&!e)return 0;if(t&&!e)return 1;var r=e-t;return r>0?r+1:e==t?1:"?"},addNew:function(t){this.provided<this.quantity&&this.quantity>t+1&&t==this.serials.length-1&&this.serials.push({number:"",till:""})}}};var c=r(93379),d=r.n(c),u=r(5423),m={insert:"head",singleton:!1};d()(u.Z,m);u.Z.locals;const p=(0,o.Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._l(t.serials,(function(e,s){return r("div",{key:"serial_"+s,staticClass:"mb16"},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"mb0",attrs:{label:t.$tc("serial_number"),prop:"serial"}},[r("Input",{on:{"on-focus":function(e){return t.addNew(s)}},model:{value:e.number,callback:function(r){t.$set(e,"number",r)},expression:"serial.number"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"mb0",attrs:{label:t.$t("till"),prop:"serial"}},[r("Input",{model:{value:e.till,callback:function(r){t.$set(e,"till",r)},expression:"serial.till"}})],1)],1)],1)],1)})),t._v(" "),r("div",{staticClass:"sr-info",class:t.provided>t.quantity?"sr-error":""},[t._v("\n    "+t._s(t.$t("total_serials",{n:t.provided,serials:t.$tc("serial_number",t.provided),total:t.quantity}))+"\n  ")])],2)}),[],!1,null,null,null).exports,_={props:{taxes:{type:Array},deleteItem:{type:Function},updateItem:{type:Function},itemUnitChanged:{type:Function},edit_item:{type:Object,required:!0},expiryDateOptions:{type:Object,required:!0}},components:{ItemSerialComponent:p}};const f={components:{EditRowItemComponent:(0,o.Z)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("FormItem",{attrs:{label:t.$t("quantity"),prop:"quantity"}},[r("InputNumber",{attrs:{size:"large"},model:{value:t.edit_item.quantity,callback:function(e){t.$set(t.edit_item,"quantity",e)},expression:"edit_item.quantity"}})],1),t._v(" "),1==t.edit_item.has_serials?r("div",{staticClass:"mt16 mb16"},[r("item-serial-component",{attrs:{serials:t.edit_item.selected.serials,quantity:t.edit_item.quantity}})],1):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.allUnits&&t.edit_item.allUnits.length>0?r("FormItem",{attrs:{label:t.$tc("unit")}},[r("Select",{staticStyle:{width:"100%"},on:{"on-change":t.itemUnitChanged},model:{value:t.edit_item.unit_id,callback:function(e){t.$set(t.edit_item,"unit_id",e)},expression:"edit_item.unit_id"}},t._l(t.edit_item.allUnits,(function(e,s){return r("Option",{key:"unit_"+s+"_"+e.id,attrs:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),1)],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("cost"),prop:"cost"}},[r("InputNumber",{model:{value:t.edit_item.cost,callback:function(e){t.$set(t.edit_item,"cost",e)},expression:"edit_item.cost"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("discount_"),prop:"cdiscount"}},[r("InputNumber",{model:{value:t.edit_item.discount,callback:function(e){t.$set(t.edit_item,"discount",e)},expression:"edit_item.discount"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("batch_no"),prop:"batch_no"}},[r("Input",{model:{value:t.edit_item.batch_no,callback:function(e){t.$set(t.edit_item,"batch_no",e)},expression:"edit_item.batch_no"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.expiry?r("FormItem",{attrs:{label:t.$t("expiry_date"),prop:"expiry_date"}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",options:t.expiryDateOptions},model:{value:t.edit_item.expiry_date,callback:function(e){t.$set(t.edit_item,"expiry_date",e)},expression:"edit_item.expiry_date"}})],1):t._e()],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("tax",2),prop:"taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.edit_item.allTaxes,callback:function(e){t.$set(t.edit_item,"allTaxes",e)},expression:"edit_item.allTaxes"}},t._l(this.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("comment")}},[r("Input",{attrs:{type:"textarea",placeholder:t.$t("item_comment"),autosize:{minRows:2,maxRows:5}},model:{value:t.edit_item.comment,callback:function(e){t.$set(t.edit_item,"comment",e)},expression:"edit_item.comment"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{long:"",type:"primary"},on:{click:function(e){return t.updateItem()}}},[t._v(t._s(t.$t("update")))])],1),t._v(" "),r("Button",{attrs:{long:"",type:"error"},on:{click:function(e){return t.deleteItem(t.edit_item)}}},[t._v(t._s(t.$t("remove_from_order")))])],1)}),[],!1,null,null,null).exports,RowItemComponent:n},mixins:[(0,s.Z)("purchase",null,null,{id:"purchase_id"}),(0,a.Z)("cost","form",!1)]};const v=(0,o.Z)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("purchase")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/purchases"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("purchase",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"purchase",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("supplier"),prop:"supplier_id",error:t._f("a2s")(t.errors.form.supplier_id)}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchSuppliers,placeholder:t.$t("type_to_search_x",{x:t.$tc("supplier")})},model:{value:t.form.supplier_id,callback:function(e){t.$set(t.form,"supplier_id",e)},expression:"form.supplier_id"}},t._l(t.suppliers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("order_taxes"),prop:"order_taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.form.taxes,callback:function(e){t.$set(t.form,"taxes",e)},expression:"form.taxes"}},t._l(t.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n                      "+t._s(e.name)+"\n                    ")])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("shipping_fee"),prop:"shipping_fee",error:t._f("a2s")(t.errors.form.shipping_fee)}},[r("InputNumber",{model:{value:t.form.shipping_fee,callback:function(e){t.$set(t.form,"shipping_fee",e)},expression:"form.shipping_fee"}})],1),t._v(" "),t.$store.state.settings.max_discount>0?r("span",[r("FormItem",{attrs:{label:t.$t("discount"),prop:"discount",error:t._f("a2s")(t.errors.form.discount)}},[r("InputNumber",{attrs:{min:0,formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")},max:parseFloat(t.$store.state.settings.max_discount)},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("RadioGroup",{attrs:{vertical:""},model:{value:t.form.discount_method,callback:function(e){t.$set(t.form,"discount_method",e)},expression:"form.discount_method"}},[r("Radio",{attrs:{label:"order"}},[t._v(t._s(t.$t("apply_to_order_amount")))]),t._v(" "),r("Radio",{attrs:{label:"items"}},[t._v(t._s(t.$t("apply_to_order_items")))])],1)],1)],1):t._e()],1)],1),t._v(" "),r("div",{staticClass:"order-contents"},[r("div",{staticClass:"affix-content"},[r("AutoComplete",{ref:"scanCode",attrs:{icon:"ios-search","element-id":"scan_barcode",placeholder:t.$t("search_scan_barcode")},on:{"on-change":t.searchItems,"on-select":t.selectPurchaseItem},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},t._l(t.result,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ("+t._s(e.code)+") ")])})),1)],1),t._v(" "),!t.form.items||t.form.items.length<1?r("div",[r("Alert",{attrs:{"show-icon":""}},[t._v("\n                  "+t._s(t.$t("empty_order"))+"\n                  "),r("template",{slot:"desc"},[t._v("\n                    "+t._s(t.$t("empty_order_text"))+"\n                  ")])],2)],1):r("div",[r("div",{staticClass:"order-items"},[r("div",{staticClass:"header"},[r("span",{staticClass:"index"},[t._v("#")]),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{attrs:{type:"ios-trash",size:"16"}})],1),t._v(" "),r("span",{staticClass:"details"},[t._v(t._s(t.$t("description")))]),t._v(" "),r("span",{staticClass:"price"},[t._v(t._s(t.$t("cost")))]),t._v(" "),r("span",{staticClass:"discount"},[t._v(t._s(t.$t("discount")))]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(t._s(t.$t("quantity")))]),t._v(" "),r("span",{staticClass:"taxes"},[t._v(t._s(t.$t("taxes")))]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(t._s(t.$t("subtotal")))])]),t._v(" "),t.form.items&&t.form.items.length?[t._l(t.form.items,(function(e,s){return[r("row-item-component",{key:"row_"+s+"_"+e.id,attrs:{row:e,index:s,customer:t.customer,editItem:t.editItem,deleteItem:t.deleteItem,calcRowTotal:t.calcRowTotal,deleteItemVariation:t.deleteItemVariation,itemVariationQuantityChanged:t.itemVariationQuantityChanged}})]}))]:t._e()],2)]),t._v(" "),r("div",{staticClass:"affix-content"},[r("Alert",{staticStyle:{margin:"16px 0 0",padding:"8px 16px"},attrs:{banner:"",type:"warning"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:12,md:6}},[t._v("\n                      "+t._s(t.$tc("item",2))+":\n                      "),r("span",{staticClass:"float-right"},[r("strong",[t._v(t._s(t.orderTotalItems))]),t._v("\n                        "+t._s(t.$tc("item",t.orderTotalItems))+" "),r("strong",[t._v(t._s(t.orderTotalQuantity))]),t._v("\n                        "+t._s(t.$t("quantity"))+"\n                      ")])]),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$t("discount"))+":\n                      "),r("strong",{staticClass:"float-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(t.calculateItemDiscountAmount+t.orderDiscount,t.$store.state.settings.decimals))+"\n                      ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$tc("tax"))+":\n                      "),r("strong",{staticClass:"float-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(t.totalItemTax,t.$store.state.settings.decimals))+"\n                      ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$t("payable_amount"))+":\n                      "),r("strong",{staticClass:"float-right"},[t.orderOriginalTotal!=t.orderPayableAmount?r("span",[r("del",[t._v("\n                            "+t._s(t._f("formatNumber")(t.orderOriginalTotal,t.$store.state.settings.decimals))+"\n                          ")])]):t._e(),t._v(" "),r("span",[t.orderDiscount?r("span",[r("span",{staticStyle:{"font-weight":"normal"}},[t._v("\n                              ("+t._s(t._f("formatNumber")(t.orderTotalAmount,t.$store.state.settings.decimals))+" -\n                              "+t._s(t._f("formatNumber")(t.orderDiscount,t.$store.state.settings.decimals))+")\n                            ")]),t._v("\n                            "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                          ")]):r("span",[t._v("\n                            "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                          ")])])])],1)],1)],1)],1)]),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),t.is_draftable()?r("FormItem",{class:{mb0:1!=t.form.draft},attrs:{prop:"draft"}},[r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.draft,callback:function(e){t.$set(t.form,"draft",e)},expression:"form.draft"}},[r("span",[t._v(t._s(t.$t("order_draft_text")))])])],1):t._e(),t._v(" "),r("transition",{attrs:{mode:"out-in",name:"slide-in","enter-active-class":"animate__animated faster animate__fadeInDown","leave-active-class":"animate__animated fastest animate__fadeOutDown"}},[t.is_draftable()&&1!=t.form.draft?r("FormItem",{attrs:{prop:"payment"}},[r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.payment,callback:function(e){t.$set(t.form,"payment",e)},expression:"form.payment"}},[r("span",[t._v(t._s(t.$t("auto_payment_text")))])])],1):t._e()],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("purchases")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("purchases",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning",ghost:""},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1),t._v(" "),r("Modal",{attrs:{width:600,"footer-hide":!0,title:t.edit_item?t.$t("edit")+" - "+t.edit_item.name:""},model:{value:t.show_item_edit,callback:function(e){t.show_item_edit=e},expression:"show_item_edit"}},[t.edit_item?r("span",[r("Form",{ref:"editItemForm",attrs:{model:t.edit_item,rules:t.itemRules}},[r("edit-row-item-component",{attrs:{taxes:t.taxes,edit_item:t.edit_item,itemPrice:t.itemPrice,itemDiscount:t.itemPrice,deleteItem:t.deleteItem,updateItem:t.updateItem,itemUnitChanged:t.itemUnitChanged,expiryDateOptions:t.expiry_date_options,addPortionToEditItem:t.addPortionToEditItem,changeSelectedPortion:t.changeSelectedPortion}})],1)],1):t._e()])],1)],1),t._v(" "),r("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,title:t.$t("select_x",{x:t.$tc("variant",2)})},model:{value:t.variantModal,callback:function(e){t.variantModal=e},expression:"variantModal"}},[r("select-variation-component",{ref:"selectVarMod",attrs:{item:t.item,purchase:""},on:{"on-submit":t.variationSubmitted}})],1)],1)}),[],!1,null,null,null).exports},1238:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var s=r(92704),a=r(71837),i=r(79478);const o={components:{PaymentsComponent:a.Z,OrderViewComponent:i.Z},mixins:[(0,s.Z)("purchase","app/purchases","reference")],data:function(){var t=this;return{view:!1,payments:[],purchase:{},loading:!1,paymentsModal:!1,paymentsLoading:!1,columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",width:100,render:this.renderDate},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",minWidth:150},{maxWidth:300,minWidth:200,key:"supplier",sortable:!1,title:this.$tc("supplier"),render:this.renderSupplier},{title:this.$t("draft"),sortable:!0,key:"draft",width:80,render:this.renderIconDraft},{title:this.$t("paid"),sortable:!0,key:"paid",width:75,render:this.renderIconPaid},{title:this.$t("void"),sortable:!0,key:"void",width:75,render:this.renderIconVoid},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("total"),sortable:!1,key:"total",width:150,render:this.renderTotal},{title:this.$t("item_tax"),sortable:!1,key:"item_tax",width:150,render:this.renderItemTax},{title:this.$t("order_tax"),sortable:!1,key:"order_tax",width:150,render:this.renderOrderTax},{title:this.$t("discount"),sortable:!1,key:"discount",width:150,render:this.renderDiscount},{title:this.$t("shipping"),sortable:!1,key:"shipping",width:150,render:this.renderShipping},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0,width:350},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-dropdown-component",{props:{params:r,viewFn:t.viewModal,editFn:t.editRecord,payFn:t.paymentRecord,emailFn:t.emailRecord,duplicateFn:t.duplicate,deleteFn:t.deleteRecord,toggleVoidFn:t.toggleVoid,downloadFn:t.downloadRecord,listPayFn:t.ListPaymentForRecord,record:{model:"purchase",name:"reference",title:t.$tc("purchase")}}})}}],options:{perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.purchase.id&&(this.loading=!0,this.$http.get("app/purchases/".concat(t.id)).then((function(t){return e.purchase=t.data})).finally((function(){return e.loading=!1})))},duplicate:function(t){this.$router.push("/purchases/add?purchase_id=".concat(t.id))},toggleVoid:function(t){var e=this;this.$http.delete("app/purchases/".concat(t.id,"/toggle_void")).then((function(t){t.data.success?(e.refresh++,e.$Notice.success({title:e.$t("success"),desc:e.$t("order_marked_x_text",{x:1==t.data.void?e.$t("void"):e.$t("valid")})})):e.$Notice.error({title:e.$tc("failed"),desc:e.$t("failed_error_text")})})).finally((function(){return e.$Modal.remove()}))},emailRecord:function(t){var e=this;this.$http.post("app/purchases/email/"+t.id,{}).then((function(t){t.data.success?e.$Notice.success({title:e.$t("email_sent"),desc:e.$t("email_sent_text")}):e.$Notice.error({title:e.$tc("failed"),desc:e.$t("failed_error_text")})}))},downloadRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"download/purchases/"+t.id}).click()},viewRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"view/purchase/"+t.hash}).click()},paymentRecord:function(t){this.$router.push("/payments/add?purchase_id=".concat(t.id,"&supplier_id=").concat(t.supplier_id,"&amount=").concat(t.grand_total))},ListPaymentForRecord:function(t){var e=this;this.purchase=t,this.paymentsModal=!0,this.paymentsLoading=!0,this.$http.get("app/purchases/"+t.id+"/payments").then((function(t){e.payments=t.data,e.paymentsLoading=!1}))},paymentsModalChanged:function(t){t||(this.purchase=null,this.payments=[])},renderSupplier:function(t,e){return t("div",[e.row.supplier.name])},renderTotal:function(t,e){return this.renderNumber(t,e,"total")},renderItemTax:function(t,e){return this.renderNumber(t,e,"item_tax_amount")},renderOrderTax:function(t,e){return this.renderNumber(t,e,"order_tax_amount")},renderDiscount:function(t,e){return this.renderNumber(t,e,"discount_amount")},renderShipping:function(t,e){return this.renderNumber(t,e,"shipping")},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total",!0)},renderIconActive:function(t,e){return this.renderUnlessIcon(t,e,"draft")},renderIconDraft:function(t,e){return this.renderBoolean(t,e,"draft")},renderIconPaid:function(t,e){return this.renderBoolean(t,e,"paid")},renderIconVoid:function(t,e){return this.renderBoolean(t,e,"void")},rowClassName:function(t,e){return 1==t.void?"ivu-table-error-row":""}}};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("purchase",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/purchases/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add"))+" "+t._s(t.$tc("purchase"))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/purchases",columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords,"row-class-name":t.rowClassName}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("purchase")+" ("+t.purchase.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{field:"cost",to:"supplier",record:t.purchase,heading:t.$tc("purchase"),"to-text":t.$tc("order_to")},on:{remove:function(e){return t.deleteAttachment(e,t.purchase)}}})],1),t._v(" "),r("Modal",{attrs:{"footer-hide":"",width:750},on:{"on-visible-change":t.paymentsModalChanged},model:{value:t.paymentsModal,callback:function(e){t.paymentsModal=e},expression:"paymentsModal"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("\n        "+t._s(t.$t("list_x",{x:t.$tc("payment",2)}))+"\n        "+t._s(t.purchase?"("+t.$tc("purchase")+" "+t.$t("reference")+" "+t.purchase.reference+")":"")+"\n      ")])]),t._v(" "),t.paymentsLoading?r("Loading"):r("payments-component",{attrs:{payments:t.payments}})],1)],1)}),[],!1,null,null,null).exports},22301:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d});var s=r(21490),a=r(61402);const i={props:{editItem:{type:Function},deleteItem:{type:Function},calcItemTax:{type:Function},calcRowTotal:{type:Function},customer:{type:[Boolean,Object]},row:{type:Object,required:!0},deleteItemVariation:{type:Function},getPortionChoosable:{type:Function},index:{type:Number,required:!0},itemVariationQuantityChanged:{type:Function}}};var o=r(51900);const n=(0,o.Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-item"},[r("span",{staticClass:"item"},[r("span",{staticClass:"index"},[t._v(t._s(t.index+1))]),t._v(" "),r("span",{staticClass:"remove"},[t.row.selected.variations&&t.row.selected.portions&&!t.row.selected.portions.length&&!t.row.selected.variations.length?r("span",[r("Icon",{staticClass:"pointer",attrs:{size:"18",type:"md-close",color:"#ed4014"},on:{click:function(e){return t.deleteItem(t.row)}}})],1):t._e()]),t._v(" "),r("span",{staticClass:"details pointer",on:{click:function(e){return t.editItem(t.index)}}},[r("strong",[t._v(t._s(t.row.name))]),t._v(" "),r("br"),t._v(" "),r("span",[t.customer&&t.customer.customer_group?r("span",{domProps:{innerHTML:t._s(t.customer.customer_group.name+" (<small>"+t.$t("discount")+": "+t.customer.customer_group.discount+"%</small>)<br />")}}):t._e(),t._v(" "),t.row.comment?r("span",[t._v(t._s(t.row.comment)+" ")]):t._e()])]),t._v(" "),t.row.selected.variations&&t.row.selected.portions&&!t.row.selected.portions.length&&!t.row.selected.variations.length?[r("span",{staticClass:"price"},[t._v("\n        "+t._s(t.formatNumber(t.row.price-t.row.discount_amount+t.calcItemTax(t.row)))+"\n      ")]),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!t.row.selected.variations.length||!!t.row.selected.portions.length,size:t.row.selected.variations.length||t.row.selected.portions.length?"small":"default"},model:{value:t.row.quantity,callback:function(e){t.$set(t.row,"quantity",e)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(t.row.taxes,(function(e){return r("div",{key:"tax_"+e.id},[t._v("\n          "+t._s(e.code)+"\n          "),r("span",{staticClass:"float-right"},[t._v("\n            "+t._s(t.formatNumber(e.amount*t.row.quantity))+"\n          ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n        "+t._s(t.formatNumber(t.calcRowTotal(t.row)))+"\n      ")])]:[r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!t.row.selected.variations.length||!!t.row.selected.portions.length,size:t.row.selected.variations.length||t.row.selected.portions.length?"small":"default"},model:{value:t.row.quantity,callback:function(e){t.$set(t.row,"quantity",e)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})]],2),t._v(" "),t.row.selected.variations&&t.row.selected.variations.length?t._l(t.row.selected.variations,(function(e,s){return r("div",{key:"svi_"+s,staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.deleteItemVariation(t.row,e)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n        "+t._s(s+1)+".\n        "),r("span",{domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("span",{staticClass:"price"},[t._v("\n        "+t._s(t.formatNumber(e.price))+"\n      ")]),t._v(" "),r("span",{staticClass:"discount"},[t._v("\n        "+t._s(t.formatNumber(e.discount_amount))+"\n      ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemVariationQuantityChanged(t.form.items[t.index])}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"sv.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(e){return r("div",{key:"sv_"+e.id},[t._v("\n          "+t._s(e.code)+"\n          "),r("span",{staticClass:"float-right"},[t._v("\n            "+t._s(t.formatNumber(e.amount*t.row.quantity))+"\n          ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n        "+t._s(t.formatNumber((e.price-e.discount_amount+e.total_tax_amount)*e.quantity))+"\n      ")])])})):t._e(),t._v(" "),t.row.selected.portions.length?t._l(t.row.selected.portions,(function(e,s){return r("div",{key:"spi_"+s,staticClass:"combo"},t._l(t.row.portions.filter((function(t){return t.id==e.id})),(function(a){return r("div",{key:"pi_"+a.id,staticClass:"combo"},[r("div",{staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.deleteItemPortion(t.row,e,s)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[r("p",[t._v("\n              "+t._s(s+1)+". "+t._s(t.$tc("portion"))+":\n              "),r("strong",[t._v(t._s("regular"==a.name?t.$t("regular"):a.name))])])]),t._v(" "),r("span",{staticClass:"price"},[t._v(t._s(t.formatNumber(e.price)))]),t._v(" "),r("span",{staticClass:"discount"},[t._v("\n            "+t._s(t.formatNumber(e.discount_amount))+"\n          ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemPortionQuantityChanged(t.form.items[t.index])}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"sp.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(s){return r("div",{key:"sp_"+s.id},[t._v("\n              "+t._s(s.code)+"\n              "),r("span",{staticClass:"float-right"},[t._v("\n                "+t._s(t.formatNumber(s.amount*e.quantity))+"\n              ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n            "+t._s(t.formatNumber((e.price-e.discount_amount+e.total_tax_amount)*e.quantity))+"\n          ")])]),t._v(" "),t._l(a.essentials,(function(s,a){return r("div",{key:"ei_"+a,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"}),t._v(" "),r("span",{staticClass:"details"},[t._v(" #"+t._s(a+1)+" "+t._s(s.item.name)+" ")]),t._v(" "),r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n            "+t._s(parseFloat(s.quantity*e.quantity))+"\n          ")]),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})])})),t._v(" "),t._l(a.choosables,(function(s,i){return t._l(s.items,(function(o,n){return t.getPortionChoosable(e,s.id,o.item_id)?r("div",{key:"gii_"+n+"_"+i,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"}),t._v(" "),r("span",{staticClass:"details"},[t._v("\n              #"+t._s(i+1+a.essentials.length)+"\n              "+t._s(o.item.name)+"\n            ")]),t._v(" "),r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n              "+t._s(parseFloat(o.quantity*e.quantity))+"\n            ")]),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})]):t._e()}))}))],2)})),0)})):t._e(),t._v(" "),t.row.selected.modifiers.length?[r("div",{staticClass:"combo-item bg"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"details"},[r("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.$tc("modifier",2)))])]),t._v(" "),r("span",{staticClass:"price"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"discount"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"taxes"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(" ")])]),t._v(" "),t._l(t.row.selected.modifiers,(function(e,s){return r("div",{key:"mi_"+s},[r("div",{staticClass:"combo-item pt pb"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.deleteItemModifier(t.row,e,s)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n          "+t._s(s+1)+". "),r("strong",[t._v(t._s(e.option))]),t._v(" ("+t._s(e.title)+")\n        ")]),t._v(" "),r("span",{staticClass:"price"},[t._v("\n          "+t._s(t.formatNumber(e.price))+"\n        ")]),t._v(" "),r("span",{staticClass:"discount"},[t._v("\n          "+t._s(t.formatNumber(e.discount_amount*e.quantity))+"\n        ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"m.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(s){return r("div",{key:"m_"+s.id},[t._v("\n            "+t._s(s.code)+"\n            "),r("span",{staticClass:"float-right"},[t._v("\n              "+t._s(t.formatNumber(s.amount*e.quantity))+"\n            ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"})])])}))]:t._e()],2)}),[],!1,null,null,null).exports;const l={props:{taxes:{type:Array},itemPrice:{type:Function},deleteItem:{type:Function},updateItem:{type:Function},modOptLabel:{type:Function},itemDiscount:{type:Function},addPortionToEditItem:{type:Function},changeSelectedPortion:{type:Function},edit_item:{type:Object,required:!0}}};const c={components:{EditRowItemComponent:(0,o.Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",{attrs:{gutter:16}},[t.edit_item.portions.length||t.edit_item.has_variants?t._e():r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{staticClass:"text-center",attrs:{prop:"quantity",label:t.$t("quantity"),rules:{type:"number",required:!0,trigger:"change",message:t.$t("field_is_required",{field:t.$t("quantity")})}}},[r("InputNumber",{attrs:{size:"large"},model:{value:t.edit_item.quantity,callback:function(e){t.$set(t.edit_item,"quantity",e)},expression:"edit_item.quantity"}})],1)],1),t._v(" "),t.edit_item.portions&&t.edit_item.portions.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},t._l(t.edit_item.selected.portions,(function(e,s){return r("span",{key:"eispi_"+s},t._l(t.edit_item.portions.filter((function(t){return t.id==e.id})),(function(a){return r("span",{key:"pi_"+a.id},[r("Card",{staticClass:"cardp",attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"ios-option"}}),t._v("\n                "+t._s(s+1)+". "+t._s(t.$tc("portion"))+": ("+t._s("regular"==a.name?t.$t("regular"):a.name)+")\n              ")],1),t._v(" "),!s&&t.edit_item.portions.length>1?r("Button",{attrs:{slot:"extra",type:"primary",size:"small"},on:{click:function(e){return t.addPortionToEditItem()}},slot:"extra"},[t._v("\n                "+t._s(t.$t("add_x",{x:t.$tc("portion")}))+"\n              ")]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{staticClass:"mb16",attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("portion")}},[r("Select",{attrs:{value:e.id},on:{"on-change":function(e){return t.changeSelectedPortion(e,s)}}},t._l(t.edit_item.portions,(function(e,s){return r("Option",{key:"pi_"+s,attrs:{value:e.id}},[t._v("\n                        "+t._s("regular"==e.name?t.$t("regular"):e.name)+"\n                      ")])})),1)],1)],1),t._v(" "),r("Col",{staticClass:"mb16",attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("quantity")}},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"eisp.quantity"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                      "+t._s(t.$t("essential_items"))+"\n                    ")])]),t._v(" "),r("p",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[t._v("\n                    "+t._s(a.essentials.map((function(t){return t.item.name})).join(", "))+"\n                  ")]),t._v(" "),r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                      "+t._s(t.$t("choosable_items"))+"\n                    ")])]),t._v(" "),r("Row",{attrs:{gutter:16}},t._l(a.choosables,(function(a,i){return r("Col",{key:"gi_"+i,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:a.name,prop:"selected.portions."+s+".choosables."+i+".selected",rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("item")})}}},[r("Select",{model:{value:e.choosables[i].selected,callback:function(r){t.$set(e.choosables[i],"selected",r)},expression:"eisp.choosables[gi].selected"}},t._l(a.items,(function(e,s){return r("Option",{key:"gii_"+s,attrs:{value:e.item_id}},[t._v("\n                            "+t._s(e.item.name)+"\n                          ")])})),1)],1)],1)})),1)],1)],1)],1)],1)})),0)})),0),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),t.edit_item.variants&&t.edit_item.variants.length?[t._l(t.edit_item.selected.variations,(function(e,s){return r("span",{key:"sv_meta_"+s},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("span",{staticStyle:{color:"#515a6e"},domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("quantity"),prop:"selected.variations."+s+".quantity",rules:{required:!0,type:"number",trigger:"change",max:parseFloat(e.available),message:t.$t("only_x_quantity_available",{x:parseFloat(e.available)})}}},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"eisv.quantity"}})],1)],1),t._v(" "),r("Col",{staticClass:"text-primary",staticStyle:{"padding-top":"2.5em"},attrs:{sm:24,md:12,lg:12}},[t._v("\n          "+t._s(t.$t("available_x",{x:t.$t("quantity")}))+":\n          "),r("strong",[t._v(t._s(e.available))])])],1)})),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),t.edit_item.modifiers&&t.edit_item.modifiers.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n            "+t._s(t.$tc("modifier",2))+"\n          ")])])],1),t._v(" "),t._l(t.edit_item.modifiers,(function(e,s){return r("Col",{key:"mi_"+s,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:e.title,prop:"modifiers"}},["radio"==e.show_as?r("span",[r("RadioGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"checkbox"==e.show_as?r("span",[r("CheckboxGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select"==e.show_as?r("span",[r("Select",{model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select_multiple"==e.show_as?r("span",[r("Select",{attrs:{multiple:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):t._e()])],1)})),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n        "+t._s(t.$t("general"))+"\n      ")])]),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.allUnits&&t.edit_item.allUnits.length>0?r("FormItem",{attrs:{label:t.$tc("unit")}},[r("Select",{staticStyle:{width:"100%"},on:{"on-change":t.itemUnitChanged},model:{value:t.edit_item.unit_id,callback:function(e){t.$set(t.edit_item,"unit_id",e)},expression:"edit_item.unit_id"}},t._l(t.edit_item.allUnits,(function(e,s){return r("Option",{key:"unit_"+s+"_"+e.id,attrs:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),1)],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.changeable?r("FormItem",{attrs:{prop:"price",label:t.$t("price"),rules:[{required:!0,type:"number",message:t.$t("field_is_required",{field:t.$t("price")}),trigger:["change","blur"]},{validator:t.itemPrice,trigger:["change","blur"]}]}},[r("InputNumber",{model:{value:t.edit_item.price,callback:function(e){t.$set(t.edit_item,"price",e)},expression:"edit_item.price"}})],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{prop:"discount",label:t.$t("discount_"),rules:{validator:t.itemDiscount,trigger:["change","blur"]}}},[r("InputNumber",{model:{value:t.edit_item.discount,callback:function(e){t.$set(t.edit_item,"discount",e)},expression:"edit_item.discount"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.allPromotions&&t.edit_item.allPromotions.length>0?r("FormItem",{attrs:{label:t.$tc("promo",2)}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.edit_item.promotions,callback:function(e){t.$set(t.edit_item,"promotions",e)},expression:"edit_item.promotions"}},t._l(t.edit_item.allPromotions,(function(e,s){return r("Option",{key:"tax_"+s+"_"+e.id,attrs:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),1)],1):t._e()],1)],2),t._v(" "),t.edit_item.changeable?r("FormItem",{attrs:{label:t.$tc("tax",2),prop:"taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.edit_item.allTaxes,callback:function(e){t.$set(t.edit_item,"allTaxes",e)},expression:"edit_item.allTaxes"}},t._l(this.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),1)],1):t._e(),t._v(" "),r("FormItem",{attrs:{label:t.$t("comment")}},[r("Input",{attrs:{type:"textarea",placeholder:t.$t("item_comment"),autosize:{minRows:2,maxRows:5}},model:{value:t.edit_item.comment,callback:function(e){t.$set(t.edit_item,"comment",e)},expression:"edit_item.comment"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{long:"",type:"primary"},on:{click:function(e){return t.updateItem()}}},[t._v(t._s(t.$t("update")))])],1),t._v(" "),r("Button",{attrs:{long:"",type:"error"},on:{click:function(e){return t.deleteItem(t.edit_item)}}},[t._v(t._s(t.$t("remove_from_order")))])],1)}),[],!1,null,null,null).exports,RowItemComponent:n},mixins:[(0,s.Z)("quotation"),(0,a.Z)("price","form",!1)]};const d=(0,o.Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("quotation")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/quotations"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("quotation",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"quotation",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("customer"),prop:"customer_id",error:t._f("a2s")(t.errors.form.customer_id)}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchCustomers,placeholder:t.$t("type_to_search",{x:t.$tc("customer")})},model:{value:t.form.customer_id,callback:function(e){t.$set(t.form,"customer_id",e)},expression:"form.customer_id"}},t._l(t.customers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("order_taxes"),prop:"order_taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.form.taxes,callback:function(e){t.$set(t.form,"taxes",e)},expression:"form.taxes"}},t._l(t.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n                      "+t._s(e.name)+"\n                    ")])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("shipping_fee"),prop:"shipping_fee",error:t._f("a2s")(t.errors.form.shipping_fee)}},[r("InputNumber",{model:{value:t.form.shipping_fee,callback:function(e){t.$set(t.form,"shipping_fee",e)},expression:"form.shipping_fee"}})],1),t._v(" "),t.$store.state.settings.max_discount>0?r("span",[r("FormItem",{attrs:{label:t.$t("discount"),prop:"discount",error:t._f("a2s")(t.errors.form.discount)}},[r("InputNumber",{attrs:{min:0,formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")},max:parseFloat(t.$store.state.settings.max_discount)},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("RadioGroup",{attrs:{vertical:""},model:{value:t.form.discount_method,callback:function(e){t.$set(t.form,"discount_method",e)},expression:"form.discount_method"}},[r("Radio",{attrs:{label:"order"}},[t._v(t._s(t.$t("apply_to_order_amount")))]),t._v(" "),r("Radio",{attrs:{label:"items"}},[t._v(t._s(t.$t("apply_to_order_items")))])],1)],1)],1):t._e()],1)],1),t._v(" "),r("div",{staticClass:"order-contents"},[r("div",{staticClass:"affix-content"},[r("AutoComplete",{ref:"scanCode",attrs:{icon:"ios-search","element-id":"scan_barcode",placeholder:t.$t("search_scan_barcode")},on:{"on-change":t.searchItems,"on-select":t.selectSaleItem},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},t._l(t.result,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ("+t._s(e.code)+") ")])})),1)],1),t._v(" "),!t.form.items||t.form.items.length<1?r("div",[r("Alert",{attrs:{"show-icon":""}},[t._v("\n                  "+t._s(t.$t("empty_order"))+"\n                  "),r("template",{slot:"desc"},[t._v("\n                    "+t._s(t.$t("empty_order_text"))+"\n                  ")])],2)],1):r("div",[r("div",{staticClass:"order-items"},[r("div",{staticClass:"header"},[r("span",{staticClass:"index"},[t._v("#")]),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{attrs:{type:"ios-trash",size:"16"}})],1),t._v(" "),r("span",{staticClass:"details"},[t._v(t._s(t.$t("description")))]),t._v(" "),r("span",{staticClass:"price"},[t._v(t._s(t.$t("price")))]),t._v(" "),r("span",{staticClass:"discount"},[t._v(t._s(t.$t("discount")))]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(t._s(t.$t("quantity")))]),t._v(" "),r("span",{staticClass:"taxes"},[t._v(t._s(t.$t("taxes")))]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(t._s(t.$t("subtotal")))])]),t._v(" "),t.form.items&&t.form.items.length?[t._l(t.form.items,(function(e,s){return[r("row-item-component",{key:"row_"+s+"_"+e.id,attrs:{row:e,index:s,customer:t.customer,editItem:t.editItem,deleteItem:t.deleteItem,calcItemTax:t.calcItemTax,calcRowTotal:t.calcRowTotal,deleteItemVariation:t.deleteItemVariation,getPortionChoosable:t.getPortionChoosable,itemVariationQuantityChanged:t.itemVariationQuantityChanged}})]}))]:t._e()],2)]),t._v(" "),r("div",{staticClass:"affix-content"},[r("Alert",{staticStyle:{margin:"16px 0 0",padding:"8px 16px"},attrs:{banner:"",type:"warning"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:12,md:6}},[t._v("\n                      "+t._s(t.$tc("item",2))+":\n                      "),r("span",{staticClass:"float-right"},[r("strong",[t._v(t._s(t.orderTotalItems))]),t._v("\n                        "+t._s(t.$tc("item",t.orderTotalItems))+" "),r("strong",[t._v(t._s(t.orderTotalQuantity))]),t._v("\n                        "+t._s(t.$t("quantity"))+"\n                      ")])]),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$t("discount"))+":\n                      "),r("strong",{staticClass:"float-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(t.calculateItemDiscountAmount+t.orderDiscount,t.$store.state.settings.decimals))+"\n                      ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$tc("tax"))+":\n                      "),r("strong",{staticClass:"float-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(t.totalItemTax,t.$store.state.settings.decimals))+"\n                      ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$t("payable_amount"))+":\n                      "),r("strong",{staticClass:"float-right"},[t.orderOriginalTotal!=t.orderPayableAmount?r("span",[r("del",[t._v("\n                            "+t._s(t._f("formatNumber")(t.orderOriginalTotal,t.$store.state.settings.decimals))+"\n                          ")])]):t._e(),t._v(" "),r("span",[t.orderDiscount?r("span",[r("span",{staticStyle:{"font-weight":"normal"}},[t._v("\n                              ("+t._s(t._f("formatNumber")(t.orderTotalAmount,t.$store.state.settings.decimals))+" -\n                              "+t._s(t._f("formatNumber")(t.orderDiscount,t.$store.state.settings.decimals))+")\n                            ")]),t._v("\n                            "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                          ")]):r("span",[t._v("\n                            "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                          ")])])])],1)],1)],1)],1)]),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("quotations")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("quotations",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning",ghost:""},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1),t._v(" "),r("Modal",{attrs:{width:600,"footer-hide":!0,title:t.edit_item?t.$t("edit")+" - "+t.edit_item.name:""},model:{value:t.show_item_edit,callback:function(e){t.show_item_edit=e},expression:"show_item_edit"}},[t.edit_item?r("div",[r("Form",{ref:"editItemForm",attrs:{model:t.edit_item,"label-position":"top"}},[r("edit-row-item-component",{attrs:{taxes:t.taxes,edit_item:t.edit_item,itemPrice:t.itemPrice,deleteItem:t.deleteItem,updateItem:t.updateItem,itemDiscount:t.itemPrice,modOptLabel:t.modOptLabel,itemUnitChanged:t.itemUnitChanged,addPortionToEditItem:t.addPortionToEditItem,changeSelectedPortion:t.changeSelectedPortion}})],1)],1):t._e()])],1)],1),t._v(" "),r("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,title:t.$t("select_x",{x:t.$tc("portion")+", "+t.$tc("modifier",2)+" & "+t.$tc("variant",2)})},model:{value:t.variantModal,callback:function(e){t.variantModal=e},expression:"variantModal"}},[r("select-variation-component",{ref:"selectVarMod",attrs:{item:t.item},on:{"on-submit":t.variationSubmitted}})],1)],1)}),[],!1,null,null,null).exports},34163:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var s=r(92704);const a={components:{OrderViewComponent:r(79478).Z},mixins:[(0,s.Z)("quotation","app/quotations","reference")],data:function(){var t=this;return{view:!1,quotation:{},loading:!1,columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",width:100,render:this.renderDate},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",minWidth:150},{maxWidth:300,minWidth:200,key:"customer",sortable:!1,title:this.$tc("customer"),render:this.renderCustomer},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("total"),sortable:!1,key:"total",width:150,render:this.renderTotal},{title:this.$t("item_tax"),sortable:!1,key:"item_tax",width:125,render:this.renderItemTax},{title:this.$t("order_tax"),sortable:!1,key:"order_tax",width:125,render:this.renderOrderTax},{title:this.$t("discount"),sortable:!1,key:"discount",width:125,render:this.renderDiscount},{title:this.$t("shipping"),sortable:!1,key:"shipping",width:125,render:this.renderShipping},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0,width:350},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-dropdown-component",{props:{params:r,viewFn:t.viewModal,editFn:t.editRecord,emailFn:t.emailRecord,deleteFn:t.deleteRecord,createSaleFn:t.createSale,downloadFn:t.downloadRecord,record:{model:"quotation",name:"reference",title:t.$tc("quotation")}}})}}],options:{perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.quotation.id&&(this.loading=!0,this.$http.get("app/quotations/".concat(t.id)).then((function(t){return e.quotation=t.data})).finally((function(){return e.loading=!1})))},createSale:function(t){this.$router.push("/sales/add?quotation_id=".concat(t.id))},emailRecord:function(t){var e=this;this.$http.post("app/quotations/email/"+t.id,{}).then((function(t){t.data.success?e.$Notice.success({title:e.$t("email_sent"),desc:e.$t("email_sent_text")}):e.$Notice.error({title:e.$tc("failed"),desc:e.$t("failed_error_text")})}))},downloadRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"download/quotations/"+t.id}).click()},viewRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"view/quotation/"+t.id}).click()},renderCustomer:function(t,e){return t("div",[e.row.customer.name])},renderTotal:function(t,e){return this.renderNumber(t,e,"total")},renderItemTax:function(t,e){return this.renderNumber(t,e,"item_tax_amount")},renderOrderTax:function(t,e){return this.renderNumber(t,e,"order_tax_amount")},renderDiscount:function(t,e){return this.renderNumber(t,e,"discount_amount")},renderShipping:function(t,e){return this.renderNumber(t,e,"shipping")},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total",!0)},renderIconActive:function(t,e){return this.renderUnlessIcon(t,e,"draft")},renderIconDraft:function(t,e){return this.renderBoolean(t,e,"draft")},renderIconPaid:function(t,e){return this.renderBoolean(t,e,"paid")}}};const i=(0,r(51900).Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("quotation",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/quotations/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add"))+" "+t._s(t.$tc("quotation"))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{columns:t.columns,options:t.options,refresh:t.refresh,url:"app/quotations",dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("quotation")+" ("+t.quotation.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{summary:!1,record:t.quotation,"to-text":t.$tc("quote_to"),heading:t.$tc("quotation")},on:{remove:function(e){return t.deleteAttachment(e,t.quotation)}}})],1)],1)}),[],!1,null,null,null).exports},87527:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(92704),a=r(40895);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l={components:{ExpenseViewComponent:r(39657).Z,ReportFormComponent:a.Z},mixins:[(0,s.Z)("expense","app/expenses","reference")],data:function(){return{url:"",data:{},expense:{},updated:0,view:!1,loading:!1,showForm:!1,reportForm:{},fields:["date","reference","custom_fields","account_id","category_id","user_id","details","title","approved"],columns:[{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",minWidth:125,render:this.renderDate},{title:this.$t("title"),sortable:!0,key:"title",minWidth:200},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$t("amount"),sortable:!0,key:"amount",maxWidth:125,minWidth:125,render:this.renderAmount},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{title:this.$tc("category"),sortable:!1,key:"categories",minWidth:175,render:this.renderCategory},{title:this.$tc("account"),sortable:!1,key:"account",minWidth:175,render:this.renderAccount},{title:this.$tc("created_by"),sortable:!1,key:"user",minWidth:175,render:this.renderUser},{title:this.$tc("approved"),sortable:!1,key:"approved",minWidth:90,render:this.renderApproved},{title:this.$tc("approval"),sortable:!1,key:"approved_by",minWidth:175,render:this.renderApproval},{title:this.$t("details"),sortable:!0,key:"details",ellipsis:!0,minWidth:300},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:250,render:this.renderExtras},{title:this.$t("created_at"),sortable:!0,key:"created_at",sortType:"desc",minWidth:175,render:this.renderDateTime}],options:{hideSearch:!0,showSummary:!0,summaryMethod:this.handleSummary,perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++})),this.fields.map((function(e){t.reportForm[e]=""})),this.reportForm.end_date="",this.reportForm.start_date="",this.url="app/reports/expenses/table?"+this.queryString(this.reportForm),this.$http.get("app/reports/expenses",{params:o(o({},this.reportForm),{},{date:""})}).then((function(e){t.reportForm.date=[new Date(e.data.start_date),new Date(e.data.end_date)],t.prepareData(e.data.expenses),t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.date&&this.reportForm.date[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.date[0]).format(this.datetimeFormatString())),this.reportForm.date&&this.reportForm.date[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.date[1]).format(this.datetimeFormatString())),delete this.reportForm.date,this.url="app/reports/expenses/table?"+this.queryString(this.reportForm),this.refresh++,this.$http.get("app/reports/expenses",{params:o(o({},this.reportForm),{},{date:""})}).then((function(t){e.reportForm.date=[new Date(t.data.start_date),new Date(t.data.end_date)],e.prepareData(t.data.expenses),e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.reportForm.end_date=this.reportForm.date[1],this.reportForm.start_date=this.reportForm.date[0],this.data=[{label:this.$t("total_x",{x:this.$tc("expense",2)}),value:t.count},{label:this.$t("total_x",{x:this.$tc("unconfirmed",2)}),value:t.unconfirmed},{label:this.$t("total_x",{x:this.$tc("approved",2)}),value:t.approved},{label:this.$t("total_x",{x:this.$tc("amount",2)}),value:t.amount},{label:this.$t("total_x",{x:this.$tc("unconfirmed_amount",2)}),value:t.unconfirmed_amount},{label:this.$t("total_x",{x:this.$tc("approved_amount",2)}),value:t.approved_amount}]},viewModal:function(t){var e=this;this.view=!0,t.id!=this.expense.id&&(this.loading=!0,this.$http.get("app/expenses/".concat(t.id)).then((function(t){return e.expense=t.data})).finally((function(){return e.loading=!1})))},renderAmount:function(t,e){return this.renderNumber(t,e,"amount")},renderAccount:function(t,e){return t("div",[e.row.account.name])},renderLocation:function(t,e){return t("div",[e.row.location.name])},renderCategory:function(t,e){return t("div",[e.row.categories.map((function(t){return t.name})).join("")])},renderApproved:function(t,e){return this.renderBoolean(t,e,"approved")},renderApproval:function(t,e){return t("div",[e.row.approved_by?e.row.approved_by.name:""])},renderUser:function(t,e){return t("div",[e.row.user?e.row.user.name:""])},handleSummary:function(t){var e=this,r=t.columns,s=t.data,a=["amount"],i={};return r.forEach((function(t,r){var o=t.key;if(a.includes(o)){var n=s.map((function(t){return t.void||t.draft?0:Number(e.formatDecimal(t[o]))}));if(!n.every((function(t){return isNaN(t)}))){var l=n.reduce((function(t,e){return isNaN(Number(e))?t:t+e}),0);i[o]={key:o,value:e.formatNumber(l)}}}else i[o]={key:o,value:""}})),i}}};const c=(0,r(51900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("x_report",{x:t.$tc("expense",2)}))+" ("+t._s(t.datetime(new Date(t.reportForm.start_date)))+" -\n      "+t._s(t.datetime(new Date(t.reportForm.end_date)))+")\n    ")]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,reportForm:t.reportForm,updated:t.updated},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[e.value&&0!=e.value?r("Col",{key:s,attrs:{sm:12,md:6}},[r("div",{staticClass:"box static",class:"box"+(s+1)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatNumber(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])]):t._e()]}))],2),t._v(" "),r("table-component",{attrs:{url:t.url,stripe:!1,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("expense")+" ("+t.expense.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("expense-view-component",{attrs:{expense:t.expense},on:{remove:function(e){return t.deleteAttachment(e,t.expense)}}})],1)],1)}),[],!1,null,null,null).exports},839:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={mixins:[(0,r(92704).Z)("item","")],data:function(){return{columns:[{title:this.$t("name"),sortable:!0,key:"name",minWidth:200},{title:this.$t("code"),sortable:!0,key:"code",sortType:"asc",width:150},{title:this.$t("quantity"),sortable:!1,key:"balance",width:125,render:this.renderBalance},{title:this.$t("expiry_date"),sortable:!1,key:"expiry_date",width:150,render:this.renderExpiry},{title:this.$t("batch_no"),sortable:!1,key:"batch_no",width:150}],options:{orderBy:"expiry_date",perPage:this.$store.state.settings.rows}}},methods:{renderCode:function(t,e){return t("div",[e.row.item.code])},renderNmae:function(t,e){return t("div",[e.row.item.name])},renderBalance:function(t,e){return t("div",{class:"text-center"},[this.$options.filters.formatNumber(e.row.balance,this.$store.getters.settings.decimals)])},renderExpiry:function(t,e){return t("div",[this.date(e.row.expiry_date)])}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("product_expiry_alerts",{x:t.$tc("item",2)})))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/items"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list_x",{x:t.$tc("item",2)}))+"\n  ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/alerts/expiring",columns:t.columns,options:t.options,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1)}),[],!1,null,null,null).exports},37828:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(92704),a=r(40895);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l={components:{IncomeViewComponent:r(69303).Z,ReportFormComponent:a.Z},mixins:[(0,s.Z)("income","app/incomes","reference")],data:function(){return{url:"",data:{},income:{},updated:0,view:!1,loading:!1,showForm:!1,reportForm:{},fields:["date","reference","custom_fields","account_id","category_id","user_id","details","title"],columns:[{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",minWidth:125,render:this.renderDate},{title:this.$t("title"),sortable:!0,key:"title",minWidth:200},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$t("amount"),sortable:!0,key:"amount",maxWidth:125,minWidth:125,render:this.renderAmount},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{title:this.$tc("category"),sortable:!1,key:"categories",minWidth:175,render:this.renderCategory},{title:this.$tc("account"),sortable:!1,key:"account",minWidth:175,render:this.renderAccount},{title:this.$tc("created_by"),sortable:!1,key:"user",minWidth:175,render:this.renderUser},{title:this.$t("details"),sortable:!0,key:"details",ellipsis:!0,minWidth:300},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:250,render:this.renderExtras},{title:this.$t("created_at"),sortable:!0,key:"created_at",sortType:"desc",minWidth:175,render:this.renderDateTime}],options:{hideSearch:!0,showSummary:!0,summaryMethod:this.handleSummary,perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++})),this.fields.map((function(e){t.reportForm[e]=""})),this.reportForm.end_date="",this.reportForm.start_date="",this.url="app/reports/incomes/table?"+this.queryString(this.reportForm),this.$http.get("app/reports/incomes",{params:o(o({},this.reportForm),{},{date:""})}).then((function(e){t.reportForm.date=[new Date(e.data.start_date),new Date(e.data.end_date)],t.prepareData(e.data.incomes),t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.date&&this.reportForm.date[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.date[0]).format(this.datetimeFormatString())),this.reportForm.date&&this.reportForm.date[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.date[1]).format(this.datetimeFormatString())),delete this.reportForm.date,this.url="app/reports/incomes/table?"+this.queryString(this.reportForm),this.refresh++,this.$http.get("app/reports/incomes",{params:o(o({},this.reportForm),{},{date:""})}).then((function(t){e.reportForm.date=[new Date(t.data.start_date),new Date(t.data.end_date)],e.prepareData(t.data.incomes),e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.reportForm.end_date=this.reportForm.date[1],this.reportForm.start_date=this.reportForm.date[0],this.data=[{label:this.$t("total_x",{x:this.$tc("income",2)}),value:t.count},{label:this.$t("total_x",{x:this.$tc("amount",2)}),value:t.amount}]},viewModal:function(t){var e=this;this.view=!0,t.id!=this.income.id&&(this.loading=!0,this.$http.get("app/incomes/".concat(t.id)).then((function(t){return e.income=t.data})).finally((function(){return e.loading=!1})))},renderAmount:function(t,e){return this.renderNumber(t,e,"amount")},renderAccount:function(t,e){return t("div",[e.row.account.name])},renderLocation:function(t,e){return t("div",[e.row.location.name])},renderCategory:function(t,e){return t("div",[e.row.categories.map((function(t){return t.name})).join("")])},renderUser:function(t,e){return t("div",[e.row.user?e.row.user.name:""])},handleSummary:function(t){var e=this,r=t.columns,s=t.data,a=["amount"],i={};return r.forEach((function(t,r){var o=t.key;if(a.includes(o)){var n=s.map((function(t){return t.void||t.draft?0:Number(e.formatDecimal(t[o]))}));if(!n.every((function(t){return isNaN(t)}))){var l=n.reduce((function(t,e){return isNaN(Number(e))?t:t+e}),0);i[o]={key:o,value:e.formatNumber(l)}}}else i[o]={key:o,value:""}})),i}}};const c=(0,r(51900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("x_report",{x:t.$tc("income",2)}))+" ("+t._s(t.datetime(new Date(t.reportForm.start_date)))+" -\n      "+t._s(t.datetime(new Date(t.reportForm.end_date)))+")\n    ")]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,reportForm:t.reportForm,updated:t.updated},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[e.value&&0!=e.value?r("Col",{key:s,attrs:{sm:12,md:6}},[r("div",{staticClass:"box static",class:"box"+(s+3)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatNumber(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])]):t._e()]}))],2),t._v(" "),r("table-component",{attrs:{url:t.url,stripe:!1,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("income")+" ("+t.income.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("income-view-component",{attrs:{income:t.income},on:{remove:function(e){return t.deleteAttachment(e,t.income)}}})],1)],1)}),[],!1,null,null,null).exports},49478:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var s=r(92704);const a={components:{ReportFormComponent:r(40895).Z},mixins:[(0,s.Z)("item","app/items","reference")],data:function(){return{url:"",item:{},dates:[],updated:0,view:!1,loading:!1,reportForm:{},showForm:!1,fields:["created_at","date","category_id"],columns:[{title:this.$t("code"),sortable:!0,sortType:"asc",key:"code",minWidth:150},{title:this.$t("name"),sortable:!0,key:"name",minWidth:175},{title:this.$t("sold"),sortable:!1,key:"sold",minWidth:175,width:150,render:this.renderSold},{minWidth:175,sortable:!1,key:"sold_amount",render:this.renderSoldAmount,title:this.$t("x_amount",{x:this.$t("sold")})},{title:this.$t("purchased"),sortable:!1,key:"purchased",minWidth:175,width:150,render:this.renderPurchased},{minWidth:175,sortable:!1,key:"purchased_amount",render:this.renderPurchasedAmount,title:this.$t("x_amount",{x:this.$t("purchased")})},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("created_at"),sortable:!0,key:"created_at",width:175,render:this.renderCreatedAt}],options:{hideSearch:!0,showSummary:!0,orderBy:["name asc"],summaryMethod:this.handleSummary,perPage:this.$store.state.settings.rows}}},created:function(){var t=this;this.fields.map((function(e){t.reportForm[e]=""})),this.reportForm.end_date="",this.reportForm.start_date="",this.$event.listen("table:loaded",this.setDates),this.url="app/reports/items?"+this.queryString(this.reportForm)},methods:{setDates:function(t){this.dates=t},handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.end_date="",this.reportForm.start_date="",this.reportForm.end_created_at="",this.reportForm.start_created_at="",this.reportForm.date&&this.reportForm.date[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.date[0]).format(this.datetimeFormatString())),this.reportForm.date&&this.reportForm.date[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.date[1]).format(this.datetimeFormatString())),this.reportForm.created_at&&this.reportForm.created_at[0]&&(this.reportForm.start_created_at=this.$moment(this.reportForm.created_at[0]).format(this.datetimeFormatString())),this.reportForm.created_at&&this.reportForm.created_at[1]&&(this.reportForm.end_created_at=this.$moment(this.reportForm.created_at[1]).format(this.datetimeFormatString())),delete this.reportForm.date,delete this.reportForm.created_at,this.url="app/reports/items?"+this.queryString(this.reportForm),this.refresh++},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total",!0)},renderSold:function(t,e){var r=0;return e.row.sale_items.length&&(r=e.row.sale_items.reduce((function(t,e){return t+parseFloat(e.quantity)}),0)),this.renderMyNumber(r)},renderSoldAmount:function(t,e){var r=0;return e.row.sale_items.length&&(r=e.row.sale_items.reduce((function(t,e){return t+parseFloat(e.subtotal)}),0)),this.renderMyNumber(r)},renderPurchased:function(t,e){var r=0;return e.row.purchase_items.length&&(r=e.row.purchase_items.reduce((function(t,e){return t+parseFloat(e.quantity)}),0)),this.renderMyNumber(r)},renderPurchasedAmount:function(t,e){var r=0;return e.row.purchase_items.length&&(r=e.row.purchase_items.reduce((function(t,e){return t+parseFloat(e.subtotal)}),0)),this.renderMyNumber(r)},handleSummary:function(t){var e=this,r=t.columns,s=t.data,a=["sold","sold_amount","purchased","purchased_amount"],i={};return r.forEach((function(t,r){var o=t.key;if(a.includes(o)){var n=s.reduce((function(t,e){return"sold"==o?e.sale_items.length?t+parseFloat(e.sale_items.reduce((function(t,e){return t+parseFloat(e.quantity)}),0)):t:"purchased"==o?e.purchase_items.length?t+parseFloat(e.purchase_items.reduce((function(t,e){return t+parseFloat(e.quantity)}),0)):t:"sold_amount"==o?e.sale_items.length?t+parseFloat(e.sale_items.reduce((function(t,e){return t+parseFloat(e.subtotal)}),0)):t:"purchased_amount"==o?e.purchase_items.length?t+parseFloat(e.purchase_items.reduce((function(t,e){return t+parseFloat(e.subtotal)}),0)):t:void 0}),0);i[o]={key:o,value:e.formatNumber(n)}}else i[o]={key:o,value:""}})),i}}};const i=(0,r(51900).Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("x_report",{x:t.$tc("item",2)}))+"\n      "),t.dates[0]&&t.dates[1]?r("span",[t._v(" ("+t._s(t.datetime(new Date(t.dates[0])))+" - "+t._s(t.datetime(new Date(t.dates[1])))+") ")]):t._e()]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,reportForm:t.reportForm,updated:t.updated},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("table-component",{attrs:{url:t.url,columns:t.columns,"sub-data":"table",options:t.options,refresh:t.refresh}})],1)],1)],1)}),[],!1,null,null,null).exports},33923:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={mixins:[(0,r(92704).Z)("log","app/logs")],data:function(){return{columns:[{width:50,fixed:"left",type:"expand",render:function(t,e){return t("pre",{style:{margin:"0 10px"}},JSON.stringify(e.row.properties,null,"  "))}},{title:this.$tc("created_at"),sortable:!0,key:"created_at",width:175,sortType:"desc",render:this.renderCreatedAt},{title:this.$tc("log_name"),sortable:!0,key:"log_name",width:125},{title:this.$tc("description"),sortable:!0,key:"description",minWidth:250},{title:this.$tc("by"),sortable:!1,key:"user",width:200,render:this.renderUser}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},methods:{rowClassName:function(t,e){return t.description.includes("deleted")?"ivu-table-error-row":t.description.includes("updated")?"ivu-table-warning-row":t.description.includes("created")?"ivu-table-success-row":""}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("logs")))]),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/logs",columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.showInfo,"row-class-name":t.rowClassName}})],1)])}),[],!1,null,null,null).exports},31691:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d});var s=r(92704),a=r(40895),i=r(69697);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const c={mixins:[(0,s.Z)("payment","app/payments","reference")],components:{PaymentViewComponent:i.Z,ReportFormComponent:a.Z},data:function(){var t;return{url:"",data:{},payment:{},updated:0,view:!1,loading:!1,showForm:!1,reportForm:{},fields:["created_at","reference","custom_fields","customer_id","supplier_id","user_id","received"],columns:[{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$t("amount"),sortable:!1,key:"amount",width:150,render:this.renderAmount},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{title:this.$t("gateway"),sortable:!1,key:"gateway",width:150,render:this.renderGateway},{key:"for",maxWidth:300,minWidth:200,sortable:!1,title:this.$tc("account"),render:this.renderAccount},{key:"for",maxWidth:300,minWidth:200,sortable:!1,render:this.renderPayable,title:this.$tc("created_for")},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("received"),sortable:!0,key:"received",width:100,render:this.renderIconReceived},(t={title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0},l(t,"ellipsis",!0),l(t,"minWidth",300),l(t,"maxWidth",400),t)],options:{hideSearch:!0,showSummary:!0,summaryMethod:this.handleSummary,perPage:this.$store.state.settings.rows,orderBy:["created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++})),this.fields.map((function(e){t.reportForm[e]=""})),this.reportForm.end_date="",this.reportForm.start_date="",this.url="app/reports/payments/table?"+this.queryString(this.reportForm),this.$http.get("app/reports/payments",{params:n(n({},this.reportForm),{},{created_at:""})}).then((function(e){t.reportForm.created_at=[new Date(e.data.start_date),new Date(e.data.end_date)],t.prepareData(e.data.payments),t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.created_at&&this.reportForm.created_at[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.created_at[0]).format(this.datetimeFormatString())),this.reportForm.created_at&&this.reportForm.created_at[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.created_at[1]).format(this.datetimeFormatString())),delete this.reportForm.created_at,this.url="app/reports/payments/table?"+this.queryString(this.reportForm),this.refresh++,this.$http.get("app/reports/payments",{params:n(n({},this.reportForm),{},{date:""})}).then((function(t){e.reportForm.created_at=[new Date(t.data.start_date),new Date(t.data.end_date)],e.prepareData(t.data.payments),e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.reportForm.end_date=this.reportForm.created_at[1],this.reportForm.start_date=this.reportForm.created_at[0],this.data=[{label:this.$t("total_x",{x:this.$tc("payment",2)}),value:t.total},{label:this.$t("total_x",{x:this.$t("amount")}),value:t.amount},{label:this.$t("total_x",{x:this.$t("received")}),value:t.received},{label:this.$t("total_x",{x:this.$t("received_amount")}),value:t.received_amount},{label:this.$t("total_x",{x:this.$t("due")}),value:t.due},{label:this.$t("total_x",{x:this.$t("due_amount")}),value:t.due_amount},{label:this.$t("customer_amount"),value:t.customer_amount},{label:this.$t("supplier_amount"),value:t.supplier_amount}]},viewModal:function(t){var e=this;this.view=!0,t.id!=this.payment.id&&(this.loading=!0,this.$http.get("app/payments/".concat(t.id)).then((function(t){return e.payment=t.data})).finally((function(){return e.loading=!1})))},renderAccount:function(t,e){return t("div",[e.row.account?e.row.account.name:""])},gatewayColor:function(t){var e={cash:"success",credit_card:"geekblue",cheque:"green",other:"purple"};return e[t]?e[t]:"primary"},renderGateway:function(t,e){return t("div",{class:"text-center"},[e.row.gateway?t("div",{class:"ivu-tag ivu-tag-".concat(this.gatewayColor(e.row.gateway)," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[this.$t(e.row.gateway)])]):""])},renderPayable:function(t,e){return t("div",[e.row.payable.name])},renderAmount:function(t,e){return this.renderNumber(t,e,"amount")},renderIconReceived:function(t,e){return this.renderBoolean(t,e,"received")},rowClassName:function(t,e){return 1==t.void?"ivu-table-error-row":1==t.draft?"ivu-table-warning-row":1==t.paid?"ivu-table-success-row":""},handleSummary:function(t){var e=this,r=t.columns,s=t.data,a=["amount"],i={};return r.forEach((function(t,r){var o=t.key;if(a.includes(o)){var n=s.map((function(t){return 1==t.received?Number(e.formatDecimal(t[o])):0}));if(!n.every((function(t){return isNaN(t)}))){var l=n.reduce((function(t,e){return isNaN(Number(e))?t:t+e}),0);i[o]={key:o,value:e.formatNumber(l)}}}else i[o]={key:o,value:""}})),i}}};const d=(0,r(51900).Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("x_report",{x:t.$tc("payment",2)}))+" ("+t._s(t.datetime(new Date(t.reportForm.start_date)))+" -\n      "+t._s(t.datetime(new Date(t.reportForm.end_date)))+")\n    ")]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,reportForm:t.reportForm,updated:t.updated},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[r("Col",{key:s,attrs:{sm:12,md:6}},[r("div",{staticClass:"box static",class:"box"+(s+1)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatNumber(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])])]}))],2),t._v(" "),r("table-component",{attrs:{url:t.url,stripe:!1,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords,"row-class-name":t.rowClassName}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("payment")+" ("+t.payment.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("payment-view-component",{attrs:{payment:t.payment},on:{remove:function(e){return t.deleteAttachment(e,t.payment)}}})],1)],1)}),[],!1,null,null,null).exports},41570:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(92704),a=r(40895);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l={components:{OrderViewComponent:r(79478).Z,ReportFormComponent:a.Z},mixins:[(0,s.Z)("purchase","app/purchases","reference")],data:function(){return{url:"",data:{},purchase:{},updated:0,view:!1,loading:!1,showForm:!1,reportForm:{},fields:["date","reference","custom_fields","supplier_id","user_id","draft","paid","void","item_id","serial"],columns:[{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",width:100,render:this.renderDate},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",minWidth:150},{maxWidth:300,minWidth:200,key:"supplier",sortable:!1,title:this.$tc("supplier"),render:this.renderSupplier},{title:this.$t("draft"),sortable:!0,key:"draft",width:80,render:this.renderIconDraft},{title:this.$t("paid"),sortable:!0,key:"paid",width:75,render:this.renderIconPaid},{title:this.$t("void"),sortable:!0,key:"void",width:75,render:this.renderIconVoid},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("total"),sortable:!1,key:"total",width:150,render:this.renderTotal},{title:this.$t("item_tax"),sortable:!1,key:"item_tax_amount",width:125,render:this.renderItemTax},{title:this.$t("order_tax"),sortable:!1,key:"order_tax_amount",width:125,render:this.renderOrderTax},{title:this.$t("discount"),sortable:!1,key:"discount_amount",width:125,render:this.renderDiscount},{title:this.$t("shipping"),sortable:!1,key:"shipping",width:125,render:this.renderShipping},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0,width:350}],options:{hideSearch:!0,showSummary:!0,summaryMethod:this.handleSummary,perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++})),this.fields.map((function(e){t.reportForm[e]=""})),this.reportForm.end_date="",this.reportForm.start_date="",this.url="app/reports/purchases/table?"+this.queryString(this.reportForm),this.$http.get("app/reports/purchases",{params:o(o({},this.reportForm),{},{date:""})}).then((function(e){t.reportForm.date=[new Date(e.data.start_date),new Date(e.data.end_date)],t.prepareData(e.data.purchases),t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.date&&this.reportForm.date[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.date[0]).format(this.datetimeFormatString())),this.reportForm.date&&this.reportForm.date[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.date[1]).format(this.datetimeFormatString())),delete this.reportForm.date,this.url="app/reports/purchases/table?"+this.queryString(this.reportForm),this.refresh++,this.$http.get("app/reports/purchases",{params:o(o({},this.reportForm),{},{date:""})}).then((function(t){e.reportForm.date=[new Date(t.data.start_date),new Date(t.data.end_date)],e.prepareData(t.data.purchases),e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.reportForm.end_date=this.reportForm.date[1],this.reportForm.start_date=this.reportForm.date[0],this.data=[{label:this.$t("total_x",{x:this.$tc("purchase",2)}),value:t.grand_total},{label:this.$t("total_x",{x:this.$tc("tax",2)}),value:t.total_tax_amount},{label:this.$t("total_x",{x:this.$t("recoverable_tax_amount")}),value:t.recoverable_tax_amount},{label:this.$t("total_x",{x:this.$t("recoverable_tax_calculated_on")}),value:t.recoverable_tax_calculated_on},{label:this.$t("total_x",{x:this.$t("discount")}),value:t.discount_amount},{label:this.$t("total_x",{x:this.$t("shipping")}),value:t.shipping}]},viewModal:function(t){var e=this;this.view=!0,t.id!=this.purchase.id&&(this.loading=!0,this.$http.get("app/purchases/".concat(t.id)).then((function(t){return e.purchase=t.data})).finally((function(){return e.loading=!1})))},renderSupplier:function(t,e){return t("div",[e.row.supplier.name])},renderTotal:function(t,e){return this.renderNumber(t,e,"total")},renderItemTax:function(t,e){return this.renderNumber(t,e,"item_tax_amount")},renderOrderTax:function(t,e){return this.renderNumber(t,e,"order_tax_amount")},renderDiscount:function(t,e){return this.renderNumber(t,e,"discount_amount")},renderShipping:function(t,e){return this.renderNumber(t,e,"shipping")},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total",!0)},renderIconActive:function(t,e){return this.renderUnlessIcon(t,e,"draft")},renderIconDraft:function(t,e){return this.renderBoolean(t,e,"draft")},renderIconPaid:function(t,e){return this.renderBoolean(t,e,"paid")},renderIconVoid:function(t,e){return this.renderBoolean(t,e,"void")},rowClassName:function(t,e){return 1==t.void?"ivu-table-error-row":1==t.draft?"ivu-table-warning-row":1==t.paid?"ivu-table-success-row":""},handleSummary:function(t){var e=this,r=t.columns,s=t.data,a=["grand_total","total","item_tax_amount","order_tax_amount","discount_amount","shipping"],i={};return r.forEach((function(t,r){var o=t.key;if(a.includes(o)){var n=s.map((function(t){return t.void||t.draft?0:Number(e.formatDecimal(t[o]))})).reduce((function(t,e){return isNaN(Number(e))?t:t+e}),0);i[o]={key:o,value:e.formatNumber(n)}}else i[o]={key:o,value:""}})),i}}};const c=(0,r(51900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("x_report",{x:t.$tc("purchase",2)}))+" ("+t._s(t.datetime(new Date(t.reportForm.start_date)))+" -\n      "+t._s(t.datetime(new Date(t.reportForm.end_date)))+")\n    ")]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,reportForm:t.reportForm,updated:t.updated},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[e.value&&0!=e.value?r("Col",{key:s,attrs:{sm:12,md:6}},[r("div",{staticClass:"box static",class:"box"+(s+1)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatNumber(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])]):t._e()]}))],2),t._v(" "),r("table-component",{attrs:{url:t.url,stripe:!1,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords,"row-class-name":t.rowClassName}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("purchase")+" ("+t.purchase.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{record:t.purchase,heading:t.$tc("purchase"),"to-text":t.$tc("bill_to")},on:{remove:function(e){return t.deleteAttachment(e,t.purchase)}}})],1)],1)}),[],!1,null,null,null).exports},8785:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={mixins:[(0,r(92704).Z)("item","")],data:function(){return{columns:[{title:this.$t("name"),sortable:!0,key:"name",minWidth:200},{title:this.$t("code"),sortable:!0,key:"code",sortType:"asc",width:150},{title:this.$t("total_quantity"),sortable:!1,key:"location_stock",width:125,render:this.renderAllStock},{title:this.$t("location_quantity"),sortable:!1,key:"stock",width:150,render:this.renderStock},{title:this.$t("alert_quantity"),sortable:!1,key:"alert_quantity",width:150,render:this.renderAlertQuantity},{title:this.$t("rack_location"),sortable:!1,key:"location",width:125,render:this.renderRack}],options:{orderBy:"code",perPage:this.$store.state.settings.rows}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},methods:{renderAllStock:function(t,e){return t("div",{class:"text-center"},[this.$options.filters.formatNumber(e.row.stock.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),this.$store.getters.settings.decimals)])},renderStock:function(t,e){return t("div",{class:"text-center"},[e.row.location_stock.length>0&&e.row.location_stock[0].quantity?this.$options.filters.formatNumber(e.row.location_stock[0].quantity,this.$store.getters.settings.decimals):0])},renderAlertQuantity:function(t,e){return t("div",{class:"text-center"},[this.$options.filters.formatNumber(e.alert_quantity,this.$store.getters.settings.decimals)])},renderRack:function(t,e){return t("div",[e.row.location_stock.length>0&&e.row.location_stock[0].rack?e.row.location_stock[0].rack:e.row.location])}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("product_quantity_alerts",{x:t.$tc("item",2)})))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/items"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list_x",{x:t.$tc("item",2)}))+"\n  ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/alerts/quantity",columns:t.columns,options:t.options,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1)}),[],!1,null,null,null).exports},55078:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>u});var s=r(92704);const a={props:{close:{required:!0},record:{required:!0}},computed:{total:function(){return this.record?parseFloat(this.record.total_cash_amount)+parseFloat(this.record.total_cc_slips_amount)+parseFloat(this.record.total_cheques_amount)+parseFloat(this.record.total_other_amount)+parseFloat(this.record.total_gift_card_amount)-parseFloat(this.record.total_refunds_amount)-parseFloat(this.record.total_expenses_amount):0},total_sales:function(){return this.record?parseFloat(this.record.total_cash_amount)+parseFloat(this.record.total_cc_slips_amount)+parseFloat(this.record.total_cheques_amount)+parseFloat(this.record.total_other_amount)+parseFloat(this.record.total_gift_card_amount):0}}};var i=r(93379),o=r.n(i),n=r(51804),l={insert:"head",singleton:!1};o()(n.Z,l);n.Z.locals;var c=r(51900);const d={components:{PosRegisterComponent:(0,c.Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.record?r("div",{staticClass:"order register"},[t.record.closed_at?t._e():r("Alert",[t._v("\n    "+t._s(t.$tc("register_is_not_closed"))+"\n  ")]),t._v(" "),r("List",{attrs:{border:""}},[r("ListItem",{staticClass:"table-wrapper"},[r("table",{staticClass:"table mt-0"},[r("tr",[r("td",{staticClass:"bold bg-gray",staticStyle:{"border-radius":"5px 0 0 0"}},[t._v(t._s(t.$tc("register")))]),t._v(" "),r("td",{staticClass:"bold bg-gray",staticStyle:{"border-radius":"0 5px 0 0"}},[t._v(t._s(t.record.register.name))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("opened_at")))]),t._v(" "),r("td",{staticClass:"bold"},[t._v(t._s(t._f("datetime")(t.record.created_at)))])]),t._v(" "),t.record.closed_at?r("tr",[r("td",[t._v(t._s(t.$t("closed_at")))]),t._v(" "),r("td",{staticClass:"bold"},[t._v(t._s(t._f("datetime")(t.record.closed_at)))])]):t._e(),t._v(" "),t.record.closed_by?r("tr",[r("td",[t._v(t._s(t.$t("closed_by")))]),t._v(" "),r("td",{staticClass:"bold"},[t._v(t._s(t.record.closed_by_user.name))])]):t._e(),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("total_sales_amount")))]),t._v(" "),r("td",{staticClass:"bold",staticStyle:{"border-radius":"0 0 5px 0"}},[t._v("\n            "+t._s(t._f("formatNumber")(t.total_sales,t.$store.state.settings.decimals))+"\n          ")])])])])],1),t._v(" "),r("List",{staticClass:"mt16",attrs:{border:""}},[r("ListItem",{staticClass:"table-wrapper mt-0"},[r("table",{staticClass:"table"},[r("tr",[r("td",[t._v(t._s(t.$t("cash_in_hand")))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.cash_in_hand,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$t("cash")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_cash_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$t("credit_card")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_cc_slips_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$t("cheque")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_cheques_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$t("other")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_other_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$tc("gift_card")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_gift_card_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$tc("return_order",2)})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_return_orders_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$tc("refund")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_refunds_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$tc("expense",2)})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_expenses_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",{staticClass:"bold bg-gray",staticStyle:{"border-radius":"0 0 0 5px"}},[t._v(t._s(t.$t("total_amount")))]),t._v(" "),r("td",{staticClass:"bold text-right bg-gray",staticStyle:{"border-radius":"0 0 5px 0"}},[t._v("\n            "+t._s(t._f("formatNumber")(t.total,t.$store.state.settings.decimals))+"\n          ")])])])])],1)],1):t._e()}),[],!1,null,null,null).exports},mixins:[(0,s.Z)("register","app/reports/registers","id","id")],data:function(){var t=this;return{columns:[{title:this.$t("created_at"),sortable:!0,key:"created_at",sortType:"asc",minWidth:175,render:this.renderCreatedAt},{title:this.$tc("register"),sortable:!0,key:"register",width:150,render:this.renderRegister},{title:this.$tc("user"),sortable:!0,key:"user",width:150,render:this.renderUser},{title:this.$tc("cash_in_hand"),sortable:!1,key:"cash_in_hand",width:125,render:this.renderCashInHand},{width:175,sortable:!1,key:"total_cash_submitted",render:this.renderTotalCash,title:this.$t("x_sales",{x:this.$t("cash")})},{width:175,sortable:!1,key:"total_cheque_submitted",render:this.renderTotalCheque,title:this.$t("x_sales",{x:this.$t("cheque")})},{width:175,sortable:!1,key:"total_cc_slips_submitted",render:this.renderTotalCreditCard,title:this.$t("x_sales",{x:this.$t("credit_card")})},{width:125,sortable:!1,key:"total_gift_card_amount",render:this.renderTotalGiftCard,title:this.$t("x_sales",{x:this.$tc("gift_card")})},{width:125,sortable:!1,key:"total_other_amount",render:this.renderTotalOther,title:this.$t("x_sales",{x:this.$t("other")})},{width:125,sortable:!1,title:this.$tc("expense",2),key:"total_expenses_amount",render:this.renderTotalExpenses},{width:125,sortable:!1,key:"total_return_orders_amount",title:this.$tc("return_order",2),render:this.renderTotalReturnOrder},{width:125,sortable:!1,key:"total_refunds_amount",title:this.$tc("refund",2),render:this.renderTotalRefunds},{title:this.$t("closed_at"),sortable:!0,key:"closed_at",sortType:"asc",minWidth:175,render:this.renderClosedAt},{title:this.$t("closed_by"),sortable:!0,key:"closed_by",sortType:"asc",minWidth:175,render:this.renderClosedBy},{width:75,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,viewFn:t.viewRecord,record:{model:"register",name:"date",title:t.$tc("register")}}})}}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows},record:null,recordModal:!1}},methods:{viewRecord:function(t){this.record=t,this.recordModal=!0},closeRecordModal:function(){this.record=null,this.recordModal=!1},renderUser:function(t,e){return t("div",[e.row.user.name])},renderRegister:function(t,e){return t("div",[t("div",[e.row.register.name]),t("div",[e.row.location.name])])},renderClosedAt:function(t,e){return t("div",[e.row.closed_at?this.$options.filters.formatDate(e.row.closed_at,this.$store.state.settings.dateformat+" HH:mm A"):""])},renderClosedBy:function(t,e){return t("div",[e.row.closed_by_user?e.row.closed_by_user.name:""])},renderCashInHand:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.cash_in_hand,this.$store.getters.settings.decimals)])},renderTotalOther:function(t,e){return t("div",{class:"text-right"},[e.row.closed_at?this.$options.filters.formatNumber(e.row.total_other_amount,this.$store.getters.settings.decimals):""])},renderTotalGiftCard:function(t,e){return t("div",{class:"text-right"},[e.row.closed_at?this.$options.filters.formatNumber(e.row.total_gift_card_amount,this.$store.getters.settings.decimals):""])},renderTotalExpenses:function(t,e){return t("div",{class:"text-right"},[e.row.closed_at?this.$options.filters.formatNumber(e.row.total_expenses_amount,this.$store.getters.settings.decimals):""])},renderTotalRefunds:function(t,e){return t("div",{class:"text-right"},[e.row.closed_at?this.$options.filters.formatNumber(e.row.total_refunds_amount,this.$store.getters.settings.decimals):""])},renderTotalReturnOrder:function(t,e){return t("div",{class:"text-right"},[e.row.closed_at?this.$options.filters.formatNumber(e.row.total_return_orders_amount,this.$store.getters.settings.decimals):""])},renderTotalCash:function(t,e){return e.row.closed_at?t("table",{class:"table table-sm"},[t("tr",[t("td",[this.$t("total"),":"]),t("td",{class:"text-right"},[this.$options.filters.formatNumber(e.row.total_cash_amount,this.$store.getters.settings.decimals)])]),t("tr",[t("td",[this.$t("submitted"),":"]),t("td",{class:"text-right"},[this.$options.filters.formatNumber(e.row.total_cash_submitted,this.$store.getters.settings.decimals)])])]):""},renderTotalCheque:function(t,e){return e.row.closed_at?t("table",{class:"table table-sm"},[t("tr",[t("td",[this.$t("total"),":"]),t("td",{class:"text-right"},[this.$options.filters.formatNumber(e.row.total_cheques,this.$store.getters.settings.decimals)])]),t("tr",[t("td",[this.$t("submitted"),":"]),t("td",{class:"text-right"},[this.$options.filters.formatNumber(e.row.total_cheques_submitted,this.$store.getters.settings.decimals)])])]):""},renderTotalCreditCard:function(t,e){return e.row.closed_at?t("table",{class:"table table-sm"},[t("tr",[t("td",[this.$t("total"),":"]),t("td",{class:"text-right"},[this.$options.filters.formatNumber(e.row.total_cc_slips,this.$store.getters.settings.decimals)])]),t("tr",[t("td",[this.$t("submitted"),":"]),t("td",{class:"text-right"},[this.$options.filters.formatNumber(e.row.total_cc_slips_submitted,this.$store.getters.settings.decimals)])])]):""}}};const u=(0,c.Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("register",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/reports"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$tc("report",2))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{columns:t.columns,options:t.options,dblClickCB:t.showInfo,url:"app/reports/registers",bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1),t._v(" "),r("Modal",{attrs:{title:t.$t("register_details"),"mask-closable":!1,"footer-hide":!0},model:{value:t.recordModal,callback:function(e){t.recordModal=e},expression:"recordModal"}},[r("pos-register-component",{attrs:{record:t.record,close:t.closeRecordModal}})],1)],1)}),[],!1,null,null,null).exports},40895:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var s=r(23279),a=r.n(s);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l={props:{fields:{type:Array,required:!0},reportForm:{type:Object,default:{}},updated:{type:Number,default:0},statusOptions:{type:Array,default:function(){return[]}}},data:function(){return{form:{date:[],paid:"",void:"",draft:"",title:"",status:"",serial:"",details:"",item_id:"",user_id:"",reference:"",account_id:"",category_id:"",customer_id:"",location_id:"",supplier_id:"",custom_fields:"",to_location_id:"",from_location_id:""},oForm:{},rules:{},users:[],accounts:[],locations:[],categories:[],customers:[],suppliers:[],searching:!1,dateOptions:{shortcuts:[{text:this.$t("today"),value:function(){var t=new Date;return[new Date(t.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,999))]}},{text:this.$t("yesterday"),value:function(){var t=new Date;return t.setTime(t.getTime()-864e5),[new Date(t.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,999))]}},{text:this.$t("x_days",{x:7}),value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[new Date(e.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,999))]}},{text:this.$t("x_days",{x:30}),value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[new Date(e.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,999))]}},{text:this.$t("x_days",{x:60}),value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-5184e6),[new Date(e.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,999))]}},{text:this.$t("x_days",{x:90}),value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[new Date(e.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,999))]}},{text:this.$t("x_days",{x:180}),value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-15552e6),[new Date(e.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,999))]}},{text:this.$t("this_x",{x:this.$t("year")}),value:function(){var t=new Date,e=new Date(t.getFullYear(),0,1),r=new Date(t.getFullYear(),t.getMonth()+1,0);return[new Date(e.setHours(0,0,0,0)),new Date(r.setHours(23,59,59,999))]}},{text:this.$t("last_x",{x:this.$t("year")}),value:function(){var t=new Date,e=new Date(t.getFullYear()-1,0,1),r=new Date(t.getFullYear(),0,0);return[new Date(e.setHours(0,0,0,0)),new Date(r.setHours(23,59,59,999))]}}]}}},watch:{updated:{deep:!0,handler:function(){var t=this;this.fields.map((function(e){t.form[e]=t.reportForm[e]}))}}},created:function(){var t=this;this.oForm=o({},this.form),this.$http.get("app/accounts/search").then((function(e){t.accounts=e.data,t.$http.get("app/locations/search").then((function(e){return t.locations=e.data})).finally((function(){return t.loading=!1}))})).finally((function(){return t.searching=!1}))},mounted:function(){var t=this;this.fields.map((function(e){t.form[e]=t.reportForm[e]}))},methods:{handleSubmit:function(){return this.$emit("submit",this.form),!1},handleReset:function(){this.form=o({},this.oForm),this.$refs.reportForm.resetFields(),this.$emit("submit",this.form)},searchCustomers:function(t){""===t||this.customers.find((function(e){return e.label==t}))||this.getCustomers(t,this)},getCustomers:a()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/customers/search?q="+t).then((function(t){return e.customers=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),searchSuppliers:function(t){""===t||this.suppliers.find((function(e){return e.label==t}))||this.getSuppliers(t,this)},getSuppliers:a()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/suppliers/search?q="+t).then((function(t){return e.suppliers=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),searchUsers:function(t){""===t||this.users.find((function(e){return e.label==t}))||this.getUsers(t,this)},getUsers:a()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/users/search?q="+t).then((function(t){return e.users=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),searchCategories:function(t){""===t||this.categories.find((function(e){return e.label==t}))||this.getCategories(t,this)},getCategories:a()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/categories/search?q="+t).then((function(t){return e.categories=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250)}};const c=(0,r(51900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Form",{ref:"reportForm",attrs:{model:t.form,rules:t.rules,"label-position":"top"}},[r("Row",{attrs:{gutter:16}},[t.fields.includes("date")?r("Col",{attrs:{sm:12,md:12}},[r("FormItem",{attrs:{label:t.$t("date")}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{"split-panels":"",type:"datetimerange",options:t.dateOptions},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1):t._e(),t._v(" "),t.fields.includes("created_at")?r("Col",{attrs:{sm:12,md:12}},[r("FormItem",{attrs:{label:t.$t("created_at")}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","split-panels":"",options:t.dateOptions},model:{value:t.form.created_at,callback:function(e){t.$set(t.form,"created_at",e)},expression:"form.created_at"}})],1)],1):t._e(),t._v(" "),t.fields.includes("reference")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$t("reference")}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1)],1):t._e(),t._v(" "),t.fields.includes("status")&&t.statusOptions.length?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$t("status")}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusOptions,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(t.$t(e)))])})),1)],1)],1):t._e(),t._v(" "),t.fields.includes("custom_fields")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("field",2)}},[r("Input",{model:{value:t.form.custom_fields,callback:function(e){t.$set(t.form,"custom_fields",e)},expression:"form.custom_fields"}})],1)],1):t._e(),t._v(" "),t.fields.includes("location_id")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("location")}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.location_id,callback:function(e){t.$set(t.form,"location_id",e)},expression:"form.location_id"}},[t.locations.length>0?t._l(t.locations,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v("\n              "+t._s(e.label)+"\n            ")])})):t._e()],2)],1)],1):t._e(),t._v(" "),t.fields.includes("from_location")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$t("from_location")}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.from_location_id,callback:function(e){t.$set(t.form,"from_location_id",e)},expression:"form.from_location_id"}},[t.locations.length>0?t._l(t.locations,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v("\n              "+t._s(e.label)+"\n            ")])})):t._e()],2)],1)],1):t._e(),t._v(" "),t.fields.includes("to_location")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$t("to_location")}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.to_location_id,callback:function(e){t.$set(t.form,"to_location_id",e)},expression:"form.to_location_id"}},[t.locations.length>0?t._l(t.locations,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v("\n              "+t._s(e.label)+"\n            ")])})):t._e()],2)],1)],1):t._e(),t._v(" "),t.fields.includes("account_id")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("account")}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,placeholder:""},model:{value:t.form.account_id,callback:function(e){t.$set(t.form,"account_id",e)},expression:"form.account_id"}},t._l(t.accounts,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1):t._e(),t._v(" "),t.fields.includes("category_id")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("category")}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchCategories,placeholder:t.$t("type_to_search")},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categories,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1):t._e(),t._v(" "),t.fields.includes("customer_id")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("customer")}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchCustomers,placeholder:t.$t("type_to_search")},model:{value:t.form.customer_id,callback:function(e){t.$set(t.form,"customer_id",e)},expression:"form.customer_id"}},t._l(t.customers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1):t._e(),t._v(" "),t.fields.includes("supplier_id")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("supplier")}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchSuppliers,placeholder:t.$t("type_to_search")},model:{value:t.form.supplier_id,callback:function(e){t.$set(t.form,"supplier_id",e)},expression:"form.supplier_id"}},t._l(t.suppliers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1):t._e(),t._v(" "),t.fields.includes("user_id")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$t("created_by")}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchUsers,placeholder:t.$t("type_to_search")},model:{value:t.form.user_id,callback:function(e){t.$set(t.form,"user_id",e)},expression:"form.user_id"}},t._l(t.users,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1):t._e(),t._v(" "),t.fields.includes("item_id")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("item")}},[r("Input",{model:{value:t.form.item_id,callback:function(e){t.$set(t.form,"item_id",e)},expression:"form.item_id"}})],1)],1):t._e(),t._v(" "),t.fields.includes("serial")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("serial_number")}},[r("Input",{model:{value:t.form.serial,callback:function(e){t.$set(t.form,"serial",e)},expression:"form.serial"}})],1)],1):t._e(),t._v(" "),t.fields.includes("title")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$t("title")}},[r("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1):t._e(),t._v(" "),t.fields.includes("details")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$t("details")}},[r("Input",{model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1)],1):t._e()],1),t._v(" "),r("Row",{attrs:{gutter:16}},[t.fields.includes("approved")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("approved")}},[r("RadioGroup",{model:{value:t.form.approved,callback:function(e){t.$set(t.form,"approved",e)},expression:"form.approved"}},[r("Radio",{attrs:{label:""}},[r("span",[t._v(t._s(t.$t("all")))])]),t._v(" "),r("Radio",{attrs:{label:"1"}},[r("span",[t._v(t._s(t.$t("yes")))])]),t._v(" "),r("Radio",{attrs:{label:"0"}},[r("span",[t._v(t._s(t.$t("no")))])])],1)],1)],1):t._e(),t._v(" "),t.fields.includes("draft")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("draft")}},[r("RadioGroup",{model:{value:t.form.draft,callback:function(e){t.$set(t.form,"draft",e)},expression:"form.draft"}},[r("Radio",{attrs:{label:""}},[r("span",[t._v(t._s(t.$t("all")))])]),t._v(" "),r("Radio",{attrs:{label:"1"}},[r("span",[t._v(t._s(t.$t("yes")))])]),t._v(" "),r("Radio",{attrs:{label:"0"}},[r("span",[t._v(t._s(t.$t("no")))])])],1)],1)],1):t._e(),t._v(" "),t.fields.includes("paid")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("paid")}},[r("RadioGroup",{model:{value:t.form.paid,callback:function(e){t.$set(t.form,"paid",e)},expression:"form.paid"}},[r("Radio",{attrs:{label:""}},[r("span",[t._v(t._s(t.$t("all")))])]),t._v(" "),r("Radio",{attrs:{label:"1"}},[r("span",[t._v(t._s(t.$t("yes")))])]),t._v(" "),r("Radio",{attrs:{label:"0"}},[r("span",[t._v(t._s(t.$t("no")))])])],1)],1)],1):t._e(),t._v(" "),t.fields.includes("void")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("void")}},[r("RadioGroup",{model:{value:t.form.void,callback:function(e){t.$set(t.form,"void",e)},expression:"form.void"}},[r("Radio",{attrs:{label:""}},[r("span",[t._v(t._s(t.$t("all")))])]),t._v(" "),r("Radio",{attrs:{label:"1"}},[r("span",[t._v(t._s(t.$t("yes")))])]),t._v(" "),r("Radio",{attrs:{label:"0"}},[r("span",[t._v(t._s(t.$t("no")))])])],1)],1)],1):t._e(),t._v(" "),t.fields.includes("pos")?r("Col",{attrs:{sm:12,md:6}},[r("FormItem",{attrs:{label:t.$tc("pos")}},[r("RadioGroup",{model:{value:t.form.pos,callback:function(e){t.$set(t.form,"pos",e)},expression:"form.pos"}},[r("Radio",{attrs:{label:""}},[r("span",[t._v(t._s(t.$t("all")))])]),t._v(" "),r("Radio",{attrs:{label:"1"}},[r("span",[t._v(t._s(t.$t("yes")))])]),t._v(" "),r("Radio",{attrs:{label:"0"}},[r("span",[t._v(t._s(t.$t("no")))])])],1)],1)],1):t._e()],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v(t._s(t.$t("submit")))]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)}),[],!1,null,null,null).exports},29696:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var s=r(2587);const a={data:function(){return{data:{},report_routes:[]}},created:function(){var t=this;this.report_routes=this.routes=(0,s._)(this.$store.state.user_language)[0].children.find((function(t){return"reports"==t.path})).children,this.$http.get("app/reports/totals").then((function(e){t.prepareData(e.data.totals),t.updated++})).finally((function(){return t.loading=!1}))},methods:{prepareData:function(t){this.data=[{label:this.$t("total_x",{x:this.$tc("sale",2)}),value:t.sales},{label:this.$t("total_x",{x:this.$tc("purchase",2)}),value:t.purchases},{label:this.$t("total_x",{x:this.$tc("income",2)}),value:t.incomes},{label:this.$t("total_x",{x:this.$tc("expense",2)}),value:t.expenses},{label:this.$t("total_x",{x:this.$tc("quotation",2)}),value:t.quotations},{label:this.$t("total_x",{x:this.$tc("return_order",2)}),value:t.return_orders},{label:this.$t("total_x",{x:this.$tc("stock_adjustment",2)}),value:t.stock_adjustments},{label:this.$t("total_x",{x:this.$tc("stock_transfer",2)}),value:t.stock_transfers},{label:this.$t("total_x",{x:this.$tc("customer",2)}),value:t.customers},{label:this.$t("total_x",{x:this.$tc("supplier",2)}),value:t.suppliers},{label:this.$t("total_x",{x:this.$tc("category",2)}),value:t.categories},{label:this.$t("total_x",{x:this.$tc("brand",2)}),value:t.brands},{label:this.$t("total_x",{x:this.$tc("item",2)}),value:t.standard_items},{label:this.$t("total_x",{x:this.$tc("service",2)}),value:t.services},{label:this.$t("total_x",{x:this.$tc("recipe",2)}),value:t.recipes},{label:this.$t("total_x",{x:this.$tc("combo",2)}),value:t.combos}]},onSelect:function(t){t&&("mail_settings"==t?this.email=!0:"scale_barcode"==t?this.scale_barcode_show=!0:"payment_settings"==t?this.payment=!0:this.$router.push({name:t}))}}};const i=(0,r(51900).Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("report",2)))]),t._v(" "),r("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[r("Dropdown",{staticStyle:{margin:"0 -5px 0 20px"},attrs:{placement:"bottom-end"},on:{"on-click":t.onSelect}},[r("a",{staticStyle:{"padding-right":"10px"},attrs:{href:"javascript:void(0)"}},[r("Icon",{attrs:{type:"md-menu",size:"18"}})],1),t._v(" "),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[t.report_routes.length>0?[t._l(t.report_routes,(function(e,s){return[s&&!e.meta.hideInMenu?[r("DropdownItem",{key:e.name,attrs:{name:e.name,divided:e.meta.divided}},[t._v("\n                "+t._s(e.meta.title)+"\n              ")])]:t._e()]}))]:t._e()],2)],1)],1),t._v(" "),r("div",{staticStyle:{"margin-bottom":"-16px"}},[r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[r("Col",{key:s,attrs:{sm:12,md:6}},[r("div",{staticClass:"box dark static"},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(parseInt(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])])]}))],2),t._v(" "),r("h3",{staticClass:"mt16 mb16"},[t._v(t._s(t.$t("links")))]),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.report_routes,(function(e,s){return[s&&!e.meta.hideInMenu?r("Col",{key:s,attrs:{sm:12,md:6}},[r("router-link",{staticClass:"box-hover",attrs:{to:e.path}},[r("div",{staticClass:"box static"},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(e.meta.title))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])])],1):t._e()]}))],2)],1)])}),[],!1,null,null,null).exports},57037:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d});var s=r(92704),a=r(40895),i=r(79478);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const c={mixins:[(0,s.Z)("sale","app/sales","reference")],components:{OrderViewComponent:i.Z,ReportFormComponent:a.Z},data:function(){return{url:"",data:{},sale:{},updated:0,view:!1,printData:{},loading:!1,showForm:!1,printing:!1,printModal:!1,reportForm:{},fields:["date","reference","custom_fields","customer_id","user_id","draft","paid","void","pos","item_id","serial"],columns:[{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",width:100,render:this.renderDate},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",minWidth:150},{maxWidth:300,minWidth:200,key:"customer",sortable:!1,title:this.$tc("customer"),render:this.renderCustomer},{title:this.$t("draft"),sortable:!0,key:"draft",width:80,render:this.renderIconDraft},{title:this.$t("paid"),sortable:!0,key:"paid",width:75,render:this.renderIconPaid},{title:this.$t("void"),sortable:!0,key:"void",width:75,render:this.renderIconVoid},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("total"),sortable:!1,key:"total",width:150,render:this.renderTotal},{title:this.$t("item_tax"),sortable:!1,key:"item_tax_amount",width:125,render:this.renderItemTax},{title:this.$t("order_tax"),sortable:!1,key:"order_tax_amount",width:125,render:this.renderOrderTax},{title:this.$t("discount"),sortable:!1,key:"discount_amount",width:125,render:this.renderDiscount},{title:this.$t("shipping"),sortable:!1,key:"shipping",width:125,render:this.renderShipping},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0,width:350}],options:{hideSearch:!0,showSummary:!0,summaryMethod:this.handleSummary,perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++})),this.fields.map((function(e){t.reportForm[e]=""})),this.reportForm.end_date="",this.reportForm.start_date="",this.url="app/reports/sales/table?"+this.queryString(this.reportForm),this.$http.get("app/reports/sales",{params:n(n({},this.reportForm),{},{date:""})}).then((function(e){t.reportForm.date=[new Date(e.data.start_date),new Date(e.data.end_date)],t.prepareData(e.data.sales),t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.date&&this.reportForm.date[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.date[0]).format(this.datetimeFormatString())),this.reportForm.date&&this.reportForm.date[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.date[1]).format(this.datetimeFormatString())),delete this.reportForm.date,this.url="app/reports/sales/table?"+this.queryString(this.reportForm),this.refresh++,this.$http.get("app/reports/sales",{params:n(n({},this.reportForm),{},{date:""})}).then((function(t){e.reportForm.date=[new Date(t.data.start_date),new Date(t.data.end_date)],e.prepareData(t.data.sales),e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.reportForm.end_date=this.reportForm.date[1],this.reportForm.start_date=this.reportForm.date[0],this.data=[{label:this.$t("total_x",{x:this.$tc("sale",2)}),value:t.grand_total},{label:this.$t("total_x",{x:this.$tc("tax",2)}),value:t.total_tax_amount},{label:this.$t("total_x",{x:this.$t("recoverable_tax_amount")}),value:t.recoverable_tax_amount},{label:this.$t("total_x",{x:this.$t("recoverable_tax_calculated_on")}),value:t.recoverable_tax_calculated_on},{label:this.$t("total_x",{x:this.$t("discount")}),value:t.discount_amount},{label:this.$t("total_x",{x:this.$t("shipping")}),value:t.shipping}]},showReceipt:function(){var t=this;this.printData.type="receipt",this.printData.order=this.sale,this.printData.order.items=this.printData.order.items.map((function(t){return t.selected={portions:[],variations:[],modifiers:[]},t.selected.portions=t.portions,t.selected.variations=t.variations,t.selected.modifiers=t.modifier_options,t})),this.$Modal.confirm({width:365,closable:!0,scrollable:!0,render:function(e){return e("print-component",{props:{print:t.printData,vm:t}})},okText:this.$t("print"),onOk:function(){window.print()},onCancel:function(){setTimeout((function(){return t.printData={}}),200)}})},viewModal:function(t){var e=this;t.id!=this.sale.id?(this.loading=!0,this.$http.get("app/sales/".concat(t.id)).then((function(t){e.sale=t.data,1==e.sale.pos?e.showReceipt():e.view=!0})).finally((function(){return e.loading=!1}))):1==this.sale.pos?this.showReceipt():this.view=!0},renderCustomer:function(t,e){return t("div",[e.row.customer.name])},renderTotal:function(t,e){return this.renderNumber(t,e,"total")},renderItemTax:function(t,e){return this.renderNumber(t,e,"item_tax_amount")},renderOrderTax:function(t,e){return this.renderNumber(t,e,"order_tax_amount")},renderDiscount:function(t,e){return this.renderNumber(t,e,"discount_amount")},renderShipping:function(t,e){return this.renderNumber(t,e,"shipping")},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total",!0)},renderIconActive:function(t,e){return this.renderUnlessIcon(t,e,"draft")},renderIconDraft:function(t,e){return this.renderBoolean(t,e,"draft")},renderIconPaid:function(t,e){return this.renderBoolean(t,e,"paid")},renderIconVoid:function(t,e){return this.renderBoolean(t,e,"void")},rowClassName:function(t,e){return 1==t.void?"ivu-table-error-row":1==t.draft?"ivu-table-warning-row":1==t.paid?"ivu-table-success-row":""},handleSummary:function(t){var e=this,r=t.columns,s=t.data,a=["grand_total","total","item_tax_amount","order_tax_amount","discount_amount","shipping"],i={};return r.forEach((function(t,r){var o=t.key;if(a.includes(o)){var n=s.map((function(t){return t.void||t.draft?0:Number(e.formatDecimal(t[o]))}));if(!n.every((function(t){return isNaN(t)}))){var l=n.reduce((function(t,e){return isNaN(Number(e))?t:t+e}),0);i[o]={key:o,value:e.formatNumber(l)}}}else i[o]={key:o,value:""}})),i}}};const d=(0,r(51900).Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("x_report",{x:t.$tc("sale",2)}))+" ("+t._s(t.datetime(new Date(t.reportForm.start_date)))+" -\n      "+t._s(t.datetime(new Date(t.reportForm.end_date)))+")\n    ")]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,reportForm:t.reportForm,updated:t.updated},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[e.value&&0!=e.value?r("Col",{key:s,attrs:{sm:12,md:6}},[r("div",{staticClass:"box static",class:"box"+(s+1)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatNumber(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])]):t._e()]}))],2),t._v(" "),r("table-component",{attrs:{url:t.url,stripe:!1,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords,"row-class-name":t.rowClassName}})],1)],1),t._v(" "),t.loading?r("center-loading-component"):t._e(),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("sale")+" ("+t.sale.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{record:t.sale,heading:t.$tc("sale"),"to-text":t.$tc("bill_to")},on:{remove:function(e){return t.deleteAttachment(e,t.sale)}}})],1)],1)}),[],!1,null,null,null).exports},17253:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(92704),a=r(40895);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l={components:{OrderViewComponent:r(79478).Z,ReportFormComponent:a.Z},mixins:[(0,s.Z)("stock_adjustment","app/stock_adjustments","reference")],data:function(){var t;return{url:"",data:{},updated:0,view:!1,loading:!1,showForm:!1,reportForm:{},stock_adjustment:{},fields:["date","reference","custom_fields","item_id","serial","user_id","details","draft"],columns:[{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",width:100,render:this.renderDate},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$t("type"),sortable:!0,key:"type",width:125,render:this.renderType},{title:this.$t("total"),sortable:!0,key:"grand_total",width:150,render:this.renderGrandTotal},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{minWidth:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("draft"),sortable:!0,key:"draft",width:80,render:this.renderIconDraft},(t={title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0},n(t,"ellipsis",!0),n(t,"minWidth",250),n(t,"maxWidth",600),t),{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt}],options:{hideSearch:!0,showSummary:!0,summaryMethod:this.handleSummary,perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++})),this.fields.map((function(e){t.reportForm[e]=""})),this.reportForm.end_date="",this.reportForm.start_date="",this.url="app/reports/adjustments/table?"+this.queryString(this.reportForm),this.$http.get("app/reports/adjustments",{params:o(o({},this.reportForm),{},{date:""})}).then((function(e){t.reportForm.date=[new Date(e.data.start_date),new Date(e.data.end_date)],t.prepareData(e.data.stock_adjustments),t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.date&&this.reportForm.date[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.date[0]).format(this.datetimeFormatString())),this.reportForm.date&&this.reportForm.date[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.date[1]).format(this.datetimeFormatString())),delete this.reportForm.date,this.url="app/reports/adjustments/table?"+this.queryString(this.reportForm),this.refresh++,this.$http.get("app/reports/adjustments",{params:o(o({},this.reportForm),{},{date:""})}).then((function(t){e.reportForm.date=[new Date(t.data.start_date),new Date(t.data.end_date)],e.prepareData(t.data.stock_adjustments),e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.reportForm.end_date=this.reportForm.date[1],this.reportForm.start_date=this.reportForm.date[0],this.data=[{label:this.$t("total_x",{x:this.$tc("stock_adjustment",2)}),value:t.grand_total},{label:this.$t("total_x",{x:this.$tc("tax",2)}),value:t.total_tax_amount},{label:this.$t("total_x",{x:this.$tc("additions")}),value:t.additions_total},{label:this.$t("total_x",{x:this.$tc("damages")}),value:t.damages_total},{label:this.$t("total_x",{x:this.$tc("subtractions")}),value:t.subtractions_total}]},viewModal:function(t){var e=this;this.view=!0,t.id!=this.stock_adjustment.id&&(this.loading=!0,this.$http.get("app/adjustments/".concat(t.id)).then((function(t){return e.stock_adjustment=t.data})).finally((function(){return e.loading=!1})))},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total")},renderIconDraft:function(t,e){return this.renderBoolean(t,e,"draft")},renderType:function(t,e){return t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-".concat("addition"==e.row.type?"green":"red"," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[this.capitalize(e.row.type)])])])},handleSummary:function(t){var e=this,r=t.columns,s=t.data,a=["grand_total"],i={};return r.forEach((function(t,r){var o=t.key;if(a.includes(o)){var n=s.map((function(t){return t.void||t.draft?0:Number(e.formatDecimal(t[o]))}));if(!n.every((function(t){return isNaN(t)}))){var l=n.reduce((function(t,e){return isNaN(Number(e))?t:t+e}),0);i[o]={key:o,value:e.formatNumber(l)}}}else i[o]={key:o,value:""}})),i}}};const c=(0,r(51900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("x_report",{x:t.$tc("stock_adjustment",2)}))+" ("+t._s(t.datetime(new Date(t.reportForm.start_date)))+" -\n      "+t._s(t.datetime(new Date(t.reportForm.end_date)))+")\n    ")]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,reportForm:t.reportForm,updated:t.updated},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[e.value&&0!=e.value?r("Col",{key:s,attrs:{sm:12,md:6}},[r("div",{staticClass:"box static",class:"box"+(s+1)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatNumber(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])]):t._e()]}))],2),t._v(" "),r("table-component",{attrs:{url:t.url,stripe:!1,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("stock_adjustment")+" ("+t.stock_adjustment.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{"to-text":"",to:!1,field:"cost",payment:!1,record:t.stock_adjustment,heading:t.$tc("stock_adjustment")},on:{remove:function(e){return t.deleteAttachment(e,t.stock_adjustment)}}})],1)],1)}),[],!1,null,null,null).exports},2050:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(92704),a=r(40895);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l={components:{OrderViewComponent:r(79478).Z,ReportFormComponent:a.Z},mixins:[(0,s.Z)("stock_transfer","app/transfers/stock","reference")],data:function(){var t;return{url:"",data:{},updated:0,view:!1,loading:!1,showForm:!1,reportForm:{},stock_transfer:{},status_options:["pending","transferring","transferred"],fields:["created_at","reference","custom_fields","item_id","user_id","from_location","to_location","status"],columns:[{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{key:"to",maxWidth:300,minWidth:200,sortable:!1,title:this.$tc("to_location"),render:this.renderToAccount},{key:"from",maxWidth:300,minWidth:200,sortable:!1,render:this.renderFromAccount,title:this.$tc("from_location")},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},(t={title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0},n(t,"ellipsis",!0),n(t,"minWidth",250),n(t,"maxWidth",600),t)],options:{hideSearch:!0,perPage:this.$store.state.settings.rows,orderBy:["created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++})),this.fields.map((function(e){t.reportForm[e]=""})),this.reportForm.end_date="",this.reportForm.start_date="",this.url="app/reports/stock_transfers/table?"+this.queryString(this.reportForm),this.$http.get("app/reports/stock_transfers",{params:o(o({},this.reportForm),{},{date:""})}).then((function(e){t.reportForm.created_at=[new Date(e.data.start_date),new Date(e.data.end_date)],t.prepareData(e.data.stock_transfers),t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.created_at&&this.reportForm.created_at[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.created_at[0]).format(this.datetimeFormatString())),this.reportForm.created_at&&this.reportForm.created_at[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.created_at[1]).format(this.datetimeFormatString())),delete this.reportForm.created_at,this.url="app/reports/stock_transfers/table?"+this.queryString(this.reportForm),this.refresh++,this.$http.get("app/reports/stock_transfers",{params:o(o({},this.reportForm),{},{date:""})}).then((function(t){e.reportForm.created_at=[new Date(t.data.start_date),new Date(t.data.end_date)],e.prepareData(t.data.stock_transfers),e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.reportForm.end_date=this.reportForm.created_at[1],this.reportForm.start_date=this.reportForm.created_at[0],this.data=[{label:this.$t("total_x",{x:this.$tc("stock_transfer",2)}),value:t.count}]},viewModal:function(t){var e=this;this.view=!0,t.id!=this.stock_transfer.id&&(this.loading=!0,this.$http.get("app/transfers/stock/".concat(t.id)).then((function(t){return e.stock_transfer=t.data})).finally((function(){return e.loading=!1})))},renderToAccount:function(t,e){return t("div",[e.row.to_location.name])},renderFromAccount:function(t,e){return t("div",[e.row.from_location.name])}}};const c=(0,r(51900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("x_report",{x:t.$tc("stock_transfer",2)}))+" ("+t._s(t.datetime(t.reportForm.start_date))+" - "+t._s(t.datetime(t.reportForm.end_date))+")\n    ")]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,updated:t.updated,reportForm:t.reportForm,statusOptions:t.status_options},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[e.value&&0!=e.value?r("Col",{key:s,attrs:{sm:12,md:6}},[r("div",{staticClass:"box static",class:"box"+(s+1)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatNumber(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])]):t._e()]}))],2),t._v(" "),r("table-component",{attrs:{url:t.url,stripe:!1,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("stock_transfer")+" ("+t.stock_transfer.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{field:"cost",extra:!1,payment:!1,"only-qty":!0,to:"to_location","to-text":t.$t("to"),from:"from_location",record:t.stock_transfer,heading:t.$tc("stock_transfer")},on:{remove:function(e){return t.deleteAttachment(e,t.stock_transfer)}}})],1)],1)}),[],!1,null,null,null).exports},72250:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const o={components:{ReportFormComponent:r(40895).Z},data:function(){return{data:{},sales:{},updated:0,purchases:{},loading:!1,showForm:!1,reportForm:{},fields:["date"]}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++})),this.fields.map((function(e){t.reportForm[e]=""})),this.reportForm.end_date="",this.reportForm.start_date="",this.$http.get("app/reports/taxes",{params:a(a({},this.reportForm),{},{date:""})}).then((function(e){t.reportForm.date=[new Date(e.data.start_date),new Date(e.data.end_date)],t.prepareData(e.data.taxes),t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.date&&this.reportForm.date[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.date[0]).format(this.datetimeFormatString())),this.reportForm.date&&this.reportForm.date[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.date[1]).format(this.datetimeFormatString())),delete this.reportForm.date,this.refresh++,this.$http.get("app/reports/taxes",{params:a(a({},this.reportForm),{},{date:""})}).then((function(t){e.reportForm.date=[new Date(t.data.start_date),new Date(t.data.end_date)],e.prepareData(t.data.taxes),e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.reportForm.end_date=this.reportForm.date[1],this.reportForm.start_date=this.reportForm.date[0],this.sales=[{label:this.$t("total_x",{x:this.$tc("sale",2)}),value:t[0].grand_total},{label:this.$t("total_x",{x:this.$tc("tax",2)}),value:t[0].total_tax_amount},{label:this.$t("total_x",{x:this.$t("recoverable_tax_amount")}),value:t[0].recoverable_tax_amount},{label:this.$t("total_x",{x:this.$t("recoverable_tax_calculated_on")}),value:t[0].recoverable_tax_calculated_on}],this.purchase=[{label:this.$t("total_x",{x:this.$tc("purchase",2)}),value:t[1].grand_total},{label:this.$t("total_x",{x:this.$tc("tax",2)}),value:t[1].total_tax_amount},{label:this.$t("total_x",{x:this.$t("recoverable_tax_amount")}),value:t[1].recoverable_tax_amount},{label:this.$t("total_x",{x:this.$t("recoverable_tax_calculated_on")}),value:t[1].recoverable_tax_calculated_on}]}}};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("x_report",{x:t.$tc("tax")}))+" ("+t._s(t.datetime(new Date(t.reportForm.start_date)))+" -\n      "+t._s(t.datetime(new Date(t.reportForm.end_date)))+")\n    ")]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,reportForm:t.reportForm,updated:t.updated},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("sale",2)))]),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.sales,(function(e,s){return[e.value&&0!=e.value?r("Col",{key:s,attrs:{sm:12,md:6}},[r("div",{staticClass:"box static",class:"box"+(s+1)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatNumber(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])]):t._e()]}))],2)],1),t._v(" "),r("Card",{staticClass:"mt16",attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("purchase",2)))]),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.purchase,(function(e,s){return[e.value&&0!=e.value?r("Col",{key:s,attrs:{sm:12,md:6}},[r("div",{staticClass:"box static",class:"box"+(s+1)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatNumber(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])]):t._e()]}))],2)],1)],1)],1),t._v(" "),t.loading?r("center-loading-component"):t._e()],1)}),[],!1,null,null,null).exports},71750:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={mixins:[(0,r(92704).Z)("time_clock","app/reports/time_clocks","id","id")],data:function(){return{url:"app/reports/time_clocks",columns:[{title:this.$t("in"),sortable:!0,key:"in",minWidth:150,render:this.renderIn},{title:this.$t("out"),sortable:!0,key:"out",minWidth:150,render:this.renderOut},{title:this.$t("hours"),sortable:!1,key:"hours",width:100,render:this.rendersHours},{title:this.$tc("rate"),sortable:!1,key:"rate",width:100,render:this.renderRate},{title:this.$tc("amount"),sortable:!1,key:"amount",width:100,render:this.rendersAmount},{title:this.$tc("user"),sortable:!0,key:"user",minWidth:150,render:this.renderUser},{title:this.$tc("location"),sortable:!0,key:"location",minWidth:150,render:this.renderLocation},{title:this.$t("details"),sortable:!0,key:"details",ellipsis:!0,minWidth:250},{title:this.$t("created_at"),sortable:!0,key:"created_at",sortType:"asc",minWidth:150,render:this.renderCreatedAt}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},created:function(){this.url="/app/reports/time_clocks"+(this.$route.query.user_id?"?user_id="+this.$route.query.user_id:"")},methods:{renderLocation:function(t,e){return t("div",[e.row.location.name])},renderUser:function(t,e){return t("div",[e.row.user.name])},rendersHours:function(t,e){if(!e.row.out)return"";var r=parseFloat(Math.abs(new Date(e.row.in)-new Date(e.row.out))/36e5);return t("div",{class:"text-right"},[this.$options.filters.formatNumber(r,this.$store.state.settings.decimals)])},rendersAmount:function(t,e){if(!e.row.out)return"";var r=parseFloat(Math.abs(new Date(e.row.in)-new Date(e.row.out))/36e5)*e.row.rate;return t("div",{class:"text-right"},[this.$options.filters.formatNumber(r,this.$store.state.settings.decimals)])},renderIn:function(t,e){return t("div",[e.row.in?this.$options.filters.formatDate(e.row.in,this.$store.state.settings.dateformat+" HH:mm A"):""])},renderOut:function(t,e){return t("div",[e.row.out?this.$options.filters.formatDate(e.row.out,this.$store.state.settings.dateformat+" HH:mm A"):""])},renderRate:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatNumber(e.row.rate,this.$store.getters.settings.decimals)])}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("time_clock",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/reports"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$tc("report",2))+"\n  ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:t.url,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords}})],1)],1)}),[],!1,null,null,null).exports},92543:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var s=r(92704);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const i={components:{ReportFormComponent:r(40895).Z},mixins:[(0,s.Z)("item","app/items","reference")],data:function(){var t;return{url:"",item:{},dates:[],updated:0,view:!1,loading:!1,reportForm:{},showForm:!1,fields:["date","category_id","customer_id","user_id"],columns:[{title:this.$t("code"),sortable:!1,key:"code",minWidth:150},{title:this.$t("name"),sortable:!1,key:"name",minWidth:175},(t={title:this.$t("sold"),sortable:"custom",sortType:"desc",key:"sold",minWidth:200},a(t,"minWidth",80),a(t,"render",this.renderSold),t)],options:{orderBy:[],hideSearch:!0,perPage:this.$store.state.settings.rows}}},created:function(){var t=this;this.fields.map((function(e){t.reportForm[e]=""})),this.reportForm.end_date="",this.reportForm.start_date="",this.$event.listen("table:loaded",this.setDates),this.url="app/reports/items/top?"+this.queryString(this.reportForm)},methods:{setDates:function(t){this.dates=t},handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.end_date="",this.reportForm.start_date="",this.reportForm.date&&this.reportForm.date[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.date[0]).format(this.datetimeFormatString())),this.reportForm.date&&this.reportForm.date[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.date[1]).format(this.datetimeFormatString())),delete this.reportForm.date,this.url="app/reports/items/top?"+this.queryString(this.reportForm),this.refresh++},renderSold:function(t,e){return t("div",{class:"bold text-right"},[this.formatNumber(e.row.sold||0,this.$store.state.settings.quantity_decimals)])}}};const o=(0,r(51900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("x_report",{x:t.$t("top_items")}))+"\n      "),t.dates[0]&&t.dates[1]?r("span",[t._v(" ("+t._s(t.datetime(new Date(t.dates[0])))+" - "+t._s(t.datetime(new Date(t.dates[1])))+") ")]):t._e()]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n      "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n    ")],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,reportForm:t.reportForm,updated:t.updated},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("table-component",{attrs:{url:t.url,columns:t.columns,"sub-data":"table",options:t.options,refresh:t.refresh}})],1)],1)],1)}),[],!1,null,null,null).exports},74374:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d});var s=r(21490),a=r(61402);const i={props:{field:{type:String},editItem:{type:Function},deleteItem:{type:Function},calcItemTax:{type:Function},calcRowTotal:{type:Function},customer:{type:[Boolean,Object]},row:{type:Object,required:!0},deleteItemVariation:{type:Function},index:{type:Number,required:!0},itemVariationQuantityChanged:{type:Function}}};var o=r(51900);const n=(0,o.Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-item"},[r("span",{staticClass:"item"},[r("span",{staticClass:"index"},[t._v(t._s(t.index+1))]),t._v(" "),r("span",{staticClass:"remove"},[t.row.selected.variations&&t.row.selected.portions&&!t.row.selected.portions.length&&!t.row.selected.variations.length?r("span",[r("Icon",{staticClass:"pointer",attrs:{size:"18",type:"md-close",color:"#ed4014"},on:{click:function(e){return t.deleteItem(t.row.guid)}}})],1):t._e()]),t._v(" "),r("span",{staticClass:"details pointer",on:{click:function(e){return t.editItem(t.index)}}},[r("strong",[t._v(t._s(t.row.name))]),t._v(" "),r("br"),t._v(" "),r("span",[t.customer&&t.customer.customer_group?r("span",{domProps:{innerHTML:t._s(t.customer.customer_group.name+" (<small>"+t.$t("discount")+": "+t.customer.customer_group.discount+"%</small>)<br />")}}):t._e(),t._v(" "),t.row.comment?r("span",[t._v(t._s(t.row.comment)+" ")]):t._e()])]),t._v(" "),t.row.selected.variations&&t.row.selected.portions&&!t.row.selected.portions.length&&!t.row.selected.variations.length?[r("span",{staticClass:"price"},[t._v("\n        "+t._s(t.formatNumber(t.row[t.field]-t.row.discount_amount+t.calcItemTax(t.row)))+"\n      ")]),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!t.row.selected.variations.length||!!t.row.selected.portions.length,size:t.row.selected.variations.length||t.row.selected.portions.length?"small":"default"},model:{value:t.row.quantity,callback:function(e){t.$set(t.row,"quantity",e)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(t.row.taxes,(function(e){return r("div",{key:"tax_"+e.id},[t._v("\n          "+t._s(e.code)+"\n          "),r("span",{staticClass:"float-right"},[t._v("\n            "+t._s(t.formatNumber(e.amount*t.row.quantity))+"\n          ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n        "+t._s(t.formatNumber(t.calcRowTotal(t.row)))+"\n      ")])]:[r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!t.row.selected.variations.length||!!t.row.selected.portions.length,size:t.row.selected.variations.length||t.row.selected.portions.length?"small":"default"},model:{value:t.row.quantity,callback:function(e){t.$set(t.row,"quantity",e)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})]],2),t._v(" "),t.row.selected.variations&&t.row.selected.variations.length?t._l(t.row.selected.variations,(function(e,s){return r("div",{key:"svi_"+s,staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.deleteItemVariation(t.row,e)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n        "+t._s(s+1)+".\n        "),r("span",{domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("span",{staticClass:"price"},[t._v("\n        "+t._s(t.formatNumber(e[t.field]))+"\n      ")]),t._v(" "),r("span",{staticClass:"discount"},[t._v("\n        "+t._s(t.formatNumber(e.discount_amount))+"\n      ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemVariationQuantityChanged(t.form.items[t.index])}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"sv.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(e){return r("div",{key:"sv_"+e.id},[t._v("\n          "+t._s(e.code)+"\n          "),r("span",{staticClass:"float-right"},[t._v("\n            "+t._s(t.formatNumber(e.amount*t.row.quantity))+"\n          ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n        "+t._s(t.formatNumber((e[t.field]-e.discount_amount+e.total_tax_amount)*e.quantity))+"\n      ")])])})):t._e(),t._v(" "),t.row.selected.portions.length?t._l(t.row.selected.portions,(function(e,s){return r("div",{key:"spi_"+s,staticClass:"combo"},t._l(t.row.portions.filter((function(t){return t.id==e.id})),(function(a){return r("div",{key:"pi_"+a.id,staticClass:"combo"},[r("div",{staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.deleteItemPortion(t.row,e,s)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[r("p",[t._v("\n              "+t._s(s+1)+". "+t._s(t.$tc("portion"))+":\n              "),r("strong",[t._v(t._s("regular"==a.name?t.$t("regular"):a.name))])])]),t._v(" "),r("span",{staticClass:"price"},[t._v(t._s(t.formatNumber(e[t.field])))]),t._v(" "),r("span",{staticClass:"discount"},[t._v("\n            "+t._s(t.formatNumber(e.discount_amount))+"\n          ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemPortionQuantityChanged(t.form.items[t.index])}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"sp.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(s){return r("div",{key:"sp_"+s.id},[t._v("\n              "+t._s(s.code)+"\n              "),r("span",{staticClass:"float-right"},[t._v("\n                "+t._s(t.formatNumber(s.amount*e.quantity))+"\n              ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n            "+t._s(t.formatNumber((e[t.field]-e.discount_amount+e.total_tax_amount)*e.quantity))+"\n          ")])]),t._v(" "),t._l(a.essentials,(function(s,a){return r("div",{key:"ei_"+a,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"}),t._v(" "),r("span",{staticClass:"details"},[t._v(" #"+t._s(a+1)+" "+t._s(s.item.name)+" ")]),t._v(" "),r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n            "+t._s(parseFloat(s.quantity*e.quantity))+"\n          ")]),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})])})),t._v(" "),t._l(a.choosables,(function(s,i){return t._l(s.items,(function(o,n){return t.getPortionChoosable(e,s.id,o.item_id)?r("div",{key:"gii_"+n+"_"+i,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"}),t._v(" "),r("span",{staticClass:"details"},[t._v("\n              #"+t._s(i+1+a.essentials.length)+"\n              "+t._s(o.item.name)+"\n            ")]),t._v(" "),r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n              "+t._s(parseFloat(o.quantity*e.quantity))+"\n            ")]),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})]):t._e()}))}))],2)})),0)})):t._e(),t._v(" "),t.row.selected.modifiers.length?[r("div",{staticClass:"combo-item bg"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"details"},[r("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.$tc("modifier",2)))])]),t._v(" "),r("span",{staticClass:"price"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"discount"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"taxes"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(" ")])]),t._v(" "),t._l(t.row.selected.modifiers,(function(e,s){return r("div",{key:"mi_"+s},[r("div",{staticClass:"combo-item pt pb"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.deleteItemModifier(t.row,e,s)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n          "+t._s(s+1)+". "),r("strong",[t._v(t._s(e.option))]),t._v(" ("+t._s(e.title)+")\n        ")]),t._v(" "),r("span",{staticClass:"price"},[t._v("\n          "+t._s(t.formatNumber(e[t.field]))+"\n        ")]),t._v(" "),r("span",{staticClass:"discount"},[t._v("\n          "+t._s(t.formatNumber(e.discount_amount*e.quantity))+"\n        ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"m.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(s){return r("div",{key:"m_"+s.id},[t._v("\n            "+t._s(s.code)+"\n            "),r("span",{staticClass:"float-right"},[t._v("\n              "+t._s(t.formatNumber(s.amount*e.quantity))+"\n            ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"})])])}))]:t._e()],2)}),[],!1,null,null,null).exports;const l={props:{taxes:{type:Array},field:{type:String},itemPrice:{type:Function},deleteItem:{type:Function},updateItem:{type:Function},modOptLabel:{type:Function},itemDiscount:{type:Function},addPortionToEditItem:{type:Function},changeSelectedPortion:{type:Function},edit_item:{type:Object,required:!0}}};const c={components:{EditRowItemComponent:(0,o.Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",{attrs:{gutter:16}},[t.edit_item.portions.length||t.edit_item.has_variants?t._e():r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{staticClass:"text-center",attrs:{prop:"quantity",label:t.$t("quantity"),rules:{type:"number",required:!0,trigger:"change",message:t.$t("field_is_required",{field:t.$t("quantity")})}}},[r("InputNumber",{attrs:{size:"large"},model:{value:t.edit_item.quantity,callback:function(e){t.$set(t.edit_item,"quantity",e)},expression:"edit_item.quantity"}})],1)],1),t._v(" "),t.edit_item.portions&&t.edit_item.portions.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},t._l(t.edit_item.selected.portions,(function(e,s){return r("span",{key:"eispi_"+s},t._l(t.edit_item.portions.filter((function(t){return t.id==e.id})),(function(a){return r("span",{key:"pi_"+a.id},[r("Card",{staticClass:"cardp",attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"ios-option"}}),t._v("\n                "+t._s(s+1)+". "+t._s(t.$tc("portion"))+": ("+t._s("regular"==a.name?t.$t("regular"):a.name)+")\n              ")],1),t._v(" "),!s&&t.edit_item.portions.length>1?r("Button",{attrs:{slot:"extra",type:"primary",size:"small"},on:{click:function(e){return t.addPortionToEditItem()}},slot:"extra"},[t._v("\n                "+t._s(t.$t("add_x",{x:t.$tc("portion")}))+"\n              ")]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{staticClass:"mb16",attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("portion")}},[r("Select",{attrs:{value:e.id},on:{"on-change":function(e){return t.changeSelectedPortion(e,s)}}},t._l(t.edit_item.portions,(function(e,s){return r("Option",{key:"pi_"+s,attrs:{value:e.id}},[t._v("\n                        "+t._s("regular"==e.name?t.$t("regular"):e.name)+"\n                      ")])})),1)],1)],1),t._v(" "),r("Col",{staticClass:"mb16",attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("quantity")}},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"eisp.quantity"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                      "+t._s(t.$t("essential_items"))+"\n                    ")])]),t._v(" "),r("p",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[t._v("\n                    "+t._s(a.essentials.map((function(t){return t.item.name})).join(", "))+"\n                  ")]),t._v(" "),r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                      "+t._s(t.$t("choosable_items"))+"\n                    ")])]),t._v(" "),r("Row",{attrs:{gutter:16}},t._l(a.choosables,(function(a,i){return r("Col",{key:"gi_"+i,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:a.name,prop:"selected.portions."+s+".choosables."+i+".selected",rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("item")})}}},[r("Select",{model:{value:e.choosables[i].selected,callback:function(r){t.$set(e.choosables[i],"selected",r)},expression:"eisp.choosables[gi].selected"}},t._l(a.items,(function(e,s){return r("Option",{key:"gii_"+s,attrs:{value:e.item_id}},[t._v("\n                            "+t._s(e.item.name)+"\n                          ")])})),1)],1)],1)})),1)],1)],1)],1)],1)})),0)})),0),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),t.edit_item.variants&&t.edit_item.variants.length?[t._l(t.edit_item.selected.variations,(function(e,s){return r("span",{key:"sv_meta_"+s},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("span",{staticStyle:{color:"#515a6e"},domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("quantity"),prop:"selected.variations."+s+".quantity",rules:{required:!0,type:"number",trigger:"change",max:parseFloat(e.available),message:t.$t("only_x_quantity_available",{x:parseFloat(e.available)})}}},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"eisv.quantity"}})],1)],1),t._v(" "),r("Col",{staticClass:"text-primary",staticStyle:{"padding-top":"2.5em"},attrs:{sm:24,md:12,lg:12}},[t._v("\n          "+t._s(t.$t("available_x",{x:t.$t("quantity")}))+":\n          "),r("strong",[t._v(t._s(e.available))])])],1)})),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),t.edit_item.modifiers&&t.edit_item.modifiers.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n            "+t._s(t.$tc("modifier",2))+"\n          ")])])],1),t._v(" "),t._l(t.edit_item.modifiers,(function(e,s){return r("Col",{key:"mi_"+s,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:e.title,prop:"modifiers"}},["radio"==e.show_as?r("span",[r("RadioGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"checkbox"==e.show_as?r("span",[r("CheckboxGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select"==e.show_as?r("span",[r("Select",{model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select_multiple"==e.show_as?r("span",[r("Select",{attrs:{multiple:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):t._e()])],1)})),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n        "+t._s(t.$t("general"))+"\n      ")])]),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.allUnits&&t.edit_item.allUnits.length>0?r("FormItem",{attrs:{label:t.$tc("unit")}},[r("Select",{staticStyle:{width:"100%"},on:{"on-change":t.itemUnitChanged},model:{value:t.edit_item.unit_id,callback:function(e){t.$set(t.edit_item,"unit_id",e)},expression:"edit_item.unit_id"}},t._l(t.edit_item.allUnits,(function(e,s){return r("Option",{key:"unit_"+s+"_"+e.id,attrs:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),1)],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.changeable?r("FormItem",{attrs:{prop:"price",label:t.$t(t.field),rules:[{required:!0,type:"number",message:t.$t("field_is_required",{field:t.$t(t.field)}),trigger:["change","blur"]},{validator:t.itemPrice,trigger:["change","blur"]}]}},[r("InputNumber",{model:{value:t.edit_item[t.field],callback:function(e){t.$set(t.edit_item,t.field,e)},expression:"edit_item[field]"}})],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{prop:"discount",label:t.$t("discount_"),rules:{validator:t.itemDiscount,trigger:["change","blur"]}}},[r("InputNumber",{model:{value:t.edit_item.discount,callback:function(e){t.$set(t.edit_item,"discount",e)},expression:"edit_item.discount"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.allPromotions&&t.edit_item.allPromotions.length>0?r("FormItem",{attrs:{label:t.$tc("promo",2)}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.edit_item.promotions,callback:function(e){t.$set(t.edit_item,"promotions",e)},expression:"edit_item.promotions"}},t._l(t.edit_item.allPromotions,(function(e,s){return r("Option",{key:"tax_"+s+"_"+e.id,attrs:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),1)],1):t._e()],1)],2),t._v(" "),t.edit_item.changeable?r("FormItem",{attrs:{label:t.$tc("tax",2),prop:"taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.edit_item.allTaxes,callback:function(e){t.$set(t.edit_item,"allTaxes",e)},expression:"edit_item.allTaxes"}},t._l(this.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),1)],1):t._e(),t._v(" "),r("FormItem",{attrs:{label:t.$t("comment")}},[r("Input",{attrs:{type:"textarea",placeholder:t.$t("item_comment"),autosize:{minRows:2,maxRows:5}},model:{value:t.edit_item.comment,callback:function(e){t.$set(t.edit_item,"comment",e)},expression:"edit_item.comment"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{long:"",type:"primary"},on:{click:function(e){return t.updateItem()}}},[t._v(t._s(t.$t("update")))])],1),t._v(" "),r("Button",{attrs:{long:"",type:"error"},on:{click:function(e){return t.deleteItem(t.edit_item.guid)}}},[t._v(t._s(t.$t("remove_from_order")))])],1)}),[],!1,null,null,null).exports,RowItemComponent:n},mixins:[(0,s.Z)("return_order"),(0,a.Z)("price","form",!1)],watch:{"form.type":function(t){this.field="sale"==t?"price":"cost"}},created:function(){this.form.type="sale"}};const d=(0,o.Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("return_order")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/return_orders"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("return_order",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"return_order",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("type"),prop:"type",error:t._f("a2s")(t.errors.form.type)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[r("Option",{attrs:{value:"sale"}},[t._v(t._s(t.$tc("sale")))]),t._v(" "),r("Option",{attrs:{value:"purchase"}},[t._v(t._s(t.$tc("purchase")))])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1),t._v(" "),"sale"==t.form.type?r("FormItem",{attrs:{label:t.$tc("customer"),prop:"customer_id",error:t._f("a2s")(t.errors.form.customer_id)}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchCustomers,placeholder:t.$t("type_to_search",{x:t.$tc("customer")})},model:{value:t.form.customer_id,callback:function(e){t.$set(t.form,"customer_id",e)},expression:"form.customer_id"}},t._l(t.customers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1):t._e(),t._v(" "),"purchase"==t.form.type?r("FormItem",{attrs:{prop:"supplier_id",label:t.$tc("supplier"),error:t._f("a2s")(t.errors.form.supplier_id)}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchSuppliers,placeholder:t.$t("type_to_search",{x:t.$tc("supplier")})},model:{value:t.form.supplier_id,callback:function(e){t.$set(t.form,"supplier_id",e)},expression:"form.supplier_id"}},t._l(t.suppliers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("order_taxes"),prop:"order_taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.form.taxes,callback:function(e){t.$set(t.form,"taxes",e)},expression:"form.taxes"}},t._l(t.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n                      "+t._s(e.name)+"\n                    ")])})),1)],1),t._v(" "),t.$store.state.settings.max_discount>0?r("span",[r("FormItem",{attrs:{label:t.$t("discount"),prop:"discount",error:t._f("a2s")(t.errors.form.discount)}},[r("InputNumber",{attrs:{min:0,formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")},max:parseFloat(t.$store.state.settings.max_discount)},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}})],1),t._v(" "),r("FormItem",{staticClass:"mb16"},[r("RadioGroup",{attrs:{vertical:""},model:{value:t.form.discount_method,callback:function(e){t.$set(t.form,"discount_method",e)},expression:"form.discount_method"}},[r("Radio",{attrs:{label:"order"}},[t._v(t._s(t.$t("apply_to_order_amount")))]),t._v(" "),r("Radio",{attrs:{label:"items"}},[t._v(t._s(t.$t("apply_to_order_items")))])],1)],1)],1):t._e()],1)],1),t._v(" "),t.form.type?r("div",{staticClass:"order-contents"},[r("div",{staticClass:"affix-content"},[r("AutoComplete",{ref:"scanCode",attrs:{icon:"ios-search","element-id":"scan_barcode",placeholder:t.$t("search_scan_barcode")},on:{"on-change":t.searchItems,"on-select":t.selectSaleItem},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},t._l(t.result,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ("+t._s(e.code)+") ")])})),1)],1),t._v(" "),!t.form.items||t.form.items.length<1?r("div",[r("Alert",{attrs:{"show-icon":""}},[t._v("\n                  "+t._s(t.$t("empty_order"))+"\n                  "),r("template",{slot:"desc"},[t._v("\n                    "+t._s(t.$t("empty_order_text"))+"\n                  ")])],2)],1):r("div",[r("div",{staticClass:"order-items"},[r("div",{staticClass:"header"},[r("span",{staticClass:"index"},[t._v("#")]),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{attrs:{type:"ios-trash",size:"16"}})],1),t._v(" "),r("span",{staticClass:"details"},[t._v(t._s(t.$t("description")))]),t._v(" "),r("span",{staticClass:"price"},[t._v(t._s(t.$t("sale"==t.form.type?"price":"cost")))]),t._v(" "),r("span",{staticClass:"discount"},[t._v(t._s(t.$t("discount")))]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(t._s(t.$t("quantity")))]),t._v(" "),r("span",{staticClass:"taxes"},[t._v(t._s(t.$t("taxes")))]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(t._s(t.$t("subtotal")))])]),t._v(" "),t.form.items&&t.form.items.length?[t._l(t.form.items,(function(e,s){return[r("row-item-component",{key:"row_"+s+"_"+e.id,attrs:{row:e,field:t.field,index:s,customer:t.customer,editItem:t.editItem,deleteItem:t.deleteItem,calcItemTax:t.calcItemTax,calcRowTotal:t.calcRowTotal,deleteItemVariation:t.deleteItemVariation,itemVariationQuantityChanged:t.itemVariationQuantityChanged}})]}))]:t._e()],2)]),t._v(" "),r("div",{staticClass:"affix-content"},[r("Alert",{staticStyle:{margin:"16px 0 0",padding:"8px 16px"},attrs:{banner:"",type:"warning"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:12,md:6}},[t._v("\n                      "+t._s(t.$tc("item",2))+":\n                      "),r("span",{staticClass:"float-right"},[r("strong",[t._v(t._s(t.orderTotalItems))]),t._v("\n                        "+t._s(t.$tc("item",t.orderTotalItems))+" "),r("strong",[t._v(t._s(t.orderTotalQuantity))]),t._v("\n                        "+t._s(t.$t("quantity"))+"\n                      ")])]),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$t("discount"))+":\n                      "),r("strong",{staticClass:"float-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(t.calculateItemDiscountAmount+t.orderDiscount,t.$store.state.settings.decimals))+"\n                      ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$tc("tax"))+":\n                      "),r("strong",{staticClass:"float-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(t.totalItemTax,t.$store.state.settings.decimals))+"\n                      ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$t("payable_amount"))+":\n                      "),r("strong",{staticClass:"float-right"},[t.orderOriginalTotal!=t.orderPayableAmount?r("span",[r("del",[t._v("\n                            "+t._s(t._f("formatNumber")(t.orderOriginalTotal,t.$store.state.settings.decimals))+"\n                          ")])]):t._e(),t._v(" "),r("span",[t.orderDiscount?r("span",[r("span",{staticStyle:{"font-weight":"normal"}},[t._v("\n                              ("+t._s(t._f("formatNumber")(t.orderTotalAmount,t.$store.state.settings.decimals))+" -\n                              "+t._s(t._f("formatNumber")(t.orderDiscount,t.$store.state.settings.decimals))+")\n                            ")]),t._v("\n                            "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                          ")]):r("span",[t._v("\n                            "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                          ")])])])],1)],1)],1)],1)]):t._e(),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),t.form.id?t._e():r("span",[r("FormItem",{staticClass:"mb0",attrs:{prop:"payment"}},[r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.payment,callback:function(e){t.$set(t.form,"payment",e)},expression:"form.payment"}},[r("span",[t._v(t._s(t.$t("auto_payment_text")))])])],1),t._v(" "),r("FormItem",{attrs:{prop:"deduct_from_register"}},[r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.deduct_from_register,callback:function(e){t.$set(t.form,"deduct_from_register",e)},expression:"form.deduct_from_register"}},[r("span",[t._v(t._s(t.$t("deduct_from_register")))])])],1)],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("return_orders")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("return_orders",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning",ghost:""},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1),t._v(" "),r("Modal",{attrs:{width:600,"footer-hide":!0,title:t.edit_item?t.$t("edit")+" - "+t.edit_item.name:""},model:{value:t.show_item_edit,callback:function(e){t.show_item_edit=e},expression:"show_item_edit"}},[t.edit_item?r("div",[r("Form",{ref:"editItemForm",attrs:{model:t.edit_item,"label-position":"top"}},[r("edit-row-item-component",{attrs:{taxes:t.taxes,field:t.field,edit_item:t.edit_item,itemPrice:t.itemPrice,deleteItem:t.deleteItem,updateItem:t.updateItem,itemDiscount:t.itemPrice,modOptLabel:t.modOptLabel,itemUnitChanged:t.itemUnitChanged,addPortionToEditItem:t.addPortionToEditItem,changeSelectedPortion:t.changeSelectedPortion}})],1)],1):t._e()])],1)],1),t._v(" "),r("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,title:t.$t("select_x",{x:t.$tc("portion")+", "+t.$tc("modifier",2)+" & "+t.$tc("variant",2)})},model:{value:t.variantModal,callback:function(e){t.variantModal=e},expression:"variantModal"}},[r("select-variation-component",{ref:"selectVarMod",attrs:{item:t.item},on:{"on-submit":t.variationSubmitted}})],1)],1)}),[],!1,null,null,null).exports},16593:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var s=r(92704),a=r(71837),i=r(79478);const o={components:{PaymentsComponent:a.Z,OrderViewComponent:i.Z},mixins:[(0,s.Z)("return_order","app/return_orders","reference")],data:function(){var t=this;return{view:!1,payments:[],loading:!1,return_order:{},paymentsModal:!1,paymentsLoading:!1,columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",width:125,render:this.renderDate},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",minWidth:150},{title:this.$t("type"),sortable:!0,key:"type",width:100,render:this.renderType},{maxWidth:300,minWidth:200,key:"customer",sortable:!1,render:this.renderPartner,title:this.$tc("from")+"/"+this.$tc("to")},{title:this.$tc("register"),sortable:!0,key:"deduct_from_register",width:100,render:this.renderIconDraft},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("total"),sortable:!1,key:"total",width:150,render:this.renderTotal},{title:this.$t("item_tax"),sortable:!1,key:"item_tax",width:125,render:this.renderItemTax},{title:this.$t("order_tax"),sortable:!1,key:"order_tax",width:125,render:this.renderOrderTax},{title:this.$t("discount"),sortable:!1,key:"discount",width:125,render:this.renderDiscount},{title:this.$t("shipping"),sortable:!1,key:"shipping",width:125,render:this.renderShipping},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0,width:350},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-dropdown-component",{props:{params:r,viewFn:t.viewModal,editFn:t.editRecord,emailFn:t.emailRecord,payFn:t.paymentRecord,deleteFn:t.deleteRecord,downloadFn:t.downloadRecord,listPayFn:t.ListPaymentForRecord,record:{model:"return_order",name:"reference",title:t.$tc("return_order")}}})}}],options:{perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.return_order.id&&(this.loading=!0,this.$http.get("app/return_orders/".concat(t.id)).then((function(t){return e.return_order=t.data})).finally((function(){return e.loading=!1})))},emailRecord:function(t){var e=this;this.$http.post("app/return_orders/email/"+t.id,{}).then((function(t){t.data.success?e.$Notice.success({title:e.$t("email_sent"),desc:e.$t("email_sent_text")}):e.$Notice.error({title:e.$tc("failed"),desc:e.$t("failed_error_text")})}))},downloadRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"download/return_orders/"+t.id}).click()},viewRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"view/return/"+t.id}).click()},paymentRecord:function(t){this.$router.push("payments/add?return_id=".concat(t.id,"&customer_id=").concat(t.customer_id,"&amount=").concat(t.grand_total))},ListPaymentForRecord:function(t){var e=this;this.return_order=t,this.paymentsModal=!0,this.paymentsLoading=!0,this.$http.get("app/returns/"+t.id+"/payments").then((function(t){e.payments=t.data,e.paymentsLoading=!1}))},paymentsModalChanged:function(t){t||(this.return=null,this.payments=[])},renderPartner:function(t,e){return t("div",["sale"==e.row.type?e.row.customer.name:e.row.supplier.name])},renderTotal:function(t,e){return this.renderNumber(t,e,"total")},renderItemTax:function(t,e){return this.renderNumber(t,e,"item_tax_amount")},renderOrderTax:function(t,e){return this.renderNumber(t,e,"order_tax_amount")},renderDiscount:function(t,e){return this.renderNumber(t,e,"discount_amount")},renderShipping:function(t,e){return this.renderNumber(t,e,"shipping")},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total",!0)},renderIconActive:function(t,e){return this.renderUnlessIcon(t,e,"draft")},renderIconDraft:function(t,e){return this.renderBoolean(t,e,"draft")},renderIconPaid:function(t,e){return this.renderBoolean(t,e,"paid")},renderType:function(t,e){return"sale"==e.row.type?t("div",{class:"ivu-tag ivu-tag-size-default ivu-tag-orange ivu-tag-checked"},[t("span",{class:"ivu-tag-text"},[e.row.type])]):t("div",{class:"ivu-tag ivu-tag-size-default ivu-tag-blue ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[e.row.type])])}}};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("return_order",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/return_orders/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add"))+" "+t._s(t.$tc("return_order"))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/return_orders",columns:t.columns,options:t.options,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("return_order")+" ("+t.return_order.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{record:t.return_order,field:"sale"==t.return_order.type?"price":"cost",to:"sale"==t.return_order.type?"customer":"supplier","to-text":"sale"==t.return_order.type?t.$tc("from"):t.$tc("to"),heading:t.$tc("return_order")+" ("+t.$tc(t.return_order.type)+")"},on:{remove:function(e){return t.deleteAttachment(e,t.return_order)}}})],1),t._v(" "),r("Modal",{attrs:{"footer-hide":"",width:750},on:{"on-visible-change":t.paymentsModalChanged},model:{value:t.paymentsModal,callback:function(e){t.paymentsModal=e},expression:"paymentsModal"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("\n        "+t._s(t.$t("list_x",{x:t.$tc("payment",2)}))+"\n        "+t._s(t.return_order?"("+t.$tc("return_order")+" "+t.$t("reference")+" "+t.return_order.reference+")":"")+"\n      ")])]),t._v(" "),t.paymentsLoading?r("Loading"):r("payments-component",{attrs:{payments:t.payments}})],1)],1)}),[],!1,null,null,null).exports},32578:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={mixins:[(0,r(92704).Z)("order","app/orders")],data:function(){var t=this;return{columns:[{type:"selection",width:50,align:"center",fixed:"left"},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{title:this.$t("ref_tab"),sortable:!0,key:"oId",width:125},{title:this.$t("date"),sortable:!0,key:"date",width:125,render:this.renderDate},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$tc("customer"),sortable:!1,key:"customer",maxWidth:250,minWidth:150,render:this.renderCustomer},{title:this.$tc("location"),sortable:!1,key:"location",maxWidth:300,minWidth:150,render:this.renderLocation},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("total_items"),sortable:!1,key:"total_items",width:125,render:this.renderTotalItems},{title:this.$t("total_quantity"),sortable:!1,key:"total_quantity",width:125,render:this.renderTotalQuantity},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0,minWidth:200,maxWidth:300},{width:75,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,deleteFn:t.deleteRecord,record:{model:"order",name:"oId"}}})}}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},mounted:function(){this.$store.getters.superAdmin||(this.columns=this.columns.filter((function(t){return"actions"!=t.key})))},methods:{renderCustomer:function(t,e){return t("div",[e.row.customer.name])},renderLocation:function(t,e){return t("div",[e.row.location.name])},renderTotalItems:function(t,e){return this.renderNumber(t,e,"total_items")},renderTotalQuantity:function(t,e){return this.renderNumber(t,e,"total_quantity")},renderDiscount:function(t,e){return this.renderNumber(t,e,"discount_amount")},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total",!0)}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("order",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/pos"},slot:"extra"},[r("Icon",{attrs:{type:"ios-apps"}}),t._v("\n    "+t._s(t.$t("pos"))+"\n  ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/orders",columns:t.columns,options:t.options,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1)}),[],!1,null,null,null).exports},9653:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var s=r(21490),a=r(61402),i=r(6850);const o={components:{EditRowItemComponent:r(11906).Z,RowItemComponent:i.Z},mixins:[(0,s.Z)("recurring_sale"),(0,a.Z)("price","form",!1)]};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("recurring_sale")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/sales/recurring"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("recurring_sale",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"recurring_sale",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("start_date"),prop:"start_date",error:t._f("a2s")(t.errors.form.start_date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("repeat"),prop:"repeat",error:t._f("a2s")(t.errors.form.repeat)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.repeat,callback:function(e){t.$set(t.form,"repeat",e)},expression:"form.repeat"}},[r("Option",{attrs:{value:"daily"}},[t._v(t._s(t.$t("daily")))]),t._v(" "),r("Option",{attrs:{value:"weekly"}},[t._v(t._s(t.$t("weekly")))]),t._v(" "),r("Option",{attrs:{value:"monthly"}},[t._v(t._s(t.$t("monthly")))]),t._v(" "),r("Option",{attrs:{value:"quarterly"}},[t._v(t._s(t.$t("quarterly")))]),t._v(" "),r("Option",{attrs:{value:"semiannually"}},[t._v(t._s(t.$t("semiannually")))]),t._v(" "),r("Option",{attrs:{value:"annually"}},[t._v(t._s(t.$t("annually")))]),t._v(" "),r("Option",{attrs:{value:"biennially"}},[t._v(t._s(t.$t("biennially")))]),t._v(" "),r("Option",{attrs:{value:"triennially"}},[t._v(t._s(t.$t("triennially")))])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("customer"),prop:"customer_id",error:t._f("a2s")(t.errors.form.customer_id)}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchCustomers,placeholder:t.$t("type_to_search",{x:t.$tc("customer")})},model:{value:t.form.customer_id,callback:function(e){t.$set(t.form,"customer_id",e)},expression:"form.customer_id"}},t._l(t.customers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("create_before"),prop:"create_before",error:t._f("a2s")(t.errors.form.create_before)}},[r("InputNumber",{model:{value:t.form.create_before,callback:function(e){t.$set(t.form,"create_before",e)},expression:"form.create_before"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("order_taxes"),prop:"order_taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.form.taxes,callback:function(e){t.$set(t.form,"taxes",e)},expression:"form.taxes"}},t._l(t.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n                      "+t._s(e.name)+"\n                    ")])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("shipping_fee"),prop:"shipping_fee",error:t._f("a2s")(t.errors.form.shipping_fee)}},[r("InputNumber",{model:{value:t.form.shipping_fee,callback:function(e){t.$set(t.form,"shipping_fee",e)},expression:"form.shipping_fee"}})],1),t._v(" "),t.$store.state.settings.max_discount>0?r("span",[r("FormItem",{attrs:{label:t.$t("discount"),prop:"discount",error:t._f("a2s")(t.errors.form.discount)}},[r("InputNumber",{attrs:{min:0,formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")},max:parseFloat(t.$store.state.settings.max_discount)},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("RadioGroup",{attrs:{vertical:""},model:{value:t.form.discount_method,callback:function(e){t.$set(t.form,"discount_method",e)},expression:"form.discount_method"}},[r("Radio",{attrs:{label:"order"}},[t._v(t._s(t.$t("apply_to_order_amount")))]),t._v(" "),r("Radio",{attrs:{label:"items"}},[t._v(t._s(t.$t("apply_to_order_items")))])],1)],1)],1):t._e()],1)],1),t._v(" "),r("div",{staticClass:"order-contents"},[r("div",{staticClass:"affix-content"},[r("AutoComplete",{ref:"scanCode",attrs:{icon:"ios-search","element-id":"scan_barcode",placeholder:t.$t("search_scan_barcode")},on:{"on-change":t.searchItems,"on-select":t.selectSaleItem},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},t._l(t.result,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ("+t._s(e.code)+") ")])})),1)],1),t._v(" "),!t.form.items||t.form.items.length<1?r("div",[r("Alert",{attrs:{"show-icon":""}},[t._v("\n                  "+t._s(t.$t("empty_order"))+"\n                  "),r("template",{slot:"desc"},[t._v("\n                    "+t._s(t.$t("empty_order_text"))+"\n                  ")])],2)],1):r("div",[r("div",{staticClass:"order-items"},[r("div",{staticClass:"header"},[r("span",{staticClass:"index"},[t._v("#")]),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{attrs:{type:"ios-trash",size:"16"}})],1),t._v(" "),r("span",{staticClass:"details"},[t._v(t._s(t.$t("description")))]),t._v(" "),r("span",{staticClass:"price"},[t._v(t._s(t.$t("price")))]),t._v(" "),r("span",{staticClass:"discount"},[t._v(t._s(t.$t("discount")))]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(t._s(t.$t("quantity")))]),t._v(" "),r("span",{staticClass:"taxes"},[t._v(t._s(t.$t("taxes")))]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(t._s(t.$t("subtotal")))])]),t._v(" "),t.form.items&&t.form.items.length?[t._l(t.form.items,(function(e,s){return[r("row-item-component",{key:"row_"+s+"_"+e.id,attrs:{row:e,index:s,remove:t.remove,customer:t.customer,editItem:t.editItem,calcItemTax:t.calcItemTax,calcRowTotal:t.calcRowTotal,getPortionChoosable:t.getPortionChoosable,itemVariationQuantityChanged:t.itemVariationQuantityChanged}})]}))]:t._e()],2)]),t._v(" "),r("div",{staticClass:"affix-content"},[r("Alert",{staticStyle:{margin:"16px 0 0",padding:"8px 16px"},attrs:{banner:"",type:"warning"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:12,md:6}},[t._v("\n                      "+t._s(t.$tc("item",2))+":\n                      "),r("span",{staticClass:"float-right"},[r("strong",[t._v(t._s(t.orderTotalItems))]),t._v("\n                        "+t._s(t.$tc("item",t.orderTotalItems))+" "),r("strong",[t._v(t._s(t.orderTotalQuantity))]),t._v("\n                        "+t._s(t.$t("quantity"))+"\n                      ")])]),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$t("discount"))+":\n                      "),r("strong",{staticClass:"float-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(t.calculateItemDiscountAmount+t.orderDiscount,t.$store.state.settings.decimals))+"\n                      ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$tc("tax"))+":\n                      "),r("strong",{staticClass:"float-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(t.totalItemTax,t.$store.state.settings.decimals))+"\n                      ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$t("payable_amount"))+":\n                      "),r("strong",{staticClass:"float-right"},[t.orderOriginalTotal!=t.orderPayableAmount?r("span",[r("del",[t._v("\n                            "+t._s(t._f("formatNumber")(t.orderOriginalTotal,t.$store.state.settings.decimals))+"\n                          ")])]):t._e(),t._v(" "),r("span",[t.orderDiscount?r("span",[r("span",{staticStyle:{"font-weight":"normal"}},[t._v("\n                              ("+t._s(t._f("formatNumber")(t.orderTotalAmount,t.$store.state.settings.decimals))+" -\n                              "+t._s(t._f("formatNumber")(t.orderDiscount,t.$store.state.settings.decimals))+")\n                            ")]),t._v("\n                            "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                          ")]):r("span",[t._v("\n                            "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                          ")])])])],1)],1)],1)],1)]),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),t.is_draftable()?r("FormItem",{attrs:{prop:"draft"}},[r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.draft,callback:function(e){t.$set(t.form,"draft",e)},expression:"form.draft"}},[r("span",[t._v(t._s(t.$t("order_draft_text")))])])],1):t._e(),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("recurring_sales")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("recurring_sales",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning",ghost:""},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1),t._v(" "),r("Modal",{attrs:{width:600,"footer-hide":!0,title:t.edit_item?t.$t("edit")+" - "+t.edit_item.name:""},model:{value:t.show_item_edit,callback:function(e){t.show_item_edit=e},expression:"show_item_edit"}},[t.edit_item?r("div",[r("Form",{ref:"editItemForm",attrs:{model:t.edit_item,"label-position":"top"}},[r("edit-row-item-component",{attrs:{taxes:t.taxes,edit_item:t.edit_item,itemPrice:t.itemPrice,deleteItem:t.deleteItem,updateItem:t.updateItem,itemDiscount:t.itemPrice,modOptLabel:t.modOptLabel,addPortionToEditItem:t.addPortionToEditItem,changeSelectedPortion:t.changeSelectedPortion}})],1)],1):t._e()]),t._v(" "),r("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,title:t.$t("select_x",{x:t.$tc("portion")+", "+t.$tc("modifier",2)+" & "+t.$tc("variant",2)})},model:{value:t.variantModal,callback:function(e){t.variantModal=e},expression:"variantModal"}},[r("select-variation-component",{ref:"selectVarMod",attrs:{item:t.item},on:{"on-submit":t.variationSubmitted}})],1)],1)}),[],!1,null,null,null).exports},40512:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var s=r(92704);const a={components:{OrderViewComponent:r(79478).Z},mixins:[(0,s.Z)("recurring_sale","app/recurring_sales","reference")],data:function(){var t=this;return{view:!1,loading:!1,recurring_sale:{},columns:[{type:"selection",width:50,align:"center",fixed:"left"},{width:105,sortable:!0,sortType:"desc",key:"start_date",render:this.renderStartDate,title:this.$t("start_date")},{title:this.$t("repeat"),sortable:!0,key:"repeat",width:125,render:this.renderRepeat},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$t("before"),sortable:!0,key:"create_before",width:90},{title:this.$tc("customer"),sortable:!1,key:"customer",maxWidth:300,minWidth:200,render:this.renderCustomer},{title:this.$t("draft"),sortable:!0,key:"draft",width:80,render:this.renderIconDraft},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{width:175,sortable:!0,sortType:"desc",key:"last_created_at",title:this.$t("last_created_at"),render:this.renderLastCreatedAt},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("total"),sortable:!1,key:"total",width:150,render:this.renderTotal},{title:this.$t("item_tax"),sortable:!1,key:"item_tax",width:150,render:this.renderItemTax},{title:this.$t("order_tax"),sortable:!1,key:"order_tax",width:150,render:this.renderOrderTax},{title:this.$t("discount"),sortable:!1,key:"discount",width:150,render:this.renderDiscount},{title:this.$t("shipping"),sortable:!1,key:"shipping",width:150,render:this.renderShipping},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0,minWidth:200,maxWidth:300},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,viewFn:t.viewModal,editFn:t.editRecord,deleteFn:t.deleteRecord,record:{model:"recurring_sale",name:"reference",title:t.$tc("recurring_sale")}}})}}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},computed:{url:function(){return"app/recurring_sales"+(this.$route.query.in_days?"?in_days="+parseInt(this.$route.query.due):"")}},watch:{"$route.query.in_days":function(){this.refresh++}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.recurring_sale.id&&(this.loading=!0,this.$http.get("app/recurring_sales/".concat(t.id)).then((function(t){return e.recurring_sale=t.data})).finally((function(){return e.loading=!1})))},emailRecord:function(t){console.log("sending email for "+t.id)},viewRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"view/recurring_sale/"+t.hash}).click()},renderCustomer:function(t,e){return t("div",[e.row.customer.name])},renderStartDate:function(t,e){return t("div",[this.$options.filters.formatDate(e.row.start_date,this.$store.state.settings.dateformat)])},renderLastCreatedAt:function(t,e){return t("div",[e.row.last_created_at?this.$options.filters.formatDate(e.row.last_created_at,this.$store.state.settings.dateformat+" HH:mm A"):""])},renderTotal:function(t,e){return this.renderNumber(t,e,"total")},renderItemTax:function(t,e){return this.renderNumber(t,e,"item_tax_amount")},renderOrderTax:function(t,e){return this.renderNumber(t,e,"order_tax_amount")},renderDiscount:function(t,e){return this.renderNumber(t,e,"discount_amount")},renderShipping:function(t,e){return this.renderNumber(t,e,"shipping")},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total",!0)},renderIconActive:function(t,e){return this.renderUnlessIcon(t,e,"draft")},renderIconDraft:function(t,e){return this.renderBoolean(t,e,"draft")},repeatColor:function(t){var e={daily:"blue",weekly:"magenta",monthly:"primary",quarterly:"geekblue",semiannually:"purple",annually:"success",biennially:"green",triennially:"orange"};return e[t]?e[t]:"default"},renderRepeat:function(t,e){return t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-".concat(this.repeatColor(e.row.repeat)," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[this.$t(e.row.repeat)])])])}}};const i=(0,r(51900).Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("recurring_sale",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/sales/recurring/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add"))+" "+t._s(t.$tc("recurring_sale"))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:t.url,columns:t.columns,options:t.options,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("recurring_sale")+" ("+t.recurring_sale.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{summary:!1,recurring:!0,record:t.recurring_sale,"to-text":t.$tc("bill_to"),heading:t.$tc("recurring_sale")},on:{remove:function(e){return t.deleteAttachment(e,t.recurring_sale)}}})],1)],1)}),[],!1,null,null,null).exports},86582:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var s=r(21490),a=r(61402),i=r(6850);const o={components:{EditRowItemComponent:r(11906).Z,RowItemComponent:i.Z},mixins:[(0,s.Z)("sale",null,null,{id:"sale_id",qId:"quotation_id"}),(0,a.Z)("price","form",!1)]};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("sale")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/sales"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("sale",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"sale",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("type"),prop:"type",error:t._f("a2s")(t.errors.form.type)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[r("Option",{attrs:{value:"nett"}},[t._v(t._s(t.$t("nett")))]),t._v(" "),r("Option",{attrs:{value:"layaway"}},[t._v(t._s(t.$t("layaway")))]),t._v(" "),r("Option",{attrs:{value:"on_account"}},[t._v(t._s(t.$t("on_account")))])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("customer"),prop:"customer_id",error:t._f("a2s")(t.errors.form.customer_id)}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchCustomers,placeholder:t.$t("type_to_search",{x:t.$tc("customer")})},model:{value:t.form.customer_id,callback:function(e){t.$set(t.form,"customer_id",e)},expression:"form.customer_id"}},t._l(t.customers,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("order_taxes"),prop:"order_taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.form.taxes,callback:function(e){t.$set(t.form,"taxes",e)},expression:"form.taxes"}},t._l(t.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n                      "+t._s(e.name)+"\n                    ")])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("shipping_fee"),prop:"shipping_fee",error:t._f("a2s")(t.errors.form.shipping_fee)}},[r("InputNumber",{model:{value:t.form.shipping_fee,callback:function(e){t.$set(t.form,"shipping_fee",e)},expression:"form.shipping_fee"}})],1),t._v(" "),t.$store.state.settings.max_discount>0?r("span",[r("FormItem",{attrs:{label:t.$t("discount"),prop:"discount",error:t._f("a2s")(t.errors.form.discount)}},[r("InputNumber",{attrs:{min:0,formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")},max:parseFloat(t.$store.state.settings.max_discount)},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("RadioGroup",{attrs:{vertical:""},model:{value:t.form.discount_method,callback:function(e){t.$set(t.form,"discount_method",e)},expression:"form.discount_method"}},[r("Radio",{attrs:{label:"order"}},[t._v(t._s(t.$t("apply_to_order_amount")))]),t._v(" "),r("Radio",{attrs:{label:"items"}},[t._v(t._s(t.$t("apply_to_order_items")))])],1)],1)],1):t._e()],1)],1),t._v(" "),r("div",{staticClass:"order-contents"},[r("div",{staticClass:"affix-content"},[r("AutoComplete",{ref:"scanCode",attrs:{icon:"ios-search","element-id":"scan_barcode",placeholder:t.$t("search_scan_barcode")},on:{"on-change":t.searchItems,"on-select":t.selectSaleItem},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},t._l(t.result,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ("+t._s(e.code)+") ")])})),1)],1),t._v(" "),!t.form.items||t.form.items.length<1?r("div",[r("Alert",{attrs:{"show-icon":""}},[t._v("\n                  "+t._s(t.$t("empty_order"))+"\n                  "),r("template",{slot:"desc"},[t._v("\n                    "+t._s(t.$t("empty_order_text"))+"\n                  ")])],2)],1):r("div",[r("div",{staticClass:"order-items"},[r("div",{staticClass:"header"},[r("span",{staticClass:"index"},[t._v("#")]),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{attrs:{type:"ios-trash",size:"16"}})],1),t._v(" "),r("span",{staticClass:"details"},[t._v(t._s(t.$t("description")))]),t._v(" "),r("span",{staticClass:"price"},[t._v(t._s(t.$t("price")))]),t._v(" "),r("span",{staticClass:"discount"},[t._v(t._s(t.$t("discount")))]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(t._s(t.$t("quantity")))]),t._v(" "),r("span",{staticClass:"taxes"},[t._v(t._s(t.$t("taxes")))]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(t._s(t.$t("subtotal")))])]),t._v(" "),t.form.items&&t.form.items.length?[t._l(t.form.items,(function(e,s){return[r("row-item-component",{key:"row_"+s+"_"+e.id,attrs:{row:e,index:s,remove:t.remove,customer:t.customer,editItem:t.editItem,calcItemTax:t.calcItemTax,calcRowTotal:t.calcRowTotal,getPortionChoosable:t.getPortionChoosable,itemVariationQuantityChanged:t.itemVariationQuantityChanged}})]}))]:t._e()],2)]),t._v(" "),r("div",{staticClass:"affix-content"},[r("Alert",{staticStyle:{margin:"16px 0 0",padding:"8px 16px"},attrs:{banner:"",type:"warning"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:12,md:6}},[t._v("\n                      "+t._s(t.$tc("item",2))+":\n                      "),r("span",{staticClass:"float-right"},[r("strong",[t._v(t._s(t.orderTotalItems))]),t._v("\n                        "+t._s(t.$tc("item",t.orderTotalItems))+" "),r("strong",[t._v(t._s(t.orderTotalQuantity))]),t._v("\n                        "+t._s(t.$t("quantity"))+"\n                      ")])]),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$t("discount"))+":\n                      "),r("strong",{staticClass:"float-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(t.calculateItemDiscountAmount+t.orderDiscount,t.$store.state.settings.decimals))+"\n                      ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$tc("tax"))+":\n                      "),r("strong",{staticClass:"float-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(t.totalItemTax,t.$store.state.settings.decimals))+"\n                      ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                      "+t._s(t.$t("payable_amount"))+":\n                      "),r("strong",{staticClass:"float-right"},[t.orderOriginalTotal!=t.orderPayableAmount?r("span",[r("del",[t._v("\n                            "+t._s(t._f("formatNumber")(t.orderOriginalTotal,t.$store.state.settings.decimals))+"\n                          ")])]):t._e(),t._v(" "),r("span",[t.orderDiscount?r("span",[r("span",{staticStyle:{"font-weight":"normal"}},[t._v("\n                              ("+t._s(t._f("formatNumber")(t.orderTotalAmount,t.$store.state.settings.decimals))+" -\n                              "+t._s(t._f("formatNumber")(t.orderDiscount,t.$store.state.settings.decimals))+")\n                            ")]),t._v("\n                            "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                          ")]):r("span",[t._v("\n                            "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                          ")])])])],1)],1)],1)],1)]),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),t.is_draftable()?r("FormItem",{class:{mb0:1!=t.form.draft},attrs:{prop:"draft"}},[r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.draft,callback:function(e){t.$set(t.form,"draft",e)},expression:"form.draft"}},[r("span",[t._v(t._s(t.$t("order_draft_text")))])])],1):t._e(),t._v(" "),r("transition",{attrs:{mode:"out-in",name:"slide-in","enter-active-class":"animate__animated faster animate__fadeInDown","leave-active-class":"animate__animated fastest animate__fadeOutDown"}},[t.is_draftable()&&1!=t.form.draft?r("FormItem",{attrs:{prop:"payment"}},[r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.payment,callback:function(e){t.$set(t.form,"payment",e)},expression:"form.payment"}},[r("span",[t._v(t._s(t.$t("auto_payment_text")))])])],1):t._e()],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("sales")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("sales",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning",ghost:""},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1),t._v(" "),r("Modal",{attrs:{width:600,"footer-hide":!0,title:t.edit_item?t.$t("edit")+" - "+t.edit_item.name:""},model:{value:t.show_item_edit,callback:function(e){t.show_item_edit=e},expression:"show_item_edit"}},[t.edit_item?r("div",[r("Form",{ref:"editItemForm",attrs:{model:t.edit_item,"label-position":"top"}},[r("edit-row-item-component",{attrs:{taxes:t.taxes,edit_item:t.edit_item,itemPrice:t.itemPrice,deleteItem:t.deleteItem,updateItem:t.updateItem,itemDiscount:t.itemPrice,modOptLabel:t.modOptLabel,itemUnitChanged:t.itemUnitChanged,addPortionToEditItem:t.addPortionToEditItem,changeSelectedPortion:t.changeSelectedPortion}})],1)],1):t._e()])],1)],1),t._v(" "),r("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,title:t.$t("select_x",{x:t.$tc("portion")+", "+t.$tc("modifier",2)+" & "+t.$tc("variant",2)})},model:{value:t.variantModal,callback:function(e){t.variantModal=e},expression:"variantModal"}},[r("select-variation-component",{ref:"selectVarMod",attrs:{item:t.item},on:{"on-submit":t.variationSubmitted}})],1)],1)}),[],!1,null,null,null).exports},25136:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(92704),a=r(71837),i=r(79478);const o={props:{delivery:{type:Object,required:!0}}};var n=r(51900);const l={components:{DeliveryViewComponent:(0,n.Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.delivery?r("div",{staticClass:"order"},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[t._v("\n      "+t._s(t.$t("date"))+": "),r("strong",[t._v(t._s(t._f("date")(t.delivery.created_at)))])]),t._v(" "),r("Col",{attrs:{xs:24,sm:12}},[t._v("\n      "+t._s(t.$t("reference"))+": "),r("strong",[t._v(t._s(t.delivery.reference))])])],1),t._v(" "),r("h2",{staticClass:"text-center my16",staticStyle:{"text-transform":"uppercase"}},[t._v(t._s(t.$tc("delivery")))]),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[r("p",[t._v(t._s(t.$tc("location"))+":")]),t._v(" "),t.delivery.location?r("div",[r("strong",[t._v(t._s(t.delivery.location.name))]),r("br"),t._v("\n        "+t._s(t.delivery.location.address+", "+t.delivery.location.state_name+", "+t.delivery.location.country_name)),r("br"),t._v("\n        "+t._s(t.delivery.location.phone)),r("br"),t._v("\n        "+t._s(t.delivery.location.email)),r("br")]):t._e()]),t._v(" "),r("Col",{attrs:{xs:24,sm:12}},[r("p",[t._v(t._s(t.$tc("customer"))+":")]),t._v(" "),t.delivery.customer?r("div",[r("strong",[t._v(t._s(t.delivery.customer.name))]),r("br"),t._v("\n        "+t._s(t.delivery.customer.address+", "+t.delivery.customer.state_name+", "+t.delivery.customer.country_name)),r("br"),t._v("\n        "+t._s(t.delivery.customer.phone)),r("br"),t._v("\n        "+t._s(t.delivery.customer.email)),r("br")]):t._e()])],1),t._v(" "),t.delivery.items?r("div",{staticClass:"table-wrapper"},[r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[t._v(t._s(t.$t("description")))]),t._v(" "),r("th",{staticStyle:{width:"100px"}},[t._v(t._s(t.$t("quantity")))])])]),t._v(" "),r("tbody",[t._l(t.delivery.items,(function(e){return[e.variations&&e.variations.length?[r("tr",{key:e.id,staticClass:"border-b-0"},[r("td",[r("strong",[t._v(t._s(e.name))]),t._v(" "),e.variation?r("div",[t._v(t._s(e.variation.id))]):t._e()]),t._v(" "),r("td")]),t._v(" "),t._l(e.variations,(function(e,s){return r("tr",{key:e.id,staticClass:"border-y-0"},[r("td",{staticClass:"pt0"},[r("span",{domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("td",{staticClass:"pt0 text-right"},[t._v("\n                "+t._s(t._f("formatNumber")(e.pivot.quantity,2))+"\n              ")])])}))]:e.portions&&e.portions.length?[r("tr",{key:"p_"+e.id,staticClass:"border-b-0"},[r("td",[r("strong",[t._v(t._s(e.name))])]),t._v(" "),r("td")]),t._v(" "),t._l(e.portions,(function(e,s){return[r("tr",{key:e.id,staticClass:"border-y-0"},[r("td",{staticClass:"bold capitalize"},[t._v("\n                  "+t._s(e.name)+"\n                ")]),t._v(" "),r("td",{staticClass:"text-right"},[e.essentials.length<1&&e.choosables.length<1?r("span",[t._v("\n                    "+t._s(t._f("formatNumber")(e.pivot.quantity,2))+"\n                  ")]):t._e()])]),t._v(" "),t._l(e.essentials,(function(e,s){return r("tr",{key:e.id,staticClass:"border-y-0"},[r("td",{staticClass:"pt0"},[t._v("\n                  "+t._s(e.item.name)+"\n                ")]),t._v(" "),r("td",{staticClass:"pt0 text-right"},[t._v("\n                  "+t._s(t._f("formatNumber")(e.quantity,2))+"\n                ")])])})),t._v(" "),t._l(e.choosables,(function(s,a){return[t._l(s.items,(function(i,o){return[e.pivot.choosables.find((function(t){return t.id==s.id&&i.item_id==t.item_id}))?[r("tr",{key:"pci_"+a+"_"+o,staticClass:"border-y-0"},[r("td",{staticClass:"pt0"},[r("strong",[t._v(t._s(s.name))]),t._v(" "+t._s(i.item.name)+"\n                      ")]),t._v(" "),r("td",{staticClass:"pt0 text-right"},[t._v("\n                        "+t._s(t._f("formatNumber")(i.quantity,2))+"\n                      ")])])]:t._e()]}))]}))]}))]:[r("tr",{key:e.id},[r("td",{class:e.modifier_options.length?"border-y-0":"border-b border-t-0"},[t._v("\n                "+t._s(e.name)+"\n                "),e.variation?r("div",[t._v(t._s(e.variation.id))]):t._e()]),t._v(" "),r("td",{staticClass:"text-right"},[t._v(t._s(t._f("formatNumber")(e.quantity,2)))])])],t._v(" "),e.modifier_options&&e.modifier_options.length?[r("tr",{key:"mo_"+e.modifier_options.length,staticClass:"border-y-0"},[r("td",[r("strong",[t._v(t._s(t.$tc("modifier",2)))])]),t._v(" "),r("td")]),t._v(" "),t._l(e.modifier_options,(function(s,a){return r("tr",{key:s.id,class:a==e.modifier_options.length-1?"border-b border-t-0":"border-y-0"},[r("td",{staticClass:"pt0"},[t._v("\n                "+t._s(s.item.name)+"\n              ")]),t._v(" "),r("td",{staticClass:"pt0 text-right"},[t._v("\n                "+t._s(t._f("formatNumber")(s.pivot.quantity,2))+"\n              ")])])}))]:t._e()]}))],2)])]):t._e(),t._v(" "),r("Row",{staticClass:"mt16",attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[t._v("\n      "+t._s(t.$t("status"))+": "),r("strong",[t._v(t._s(t._f("capitalize")(t.delivery.status)))])]),t._v(" "),t.delivery.user?r("Col",{attrs:{xs:24,sm:12}},[t._v("\n      "+t._s(t.$t("created_by"))+": "),r("strong",[t._v(t._s(t.delivery.user.name))])]):t._e()],1),t._v(" "),r("Row",{staticClass:"mt16",attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[t._v("\n      "+t._s(t.$t("delivered_at"))+": "),t.delivery.delivered_at?r("strong",[t._v(t._s(t._f("datetime")(t.delivery.delivered_at)))]):t._e()]),t._v(" "),t.delivery.user?r("Col",{attrs:{xs:24,sm:12}},[t._v("\n      "+t._s(t.$t("delivered_by"))+": "),r("strong",[t._v(t._s(t.delivery.deliveryMan?t.delivery.deliveryMan.name:t.delivery.delivered_by))])]):t._e()],1),t._v(" "),r("Row",{staticClass:"mt16",attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[t._v("\n      "+t._s(t.$tc("driver"))+": "),t.delivery.driver?r("strong",[t._v(t._s(t._f("capitalize")(t.delivery.driver)))]):t._e()]),t._v(" "),r("Col",{attrs:{xs:24,sm:12}},[t._v("\n      "+t._s(t.$t("received_by"))+": "),t.delivery.received_by?r("strong",[t._v(t._s(t._f("capitalize")(t.delivery.received_by)))]):t._e()])],1)],1):t._e()}),[],!1,null,null,null).exports,PaymentsComponent:a.Z,OrderViewComponent:i.Z},mixins:[(0,s.Z)("sale","app/sales","reference")],data:function(){var t=this;return{sale:{},view:!1,delivery:{},payments:[],printData:{},loading:!1,printing:!1,printModal:!1,deliveryModal:!1,paymentsModal:!1,loadingDelivery:!1,loadingPayments:!1,columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",width:100,render:this.renderDate},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",minWidth:150},{maxWidth:300,minWidth:200,key:"customer",sortable:!1,title:this.$tc("customer"),render:this.renderCustomer},{title:this.$t("draft"),sortable:!0,key:"draft",width:80,render:this.renderIconDraft},{title:this.$t("paid"),sortable:!0,key:"paid",width:75,render:this.renderIconPaid},{title:this.$t("void"),sortable:!0,key:"void",width:75,render:this.renderIconVoid},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("total"),sortable:!1,key:"total",width:150,render:this.renderTotal},{title:this.$t("item_tax"),sortable:!1,key:"item_tax",width:125,render:this.renderItemTax},{title:this.$t("order_tax"),sortable:!1,key:"order_tax",width:125,render:this.renderOrderTax},{title:this.$t("discount"),sortable:!1,key:"discount",width:125,render:this.renderDiscount},{title:this.$t("shipping"),sortable:!1,key:"shipping",width:125,render:this.renderShipping},{title:this.$t("grand_total"),sortable:!1,key:"grand_total",width:150,render:this.renderGrandTotal},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:300,render:this.renderExtras},{title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0,width:350},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-dropdown-component",{props:{params:r,viewFn:t.viewModal,editFn:t.editRecord,payFn:t.paymentRecord,emailFn:t.emailRecord,deliveryFn:t.deliveryFn,duplicateFn:t.duplicate,deleteFn:t.deleteRecord,receiptFn:t.viewReceipt,toggleVoidFn:t.toggleVoid,downloadFn:t.downloadRecord,listPayFn:t.ListPaymentForRecord,listDeliveriesFn:t.listDeliveriesFn,viewDeliveriesFn:t.viewDeliveriesFn,record:{model:"sale",name:"reference",title:t.$tc("sale")}}})}}],options:{perPage:this.$store.state.settings.rows,orderBy:["date desc","created_at desc"]}}},created:function(){var t=this;this.$event.listen("location:changed",(function(e){return t.refresh++}))},mounted:function(){var t=this;1==this.$store.state.settings.pos_server&&(this.$connect(),this.$socket.addEventListener("error",(function(e){console.error("WebSocket error: ",e),t.$Notice.error({title:t.$t("error"),desc:t.$t("pos_server_error"),duration:10})})),this.$socket.addEventListener("message",(function(e){t.$Notice.info({title:e.data,duration:5})})))},beforeDestory:function(){1==this.$store.state.settings.pos_server&&(this.$socket.removeEventListener("error",(function(){console.log("Socket error listener removed.")})),this.$socket.removeEventListener("message",(function(){console.log("Socket message listener removed.")})),this.$disconnect())},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.sale.id&&(this.loading=!0,this.$http.get("app/sales/".concat(t.id)).then((function(t){return e.sale=t.data})).finally((function(){return e.loading=!1})))},showReceipt:function(t){var e=this;t.pos&&(this.sale=t,this.printData.type="receipt",this.printData.order=this.sale,this.printData.order.items=this.printData.order.items.map((function(t){return t.selected={portions:[],variations:[],modifiers:[]},t.selected.portions=t.portions,t.selected.variations=t.variations,t.selected.modifiers=t.modifier_options,t})),this.$Modal.confirm({width:365,closable:!0,scrollable:!0,render:function(t){return t("print-component",{props:{print:e.printData,vm:e}})},okText:this.$t("print"),onOk:function(){if(1==e.$store.state.settings.pos_server){if(1!=e.$socket.readyState){var t=0;return e.$connect(),e.$socket.addEventListener("error",(function(t){console.error("WebSocket error: ",t),e.$Notice.error({title:e.$t("error"),desc:e.$t("pos_server_error"),duration:10})})),e.$socket.addEventListener("message",(function(t){e.$Notice.info({title:t.data,duration:5})})),0==t&&(e.$Notice.info({desc:e.$t("pos_server_reconnect_text"),duration:5}),setTimeout((function(){return e.printReceipt()}),1e3),t++),!1}e.printReceipt()}else window.print()},onCancel:function(){setTimeout((function(){return e.printData={}}),200)}}))},printReceipt:function(){var t,e,r,s,a,i=this,o=this.sale,n=null,l={},c=o.user?o.user:this.$store.getters.user,d=o.location?o.location:this.$store.getters.location;l.name=d.name||d.label;var u=[[this.$t("order_id"),o.orderId],[this.$t("reference"),o.reference],[this.$t("date"),this.date(o.date)],[this.$t("created_by"),c.name+"("+c.username+")"],[this.$t("created_at"),this.datetime(o.created_at)],[this.$t("printed_at"),this.datetime(new Date)]];t=o.items.map((function(t){var e=["feed"],r=t.code+"\n"+t.name+(t.alt_name?"\n"+t.alt_name:"")+(t.comment?"\n"+t.comment:"");return t.variations&&t.variations.length?(e.push({type:"text",text:r}),t.variations.map((function(t){e.push({type:"item",name:" "+i.metaString(t.meta,!0,!0),price:i.formatNumber(parseFloat(t.pivot.net_price)+parseFloat(t.pivot.tax_amount)),qty:i.formatQuantity(t.pivot.quantity),subtotal:i.formatNumber(t.pivot.total)})}))):t.portions&&t.portions.length?(e.push({type:"text",text:r}),t.portions.map((function(t){e.push("feed"),e.push({type:"item",name:i.$tc("portion")+": "+i.$tc(t.name),price:i.formatNumber(parseFloat(t.pivot.price)-parseFloat(t.pivot.discount_amount)),qty:i.formatQuantity(t.pivot.quantity),subtotal:i.formatNumber(t.pivot.total)}),t.portion_items&&t.portion_items.length&&t.portion_items.map((function(r){e.push({type:"item",name:" "+r.item.name+(r.meta?"\n("+i.metaString(r.meta,!0,!0)+")":""),price:" ",qty:i.formatQuantity(parseFloat(r.quantity)*parseFloat(t.pivot.quantity)),subtotal:" "})})),t.essentials&&t.essentials.length&&t.essentials.map((function(r){e.push({type:"item",name:" "+r.item.name+(r.meta?"\n("+i.metaString(r.meta,!0,!0)+")":""),price:" ",qty:i.formatQuantity(parseFloat(r.quantity)*parseFloat(t.pivot.quantity)),subtotal:" "})})),t.choosables&&t.choosables.length&&t.choosables.map((function(r){r.items.map((function(s){t.pivot.choosables.find((function(t){return t.id==r.id&&s.item_id==t.item_id}))&&(e.push({type:"text",text:r.name}),e.push({type:"item",name:" "+s.item.name+(r.meta?"\n("+i.metaString(r.meta,!0,!0)+")":""),price:" ",qty:i.formatQuantity(parseFloat(s.quantity)*parseFloat(t.pivot.quantity)),subtotal:" "}))}))}))}))):e.push({name:r,type:"item",price:i.formatNumber(t.unit_price),qty:i.formatQuantity(t.quantity),subtotal:i.formatNumber(t.subtotal)}),t.modifier_options&&t.modifier_options.length&&t.modifier_options.map((function(t){e.push({type:"text",text:t.modifier.title}),e.push({type:"item",name:" "+t.item.name,price:i.formatNumber(parseFloat(t.pivot.net_price)+parseFloat(t.pivot.tax_amount)),qty:i.formatQuantity(t.pivot.quantity),subtotal:i.formatNumber(t.pivot.total)})})),e})),e=[this.$store.state.settings.header,d.header],l.email=d.email,l.phone=d.phone,l.company=d.company,l.address=d.address,l.state=d.state_name,l.country=d.country_name,u.unshift([this.$tc("id"),o.id]),u.push([this.$tc("customer"),o.customer.name+(o.customer.company?" ("+o.customer.company+")":"")+(o.customer.email?" "+o.customer.email:"")+(o.customer.phone?" "+o.customer.phone:"")]),n=[{label:this.$t("total"),value:this.formatNumber(o.total)}],o.order_discount_amount&&n.push({label:this.$t("order_discount"),value:this.formatNumber(o.order_discount_amount)}),n.push({label:this.$t("tax_amount"),value:this.formatNumber(o.total_tax_amount)}),n.push({label:this.$t("grand_total"),value:this.formatNumber(o.grand_total)});var m=o&&o.payments?o.payments.reduce((function(t,e){return t+parseFloat(e.amount)}),0):0;n.push({label:this.$t("paid"),value:this.formatNumber(m)}),n.push({label:this.$t("balance_due"),value:this.formatNumber(parseFloat(o.grand_total)-m)}),s=this.$t("order_cgd"),a=[{label:this.$t("name")},{label:this.$t("price")},{label:this.$t("qty")},{label:this.$t("subtotal")}],r=[this.$store.state.settings.footer,d.footer];var p={logo:d.logo||this.$store.state.settings.default_logo,heading:this.$store.state.settings.name,store_heading:this.$tc("location"),store_details:l,type:this.$tc("receipt"),headers:e,info:u,table_headers:a,items:t,totals:n,footers:r,notice:s};this.$nextTick((function(){1==i.$socket.readyState?i.$socket.send(JSON.stringify({type:"print-json-receipt",data:p})):i.$Notice.error({title:i.$t("error"),desc:i.$t("pos_server_connection_error"),duration:10})}))},viewReceipt:function(t){var e=this;t.id!=this.sale.id?(this.loading=!0,this.$http.get("app/sales/".concat(t.id)).then((function(t){return e.showReceipt(t.data)})).finally((function(){return e.loading=!1}))):this.showReceipt(this.sale)},duplicate:function(t){this.$router.push("/sales/add?sale_id=".concat(t.id))},toggleVoid:function(t){var e=this;this.$http.delete("app/sales/".concat(t.id,"/toggle_void")).then((function(t){t.data.success?(e.refresh++,e.$Notice.success({title:e.$t("success"),desc:e.$t("order_marked_x_text",{x:1==t.data.void?e.$t("void"):e.$t("valid")})})):e.$Notice.error({title:e.$tc("failed"),desc:e.$t("failed_error_text")})})).finally((function(){return e.$Modal.remove()}))},emailRecord:function(t){var e=this;this.$http.post("app/sales/email/"+t.id,{}).then((function(t){t.data.success?e.$Notice.success({title:e.$t("email_sent"),desc:e.$t("email_sent_text")}):e.$Notice.error({title:e.$tc("failed"),desc:e.$t("failed_error_text")})}))},downloadRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"download/sales/"+t.id}).click()},viewRecord:function(t){Object.assign(document.createElement("a"),{target:"_blank",href:window.mpsURL+"view/sale/"+t.hash}).click()},paymentRecord:function(t){this.$router.push("/payments/add?sale_id=".concat(t.id,"&customer_id=").concat(t.customer_id,"&amount=").concat(t.grand_total))},deliveryFn:function(t){1==t.draft&&this.$Notice.warning({title:this.$tc("draft"),desc:this.$t("order_draft_text")}),t.deliveries.length?this.$router.push("deliveries/edit/".concat(t.deliveries[0].id)):this.$router.push("deliveries/add?sale_id=".concat(t.id,"&customer_id=").concat(t.customer_id))},viewDeliveriesFn:function(t){var e=this;this.deliveryModal=!0,t.deliveries[0].id!=this.delivery.id&&(this.loadingDelivery=!0,this.$http.get("app/deliveries/".concat(t.deliveries[0].id)).then((function(t){return e.delivery=t.data})).finally((function(){return e.loadingDelivery=!1})))},listDeliveriesFn:function(t){this.$router.push("deliveries?sale_id=".concat(t.id))},ListPaymentForRecord:function(t){var e=this;this.sale=t,this.paymentsModal=!0,this.loadingPayments=!0,this.$http.get("app/sales/"+t.id+"/payments").then((function(t){e.payments=t.data,e.loadingPayments=!1}))},paymentsModalChanged:function(t){t||(this.sale={},this.payments=[])},renderCustomer:function(t,e){return t("div",[e.row.customer.name])},renderTotal:function(t,e){return this.renderNumber(t,e,"total")},renderItemTax:function(t,e){return this.renderNumber(t,e,"item_tax_amount")},renderOrderTax:function(t,e){return this.renderNumber(t,e,"order_tax_amount")},renderDiscount:function(t,e){return this.renderNumber(t,e,"discount_amount")},renderShipping:function(t,e){return this.renderNumber(t,e,"shipping")},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total",!0)},renderIconActive:function(t,e){return this.renderUnlessIcon(t,e,"draft")},renderIconDraft:function(t,e){return this.renderBoolean(t,e,"draft")},renderIconPaid:function(t,e){return this.renderBoolean(t,e,"paid")},renderIconVoid:function(t,e){return this.renderBoolean(t,e,"void")},rowClassName:function(t,e){return 1==t.void?"ivu-table-error-row":""}}};const c=(0,n.Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("sale",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/sales/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add"))+" "+t._s(t.$tc("sale"))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/sales",columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords,"row-class-name":t.rowClassName}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("sale")+" ("+t.sale.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{record:t.sale,heading:t.$tc("sale"),"to-text":t.$tc("bill_to")},on:{remove:function(e){return t.deleteAttachment(e,t.sale)}}})],1),t._v(" "),r("Modal",{attrs:{"footer-hide":"",width:750},on:{"on-visible-change":t.paymentsModalChanged},model:{value:t.paymentsModal,callback:function(e){t.paymentsModal=e},expression:"paymentsModal"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("\n        "+t._s(t.$t("list_x",{x:t.$tc("payment",2)}))+"\n        "+t._s(t.sale?"("+t.$tc("sale")+" "+t.$t("reference")+" "+t.sale.reference+")":"")+"\n      ")])]),t._v(" "),t.loadingPayments?r("Loading"):r("payments-component",{attrs:{payments:t.payments}})],1),t._v(" "),r("Modal",{attrs:{title:t.$tc("delivery"),"footer-hide":!0,"mask-closable":!1},model:{value:t.deliveryModal,callback:function(e){t.deliveryModal=e},expression:"deliveryModal"}},[t.loadingDelivery?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("delivery-view-component",{attrs:{delivery:t.delivery},on:{remove:function(e){return t.deleteAttachment(e,t.delivery)}}})],1)],1)}),[],!1,null,null,null).exports},11906:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var s=r(18446),a=r.n(s);const i={props:{taxes:{type:Array},itemPrice:{type:Function},deleteItem:{type:Function},updateItem:{type:Function},modOptLabel:{type:Function},itemDiscount:{type:Function},itemUnitChanged:{type:Function},addPortionToEditItem:{type:Function},changeSelectedPortion:{type:Function},edit_item:{type:Object,required:!0}},methods:{selectChoosableVariant:function(t,e){var r=this.edit_item.selected.portions[t].choosables[e].meta,s=this.edit_item.selected.portions[t].choosables[e].variations.find((function(t){return a()(t.meta,r)}));this.edit_item.selected.portions[t].choosables[e].variation_id=s?s.id:""},selectPortionItemVariant:function(t,e){var r=this.edit_item.selected.portions[t].portion_items[e].meta,s=this.edit_item.selected.portions[t].portion_items[e].variations.find((function(t){return a()(t.meta,r)}));this.edit_item.selected.portions[t].portion_items[e].variation_id=s?s.id:""},selectEssentialVariant:function(t,e){var r=this.edit_item.selected.portions[t].essentials[e].meta,s=this.edit_item.selected.portions[t].essentials[e].variations.find((function(t){return a()(t.meta,r)}));this.edit_item.selected.portions[t].essentials[e].variation_id=s?s.id:""}}};const o=(0,r(51900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",{attrs:{gutter:16}},[t.edit_item.portions.length||t.edit_item.has_variants?t._e():r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{staticClass:"text-center",attrs:{prop:"quantity",label:t.$t("quantity"),rules:{type:"number",required:!0,trigger:"change",message:t.$t("field_is_required",{field:t.$t("quantity")})}}},[r("InputNumber",{attrs:{size:"large"},model:{value:t.edit_item.quantity,callback:function(e){t.$set(t.edit_item,"quantity",e)},expression:"edit_item.quantity"}})],1)],1),t._v(" "),t.edit_item.portions&&t.edit_item.portions.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},t._l(t.edit_item.selected.portions,(function(e,s){return r("span",{key:"eispi_"+s},t._l(t.edit_item.portions.filter((function(t){return t.id==e.id})),(function(a){return r("span",{key:"pi_"+a.id},[r("Card",{staticClass:"cardp",attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"ios-option"}}),t._v("\n                "+t._s(s+1)+". "+t._s(t.$tc("portion"))+": ("+t._s("regular"==a.name?t.$t("regular"):a.name)+")\n              ")],1),t._v(" "),!s&&t.edit_item.portions.length>1?r("Button",{attrs:{slot:"extra",type:"primary",size:"small"},on:{click:function(e){return t.addPortionToEditItem()}},slot:"extra"},[t._v("\n                "+t._s(t.$t("add_x",{x:t.$tc("portion")}))+"\n              ")]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{staticClass:"mb16",attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("portion")}},[r("Select",{attrs:{value:e.id},on:{"on-change":function(e){return t.changeSelectedPortion(e,s)}}},t._l(t.edit_item.portions,(function(e,s){return r("Option",{key:"pi_"+s,attrs:{value:e.id}},[t._v("\n                        "+t._s("regular"==e.name?t.$t("regular"):e.name)+"\n                      ")])})),1)],1)],1),t._v(" "),r("Col",{staticClass:"mb16",attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("quantity")}},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"eisp.quantity"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[a.portion_items&&a.portion_items.length?[r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                        "+t._s(t.$tc("item",a.portion_items.length))+"\n                      ")])]),t._v(" "),r("p",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[t._v("\n                      "+t._s(a.portion_items.map((function(t){return t.item.name})).join(", "))+"\n                    ")])]:t._e(),t._v(" "),a.essentials&&a.essentials.length?[r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                        "+t._s(t.$t("essential_items"))+"\n                      ")])]),t._v(" "),r("p",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[t._v("\n                      "+t._s(a.essentials.map((function(t){return t.item.name})).join(", "))+"\n                    ")])]:t._e(),t._v(" "),a.choosables&&a.choosables.length?[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                        "+t._s(t.$t("choosable_items"))+"\n                      ")])]),t._v(" "),r("Row",{attrs:{gutter:16}},t._l(a.choosables,(function(a,i){return r("Col",{key:"gi_"+i,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:a.name,prop:"selected.portions."+s+".choosables."+i+".selected",rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("item")})}}},[r("Select",{model:{value:e.choosables[i].selected,callback:function(r){t.$set(e.choosables[i],"selected",r)},expression:"eisp.choosables[gi].selected"}},t._l(a.items,(function(e,s){return r("Option",{key:"gii_"+s,attrs:{value:e.item_id}},[t._v("\n                              "+t._s(e.item.name)+"\n                            ")])})),1)],1)],1)})),1)]:t._e(),t._v(" "),a.portion_items&&a.portion_items.length?t._l(a.portion_items,(function(a,i){return r("div",{key:"eiv_"+i},[a.item.variants&&a.item.variants.length?[r("div",{key:"t_"+i,staticClass:"mb16"},[r("span",{staticClass:"bold"},[t._v(t._s(a.item.name)+" ("+t._s(t.$tc("variation"))+")")])]),t._v(" "),r("Row",{key:"r_"+i,attrs:{gutter:16}},t._l(a.item.variants,(function(a,o){return r("Col",{key:"pcsv_"+o,attrs:{xs:24,sm:12}},[r("FormItem",{key:"pcsvf_"+a.id,attrs:{label:a.name}},[r("Select",{on:{"on-change":function(e){return t.selectPortionItemVariant(s,i)}},model:{value:e.portion_items[i].meta[a.name],callback:function(r){t.$set(e.portion_items[i].meta,a.name,r)},expression:"eisp.portion_items[ei].meta[v.name]"}},t._l(a.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),1)]:t._e()],2)})):t._e(),t._v(" "),a.essentials&&a.essentials.length?t._l(a.essentials,(function(a,i){return r("div",{key:"eiv_"+i},[a.item.variants&&a.item.variants.length?[r("div",{key:"t_"+i,staticClass:"mb16"},[r("span",{staticClass:"bold"},[t._v(t._s(a.item.name)+" ("+t._s(t.$tc("variation"))+")")])]),t._v(" "),r("Row",{key:"r_"+i,attrs:{gutter:16}},t._l(a.item.variants,(function(a,o){return r("Col",{key:"pcsv_"+o,attrs:{xs:24,sm:12}},[r("FormItem",{key:"pcsvf_"+a.id,attrs:{label:a.name}},[r("Select",{on:{"on-change":function(e){return t.selectEssentialVariant(s,i)}},model:{value:e.essentials[i].meta[a.name],callback:function(r){t.$set(e.essentials[i].meta,a.name,r)},expression:"eisp.essentials[ei].meta[v.name]"}},t._l(a.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),1)]:t._e()],2)})):t._e(),t._v(" "),a.choosables&&a.choosables.length?t._l(a.choosables,(function(a,i){return r("div",{key:"giv_"+i},[t._l(a.items,(function(o){return[e.choosables[i].selected&&e.choosables[i].selected==o.item.id&&o.item.variants&&o.item.variants.length?[r("Row",{key:"r_"+i,attrs:{gutter:16}},[r("Col",{key:"t_"+i,staticClass:"mb16",attrs:{lg:24}},[r("span",{staticClass:"bold"},[t._v(t._s(a.name))]),t._v(": "+t._s(o.item.name)+" ("+t._s(t.$tc("variation"))+")\n                            ")]),t._v(" "),t._l(o.item.variants,(function(a,o){return r("Col",{key:"pcsv_"+o,attrs:{xs:24,sm:12}},[r("FormItem",{key:"pcsvf_"+a.id,attrs:{label:a.name}},[r("Select",{on:{"on-change":function(e){return t.selectChoosableVariant(s,i)}},model:{value:e.choosables[i].meta[a.name],callback:function(r){t.$set(e.choosables[i].meta,a.name,r)},expression:"eisp.choosables[gi].meta[v.name]"}},t._l(a.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)}))],2)]:t._e()]}))],2)})):t._e()],2)],1)],1)],1)})),0)})),0),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),t.edit_item.variants&&t.edit_item.variants.length?[t._l(t.edit_item.selected.variations,(function(e,s){return r("span",{key:"sv_meta_"+s},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("span",{staticStyle:{color:"#515a6e"},domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("quantity"),prop:"selected.variations."+s+".quantity",rules:{required:!0,type:"number",trigger:"change",max:parseFloat(e.available),message:t.$t("only_x_quantity_available",{x:parseFloat(e.available)})}}},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"eisv.quantity"}})],1)],1),t._v(" "),r("Col",{staticClass:"text-primary",staticStyle:{"padding-top":"2.5em"},attrs:{sm:24,md:12,lg:12}},[t._v("\n          "+t._s(t.$t("available_x",{x:t.$t("quantity")}))+":\n          "),r("strong",[t._v(t._s(e.available))])])],1)})),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),t.edit_item.modifiers&&t.edit_item.modifiers.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n            "+t._s(t.$tc("modifier",2))+"\n          ")])])],1),t._v(" "),t._l(t.edit_item.modifiers,(function(e,s){return r("Col",{key:"mi_"+s,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:e.title,prop:"modifiers"}},["radio"==e.show_as?r("span",[r("RadioGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"checkbox"==e.show_as?r("span",[r("CheckboxGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select"==e.show_as?r("span",[r("Select",{model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select_multiple"==e.show_as?r("span",[r("Select",{attrs:{multiple:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):t._e()])],1)})),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n        "+t._s(t.$t("general"))+"\n      ")])]),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.allUnits&&t.edit_item.allUnits.length>0?r("FormItem",{attrs:{label:t.$tc("unit")}},[r("Select",{staticStyle:{width:"100%"},on:{"on-change":t.itemUnitChanged},model:{value:t.edit_item.unit_id,callback:function(e){t.$set(t.edit_item,"unit_id",e)},expression:"edit_item.unit_id"}},t._l(t.edit_item.allUnits,(function(e,s){return r("Option",{key:"unit_"+s+"_"+e.id,attrs:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),1)],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.changeable?r("FormItem",{attrs:{prop:"price",label:t.$t("price"),rules:[{required:!0,type:"number",message:t.$t("field_is_required",{field:t.$t("price")}),trigger:["change","blur"]},{validator:t.itemPrice,trigger:["change","blur"]}]}},[r("InputNumber",{model:{value:t.edit_item.price,callback:function(e){t.$set(t.edit_item,"price",e)},expression:"edit_item.price"}})],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{prop:"discount",label:t.$t("discount_"),rules:{validator:t.itemDiscount,trigger:["change","blur"]}}},[r("InputNumber",{model:{value:t.edit_item.discount,callback:function(e){t.$set(t.edit_item,"discount",e)},expression:"edit_item.discount"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.allPromotions&&t.edit_item.allPromotions.length>0?r("FormItem",{attrs:{label:t.$tc("promo",2)}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.edit_item.promotions,callback:function(e){t.$set(t.edit_item,"promotions",e)},expression:"edit_item.promotions"}},t._l(t.edit_item.allPromotions,(function(e,s){return r("Option",{key:"tax_"+s+"_"+e.id,attrs:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),1)],1):t._e()],1)],2),t._v(" "),t.edit_item.changeable?r("FormItem",{attrs:{label:t.$tc("tax",2),prop:"taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.edit_item.allTaxes,callback:function(e){t.$set(t.edit_item,"allTaxes",e)},expression:"edit_item.allTaxes"}},t._l(this.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),1)],1):t._e(),t._v(" "),r("FormItem",{attrs:{label:t.$t("comment")}},[r("Input",{attrs:{type:"textarea",placeholder:t.$t("item_comment"),autosize:{minRows:2,maxRows:5}},model:{value:t.edit_item.comment,callback:function(e){t.$set(t.edit_item,"comment",e)},expression:"edit_item.comment"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{long:"",type:"primary"},on:{click:function(e){return t.updateItem()}}},[t._v(t._s(t.$t("update")))])],1),t._v(" "),r("Button",{attrs:{long:"",type:"error"},on:{click:function(e){return t.deleteItem(t.edit_item)}}},[t._v(t._s(t.$t("remove_from_order")))])],1)}),[],!1,null,null,null).exports},6850:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});const s={props:{editItem:{type:Function},remove:{type:Function},calcItemTax:{type:Function},calcRowTotal:{type:Function},customer:{type:[Boolean,Object]},row:{type:Object,required:!0},getPortionChoosable:{type:Function},index:{type:Number,required:!0},itemVariationQuantityChanged:{type:Function}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-item"},[r("span",{staticClass:"item"},[r("span",{staticClass:"index"},[t._v(t._s(t.index+1))]),t._v(" "),r("span",{staticClass:"remove"},[t.row.selected.variations&&t.row.selected.portions&&!t.row.selected.portions.length&&!t.row.selected.variations.length?r("span",[r("Icon",{staticClass:"pointer",attrs:{size:"18",type:"md-close",color:"#ed4014"},on:{click:function(e){return t.remove(t.row)}}})],1):t._e()]),t._v(" "),r("span",{staticClass:"details pointer",on:{click:function(e){return t.editItem(t.index)}}},[r("strong",[t._v(t._s(t.row.name))]),t._v(" "),r("br"),t._v(" "),r("span",[t.customer&&t.customer.customer_group?r("span",{domProps:{innerHTML:t._s(t.customer.customer_group.name+" (<small>"+t.$t("discount")+": "+t.customer.customer_group.discount+"%</small>)<br />")}}):t._e(),t._v(" "),t.row.promotions&&t.row.promotions.length?r("span",[t._v(t._s(t.$tc("promo",t.row.promotions.length))+":\n          "+t._s(t.row.allPromotions.filter((function(e){return t.row.promotions.includes(e.id)})).map((function(e){return e.name+" ("+t.formatNumber(e.discount)+")"})).join(","))+"\n        ")]):t._e(),t._v(" "),t.row.comment?r("span",[t._v(t._s(t.row.comment)+" ")]):t._e()])]),t._v(" "),t.row.selected.variations&&t.row.selected.portions&&!t.row.selected.portions.length&&!t.row.selected.variations.length?[r("span",{staticClass:"price"},[t._v("\n        "+t._s(t.formatNumber(t.row.price-t.row.discount_amount+t.calcItemTax(t.row)))+"\n      ")]),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!t.row.selected.variations.length||!!t.row.selected.portions.length,size:t.row.selected.variations.length||t.row.selected.portions.length?"small":"default"},model:{value:t.row.quantity,callback:function(e){t.$set(t.row,"quantity",e)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(t.row.taxes,(function(e){return r("div",{key:"tax_"+e.id},[t._v("\n          "+t._s(e.code)+"\n          "),r("span",{staticClass:"float-right"},[t._v("\n            "+t._s(t.formatNumber(e.amount*t.row.quantity))+"\n          ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n        "+t._s(t.formatNumber(t.calcRowTotal(t.row)))+"\n      ")])]:[r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!t.row.selected.variations.length||!!t.row.selected.portions.length,size:t.row.selected.variations.length||t.row.selected.portions.length?"small":"default"},model:{value:t.row.quantity,callback:function(e){t.$set(t.row,"quantity",e)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})]],2),t._v(" "),t.row.selected.variations&&t.row.selected.variations.length?t._l(t.row.selected.variations,(function(e,s){return r("div",{key:"svi_"+s,staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.remove(t.row,"Variation",e)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n        "+t._s(s+1)+".\n        "),r("span",{domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("span",{staticClass:"price"},[t._v("\n        "+t._s(t.formatNumber(e.price))+"\n      ")]),t._v(" "),r("span",{staticClass:"discount"},[t._v("\n        "+t._s(t.formatNumber(e.discount_amount))+"\n      ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemVariationQuantityChanged(t.form.items[t.index])}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"sv.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(e){return r("div",{key:"sv_"+e.id},[t._v("\n          "+t._s(e.code)+"\n          "),r("span",{staticClass:"float-right"},[t._v("\n            "+t._s(t.formatNumber(e.amount*t.row.quantity))+"\n          ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n        "+t._s(t.formatNumber((e.price-e.discount_amount+e.total_tax_amount)*e.quantity))+"\n      ")])])})):t._e(),t._v(" "),t.row.selected.portions.length?t._l(t.row.selected.portions,(function(e,s){return r("div",{key:"spi_"+s,staticClass:"combo"},t._l(t.row.portions.filter((function(t){return t.id==e.id})),(function(a){return r("div",{key:"pi_"+a.id,staticClass:"combo"},[r("div",{staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.remove(t.row,"Portion",e,s)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[r("p",[t._v("\n              "+t._s(s+1)+". "+t._s(t.$tc("portion"))+":\n              "),r("strong",[t._v(t._s("regular"==a.name?t.$t("regular"):a.name))])])]),t._v(" "),r("span",{staticClass:"price"},[t._v(t._s(t.formatNumber(e.price)))]),t._v(" "),r("span",{staticClass:"discount"},[t._v("\n            "+t._s(t.formatNumber(e.discount_amount))+"\n          ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemPortionQuantityChanged(t.form.items[t.index])}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"sp.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(s){return r("div",{key:"sp_"+s.id},[t._v("\n              "+t._s(s.code)+"\n              "),r("span",{staticClass:"float-right"},[t._v("\n                "+t._s(t.formatNumber(s.amount*e.quantity))+"\n              ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n            "+t._s(t.formatNumber((e.price-e.discount_amount+e.total_tax_amount)*e.quantity))+"\n          ")])]),t._v(" "),t._l(a.portion_items,(function(s,a){return r("div",{key:"ei_"+a,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"}),t._v(" "),r("span",{staticClass:"details"},[t._v("\n            #"+t._s(a+1)+" "+t._s(s.item.name)+"\n            "),e.portion_items[a].variation_id?r("span",[t._v(" ("),r("span",{domProps:{innerHTML:t._s(t.metaString(e.portion_items[a].meta))}}),t._v(") ")]):t._e()]),t._v(" "),r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n            "+t._s(parseFloat(s.quantity*e.quantity))+"\n          ")]),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})])})),t._v(" "),t._l(a.essentials,(function(s,a){return r("div",{key:"ei_"+a,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"}),t._v(" "),r("span",{staticClass:"details"},[t._v("\n            #"+t._s(a+1)+" "+t._s(s.item.name)+"\n            "),e.essentials[a].variation_id?r("span",[t._v(" ("),r("span",{domProps:{innerHTML:t._s(t.metaString(e.essentials[a].meta))}}),t._v(") ")]):t._e()]),t._v(" "),r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n            "+t._s(parseFloat(s.quantity*e.quantity))+"\n          ")]),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})])})),t._v(" "),t._l(a.choosables,(function(s,i){return t._l(s.items,(function(o,n){return t.getPortionChoosable(e,s.id,o.item_id)?r("div",{key:"gii_"+n+"_"+i,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"}),t._v(" "),r("span",{staticClass:"details"},[t._v("\n              #"+t._s(i+1+a.essentials.length)+"\n              "+t._s(o.item.name)+"\n              "),e.choosables[i].variation_id?r("span",[t._v(" ("),r("span",{domProps:{innerHTML:t._s(t.metaString(e.choosables[i].meta))}}),t._v(") ")]):t._e()]),t._v(" "),r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"discount"}),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n              "+t._s(parseFloat(o.quantity*e.quantity))+"\n            ")]),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})]):t._e()}))}))],2)})),0)})):t._e(),t._v(" "),t.row.selected.modifiers.length?[r("div",{staticClass:"combo-item bg"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"details"},[r("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.$tc("modifier",2)))])]),t._v(" "),r("span",{staticClass:"price"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"discount"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"taxes"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(" ")])]),t._v(" "),t._l(t.row.selected.modifiers,(function(e,s){return r("div",{key:"mi_"+s},[r("div",{staticClass:"combo-item pt pb"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.remove(t.row,"Modifier",e,s)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n          "+t._s(s+1)+". "),r("strong",[t._v(t._s(e.option))]),t._v(" ("+t._s(e.title)+")\n        ")]),t._v(" "),r("span",{staticClass:"price"},[t._v("\n          "+t._s(t.formatNumber(e.price))+"\n        ")]),t._v(" "),r("span",{staticClass:"discount"},[t._v("\n          "+t._s(t.formatNumber(e.discount_amount*e.quantity))+"\n        ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"m.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(s){return r("div",{key:"m_"+s.id},[t._v("\n            "+t._s(s.code)+"\n            "),r("span",{staticClass:"float-right"},[t._v("\n              "+t._s(t.formatNumber(s.amount*e.quantity))+"\n            ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"})])])}))]:t._e()],2)}),[],!1,null,null,null).exports},88426:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>h});var s=r(21490),a=r(61402);const i={props:{editItem:{type:Function},deleteItem:{type:Function},calcRowTotal:{type:Function},customer:{type:[Boolean,Object]},row:{type:Object,required:!0},deleteItemVariation:{type:Function},index:{type:Number,required:!0},itemVariationQuantityChanged:{type:Function}}};var o=r(51900);const n=(0,o.Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-item"},[r("span",{staticClass:"item"},[r("span",{staticClass:"index"},[t._v(t._s(t.index+1))]),t._v(" "),r("span",{staticClass:"remove"},[t.row.selected.variations&&!t.row.selected.variations.length?r("span",[r("Icon",{staticClass:"pointer",attrs:{size:"18",type:"md-close",color:"#ed4014"},on:{click:function(e){return t.deleteItem(t.row)}}})],1):t._e()]),t._v(" "),r("span",{staticClass:"details pointer",on:{click:function(e){return t.editItem(t.index)}}},[r("strong",[t._v(t._s(t.row.name))]),t._v(" "),r("br"),t._v(" "),t.row.comment?r("span",[t._v(t._s(t.row.comment)+" ")]):t._e()]),t._v(" "),t.row.selected.variations&&!t.row.selected.variations.length?[r("span",{staticClass:"price"},[t._v("\n        "+t._s(t.formatNumber(t.row.cost))+"\n        ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!t.row.selected.variations.length,size:t.row.selected.variations.length?"small":"default"},model:{value:t.row.quantity,callback:function(e){t.$set(t.row,"quantity",e)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(t.row.taxes,(function(e){return r("div",{key:"tax_"+e.id},[t._v("\n          "+t._s(e.code)+"\n          "),r("span",{staticClass:"float-right"},[t._v("\n            "+t._s(t.formatNumber(e.amount*t.row.quantity))+"\n          ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n        "+t._s(t.formatNumber(t.calcRowTotal(t.row)))+"\n      ")])]:[r("span",{staticClass:"price"}),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!t.row.selected.variations.length,size:t.row.selected.variations.length?"small":"default"},model:{value:t.row.quantity,callback:function(e){t.$set(t.row,"quantity",e)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"}),t._v(" "),r("span",{staticClass:"subtotal"})]],2),t._v(" "),t.row.selected.variations&&t.row.selected.variations.length?t._l(t.row.selected.variations,(function(e,s){return r("div",{key:"svi_"+s,staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.deleteItemVariation(t.row,e)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n        "+t._s(s+1)+".\n        "),r("span",{domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("span",{staticClass:"price"},[t._v("\n        "+t._s(t.formatNumber(e.cost))+"\n      ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemVariationQuantityChanged(t.form.items[t.index])}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"sv.quantity"}})],1),t._v(" "),r("span",{staticClass:"taxes"},t._l(e.taxes,(function(e){return r("div",{key:"sv_"+e.id},[t._v("\n          "+t._s(e.code)+"\n          "),r("span",{staticClass:"float-right"},[t._v("\n            "+t._s(t.formatNumber(e.amount*t.row.quantity))+"\n          ")])])})),0),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n        "+t._s(t.formatNumber((e.cost-(e.discount_amount||0)+e.total_tax_amount)*e.quantity))+"\n      ")])])})):t._e()],2)}),[],!1,null,null,null).exports;const l={props:{serials:{type:Array,twoWay:!0,required:!0},quantity:{type:Number,required:!0}},computed:{provided:function(){var t=this;return this.serials.reduce((function(e,r){return e+t.countSerials(r.number,r.till)}),0)}},methods:{countSerials:function(t,e){if(!t&&!e)return 0;if(t&&!e)return 1;var r=e-t;return r>0?r+1:e==t?1:"?"},addNew:function(t){this.provided<this.quantity&&this.quantity>t+1&&t==this.serials.length-1&&this.serials.push({number:"",till:""})}}};var c=r(93379),d=r.n(c),u=r(99848),m={insert:"head",singleton:!1};d()(u.Z,m);u.Z.locals;const p=(0,o.Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._l(t.serials,(function(e,s){return r("div",{key:"serial_"+s,staticClass:"mb16"},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"mb0",attrs:{label:t.$tc("serial_number"),prop:"serial"}},[r("Input",{on:{"on-focus":function(e){return t.addNew(s)}},model:{value:e.number,callback:function(r){t.$set(e,"number",r)},expression:"serial.number"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"mb0",attrs:{label:t.$t("till"),prop:"serial"}},[r("Input",{model:{value:e.till,callback:function(r){t.$set(e,"till",r)},expression:"serial.till"}})],1)],1)],1)],1)})),t._v(" "),r("div",{staticClass:"sr-info",class:t.provided>t.quantity?"sr-error":""},[t._v("\n    "+t._s(t.$t("total_serials",{n:t.provided,serials:t.$tc("serial_number",t.provided),total:t.quantity}))+"\n  ")])],2)}),[],!1,null,null,null).exports,_={props:{taxes:{type:Array},deleteItem:{type:Function},updateItem:{type:Function},itemUnitChanged:{type:Function},edit_item:{type:Object,required:!0},expiryDateOptions:{type:Object,required:!0}},components:{ItemSerialComponent:p}};const f=(0,o.Z)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("FormItem",{attrs:{label:t.$t("quantity"),prop:"quantity"}},[r("InputNumber",{attrs:{size:"large"},model:{value:t.edit_item.quantity,callback:function(e){t.$set(t.edit_item,"quantity",e)},expression:"edit_item.quantity"}})],1),t._v(" "),1==t.edit_item.has_serials?r("div",{staticClass:"mt16 mb16"},[r("item-serial-component",{attrs:{serials:t.edit_item.selected.serials,quantity:t.edit_item.quantity}})],1):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.allUnits&&t.edit_item.allUnits.length>0?r("FormItem",{attrs:{label:t.$tc("unit")}},[r("Select",{staticStyle:{width:"100%"},on:{"on-change":t.itemUnitChanged},model:{value:t.edit_item.unit_id,callback:function(e){t.$set(t.edit_item,"unit_id",e)},expression:"edit_item.unit_id"}},t._l(t.edit_item.allUnits,(function(e,s){return r("Option",{key:"unit_"+s+"_"+e.id,attrs:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),1)],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("cost"),prop:"cost"}},[r("InputNumber",{model:{value:t.edit_item.cost,callback:function(e){t.$set(t.edit_item,"cost",e)},expression:"edit_item.cost"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("batch_no"),prop:"batch_no"}},[r("Input",{model:{value:t.edit_item.batch_no,callback:function(e){t.$set(t.edit_item,"batch_no",e)},expression:"edit_item.batch_no"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.expiry?r("FormItem",{attrs:{label:t.$t("expiry_date"),prop:"expiry_date"}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",options:t.expiryDateOptions},model:{value:t.edit_item.expiry_date,callback:function(e){t.$set(t.edit_item,"expiry_date",e)},expression:"edit_item.expiry_date"}})],1):t._e()],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("tax",2),prop:"taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.edit_item.allTaxes,callback:function(e){t.$set(t.edit_item,"allTaxes",e)},expression:"edit_item.allTaxes"}},t._l(this.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("comment")}},[r("Input",{attrs:{type:"textarea",placeholder:t.$t("item_comment"),autosize:{minRows:2,maxRows:5}},model:{value:t.edit_item.comment,callback:function(e){t.$set(t.edit_item,"comment",e)},expression:"edit_item.comment"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{long:"",type:"primary"},on:{click:function(e){return t.updateItem()}}},[t._v(t._s(t.$t("update")))])],1),t._v(" "),r("Button",{attrs:{long:"",type:"error"},on:{click:function(e){return t.deleteItem(t.edit_item)}}},[t._v(t._s(t.$t("remove_from_order")))])],1)}),[],!1,null,null,null).exports,v={mixins:[(0,s.Z)("adjustment","app/adjustments","cost",null,!0),(0,a.Z)("cost","form",!1,!0)],components:{EditRowItemComponent:f,RowItemComponent:n},data:function(){return{form:{type:"addition"}}}};const h=(0,o.Z)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.form.id?t.$t("edit_x",{x:t.$tc("stock_adjustment")}):t.$t("add_x",{x:t.$tc("stock_adjustment")+" ("+t.$store.getters.location.label+")"}))+"\n    ")]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/adjustments/stock"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("stock_adjustment",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"adjustment",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("type"),prop:"type",error:t._f("a2s")(t.errors.form.type)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[r("Option",{attrs:{value:"addition"}},[t._v(t._s(t.$t("addition")))]),t._v(" "),r("Option",{attrs:{value:"damage"}},[t._v(t._s(t.$t("damage")))]),t._v(" "),r("Option",{attrs:{value:"subtraction"}},[t._v(t._s(t.$t("subtraction")))])],1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1)],1)],1),t._v(" "),r("transition",{attrs:{mode:"out-in",name:"slide-in","enter-active-class":"animate__animated faster animate__fadeInDown","leave-active-class":"animate__animated fastest animate__fadeOutDown"}},[r("div",{staticClass:"order-contents"},[r("div",{staticClass:"affix-content"},[r("AutoComplete",{ref:"scanCode",attrs:{icon:"ios-search","element-id":"scan_barcode",placeholder:t.$t("search_scan_barcode")},on:{"on-change":t.searchItems,"on-select":t.selectPurchaseItem},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},t._l(t.result,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ("+t._s(e.code)+") ")])})),1)],1),t._v(" "),!t.form.items||t.form.items.length<1?r("div",[r("Alert",{attrs:{"show-icon":""}},[t._v("\n                    "+t._s(t.$t("empty_order"))+"\n                    "),r("template",{slot:"desc"},[t._v("\n                      "+t._s(t.$t("empty_order_text"))+"\n                    ")])],2)],1):r("div",[r("div",{staticClass:"order-items"},[r("div",{staticClass:"header"},[r("span",{staticClass:"index"},[t._v("#")]),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{attrs:{type:"ios-trash",size:"16"}})],1),t._v(" "),r("span",{staticClass:"details"},[t._v(t._s(t.$t("description")))]),t._v(" "),r("span",{staticStyle:{width:"150px","text-align":"center",padding:"0 10px"}},[t._v(t._s(t.$t("cost")))]),t._v(" "),r("span",{staticStyle:{width:"100px","text-align":"center",padding:"0 10px"}},[t._v(t._s(t.$t("quantity")))]),t._v(" "),r("span",{staticStyle:{width:"100px","text-align":"center",padding:"0 10px"}},[t._v(t._s(t.$t("taxes")))]),t._v(" "),r("span",{staticStyle:{width:"200px","text-align":"center",padding:"0 10px"}},[t._v(t._s(t.$t("subtotal")))])]),t._v(" "),t.form.items&&t.form.items.length?[t._l(t.form.items,(function(e,s){return[r("row-item-component",{key:"row_"+s+"_"+e.id,attrs:{row:e,index:s,editItem:t.editItem,deleteItem:t.deleteItem,calcRowTotal:t.calcRowTotal,deleteItemVariation:t.deleteItemVariation,itemVariationQuantityChanged:t.itemVariationQuantityChanged}})]}))]:t._e()],2)]),t._v(" "),r("div",{staticClass:"affix-content"},[r("Alert",{staticStyle:{margin:"16px 0 0",padding:"8px 16px"},attrs:{banner:"",type:"warning"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:12,md:6}},[t._v("\n                        "+t._s(t.$tc("item",2))+":\n                        "),r("span",{staticClass:"float-right"},[r("strong",[t._v(t._s(t.orderTotalItems))]),t._v("\n                          "+t._s(t.$tc("item",t.orderTotalItems))+" "),r("strong",[t._v(t._s(t.orderTotalQuantity))]),t._v("\n                          "+t._s(t.$t("quantity"))+"\n                        ")])]),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                        "+t._s(t.$t("discount"))+":\n                        "),r("strong",{staticClass:"float-right"},[t._v("\n                          "+t._s(t._f("formatNumber")(t.calculateItemDiscountAmount+t.orderDiscount,t.$store.state.settings.decimals))+"\n                        ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                        "+t._s(t.$tc("tax"))+":\n                        "),r("strong",{staticClass:"float-right"},[t._v("\n                          "+t._s(t._f("formatNumber")(t.totalItemTax,t.$store.state.settings.decimals))+"\n                        ")])],1),t._v(" "),r("Col",{attrs:{sm:12,md:6}},[r("Divider",{staticClass:"hidden-sm",attrs:{type:"vertical"}}),t._v("\n                        "+t._s(t.$t("payable_amount"))+":\n                        "),r("strong",{staticClass:"float-right"},[t.orderOriginalTotal!=t.orderPayableAmount?r("span",[r("del",[t._v("\n                              "+t._s(t._f("formatNumber")(t.orderOriginalTotal,t.$store.state.settings.decimals))+"\n                            ")])]):t._e(),t._v(" "),r("span",[t.orderDiscount?r("span",[r("span",{staticStyle:{"font-weight":"normal"}},[t._v("\n                                ("+t._s(t._f("formatNumber")(t.orderTotalAmount,t.$store.state.settings.decimals))+" -\n                                "+t._s(t._f("formatNumber")(t.orderDiscount,t.$store.state.settings.decimals))+")\n                              ")]),t._v("\n                              "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                            ")]):r("span",[t._v("\n                              "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                            ")])])])],1)],1)],1)],1)])]),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details",error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),t.is_draftable()?r("FormItem",{attrs:{prop:"draft"}},[r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.draft,callback:function(e){t.$set(t.form,"draft",e)},expression:"form.draft"}},[r("span",[t._v(t._s(t.$t("order_draft_text")))])])],1):t._e(),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("stock_adjustments")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("stock_adjustments",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning",ghost:""},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1),t._v(" "),r("Modal",{attrs:{width:600,"footer-hide":!0,title:t.edit_item?t.$t("edit")+" - "+t.edit_item.name:""},model:{value:t.show_item_edit,callback:function(e){t.show_item_edit=e},expression:"show_item_edit"}},[t.edit_item?r("span",[r("Form",{ref:"editItemForm",attrs:{model:t.edit_item,rules:t.itemRules}},[r("edit-row-item-component",{attrs:{taxes:t.taxes,edit_item:t.edit_item,itemPrice:t.itemPrice,itemDiscount:t.itemPrice,deleteItem:t.deleteItem,updateItem:t.updateItem,itemUnitChanged:t.itemUnitChanged,expiryDateOptions:t.expiry_date_options,addPortionToEditItem:t.addPortionToEditItem,changeSelectedPortion:t.changeSelectedPortion}})],1)],1):t._e()]),t._v(" "),r("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,title:t.$t("select_x",{x:t.$tc("variant",2)})},model:{value:t.variantModal,callback:function(e){t.variantModal=e},expression:"variantModal"}},[r("select-variation-component",{ref:"selectVarMod",attrs:{item:t.item,purchase:""},on:{"on-submit":t.variationSubmitted}})],1)],1)}),[],!1,null,null,null).exports},90166:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var s=r(92704);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const i={components:{OrderViewComponent:r(79478).Z},mixins:[(0,s.Z)("stock_adjustments","app/adjustments","reference")],data:function(){var t,e=this;return{view:!1,loading:!1,adjustment:{id:null,reference:null},columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("date"),sortable:!0,key:"date",sortType:"desc",width:100,render:this.renderDate},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$t("type"),sortable:!0,key:"type",width:125,render:this.renderType},{title:this.$t("total"),sortable:!0,key:"grant_total",width:150,render:this.renderGrandTotal},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{minWidth:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},{title:this.$t("draft"),sortable:!0,key:"draft",width:80,render:this.renderIconDraft},(t={title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0},a(t,"ellipsis",!0),a(t,"minWidth",250),a(t,"maxWidth",600),t),{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(t,r){return t("actions-component",{props:{params:r,viewFn:e.viewModal,editFn:e.editRecord,deleteFn:e.deleteRecord,record:{model:"stock_adjustment",name:"reference",title:e.$tc("stock_adjustment")}}})}}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.adjustment.id&&(this.loading=!0,this.$http.get("app/adjustments/".concat(t.id)).then((function(t){return e.adjustment=t.data})).finally((function(){return e.loading=!1})))},editRecord:function(t){this.$router.push({name:"stock_adjustments.edit",params:{id:t.id}})},renderGrandTotal:function(t,e){return this.renderNumber(t,e,"grand_total")},renderIconDraft:function(t,e){return this.renderBoolean(t,e,"draft")},renderType:function(t,e){return t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-".concat("addition"==e.row.type?"green":"red"," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[this.capitalize(e.row.type)])])])}}};const o=(0,r(51900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("stock_adjustment",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/stock_adjustments/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add_x",{x:t.$tc("stock_adjustment")}))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,url:"app/adjustments",bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("stock_adjustment")+" ("+t.adjustment.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{"to-text":"",to:!1,field:"cost",payment:!1,record:t.adjustment,heading:t.$tc("stock_adjustment")},on:{remove:function(e){return t.deleteAttachment(e,t.adjustment)}}})],1)],1)}),[],!1,null,null,null).exports},36811:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(48921);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var n=function(t,e){return t.attributes&&(e.attributes=t.attributes,delete t.attributes),t.extra_attributes=e.formatAttributes(e.attributes,t.extra_attributes),t.due_limit=t.due_limit?parseFloat(t.due_limit):null,e.form=i(i({},t),t.extra_attributes),e.form};const l={mixins:[(0,s.Z)("supplier","app/suppliers",!0,n)],data:function(){return{countries:[],searching:!1,states:[{value:"",label:this.$t("select_country")}],form:{id:"",name:"",email:"",phone:"",state:"",number:"",footer:"",address:"",country:"",show_tax:0,due_limit:null,show_discount:0,require_country:0,opening_balance:null},rules:{name:[{required:!0,message:this.$t("name")+" "+this.$t("is_required"),trigger:"blur"}],phone:[{required:!1,message:this.$t("phone")+" "+this.$t("is_required"),trigger:"blur"}],email:[{required:!1,message:this.$t("email")+" "+this.$t("is_required"),trigger:"blur"}],address:[{required:!1,message:this.$t("address")+" "+this.$t("is_required"),trigger:"blur"}],country:[{required:this.$store.getters.require_country,message:this.$t("country")+" "+this.$t("is_required"),trigger:"change"}],state:[{required:this.$store.getters.require_country,message:this.$t("state")+" "+this.$t("is_required"),trigger:"change"}]}}},created:function(){var t=this;this.$http.get("app/countries").then((function(e){return t.countries=e.data}))},methods:{create:function(){var t=this;this.$http.get("app/suppliers/create").then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t){var e=this;this.$http.get("app/suppliers/".concat(t)).then((function(t){e.form=n(t.data,e)})).finally((function(){return e.loading=!1}))},countryChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t?(this.searching=!0,this.getStates(t,e),this.form.state=""):(this.form.state="",this.form.country="",this.states=[{value:"",label:this.$t("select_country")}])},getStates:function(t,e){var r=this;this.$http.get("app/states",{params:{country:t}}).then((function(t){r.states=t.data,e&&(r.form.state=r.states.find((function(t){return t.value==e})).value),r.searching=!1}))}}};const c=(0,r(51900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("supplier")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/suppliers"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("supplier",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"supplier",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("company"),prop:"company",error:t._f("a2s")(t.errors.form.company)}},[r("Input",{model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}})],1),t._v(" "),t.form.id?t._e():r("FormItem",{attrs:{error:t._f("a2s")(t.errors.form.opening_balance),label:t.$t("opening_balance"),prop:"opening_balance"}},[r("InputNumber",{model:{value:t.form.opening_balance,callback:function(e){t.$set(t.form,"opening_balance",e)},expression:"form.opening_balance"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("phone"),prop:"phone",error:t._f("a2s")(t.errors.form.phone)}},[r("Input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("email"),prop:"email",error:t._f("a2s")(t.errors.form.email)}},[r("Input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("due_limit"),prop:"due_limit",error:t._f("a2s")(t.errors.form.due_limit)}},[r("InputNumber",{model:{value:t.form.due_limit,callback:function(e){t.$set(t.form,"due_limit",e)},expression:"form.due_limit"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("Row",{staticClass:"mb24",attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:24,xl:12}},[r("FormItem",{attrs:{label:t.$t("house_no"),prop:"house_no",error:t._f("a2s")(t.errors.form.house_no)}},[r("Input",{model:{value:t.form.house_no,callback:function(e){t.$set(t.form,"house_no",e)},expression:"form.house_no"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:24,xl:12}},[r("FormItem",{attrs:{label:t.$t("street_no"),prop:"street_no",error:t._f("a2s")(t.errors.form.street_no)}},[r("Input",{model:{value:t.form.street_no,callback:function(e){t.$set(t.form,"street_no",e)},expression:"form.street_no"}})],1)],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("address"),prop:"address",error:t._f("a2s")(t.errors.form.address)}},[r("Input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("city"),prop:"city",error:t._f("a2s")(t.errors.form.city)}},[r("Input",{model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("postal_code"),prop:"postal_code",error:t._f("a2s")(t.errors.form.postal_code)}},[r("Input",{model:{value:t.form.postal_code,callback:function(e){t.$set(t.form,"postal_code",e)},expression:"form.postal_code"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("country"),prop:"country",error:t._f("a2s")(t.errors.form.country)}},[r("Select",{attrs:{placeholder:"",filterable:""},on:{"on-change":t.countryChange},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.countries,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("state"),prop:"state",error:t._f("a2s")(t.errors.form.state)}},[r("Select",{attrs:{placeholder:"",filterable:"",loading:t.searching},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.states,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("suppliers")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("suppliers",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},24844:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(92704);const a={props:{supplier:{required:!0},addUserFn:{type:Function,required:!1},listUsersFn:{type:Function,required:!1}}};var i=r(51900);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l={components:{SupplierViewComponent:(0,i.Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.supplier?r("div",[r("div",{staticClass:"table-responsive mb16"},[r("div",{staticClass:"ivu-table-wrapper ivu-table-wrapper-with-border"},[r("div",{staticClass:"ivu-table ivu-table-default ivu-table-border"},[r("div",{staticClass:"ivu-table-body"},[r("table",{staticStyle:{width:"100%","min-width":"300px"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[r("tbody",{staticClass:"ivu-table-tbody"},[r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("name")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[r("strong",[t._v(t._s(t.supplier.name))]),t._v(" "),t.supplier.company?r("span",[t._v("("+t._s(t.supplier.company)+")")]):t._e()])])]),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("phone")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[r("strong",[t._v(t._s(t.supplier.phone))]),t._v(" "),t.supplier.email?r("span",[t._v("("+t._s(t.supplier.email)+")")]):t._e()])])]),t._v(" "),t.supplier.journal&&t.supplier.journal.balance?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.supplier.journal.balance.amount>0?t.$t("due"):t.$t("deposit")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v("\n                    "+t._s(t.supplier.journal.balance.amount>0?t.$t("due"):t.$t("advance"))+":\n                    "),r("strong",[t._v(t._s(t.supplier.journal?t.formatJournalBalance(t.supplier.journal.balance.amount>0?t.supplier.journal.balance.amount:0-t.supplier.journal.balance.amount,t.$store.getters.settings.decimals):""))])])])]):t._e(),t._v(" "),r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$t("address")))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v("\n                    "+t._s((t.supplier.address||"")+" "+(t.supplier.state_name||"")+" "+(t.supplier.country_name||""))+"\n                  ")])])]),t._v(" "),t.supplier.extra_attributes&&t.supplier.extra_attributes.length?r("tr",{staticClass:"ivu-table-row"},[r("td",{staticStyle:{width:"40%","min-width":"100px"}},[r("div",{staticClass:"ivu-table-cell"},[r("div",{staticClass:"ivu-table-cell-slot"},[t._v(t._s(t.$tc("field",2)))])])]),t._v(" "),r("td",{staticStyle:{width:"60%","min-width":"200px"}},[r("div",{staticClass:"ivu-table-cell"},[t._v("\n                    "+t._s(Object.entries(t.supplier.extra_attributes).map((function(t){return t.join(": ")})).join(", "))+"\n                  ")])])]):t._e()])])])])])]),t._v(" "),r("div",{staticClass:"text-center"},[t.addUserFn?r("Button",{on:{click:function(e){return t.addUserFn(t.supplier)}}},[t._v(t._s(t.$t("add_x",{x:t.$tc("user")})))]):t._e(),t._v(" "),t.listUsersFn?r("Button",{on:{click:function(e){return t.listUsersFn(t.supplier)}}},[t._v(t._s(t.$t("list_x",{x:t.$tc("user",2)})))]):t._e()],1)]):t._e()}),[],!1,null,null,null).exports},mixins:[(0,s.Z)("supplier","app/suppliers","name","company")],data:function(){var t=this,e=function(e,r,s){t.user_form.email||t.user_form.phone?s():s(new Error(t.$t("field_is_required",{field:t.$t("email_or_phone")})))};return{row:{},users:[],view:!1,current:null,saving:!1,loading:!1,add_user:!1,view_users:!1,selected_user:null,errors:{message:"",form:{}},user_form:{id:"",name:"",active:1,phone:"",email:"",employee:0,username:"",password:"",email_verified_at:1,password_confirmation:""},columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("name"),sortable:!0,key:"name",sortType:"asc",minWidth:200},{title:this.$tc("company"),sortable:!0,key:"company",width:175},{title:this.$t("phone"),sortable:!0,key:"phone",maxWidth:125,minWidth:125},{title:this.$t("email"),sortable:!0,key:"email",minWidth:200},{title:this.$t("balance"),sortable:!1,key:"journal",width:150,render:this.renderBalance},{title:this.$t("address"),sortable:!0,key:"address",minWidth:200,render:this.renderAddress},{title:this.$t("state"),sortable:!0,key:"state_name",maxWidth:150,minWidth:150},{title:this.$t("country"),sortable:!0,key:"country_name",maxWidth:150,minWidth:150},{title:this.$tc("field",2),sortable:!1,key:"extra_attributes",minWidth:200,render:this.renderExtras},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-dropdown-component",{props:{params:r,editFn:t.editRecord,listFn:t.listRecord,payFn:t.paymentRecord,listUsersFn:t.listUsers,deleteFn:t.deleteRecord,addUserFn:t.showUserForm,record:{model:"item",name:"name",title:t.$tc("supplier")}}})}}],options:{orderBy:"name",perPage:this.$store.state.settings.rows},user_rules:{name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}],username:[{required:!0,message:this.$t("field_is_required",{field:this.$t("username")}),trigger:"blur"}],phone:[{validator:e,required:!1,trigger:"change"}],email:[{validator:e,required:!1,trigger:"change"},{type:"email",message:this.$t("email_invalid"),trigger:["change","blur"]}],password:[{required:!this.selected_user,min:6,message:this.$t("password_error"),trigger:"blur"}],password_confirmation:[{trigger:"blur",required:!this.selected_user,message:this.$t("field_is_required",{field:this.$t("confirm_password")})},{validator:function(e,r,s){r!==t.user_form.password?s(new Error(t.$t("confirm_password_not_match"))):s()},required:!this.selected_user,trigger:"change"}]}}},computed:{url:function(){return"app/suppliers"+(this.$route.query.due_limit?"?due_limit="+parseInt(this.$route.query.due_limit):"")}},watch:{"$route.query.due_limit":function(){this.refresh++}},methods:{showInfo:function(t){this.row=t,this.view=!0},paymentRecord:function(t){this.$router.push("/payments/add?supplier_id=".concat(t.id).concat(t.journal.balance.amount<0?"&amount="+(0-t.journal.balance.amount/100):""))},listRecord:function(t){this.$router.push("/suppliers/transactions/"+t.id)},showUserForm:function(t,e){this.row=t,e&&(this.user_form=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e)),this.add_user=!0},resetUserForm:function(t){var e=this;t||(this.selected_user=null,this.$refs.user_form.resetFields(),this.saving=!1,setTimeout((function(){e.user_form.id=null}),250))},addUser:function(){var t=this;this.$refs.user_form.validate((function(e){e?(t.saving=!0,t.user_form.supplier_id=t.row.id,t.user_form.id?t.$http.put("app/suppliers/update_user/"+t.user_form.id,t.user_form).then((function(e){if(e.data&&e.data.success){t.add_user=!1;var r=e.data.user;t.selected_user=null,t.users=t.users.map((function(t){return t.id==r.id?r:t})),t.$Notice.success({title:t.$t("success"),desc:t.$t("record_updated")})}else t.$Notice.error({title:t.$t("failed"),desc:t.$t("failed_error_text"),duration:10})})).catch().finally((function(){return t.saving=!1})):t.$http.post("app/suppliers/add_user",t.user_form).then((function(e){e.data&&e.data.success?(t.add_user=!1,t.users.push(e.data.user),t.$Notice.success({title:t.$t("success"),desc:t.$t("record_added")})):t.$Notice.error({title:t.$t("failed"),desc:t.$t("failed_error_text"),duration:10})})).catch().finally((function(){return t.saving=!1}))):t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10})}))},listUsers:function(t){var e=this;this.users=[],this.view_users=!0,this.loading=!0,this.$http.get("app/suppliers/users/"+t.id).then((function(t){return e.users=t.data})).catch().finally((function(){return e.loading=!1}))},deleteUser:function(){var t=this;this.$http.delete("app/suppliers/delete_user/"+this.user_form.id).then((function(e){e.data.success?(t.$Notice.destroy(),t.$Notice.success({title:t.$tc("user")+" "+t.$t("deleted"),desc:t.$t("record_deleted")}),t.userRemoved(t.user_form.id)):t.$Notice.error({title:t.$tc("failed"),desc:e.data.error||t.$t("failed_record_delete_text"),duration:15})})).catch((function(e){return t.errors=e})).finally((function(){return t.saving=!1}))},userRemoved:function(t){this.add_user=!1,this.users=this.users.filter((function(e){return e.id!=t}))},renderTransactions:function(t,e){return t("transactions-icon-component",{props:{id:e.row.id,url:"/suppliers/transactions/"}})},renderBalance:function(t,e){return t("div",{class:"text-right"},[e.row.journal?this.$options.filters.formatJournalBalance(e.row.journal.balance.amount,this.$store.getters.settings.decimals):""])}}};const c=(0,i.Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("supplier",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/suppliers/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add"))+" "+t._s(t.$tc("supplier"))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:t.url,columns:t.columns,options:t.options,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1),t._v(" "),r("pre",{staticStyle:{"font-size":"10px"}},[t._v(t._s(t.$t("supplier_balance_tip")))]),t._v(" "),r("Modal",{attrs:{"footer-hide":"",scrollable:"",width:750},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("\n        "+t._s(t.row.name)+"\n        "),t.row.company?r("span",[t._v("("+t._s(t.row.company)+")")]):t._e()])]),t._v(" "),r("supplier-view-component",{attrs:{supplier:t.row,listUsersFn:t.listUsers,addUserFn:t.showUserForm}})],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"500","footer-hide":"","mask-closable":!1,title:t.user_form.id?t.$t("edit_x",{x:t.$tc("user")}):t.$t("add_x",{x:t.$tc("user")})},on:{"on-visible-change":t.resetUserForm},model:{value:t.add_user,callback:function(e){t.add_user=e},expression:"add_user"}},[r("Form",{ref:"user_form",staticClass:"form-responsive",attrs:{model:t.user_form,rules:t.user_rules,"label-width":150}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.user_form.name,callback:function(e){t.$set(t.user_form,"name",e)},expression:"user_form.name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("phone"),prop:"phone",error:t._f("a2s")(t.errors.form.phone)}},[r("Input",{model:{value:t.user_form.phone,callback:function(e){t.$set(t.user_form,"phone",e)},expression:"user_form.phone"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("email"),prop:"email",error:t._f("a2s")(t.errors.form.email)}},[r("Input",{model:{value:t.user_form.email,callback:function(e){t.$set(t.user_form,"email",e)},expression:"user_form.email"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("username"),prop:"username",error:t._f("a2s")(t.errors.form.username)}},[r("Input",{model:{value:t.user_form.username,callback:function(e){t.$set(t.user_form,"username",e)},expression:"user_form.username"}})],1),t._v(" "),t.user_form.id?t._e():[r("FormItem",{attrs:{label:t.$t("new_password"),prop:"password",error:t._f("a2s")(t.errors.form.password)}},[r("Input",{attrs:{type:"password",password:""},model:{value:t.user_form.password,callback:function(e){t.$set(t.user_form,"password",e)},expression:"user_form.password"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"password_confirmation",label:t.$t("confirm_password"),error:t._f("a2s")(t.errors.form.password_confirmation)}},[r("Input",{attrs:{type:"password",password:""},model:{value:t.user_form.password_confirmation,callback:function(e){t.$set(t.user_form,"password_confirmation",e)},expression:"user_form.password_confirmation"}})],1)],t._v(" "),r("FormItem",{attrs:{prop:"active",error:t._f("a2s")(t.errors.form.active)}},[r("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.user_form.active,callback:function(e){t.$set(t.user_form,"active",e)},expression:"user_form.active"}},[r("span",[t._v(t._s(t.$t("active")))])])],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.addUser()}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),t.user_form.id?r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"error",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.deleteUser()}}},[t.saving?r("span",[t._v(t._s(t.$t("deleting"))+"...")]):r("span",[t._v(t._s(t.$t("delete")))])]):t._e()],1)],2)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{title:t.$tc("user",2),width:t.users&&t.users.length?550:350,"footer-hide":""},model:{value:t.view_users,callback:function(e){t.view_users=e},expression:"view_users"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):r("div",[t.users&&t.users.length?r("div",[r("div",{staticStyle:{"margin-top":"-16px"}}),t._v(" "),t._l(t.users,(function(e,s){return[r("Button",{key:"u_"+s,staticClass:"mt16",staticStyle:{height:"auto","white-space":"normal",padding:"8px","text-align":"left"},attrs:{long:""},on:{click:function(r){return t.showUserForm(t.row,e)}}},[t._v("\n            "+t._s(e.name)+" ( "),r("strong",[t._v(t._s(e.username))]),t._v(" )\n            "),e.phone?r("div",[t._v(t._s(t.$t("phone"))+": "+t._s(e.phone))]):t._e(),t._v(" "),e.email?r("div",[t._v(t._s(t.$t("email"))+": "+t._s(e.email))]):t._e(),t._v(" "),r("div",[t._v(t._s(t.$t("active"))+": "+t._s(1==e.active?t.$t("yes"):t.$t("no")))])])]}))],2):r("h4",[t._v(t._s(t.$t("no_data")))])])])],1)}),[],!1,null,null,null).exports},95593:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>l});var s=r(40895);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const n={components:{PaymentViewComponent:r(69697).Z,ReportFormComponent:s.Z},data:function(){return{url:"",data:{},refresh:1,updated:0,reportForm:{},loading:!1,showForm:!1,payment:{},view_payment:!1,fields:["created_at","user_id"],columns:[{type:"expand",width:50,render:function(t,e){return t("pre",{style:{margin:"0"}},JSON.stringify(e.row.subject,null,"  "))}},{title:this.$t("created_at"),sortable:!0,key:"created_at",sortType:"asc",width:175,render:this.renderCreatedAt},{title:this.$tc("account"),sortable:!1,key:"account",render:this.renderAccount},{title:this.$tc("supplier"),sortable:!1,key:"supplier",render:this.renderSupplier},{title:this.$tc("debit"),sortable:!0,key:"debit",width:150,render:this.renderDebit},{title:this.$tc("credit"),sortable:!0,key:"credit",width:150,render:this.renderCredit},{title:this.$t("type"),sortable:!1,key:"type",width:200,render:this.renderType}],options:{hideSearch:!0,showSummary:!0,orderBy:"created_at desc",summaryMethod:this.handleSummary,perPage:this.$store.state.settings.rows}}},created:function(){var t=this;this.fields.map((function(e){t.reportForm[e]=""})),this.url="app/suppliers/transactions/".concat(this.$route.params.id,"/table"),this.$http.get("app/suppliers/transactions/".concat(this.$route.params.id),{params:i(i({},this.reportForm),{},{date:""})}).then((function(e){t.prepareData(e.data.transactions),t.reportForm.end_date=new Date(e.data.end_date),t.reportForm.start_date=new Date(e.data.start_date),t.reportForm.created_at=[new Date(e.data.start_date),new Date(e.data.end_date)],t.updated++})).finally((function(){return t.loading=!1}))},methods:{handleSubmit:function(t){var e=this;this.fields.map((function(r){e.reportForm[r]=t[r]})),this.reportForm.created_at&&this.reportForm.created_at[0]&&(this.reportForm.start_date=this.$moment(this.reportForm.created_at[0]).format(this.datetimeFormatString())),this.reportForm.created_at&&this.reportForm.created_at[1]&&(this.reportForm.end_date=this.$moment(this.reportForm.created_at[1]).format(this.datetimeFormatString())),delete this.reportForm.created_at,this.url="app/suppliers/transactions/".concat(this.$route.params.id,"/table?").concat(this.queryString(this.reportForm)),this.refresh++,this.$http.get("app/suppliers/transactions/".concat(this.$route.params.id),{params:i(i({},this.reportForm),{},{date:""})}).then((function(t){e.prepareData(t.data.transactions),e.reportForm.created_at=[new Date(t.data.start_date),new Date(t.data.end_date)],e.updated++})).finally((function(){return e.loading=!1}))},prepareData:function(t){this.data=[{label:this.$t("start_balance"),value:t.start_balance},{label:this.$t("close_balance"),value:t.close_balance}]},showInfo:function(t){t.subject_type&&t.subject_type.includes("Payment")&&this.viewPayment(t.subject_id)},viewPayment:function(t){var e=this;this.view_payment=!0,t!=this.payment.id&&(this.loading=!0,this.$http.get("app/payments/".concat(t)).then((function(t){return e.payment=t.data})).finally((function(){return e.loading=!1})))},renderType:function(t,e){var r=e.row.type.split("_"),s=r[0],a="opening"==s?"success":"primary",i=r[1],o="created"==i?"success":"updated"==i?"warning":"deleted"==i?"error":"default";return t("div",{class:"text-center"},[t("div",{class:"ivu-tag ivu-tag-".concat(a," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[this.capitalize(s)])]),t("div",{class:"ivu-tag ivu-tag-".concat(o," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ".concat("default"==o?"":"ivu-tag-color-white")},[this.capitalize(i)])])])},renderSupplier:function(t,e){return t("div",[e.row.journal.morphed?e.row.journal.morphed.name+" ("+e.row.journal.morphed.company+")":""])},renderAccount:function(t,e){return t("div",[e.row.subject&&e.row.subject.account?e.row.subject.account.name:""])},renderCredit:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatJournalBalance(e.row.credit,this.$store.getters.settings.decimals)])},renderDebit:function(t,e){return t("div",{class:"text-right"},[this.$options.filters.formatJournalBalance(e.row.debit,this.$store.getters.settings.decimals)])},renderCreatedAt:function(t,e){return t("div",[this.$options.filters.formatDate(e.row.created_at,this.$store.state.settings.dateformat+" HH:mm A")])},rowClassName:function(t,e){return t.debit>0?"ivu-table-warning-row":t.credit>0?"ivu-table-success-row":""},handleSummary:function(t){var e=this,r=t.columns,s=t.data,a=["debit","credit"],i={};return r.forEach((function(t,r){var o=t.key;if(a.includes(o)){var n=s.map((function(t){return t.void||t.draft?0:Number(e.formatDecimal(t[o]))}));if(!n.every((function(t){return isNaN(t)}))){var l=n.reduce((function(t,e){return isNaN(Number(e))?t:t+e}),0);i[o]={key:o,value:e.formatJournalBalance(l)}}}else i[o]={key:o,value:""}})),i}}};const l=(0,r(51900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.$t("transactions"))+" ("+t._s(t.datetime(new Date(t.reportForm.start_date)))+" - "+t._s(t.datetime(new Date(t.reportForm.end_date)))+")\n    ")]),t._v(" "),r("span",{attrs:{slot:"extra"},slot:"extra"},[r("router-link",{attrs:{to:"/suppliers"}},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n        "+t._s(t.$t("list"))+" "+t._s(t.$tc("supplier",2))+"\n      ")],1),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.showForm=!t.showForm}},slot:"extra"},[r("Icon",{attrs:{type:"md-options"}}),t._v("\n        "+t._s(t.$t("toggle_x",{x:t.$tc("form",2)}))+"\n      ")],1)],1),t._v(" "),r("div",[r("transition",{attrs:{name:"fade",mode:"out-in","enter-active-class":"animate__animated fast animate__fadeInDown","leave-active-class":"animate__animated faster animate__fadeOutUp"}},[t.showForm?r("Card",{staticClass:"mb16",attrs:{"dis-hover":""}},[r("report-form-component",{attrs:{fields:t.fields,updated:t.updated,reportForm:t.reportForm},on:{submit:t.handleSubmit}})],1):t._e()],1),t._v(" "),r("Row",{staticClass:"sparkboxes",attrs:{gutter:16}},[t._l(t.data,(function(e,s){return[r("Col",{key:s,attrs:{sm:12,md:12}},[r("div",{staticClass:"box static",class:"box"+(s+5)},[r("div",{staticClass:"details"},[r("h3",[t._v(t._s(t.formatJournalBalance(e.value)))]),t._v(" "),r("h4",[t._v(t._s(e.label))])]),t._v(" "),r("div",{staticStyle:{clear:"both"}})])])]}))],2),t._v(" "),r("table-component",{attrs:{url:t.url,stripe:!1,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.showInfo,"row-class-name":t.rowClassName}})],1)]),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,title:t.$tc("payment")},model:{value:t.view_payment,callback:function(e){t.view_payment=e},expression:"view_payment"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("payment-view-component",{attrs:{payment:t.payment}})],1)],1)}),[],!1,null,null,null).exports},58827:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>l});var s=r(48921);r(23279);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=function(t,e){return t.amount=parseFloat(t.amount),e.form=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t),e.form};const n={mixins:[(0,s.Z)("asset_transfer","app/transfers/asset",!1,o)],data:function(){var t=this;return{accounts:[],searching:!1,form:{id:"",title:"",details:"",amount:null,reference:"",to:"",from:""},rules:{from:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("from_account")}),trigger:"change"}],to:[{required:!0,validator:function(e,r,s){r&&""!=r?r==t.form.from?s(new Error(t.$t("to_account_same_error"))):s():s(new Error(t.$t("field_is_required",{field:t.$t("to_account")})))},trigger:"change"}],amount:[{required:!0,type:"number",trigger:["change","blur"],message:this.$t("field_is_required",{field:this.$tc("amount")})}]}}},created:function(){var t=this;this.$route.query.amount&&(this.max_amount=this.form.amount=parseFloat(this.$route.query.amount)),this.$http.get("app/accounts/search").then((function(e){return t.accounts=e.data}))},methods:{fetch:function(t){var e=this;this.$http.get("app/transfers/asset/".concat(t)).then((function(t){return o(t.data,e)})).finally((function(){return e.loading=!1}))}}};const l=(0,r(51900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("asset_transfer")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/transfers/asset"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("asset_transfer",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"asset_transfer",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("from_account"),prop:"from",error:t._f("a2s")(t.errors.form.from)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.from,callback:function(e){t.$set(t.form,"from",e)},expression:"form.from"}},[t.accounts.length>0?t._l(t.accounts,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})):t._e()],2)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("to_account"),prop:"to",error:t._f("a2s")(t.errors.form.to)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.to,callback:function(e){t.$set(t.form,"to",e)},expression:"form.to"}},[t.accounts.length>0?t._l(t.accounts,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})):t._e()],2)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("amount"),prop:"amount",error:t._f("a2s")(t.errors.form.amount)}},[r("InputNumber",{model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details",error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}})],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("transfers.asset")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("transfers.asset",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},40652:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const a={mixins:[(0,r(92704).Z)("asset_transfers","app/transfers/asset","reference")],data:function(){var t,e=this;return{columns:[{type:"selection",width:50,align:"center",fixed:"left"},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{title:this.$t("amount"),sortable:!1,key:"amount",width:150,render:this.renderAmount},{key:"to",maxWidth:300,minWidth:200,sortable:!1,title:this.$tc("to_account"),render:this.renderToAccount},{key:"from",maxWidth:300,minWidth:200,sortable:!1,render:this.renderFromAccount,title:this.$tc("from_account")},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},(t={title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0},s(t,"ellipsis",!0),s(t,"minWidth",250),s(t,"maxWidth",400),t),{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(t,r){return t("actions-component",{props:{params:r,editFn:e.editRecord,deleteFn:e.deleteRecord,record:{model:"asset_transfer",name:"reference",title:e.$tc("asset_transfer")}}})}}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},methods:{editRecord:function(t){this.$router.push({name:"transfers.asset.edit",params:{id:t.id}})},renderToAccount:function(t,e){return t("div",[e.row.to_account.name])},renderFromAccount:function(t,e){return t("div",[e.row.from_account.name])},renderAmount:function(t,e){return this.renderNumber(t,e,"amount")}}};const i=(0,r(51900).Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("asset_transfer",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/transfers/asset/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("add_x",{x:t.$tc("asset_transfer")}))+"\n  ")],1),t._v(" "),r("div",[r("table-component",{attrs:{columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.showInfo,url:"app/transfers/asset",bulkDelCB:t.deleteRecords}})],1)],1)}),[],!1,null,null,null).exports},54729:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>h});var s=r(48921),a=r(18446),i=r.n(a),o=r(23279),n=r.n(o),l=r(44605),c=r(14514);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var f=function(t,e){return t.items=t.items.map((function(t){return t.item.id=t.id,t.item.item_id=t.item_id,t.item.stock_transfer_item_id=t.id,t.item.quantity=parseFloat(t.quantity),t.item.stock_transfer_id=t.stock_transfer_id,t.item.selected={variations:[],serials:[]},t.variations.length&&(t.item.selected.variations=t.variations.map((function(e){var r=t.item.variations.find((function(t){return e.id==t.id}));return{id:e.id,meta:e.meta,quantity:parseFloat(e.pivot.quantity),available:parseFloat(e.pivot.quantity+r.stock[0].quantity)}}))),t.item})),e.attachments=t.attachments&&t.attachments.length?p(t.attachments):[],e.form=u({},t),e.form};const v={components:{SelectVariationComponent:c.Z},mixins:[l.Z,(0,s.Z)("transfer","app/transfers/stock",!1,f)],data:function(){var t=this;return{query:"",item:null,result:[],qty:!1,show:!1,locations:[],loading:!1,cloading:!1,edit_item:null,searching:!1,attachments:null,variantModal:!1,show_item_edit:!1,form:{id:"",to:"",from:"",items:[],details:"",reference:"",attachments:[],status:"pending"},rules:{to:[{required:!0,validator:function(e,r,s){r&&""!=r?r==t.form.from?s(new Error(t.$t("same_location_error"))):s():s(new Error(t.$t("field_is_required",{field:t.$t("to_location")})))},trigger:"change"}],from:[{required:!0,validator:function(e,r,s){r&&""!=r?r==t.form.to?s(new Error(t.$t("same_location_error"))):s():s(new Error(t.$t("field_is_required",{field:t.$t("from_location")})))},trigger:"change"}],status:[{required:!0,message:this.$t("field_is_required",{field:this.$t("status")}),trigger:"change"}],date:[{type:"date",required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("date")})}]}}},created:function(){var t=this;this.$http.get("app/locations/search").then((function(e){return t.locations=e.data})).finally((function(){return t.loading=!1}))},methods:{fetch:function(t){var e=this;this.$http.get("app/transfers/stock/".concat(t)).then((function(t){return f(t.data,e)})).finally((function(){return e.loading=!1}))},selectItem:function(t){this.query="",this.addToOrder(JSON.parse(t))},searchItems:function(t){t.includes("(")||this.getItems(t,this)},getItems:n()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/items_wt/search?q="+t+"&location="+e.form.from).then((function(t){1==t.data.length?(e.query="",e.addToOrder(t.data[0])):e.result=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),addToOrder:function(t,e,r,s){var a=this;if(this.qty=0,t.selected||(t.selected={variations:[],serials:[]}),t.meta||(t.meta={}),this.cloading=!0,!r&&(t.serials&&t.serials.length||t.variants&&t.variants.length>0&&t.variations&&t.variations.length>0))return this.item=JSON.parse(JSON.stringify(t)),this.variantModal=!0,!1;var i={},o=this.form.items.length>0&&this.form.items.find((function(e){return e.id==t.id&&(!e.variation||e.variation&&t.variation&&e.variation.id==t.variation.id)}));o?(o.quantity=s?parseFloat(e):parseFloat(o.quantity)+(e?parseFloat(e):1),t.selected_variation&&o.selected.variations.push(t.selected_variation),this.alert(this.$root.$t("cart_item_updated",{item:t.name}))):(t.unit&&(t.allUnits=[u(u({},t.unit),{},{subunits:null})].concat(p(t.unit.subunits))),t.selected.variations.length&&t.selected.variations.push(t.selected_variation),i=u(u({},t),{},{id:"",comment:"",item_id:t.id,guid:this.guid(),selected:u(u({},t.selected),{},{variations:t.selected_variation?[u({},t.selected_variation)]:[]}),quantity:e?parseFloat(e):1}),this.form.items.push(i),this.alert(this.$root.$t("added_to_cart",{item:i.name}))),this.cloading=!1,this.$nextTick((function(){a.query="",document.querySelector("#scan_barcode").focus()}))},selectVariant:function(){var t=this,e=this.item.variations.find((function(e){return i()(e.meta,t.item.meta)}));e&&(this.qty=this.formatDecimal(e.stock[0].quantity),this.show=!0,this.item.variation_id=e.id)},variantSeleted:function(){var t=this;this.$refs.vform.validate((function(e){if(e){var r=t.item.quantity?t.item.quantity:1;if(t.item.serials.length&&t.item.selected.serials.length!=t.item.quantity)return t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10}),!1;if(t.item.variation_id){var s=t.item.variations?t.item.variations.find((function(e){return e.id==t.item.variation_id})):null,a=s?{quantity:r,id:s.id,meta:s.meta,available:t.formatDecimal(s.stock[0].quantity)}:null;t.item.selected_variation=s?a:null}else t.item.selected_variation=null;t.addToOrder(t.item,r,!0),t.variantModal=!1,t.$nextTick((function(){t.$refs.vform.resetFields()}))}else t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10})}))},editItem:function(t){this.form.items[t].guid||(this.form.items[t].guid=this.guid()),this.edit_item=JSON.parse(JSON.stringify(this.form.items[t])),this.show_item_edit=!0},updateItem:function(){var t=this;this.$refs.editItemForm.validate((function(e){if(e){if(t.edit_item.serials.length&&t.edit_item.selected.serials.length!=t.edit_item.quantity)return t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10}),!1;t.edit_item.selected.variations.length&&(t.edit_item.selected_variation=null,t.edit_item.quantity=t.edit_item.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0)),t.$nextTick((function(){var e=JSON.parse(JSON.stringify(t.edit_item));t.form.items=t.form.items.map((function(t){return t.guid==e.guid?e:t})),t.addToOrder(e,e.quantity,!0,!0),t.edit_item=null,t.show_item_edit=!1}))}else t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10})}))},deleteItem:function(t){this.form.items=this.form.items.filter((function(e){return e.guid!==t.guid})),this.edit_item=null,this.show_item_edit=!1},deleteItemVariation:function(t,e){var r=this.form.items.find((function(e){return e.guid==t.guid}));r.selected_variation=null,r.selected.variations=r.selected.variations.filter((function(t){return t.id!==e.id})),r.quantity=r.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),r.selected.variations.length<=0&&this.deleteItem(r)},itemVariationQuantityChanged:function(t){t.selected_variation=null,t.quantity=t.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),this.addToOrder(t,t.quantity,!0,!0)},addTransfer:function(t,e){var r=this;this.$refs.transfer.validate((function(s){if(s){r.loading=!0;var a="app/transfers/stock",i="added";r.errors.message="";var o="record_added";r.form.id&&""!=r.form.id&&(i="updated",a="app/transfers/stock/"+r.form.id,o="record_updated",r.form._method="PUT");var n=u({},r.form);if(n.date&&(n.date=r.$moment(n.date).format(r.$moment.HTML5_FMT.DATE)),n.items=n.items.map((function(t){return{id:t.id,code:t.code,name:t.name,item_id:t.item_id,quantity:t.quantity,variations:t.selected.variations.map((function(t){var e={};return e[t.id]={quantity:t.quantity},e})),serials:t.selected.serials}})),r.attributes&&r.attributes.length>0){var l=r.attributes.map((function(t){var e={};return delete n[t.slug],e[t.slug]=r.form[t.slug],e}));n.extra_attributes=Object.assign.apply(Object,p(l))}n=r.$form(n),r.$http.post(a,n).then((function(s){s.data.success?(r.$Notice.destroy(),r.$Notice.success({title:r.$tc("transfer")+" "+r.$t(i),desc:r.$t(o)}),e?"updated"==i?fnFormat&&(r.form=fnFormat(s.data.data,r)):r.handleReset():r.$router.push({name:t+".list"})):r.$Notice.error({title:r.$t("failed"),desc:r.$t("failed_error_text")})})).catch((function(t){return r.errors=t})).finally((function(){return r.loading=!1}))}else r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10})}))}}};const h=(0,r(51900).Z)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("stock_transfer")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/transfers/stock"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("list"))+" "+t._s(t.$tc("stock_transfer",2))+"\n    ")],1),t._v(" "),r("div",[r("Form",{ref:"transfer",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("from_location"),prop:"from",error:t._f("a2s")(t.errors.form.from)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.from,callback:function(e){t.$set(t.form,"from",e)},expression:"form.from"}},[t.locations.length>0?t._l(t.locations,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v("\n                        "+t._s(e.label)+"\n                      ")])})):t._e()],2)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("to_location"),prop:"to",error:t._f("a2s")(t.errors.form.to)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.to,callback:function(e){t.$set(t.form,"to",e)},expression:"form.to"}},[t.locations.length>0?t._l(t.locations,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v("\n                        "+t._s(e.label)+"\n                      ")])})):t._e()],2)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("status"),prop:"status",error:t._f("a2s")(t.errors.form.status)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[r("Option",{attrs:{value:"pending"}},[t._v(t._s(t.$t("pending")))]),t._v(" "),r("Option",{attrs:{value:"transferring"}},[t._v(t._s(t.$t("transferring")))]),t._v(" "),r("Option",{attrs:{value:"transferred"}},[t._v(t._s(t.$t("transferred")))])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1)],1)],1),t._v(" "),r("transition",{attrs:{mode:"out-in",name:"slide-in","enter-active-class":"animate__animated faster animate__fadeInDown","leave-active-class":"animate__animated fastest animate__fadeOutDown"}},[t.form.from?r("div",{staticClass:"order-contents"},[r("div",{staticClass:"affix-content"},[r("AutoComplete",{ref:"scanCode",attrs:{size:"large",icon:"ios-search","element-id":"scan_barcode",placeholder:t.$t("search_scan_barcode")},on:{"on-select":t.selectItem,"on-change":t.searchItems},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},t._l(t.result,(function(e){return r("Option",{key:e.id,attrs:{value:JSON.stringify(e)}},[t._v(" "+t._s(e.name)+" ("+t._s(e.code)+") ")])})),1)],1),t._v(" "),!t.form.items||t.form.items.length<1?r("div",[r("Alert",{attrs:{"show-icon":""}},[t._v("\n                    "+t._s(t.$t("empty_order"))+"\n                    "),r("template",{slot:"desc"},[t._v("\n                      "+t._s(t.$t("empty_order_text"))+"\n                    ")])],2)],1):r("div",[r("div",{staticClass:"order-items"},[r("div",{staticClass:"header"},[r("span",{staticClass:"index"},[t._v("#")]),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{attrs:{type:"ios-trash",size:"16"}})],1),t._v(" "),r("span",{staticClass:"details"},[t._v(t._s(t.$t("description")))]),t._v(" "),r("span",{staticStyle:{width:"200px"}},[t._v(t._s(t.$t("quantity")))])]),t._v(" "),t._l(t.form.items,(function(e,s){return r("div",{key:s+"_"+e.id,staticClass:"order-item"},[r("span",{staticClass:"item"},[r("span",{staticClass:"index"},[t._v(t._s(s+1))]),t._v(" "),r("span",{staticClass:"remove"},[e.selected.variations&&!e.selected.variations.length?r("span",[r("Icon",{staticClass:"pointer",attrs:{size:"18",type:"md-close",color:"#ed4014"},on:{click:function(r){return t.deleteItem(e)}}})],1):t._e()]),t._v(" "),r("span",{staticClass:"details pointer",on:{click:function(e){return t.editItem(s)}}},[r("strong",[t._v(t._s(e.name))])]),t._v(" "),r("span",{staticStyle:{width:"200px"}},[r("InputNumber",{attrs:{readonly:!!e.selected.variations.length,size:e.selected.variations.length?"small":"default"},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"row.quantity"}})],1)]),t._v(" "),e.selected.variations&&e.selected.variations.length?t._l(e.selected.variations,(function(a,i){return r("div",{key:"svi_"+i,staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"remove"},[r("Icon",{staticClass:"pointer",attrs:{size:"18",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.deleteItemVariation(e,a)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n                            "+t._s(i+1)+".\n                            "),r("span",{domProps:{innerHTML:t._s(t.metaString(a.meta))}})]),t._v(" "),r("span",{staticStyle:{width:"200px"}},[r("InputNumber",{on:{"on-change":function(e){return t.itemVariationQuantityChanged(t.form.items[s])}},model:{value:a.quantity,callback:function(e){t.$set(a,"quantity",e)},expression:"sv.quantity"}})],1)])})):t._e()],2)}))],2)])]):t._e()]),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details",error:t._f("a2s")(t.errors.form.details)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.addTransfer("transfers.stock")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.addTransfer("transfers.stock",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1),t._v(" "),r("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,title:t.$t("select_x",{x:t.$tc("variant",2)})},model:{value:t.variantModal,callback:function(e){t.variantModal=e},expression:"variantModal"}},[t.item?r("div",[r("Form",{ref:"vform",attrs:{model:t.item,"label-position":"top"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{staticClass:"text-center",attrs:{label:t.$t("quantity")}},[r("InputNumber",{attrs:{size:"large"},model:{value:t.item.quantity,callback:function(e){t.$set(t.item,"quantity",e)},expression:"item.quantity"}})],1)],1),t._v(" "),t.item.serials&&t.item.serials.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.item.serials.length?r("FormItem",{attrs:{label:t.$tc("serial_number",2),prop:"serials",rules:[{required:!0,type:"array",size:t.item.quantity,message:t.$t("field_are_required",{field:t.$tc("serial_number",2)}),trigger:"change"}]}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.item.selected.serials,callback:function(e){t.$set(t.item.selected,"serials",e)},expression:"item.selected.serials"}},t._l(t.item.serials,(function(e,s){return r("Option",{key:"serial_"+s,attrs:{value:e.id}},[t._v("\n                    "+t._s(e.number)+"\n                  ")])})),1)],1):t._e()],1)]:t._e(),t._v(" "),t.item.variants&&t.item.variants.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                  "+t._s(t.$tc("variant",2))+"\n                ")])])],1),t._v(" "),t._l(t.item.variants,(function(e,s){return r("Col",{key:"sv_"+s,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:e.name,prop:"meta."+e.name,rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("variant")})}}},[r("Select",{on:{"on-change":t.selectVariant},model:{value:t.item.meta[e.name],callback:function(r){t.$set(t.item.meta,e.name,r)},expression:"item.meta[v.name]"}},t._l(e.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),t._v(" "),t.item.variants.length%2==1?r("Col",{attrs:{sm:24,md:12,lg:12}}):t._e(),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[t.show?r("Alert",{staticClass:"mb16",attrs:{type:"info","show-icon":""}},[r("strong",[t._v(t._s(this.$t("available_x",{x:this.$t("quantity")}))+": "+t._s(this.qty))])]):t._e()],1)]:t._e()],2)],1),t._v(" "),r("div",{staticClass:"text-right"},[r("Button",{attrs:{long:"",type:"primary",disabled:t.item.quantity<1},on:{click:t.variantSeleted}},[t._v("\n          "+t._s(this.$t("add"))+"\n        ")])],1)],1):t._e()]),t._v(" "),r("Modal",{attrs:{width:600,"footer-hide":!0,title:t.edit_item?t.$t("edit")+" - "+t.edit_item.name:""},model:{value:t.show_item_edit,callback:function(e){t.show_item_edit=e},expression:"show_item_edit"}},[t.edit_item?r("div",[r("Form",{ref:"editItemForm",attrs:{model:t.edit_item,"label-position":"top"}},[r("Row",{attrs:{gutter:16}},[t.edit_item.has_variants?t._e():r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{staticClass:"text-center",attrs:{label:t.$t("quantity")}},[r("InputNumber",{attrs:{size:"large"},model:{value:t.edit_item.quantity,callback:function(e){t.$set(t.edit_item,"quantity",e)},expression:"edit_item.quantity"}})],1)],1),t._v(" "),t.edit_item.variants&&t.edit_item.variants.length?[t._l(t.edit_item.selected.variations,(function(e,s){return r("span",{key:"sv_meta_"+s},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("span",{staticStyle:{color:"#515a6e"},domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("quantity"),prop:"selected.variations."+s+".quantity",rules:{required:!0,type:"number",trigger:"change",max:parseFloat(e.available),message:t.$t("only_x_quantity_available",{x:parseFloat(e.available)})}}},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"eisv.quantity"}})],1)],1),t._v(" "),r("Col",{staticClass:"text-primary",staticStyle:{"padding-top":"2.5em"},attrs:{sm:24,md:12,lg:12}},[t._v("\n                "+t._s(t.$t("available_x",{x:t.$t("quantity")}))+":\n                "),r("strong",[t._v(t._s(e.available))])])],1)})),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n              "+t._s(t.$t("general"))+"\n            ")])])],2),t._v(" "),r("FormItem",{attrs:{label:t.$t("comment")}},[r("Input",{attrs:{type:"textarea",placeholder:t.$t("item_comment"),autosize:{minRows:2,maxRows:5}},model:{value:t.edit_item.comment,callback:function(e){t.$set(t.edit_item,"comment",e)},expression:"edit_item.comment"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{long:"",type:"primary"},on:{click:function(e){return t.updateItem()}}},[t._v(t._s(t.$t("update")))])],1)],1),t._v(" "),r("Button",{attrs:{long:"",type:"error"},on:{click:function(e){return t.deleteItem(t.edit_item)}}},[t._v(t._s(t.$t("remove_from_order")))])],1):t._e()])],1)}),[],!1,null,null,null).exports},16900:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var s=r(92704);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const i={components:{OrderViewComponent:r(79478).Z},mixins:[(0,s.Z)("stock_transfers","app/transfers/stock","reference")],data:function(){var t,e=this;return{view:!1,loading:!1,stock:{id:null,reference:null},columns:[{type:"selection",width:50,align:"center",fixed:"left"},{width:175,sortable:!0,sortType:"desc",key:"created_at",title:this.$t("created_at"),render:this.renderCreatedAt},{title:this.$t("reference"),className:"reference",sortable:!0,key:"reference",width:150},{key:"to",maxWidth:300,minWidth:200,sortable:!1,title:this.$tc("to_location"),render:this.renderToAccount},{key:"from",maxWidth:300,minWidth:200,sortable:!1,render:this.renderFromAccount,title:this.$tc("from_location")},{title:"🔗",align:"center",sortable:!1,key:"attachments",maxWidth:50,minWidth:125,render:this.renderAttachments},{width:175,key:"user_id",sortable:!1,render:this.renderUser,title:this.$t("created_by")},(t={title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0},a(t,"ellipsis",!0),a(t,"minWidth",250),a(t,"maxWidth",600),t),{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(t,r){return t("actions-component",{props:{params:r,viewFn:e.viewModal,editFn:e.editRecord,deleteFn:e.deleteRecord,record:{model:"stock_transfer",name:"reference",title:e.$tc("stock_transfer")}}})}}],options:{orderBy:"created_at desc",perPage:this.$store.state.settings.rows}}},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.stock.id&&(this.loading=!0,this.$http.get("app/transfers/stock/".concat(t.id)).then((function(t){return e.stock=t.data})).finally((function(){return e.loading=!1})))},editRecord:function(t){this.$router.push({name:"transfers.stock.edit",params:{id:t.id}})},renderToAccount:function(t,e){return t("div",[e.row.to_location.name])},renderFromAccount:function(t,e){return t("div",[e.row.from_location.name])}}};const o=(0,r(51900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("stock_transfer",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/transfers/stock/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n      "+t._s(t.$t("add_x",{x:t.$tc("stock_transfer")}))+"\n    ")],1),t._v(" "),r("div",[r("table-component",{attrs:{columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,url:"app/transfers/stock",bulkDelCB:t.deleteRecords}})],1)],1),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("stock_transfer")+" ("+t.stock.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("order-view-component",{attrs:{field:"cost",extra:!1,record:t.stock,payment:!1,"only-qty":!0,to:"to_location","to-text":t.$t("to"),from:"from_location",heading:t.$tc("stock_transfer")},on:{remove:function(e){return t.deleteAttachment(e,t.stock)}}})],1)],1)}),[],!1,null,null,null).exports},17297:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={mixins:[(0,r(48921).Z)("user","app/profile/change_password",!1)],data:function(){var t=this;return{form:{current:"",password:"",password_confirmation:""},rules:{current:[{required:!0,message:this.$t("field_is_required",{field:this.$t("current_password")}),trigger:"blur"}],password:[{required:!0,min:6,message:this.$t("password_error"),trigger:"blur"}],password_confirmation:[{required:!0,message:this.$t("field_is_required",{field:this.$t("confirm_password")}),trigger:"blur"},{validator:function(e,r,s){r!==t.form.password?s(new Error(t.$t("confirm_password_not_match"))):s()},required:!0,trigger:"change"}]}}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("change_password")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/profile"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("profile"))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"user",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("current_password"),prop:"current",error:t._f("a2s")(t.errors.form.current)}},[r("Input",{attrs:{type:"password",password:""},model:{value:t.form.current,callback:function(e){t.$set(t.form,"current",e)},expression:"form.current"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("new_password"),prop:"password",error:t._f("a2s")(t.errors.form.password)}},[r("Input",{attrs:{type:"password",password:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("confirm_password"),prop:"password_confirmation",error:t._f("a2s")(t.errors.form.password_confirmation)}},[r("Input",{attrs:{type:"password",password:""},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("users")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},94113:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>f});var s=r(48921);const a={props:["error","label"],data:function(){return{image:null}},methods:{handleUpload:function(t){return this.image=t,this.$emit("upload",t),!1},clearImage:function(){this.image=null,this.$emit("clear")}}};var i=r(51900);const o={components:{ImageComponent:(0,i.Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("FormItem",{attrs:{label:t.label||t.$tc("image"),prop:"image",error:t.error}},[r("Upload",{attrs:{"before-upload":t.handleUpload,action:"",accept:"image/png, image/jpeg"}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v(t._s(t.$t("select_image_to_upload")))])],1),t._v(" "),t.image&&t.image.name?r("div",[t._v("\n    "+t._s(t.$t("selected_file"))+": "+t._s(t.image.name)+"\n    "),r("Button",{staticStyle:{"margin-bottom":"3px"},attrs:{type:"error",size:"small",icon:"ios-trash"},on:{click:t.clearImage}},[t._v("\n      "+t._s(t.$t("clear_selection"))+"\n    ")])],1):t._e()],1)}),[],!1,null,null,null).exports},data:function(){return{form:{image:null}}},methods:{handleImageUpload:function(t){return this.form.image=t,!1},clearSelectedImage:function(){this.form.image=null}}};var n=r(12527);function l(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t,e){return t.settings=t.settings&&0!=t.settings.length?t.settings:{},t.settings.collapsed=t.settings&&t.settings.collapsed?t.settings.collapsed:"0",t.settings.theme=t.settings&&t.settings.theme?t.settings.theme:e.$store.getters.settings.theme,t.settings.fixed_layout=t.settings&&(t.settings.fixed_layout||0==t.settings.fixed_layout)?t.settings.fixed_layout:e.$store.getters.settings.fixed,t.settings.play_sound=t.settings&&(t.settings.play_sound||0==t.settings.play_sound)?t.settings.play_sound:e.$store.getters.settings.play_sound,e.form=u(u({},t),t.extra_attributes),e.form};const _={components:{UserCardComponent:n.Z},mixins:[(0,s.Z)("user","app/profile",!0),o],data:function(){return{view:!1,form:{name:"",phone:"",email:"",avatar:"",username:"",settings:{collapsed:"0"}},rules:{name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}],phone:[{required:!0,message:this.$t("field_is_required",{field:this.$t("phone")}),trigger:"blur"}]}}},methods:{closeUserCard:function(){this.view=!1},create:function(){var t=this;this.$http.get("app/profile").then((function(e){return t.form=p(e.data,t)})).finally((function(){return t.loading=!1}))},submit:function(t,e){var r=this;this.errors.message="";var s=u({},this.form);if(this.attributes.length>0){var a=this.attributes.map((function(t){var e={};return delete s[t.slug],e[t.slug]=r.form[t.slug],e}));s.extra_attributes=Object.assign.apply(Object,l(a))}s.settings&&s.settings.birth_date&&(s.settings.birth_date=this.$moment(s.settings.birth_date).format(this.$moment.HTML5_FMT.DATE)),s.settings&&s.settings.hire_date&&(s.settings.hire_date=this.$moment(s.settings.hire_date).format(this.$moment.HTML5_FMT.DATE)),s.settings.collapsed=s.settings.collapsed,s.avatar=s.image,delete s.image,s=this.$form(s),this.$http.post("app/profile",s).then((function(t){t.data.success?(r.$Notice.destroy(),r.form=p(t.data,r),r.$store.commit("setUserProfile",u({},t.data)),r.$store.commit("setUserSettings",u({},t.data.settings)),r.$Notice.success({title:r.$t("profile")+" "+r.$t("updated"),desc:r.$t("record_updated")})):r.$Notice.error({title:r.$t("failed"),desc:r.$t("failed_error_text")})})).catch((function(t){return r.errors=t})).finally((function(){return r.saving=!1}))}}};const f=(0,i.Z)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("profile")))]),t._v(" "),r("span",{attrs:{slot:"extra"},slot:"extra"},[r("router-link",{attrs:{to:"/"}},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n        "+t._s(t.$t("dashboard"))+"\n      ")],1),t._v(" "),t.$store.getters.superAdmin||t.$store.getters.customer||t.$store.getters.supplier?t._e():r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text",size:"small"},on:{click:function(e){t.view=!t.view}}},[r("Icon",{attrs:{type:"ios-contact",size:"16"}}),t._v("\n        "+t._s(t.$t("view_x",{x:t.$t("card")}))+"\n      ")],1)],1),t._v(" "),r("div",[r("Form",{ref:"user",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("username"),prop:"username",error:t._f("a2s")(t.errors.form.username)}},[r("Input",{attrs:{readonly:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),t.$store.getters.customer?[r("FormItem",{attrs:{label:t.$t("email"),prop:"email",error:t._f("a2s")(t.errors.form.email)}},[r("Input",{attrs:{readonly:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)]:t._e()],2),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.$store.getters.customer||t.$store.getters.supplier?t._e():[r("FormItem",{attrs:{label:t.$t("email"),prop:"email",error:t._f("a2s")(t.errors.form.email)}},[r("Input",{attrs:{readonly:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)]],2),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("phone"),prop:"phone",error:t._f("a2s")(t.errors.form.phone)}},[r("Input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.$store.getters.customer||t.$store.getters.supplier?t._e():[r("FormItem",{attrs:{label:t.$t("birth_date"),prop:"birth_date",error:t._f("a2s")(t.errors.form.birth_date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.settings.birth_date,callback:function(e){t.$set(t.form.settings,"birth_date",e)},expression:"form.settings.birth_date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("address"),prop:"address",error:t._f("a2s")(t.errors.form.address)}},[r("Input",{attrs:{type:"textarea"},model:{value:t.form.settings.address,callback:function(e){t.$set(t.form.settings,"address",e)},expression:"form.settings.address"}})],1)]],2)],1),t._v(" "),t.$store.getters.customer||t.$store.getters.supplier?t._e():[r("image-component",{attrs:{label:t.$t("avatar"),error:t._f("a2s")(t.errors.form.name)},on:{clear:t.clearSelectedImage,upload:t.handleImageUpload}})],t._v(" "),r("FormItem",{staticClass:"mb0",attrs:{label:t.$t("initial_sidebar"),prop:"sidebar"}},[r("RadioGroup",{model:{value:t.form.settings.collapsed,callback:function(e){t.$set(t.form.settings,"collapsed",e)},expression:"form.settings.collapsed"}},[r("Radio",{attrs:{label:"0"}},[t._v(t._s(t.$t("normal")))]),t._v(" "),r("Radio",{attrs:{label:"1"}},[t._v(t._s(t.$t("collapsed")))])],1)],1),t._v(" "),r("FormItem",{class:t.$store.getters.customer||t.$store.getters.supplier?"":"mb0",attrs:{label:t.$t("theme"),prop:"theme"}},[r("RadioGroup",{model:{value:t.form.settings.theme,callback:function(e){t.$set(t.form.settings,"theme",e)},expression:"form.settings.theme"}},[r("Radio",{attrs:{label:"dark"}},[t._v(t._s(t.$t("default")))]),t._v(" "),r("Radio",{attrs:{label:"light"}},[t._v(t._s(t.$t("light")))]),t._v(" "),r("Radio",{attrs:{label:"primary"}},[t._v(t._s(t.$t("primary")))]),t._v(" "),r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.settings.fixed_layout,callback:function(e){t.$set(t.form.settings,"fixed_layout",e)},expression:"form.settings.fixed_layout"}},[r("span",[t._v(t._s(t.$t("fixed_layout")))])])],1)],1),t._v(" "),t.$store.getters.customer||t.$store.getters.supplier?t._e():r("FormItem",{attrs:{prop:"play_sound"}},[r("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.settings.play_sound,callback:function(e){t.$set(t.form.settings,"play_sound",e)},expression:"form.settings.play_sound"}},[r("span",[t._v(t._s(t.$t("play_sound_on_pos")))])])],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("primary",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),t.$store.getters.customer||t.$store.getters.supplier?t._e():[t.$store.getters.superAdmin?t._e():r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"info"},on:{click:function(e){t.view=!t.view}}},[t._v(t._s(t.$t("view_x",{x:t.$t("card")})))])]],2)],2)],1)],1)],1)]),t._v(" "),t.$store.getters.superAdmin?t._e():r("Modal",{staticClass:"np-header-footer",attrs:{width:282,"footer-hide":!0,"mask-closable":!1,title:t.$store.getters.user.name},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[r("user-card-component",{on:{close:t.closeUserCard}})],1)],1)}),[],!1,null,null,null).exports},7858:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var s=r(48921);r(23279);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var n=function(t,e){return t.roles=t.roles.map((function(t){return t.name})),t.changePassword=!1,t.settings=t.settings&&0!=t.settings.length?t.settings:{},t.active=t.active?1:0,t.settings.clock_in=t.settings.clock_in,t.settings.first_login=1==t.settings.first_login?1:0,t.settings.require_password=1==t.settings.require_password?1:0,t.settings.salary=t.settings.salary?parseFloat(t.settings.salary):null,t.settings.hourly_rate=t.settings.hourly_rate?parseFloat(t.settings.hourly_rate):null,t.settings.max_discount=t.settings.max_discount?parseFloat(t.settings.max_discount):null,t.settings.commission_rate=t.settings.commission_rate?parseFloat(t.settings.commission_rate):null,t.files=[{name:"",file:null}],e.form=i(i({},t),t.extra_attributes),e.form};const l={mixins:[(0,s.Z)("user","app/users",!1,n)],data:function(){var t=this,e=function(e,r,s){t.form.email||t.form.phone?s():s(new Error(t.$t("field_is_required",{field:t.$t("email_or_phone")})))};return{roles:[],locations:[],searching:!1,form:{id:"",name:"",active:1,phone:"",email:"",roles:[],employee:1,username:"",password:"",locations:[],location_id:"",can_impersonate:0,changePassword:!0,password_confirmation:"",files:[{name:"",file:null}],settings:{number:"",address:"",salary:null,first_login:"",hire_date:null,birth_date:null,hourly_rate:null,max_discount:null,require_password:"",commission_rate:null}},rules:{name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}],username:[{required:!0,message:this.$t("field_is_required",{field:this.$t("username")}),trigger:"blur"}],phone:[{validator:e,required:!1,trigger:"change"}],email:[{validator:e,required:!1,trigger:"change"},{type:"email",message:this.$t("email_invalid"),trigger:["change","blur"]}],location_id:[{required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("default_x",{x:this.$tc("location")})})}],roles:[{min:1,type:"array",required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$tc("role")})}],password:[{required:!0,min:6,message:this.$t("password_error"),trigger:"blur"}],password_confirmation:[{required:!0,message:this.$t("field_is_required",{field:this.$t("confirm_password")}),trigger:"blur"},{validator:function(e,r,s){r!==t.form.password?s(new Error(t.$t("confirm_password_not_match"))):s()},required:!0,trigger:"change"}]}}},beforeRouteEnter:function(t,e,r){r((function(t){t.$store.getters.superAdmin||(t.$Notice.error({title:t.$tc("access_denied"),desc:t.$t("not_allowed_resource")}),t.$router.push(e.path))}))},created:function(){var t=this;this.$http.get("app/roles/search").then((function(e){return t.roles=e.data.filter((function(t){return"customer"!=t.label&&"supplier"!=t.label}))})),this.$http.get("app/locations/search").then((function(e){return t.locations=e.data}))},methods:{fetch:function(t){var e=this;this.$http.get("app/users/".concat(t)).then((function(t){return e.form=n(t.data,e)})).finally((function(){return e.loading=!1}))},handleUpload:function(t,e){return this.form.files[e].file=t,!1},addFile:function(){this.form.files.push({name:"",file:null})},removeFile:function(){this.form.files.length>1&&this.form.files.pop()},downloadMedia:function(t){window.location.href="app/media/"+t.id},deleteMedia:function(t){var e=this;this.$Modal.confirm({title:this.$t("delete_x",{x:t.name}),content:this.$t("delete_confirm")+"<br><br><strong>"+this.$t("r_u_sure")+"</strong>",okText:this.$t("yes"),cancelText:this.$t("cancel"),onOk:function(){e.$http.delete("app/media/"+t.id).then((function(r){r.data.success?e.form.media=e.form.media.filter((function(e){return e.id!=t.id})):e.$Notice.error({title:e.$t("unknown_error"),desc:e.$t("unknown_error_text2"),duration:10})}))}})}}};const c=(0,r(51900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("user")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/users"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("user",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"user",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("phone"),prop:"phone",error:t._f("a2s")(t.errors.form.phone)}},[r("Input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("email"),prop:"email",error:t._f("a2s")(t.errors.form.email)}},[r("Input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("username"),prop:"username",error:t._f("a2s")(t.errors.form.username)}},[r("Input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),t.form.customer_id?t._e():[r("FormItem",{attrs:{prop:"location_id",error:t._f("a2s")(t.errors.form.location_id),label:t.$t("default_x",{x:t.$tc("location")})}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.location_id,callback:function(e){t.$set(t.form,"location_id",e)},expression:"form.location_id"}},[t.locations.length>0?t._l(t.locations,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v("\n                        "+t._s(e.label)+"\n                      ")])})):t._e()],2)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("location",2),prop:"locations",error:t._f("a2s")(t.errors.form.locations)}},[r("Select",{attrs:{multiple:"",placeholder:t.$t("select_x",{x:t.$tc("location",2)})},model:{value:t.form.locations,callback:function(e){t.$set(t.form,"locations",e)},expression:"form.locations"}},[t.locations.length>0?t._l(t.locations,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v("\n                        "+t._s(e.label)+"\n                      ")])})):t._e()],2)],1),t._v(" "),r("FormItem",{attrs:{prop:"clock_in",error:t._f("a2s")(t.errors.form.clock_in),label:t.$t("auto_clock_in")}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.settings.clock_in,callback:function(e){t.$set(t.form.settings,"clock_in",e)},expression:"form.settings.clock_in"}},[r("Option",{key:"clock_0",attrs:{value:""}},[t._v(t._s(t.$t("disable")))]),t._v(" "),r("Option",{key:"clock_1",attrs:{value:"login"}},[t._v(t._s(t.$t("auto_clock_in_with_login")))]),t._v(" "),r("Option",{key:"clock_2",attrs:{value:"register"}},[t._v(t._s(t.$t("auto_clock_in_with_register")))])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("birth_date"),prop:"birth_date",error:t._f("a2s")(t.errors.form.birth_date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date"},model:{value:t.form.settings.birth_date,callback:function(e){t.$set(t.form.settings,"birth_date",e)},expression:"form.settings.birth_date"}})],1)]],2),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.form.customer_id?t._e():[r("FormItem",{attrs:{label:t.$t("employee_number"),prop:"number",error:t._f("a2s")(t.errors.form.number)}},[r("Input",{model:{value:t.form.settings.number,callback:function(e){t.$set(t.form.settings,"number",e)},expression:"form.settings.number"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("hire_date"),prop:"hire_date",error:t._f("a2s")(t.errors.form.hire_date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date"},model:{value:t.form.settings.hire_date,callback:function(e){t.$set(t.form.settings,"hire_date",e)},expression:"form.settings.hire_date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("salary"),prop:"salary",error:t._f("a2s")(t.errors.form.salary)}},[r("InputNumber",{model:{value:t.form.settings.salary,callback:function(e){t.$set(t.form.settings,"salary",e)},expression:"form.settings.salary"}})],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("hourly_rate"),prop:"hourly_rate",error:t._f("a2s")(t.errors.form.hourly_rate)}},[r("InputNumber",{model:{value:t.form.settings.hourly_rate,callback:function(e){t.$set(t.form.settings,"hourly_rate",e)},expression:"form.settings.hourly_rate"}}),t._v(" "),r("small",[t._v(t._s(t.$t("hourly_rate_tip")))])],1),t._v(" "),r("FormItem",{attrs:{prop:"commission_rate",label:t.$t("commission_rate"),error:t._f("a2s")(t.errors.form.commission_rate)}},[r("InputNumber",{attrs:{formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")}},model:{value:t.form.settings.commission_rate,callback:function(e){t.$set(t.form.settings,"commission_rate",e)},expression:"form.settings.commission_rate"}})],1),t._v(" "),r("FormItem",{staticClass:"input-tip",attrs:{label:t.$t("max_discount"),prop:"max_discount"}},[r("InputNumber",{model:{value:t.form.settings.max_discount,callback:function(e){t.$set(t.form.settings,"max_discount",e)},expression:"form.settings.max_discount"}}),t._v(" "),r("small",[t._v(t._s(t.$t("max_discount_settings_tip")))])],1)]],2)],1),t._v(" "),t.form.customer_id?t._e():[r("FormItem",{attrs:{label:t.$t("address"),prop:"address",error:t._f("a2s")(t.errors.form.address)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.settings.address,callback:function(e){t.$set(t.form.settings,"address",e)},expression:"form.settings.address"}})],1),t._v(" "),t.form.media&&t.form.media.length>0?r("span",[r("FormItem",[t.form.media?r("div",{staticStyle:{padding:"10px",background:"#f8f8f9","border-radius":"4px"}},[r("Card",{attrs:{title:t.$tc("file",2),icon:"ios-options",padding:0,shadow:""}},[r("CellGroup",t._l(t.form.media,(function(e,s){return r("Cell",{key:"media_"+s,attrs:{title:e.name,label:e.file_name+", "+e.type+", "+e.size}},[r("ButtonGroup",{attrs:{slot:"extra",size:"small"},slot:"extra"},[r("Button",{attrs:{size:"small",type:"primary"},on:{click:function(r){return t.downloadMedia(e)}}},[t._v("\n                            "+t._s(t.$t("download"))+"\n                          ")]),t._v(" "),r("Button",{attrs:{size:"small",type:"error"},on:{click:function(r){return t.deleteMedia(e)}}},[t._v("\n                            "+t._s(t.$t("delete"))+"\n                          ")])],1)],1)})),1)],1)],1):t._e()])],1):t._e(),t._v(" "),t.form.files?r("span",t._l(t.form.files,(function(e,s){return r("Row",{key:"file_"+s,attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("file_name"),prop:"file_name",error:t._f("a2s")(t.errors.form.file)}},[r("Input",{model:{value:t.form.files[s].name,callback:function(e){t.$set(t.form.files[s],"name",e)},expression:"form.files[index].name"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("Upload",{attrs:{"before-upload":function(e){return t.handleUpload(e,s)},action:"#"}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v(t._s(t.$t("select_x",{x:t.$tc("file")})))])],1),t._v(" "),t.form.files[s].file?r("div",[t._v(t._s(t.$tc("file"))+": "+t._s(t.form.files[s].file.name))]):t._e()],1)],1)})),1):t._e(),t._v(" "),r("FormItem",[r("ButtonGroup",[r("Button",{on:{click:t.addFile}},[r("Icon",{attrs:{type:"md-add"}})],1),t._v(" "),r("Button",{attrs:{disabled:t.form.files&&t.form.files.length<2},on:{click:t.removeFile}},[r("Icon",{attrs:{type:"md-remove"}})],1)],1)],1)],t._v(" "),t.form.username!=t.$store.getters.user.username&&t.form.id?r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",[r("a",{on:{click:function(e){t.form.changePassword=!t.form.changePassword}}},[t._v(" "+t._s(t.$t("toggle_change_password")))])])]):t._e(),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},[t.form.changePassword?r("div",{staticStyle:{"margin-bottom":"16px"}},[r("FormItem",{attrs:{label:t.$t("new_password"),prop:"password",error:t._f("a2s")(t.errors.form.password)}},[r("Input",{attrs:{type:"password",password:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"password_confirmation",label:t.$t("confirm_password"),error:t._f("a2s")(t.errors.form.password_confirmation)}},[r("Input",{attrs:{type:"password",password:""},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}})],1)],1):t._e()]),t._v(" "),t.form.customer_id?t._e():[t.form.username!=t.$store.getters.user.username?r("FormItem",{attrs:{prop:"roles",label:t.$tc("role",2),error:t._f("a2s")(t.errors.form.roles)}},[r("CheckboxGroup",{model:{value:t.form.roles,callback:function(e){t.$set(t.form,"roles",e)},expression:"form.roles"}},t._l(t.roles,(function(e){return r("Checkbox",{key:e.value,attrs:{label:e.label,"true-value":e.label}},[t._v("\n                  "+t._s(t._f("capitalize")(e.label))+"\n                ")])})),1)],1):t._e()],t._v(" "),t.form.username!=t.$store.getters.user.username?r("FormItem",{class:t.form.customer_id?"":"mb0",attrs:{prop:"active",error:t._f("a2s")(t.errors.form.active)}},[r("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}},[r("span",[t._v(t._s(t.$t("active")))])])],1):t._e(),t._v(" "),t.form.customer_id?t._e():[r("FormItem",{staticClass:"mb0",attrs:{prop:"view_all",error:t._f("a2s")(t.errors.form.view_all)}},[r("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.view_all,callback:function(e){t.$set(t.form,"view_all",e)},expression:"form.view_all"}},[r("span",[t._v(t._s(t.$t("view_all")))])])],1),t._v(" "),r("FormItem",{staticClass:"mb0",attrs:{prop:"edit_all",error:t._f("a2s")(t.errors.form.edit_all)}},[r("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.edit_all,callback:function(e){t.$set(t.form,"edit_all",e)},expression:"form.edit_all"}},[r("span",[t._v(t._s(t.$t("edit_all")))])])],1),t._v(" "),r("FormItem",{staticClass:"mb0",attrs:{prop:"bulk_actions",error:t._f("a2s")(t.errors.form.bulk_actions)}},[r("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.bulk_actions,callback:function(e){t.$set(t.form,"bulk_actions",e)},expression:"form.bulk_actions"}},[r("span",[t._v(t._s(t.$t("bulk_actions")))])])],1),t._v(" "),r("FormItem",{staticClass:"mb0",attrs:{prop:"first_login"}},[r("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.settings.first_login,callback:function(e){t.$set(t.form.settings,"first_login",e)},expression:"form.settings.first_login"}},[r("span",[t._v(t._s(t.$t("first_login")))])])],1),t._v(" "),r("FormItem",{attrs:{prop:"can_impersonate",error:t._f("a2s")(t.errors.form.can_impersonate)}},[r("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.can_impersonate,callback:function(e){t.$set(t.form,"can_impersonate",e)},expression:"form.can_impersonate"}},[r("span",[t._v(t._s(t.$t("can_impersonate_text")))])])],1)],t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("users")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("users",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],2)],1)],1)],1)],1)}),[],!1,null,null,null).exports},78435:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var s=r(92704);const a={components:{UserCardComponent:r(12527).Z},mixins:[(0,s.Z)("user","app/users","username","name")],data:function(){var t=this;return{user:"",all:!1,view:!1,columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("name"),sortable:!0,key:"name",sortType:"asc",minWidth:200},{title:this.$t("username"),sortable:!0,key:"username",minWidth:150},{title:this.$t("email"),sortable:!0,key:"email",minWidth:200},{title:this.$t("active"),sortable:!0,key:"active",minWidth:100,render:this.renderActive},{title:this.$tc("role",2),sortable:!1,key:"roles",minWidth:200,render:this.renderRoles},{minWidth:150,key:"location",sortable:!1,render:this.renderLocation,title:this.$t("default_x",{x:this.$tc("location")})},{title:this.$tc("location",2),sortable:!1,key:"locations",minWidth:200,render:this.renderLocations},{title:this.$t("birth_date"),sortable:!1,key:"birth_date",minWidth:120,render:this.renderBirthDate},{title:this.$t("hire_date"),sortable:!1,key:"hire_date",minWidth:110,render:this.renderHireDate},{title:this.$tc("salary"),sortable:!1,key:"salary",minWidth:125,render:this.renderSalary},{title:this.$t("hourly_rate"),sortable:!1,key:"hourly_rate",minWidth:125,render:this.renderHourRate},{title:this.$t("commission_rate"),sortable:!1,key:"commission_rate",minWidth:150,render:this.renderCR},{title:this.$t("commission_method"),sortable:!1,key:"commission_method",minWidth:160,render:this.renderCM},{title:this.$t("address"),sortable:!1,key:"address",minWidth:200,render:this.renderAddress},{title:this.$t("clock_in"),sortable:!1,key:"clock_in",minWidth:200,render:this.renderCI},{title:this.$tc("permission",2),sortable:!0,key:"permission",minWidth:275,render:this.renderPermissions},{title:this.$t("require_password"),sortable:!1,key:"require_password",minWidth:150,render:this.renderRP},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-dropdown-component",{props:{params:r,editFn:t.editRecord,logsFn:t.viewTimeLogs,salaryFn:t.viewSalaries,deleteFn:t.deleteRecord,record:{model:"user",name:"username"},viewCardFn:1==t.$store.state.settings.impersonation?t.viewCard:null}})}}],options:{orderBy:"name",perPage:this.$store.state.settings.rows}}},computed:{url:function(){return"app/users"+(this.all?"?all=yes":"")}},watch:{all:function(){this.refresh++}},beforeRouteEnter:function(t,e,r){r((function(t){t.$store.getters.superAdmin||(t.$Notice.error({title:t.$tc("access_denied"),desc:t.$t("not_allowed_resource")}),t.$router.push(e.path))}))},methods:{viewCard:function(t){this.user=t,this.view=!0},viewSalaries:function(t){this.$router.push("/users/salaries?user_id=".concat(t.id))},viewTimeLogs:function(t){this.$router.push("/reports/time_clock?user_id=".concat(t))},closeUserCard:function(){this.user=null,this.view=!1},renderIcon:function(t,e){return this.renderBoolean(t,e,"super")},renderRoles:function(t,e){var r=this;return t("div",[e.row.roles.map((function(t){return r.capitalize(t.name)})).join(", ")])},renderLocations:function(t,e){return t("div",[e.row.locations?e.row.locations.map((function(t){return t.name})).join(", "):""])},renderLocation:function(t,e){return t("div",[e.row.location?e.row.location.name:""])},renderBirthDate:function(t,e){var r=e.row.meta.find((function(t){return"birth_date"==t.meta_key}));return t("div",[r?this.$options.filters.formatDate(r.value,this.$store.state.settings.dateformat):""])},renderHireDate:function(t,e){var r=e.row.meta.find((function(t){return"hire_date"==t.meta_key}));return t("div",[r?this.$options.filters.formatDate(r.meta_value,this.$store.state.settings.dateformat):""])},renderSalary:function(t,e){var r=e.row.meta.find((function(t){return"salary"==t.meta_key}));return t("div",[r?this.$options.filters.formatNumber(r.meta_value,this.$store.getters.settings.decimals):""])},renderHourRate:function(t,e){var r=e.row.meta.find((function(t){return"hourly_rate"==t.meta_key}));return t("div",[r?this.$options.filters.formatNumber(r.meta_value,this.$store.getters.settings.decimals):""])},renderCR:function(t,e){var r=e.row.meta.find((function(t){return"commission_rate"==t.meta_key}));return t("div",[r?this.$options.filters.formatNumber(r.meta_value,this.$store.getters.settings.decimals)+"%":""])},renderCM:function(t,e){var r=e.row.meta.find((function(t){return"commission_method"==t.meta_key}));return t("div",{style:"text-align:center;"},[r?"sale"==r.meta_value?t("div",{class:"ivu-tag ivu-tag-primary ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[r.meta_value])]):t("div",{class:"ivu-tag ivu-tag-success ivu-tag-checked"},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[r.meta_value])]):""])},renderAddress:function(t,e){var r=e.row.meta.find((function(t){return"address"==t.meta_key}));return t("div",[r?r.meta_value:""])},renderActive:function(t,e){return this.renderBoolean(t,e,"active")},renderPermissions:function(t,e){return t("div",[t("div",{style:"display:flex;"},[this.renderBoolean(t,e,"view_all")," ",t("span",{style:"margin-left:8px;"},[this.$t("view_all")])]),t("div",{style:"display:flex;"},[this.renderBoolean(t,e,"edit_all")," ",t("span",{style:"margin-left:8px;"},[this.$t("edit_all")])]),t("div",{style:"display:flex;"},[this.renderBoolean(t,e,"bulk_actions")," ",t("span",{style:"margin-left:8px;"},[this.$t("bulk_actions")])])])},renderCI:function(t,e){var r=e.row.meta.find((function(t){return"clock_in"==t.meta_key}));return t("div",[r&&"login"==r.meta_value?this.$t("auto_clock_in_with_login"):r&&"register"==r.meta_value?this.$t("auto_clock_in_with_register"):""])},renderRP:function(t,e){var r=e.row.meta.find((function(t){return"require_password"==t.meta_key}));return t("div",{style:"text-align:center;"},[r&&1==r.meta_value?t("i",{class:"ivu-icon ivu-icon-md-checkmark",style:"font-size: 16px; color: #19be6b;"}):t("i",{class:"ivu-icon ivu-icon-md-close",style:"font-size: 16px; color: #ed4014;"})])}}};const i=(0,r(51900).Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t.all?r("span",[t._v(t._s(t.$t("all"))+" "+t._s(t.$tc("user",2)))]):r("span",[t._v(t._s(t.$tc("employee",2)))])]),t._v(" "),r("span",{attrs:{slot:"extra"},slot:"extra"},[r("router-link",{attrs:{to:"/users/add"}},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n        "+t._s(t.$t("add"))+" "+t._s(t.$tc("user"))+"\n      ")],1),t._v(" "),t.all?r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.all=!1}}},[r("Icon",{attrs:{type:"ios-people"}}),t._v("\n        "+t._s(t.$tc("employee",2))+"\n      ")],1):r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.all=!0}}},[r("Icon",{attrs:{type:"ios-people"}}),t._v("\n        "+t._s(t.$t("all"))+" "+t._s(t.$tc("user",2))+"\n      ")],1)],1),t._v(" "),r("div",[r("table-component",{attrs:{url:t.url,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords}})],1)]),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:282,title:t.user?t.user.name:"","footer-hide":!0,"mask-closable":!1},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[r("user-card-component",{attrs:{u:t.user},on:{close:t.closeUserCard}})],1)],1)}),[],!1,null,null,null).exports},4163:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>l});var s=r(48921);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=function(t,e){return t.order=t.order?parseFloat(t.order):null,e.form=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t),e.form};const n={mixins:[(0,s.Z)("role","app/roles",!1,o)],data:function(){return{roles:[],form:{id:"",name:""},rules:{name:[{required:!0,message:this.$t("field_is_required",{field:this.$t("name")}),trigger:"blur"}]}}},methods:{fetch:function(t){var e=this;this.$http.get("app/roles/".concat(t)).then((function(t){return o(t.data,e)})).finally((function(){return e.loading=!1}))}}};const l=(0,r(51900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("role")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/users/roles"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("role",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"role",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:18,lg:12}},[r("FormItem",{attrs:{label:t.$tc("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{attrs:{"element-id":"role-name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:6,lg:12}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("roles")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("roles",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},28361:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={mixins:[(0,r(92704).Z)("role","app/roles","name")],data:function(){var t=this;return{columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:this.$t("created_at"),sortable:!0,key:"created_at",width:175,render:this.renderCreatedAt},{title:this.$t("name"),sortable:!0,key:"name",minWidth:200},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,editFn:t.editRecord,deleteFn:t.deleteRecord,record:{model:"role",name:"name"},trailsFn:function(e){t.$router.push("/users/roles/".concat(e,"/permissions"))}}})}}],options:{orderBy:"name",perPage:this.$store.state.settings.rows}}},methods:{}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("role",2)))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/users/roles/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("add"))+" "+t._s(t.$tc("role"))+"\n  ")],1),t._v(" "),r("div",[r("table-component",{attrs:{url:"app/roles",columns:t.columns,options:t.options,dblClickCB:t.showInfo,bulkDelCB:t.deleteRecords,refresh:t.refresh}})],1)],1)}),[],!1,null,null,null).exports},20704:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>f});var s=r(48921);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var s,a,i=[],o=!0,n=!1;try{for(r=r.call(t);!(o=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(n)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(t,e){return e.role=n({},t),e.form=e.role.all_permissions.reduce((function(t,r){return n(n({},t),{},l({},r,e.role.permissions.includes(r)))}),{}),!0};const d={mixins:[(0,s.Z)("role","app/roles",!1,c)],data:function(){return{form:{},rules:{},role:null,saving:!1,loading:!0}},methods:{fetch:function(t){var e=this;this.$http.get("app/roles/".concat(t,"?permissions=yes")).then((function(t){return c(t.data,e)})).finally((function(){return e.loading=!1}))},setPermissions:function(t,e){var r=this;this.saving=!0;for(var s=[],i=0,o=Object.entries(this.form);i<o.length;i++){var n=a(o[i],2),l=n[0];n[1]&&s.push(l)}this.$http.post("app/roles/".concat(this.role.id,"/permissions"),s).then((function(s){r.$Notice.success({title:r.$tc("permission",2),desc:r.$t("record_updated"),duration:10}),e||r.$router.push({name:t+".list"})})).finally((function(){return r.saving=!1}))}}};var u=r(93379),m=r.n(u),p=r(66047),_={insert:"head",singleton:!1};m()(p.Z,_);p.Z.locals;const f=(0,r(51900).Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n    "+t._s(t.$t("edit_x",{x:t.$tc("permission",2)}))+"\n    "),t.role?r("span",[t._v("("+t._s(t.$tc("role"))+": "+t._s(t.role.name)+")")]):t._e()]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/users/roles"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("role",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"permissions",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:12}},[r("div",{staticClass:"mb16"},[r("List",{staticClass:"permissions",attrs:{border:""}},[r("ListItem",[r("ListItemMeta",{attrs:{title:t.$t("pos"),description:t.$t("permissions_for",{x:t.$t("pos")})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["pos-sales"],callback:function(e){t.$set(t.form,"pos-sales",e)},expression:"form['pos-sales']"}},[t._v(t._s(t.$t("access_x",{x:t.$t("pos")})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-orders"],callback:function(e){t.$set(t.form,"create-orders",e)},expression:"form['create-orders']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("order",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-orders"],callback:function(e){t.$set(t.form,"update-orders",e)},expression:"form['update-orders']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("order",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-orders"],callback:function(e){t.$set(t.form,"delete-orders",e)},expression:"form['delete-orders']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("order",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("sale",2),description:t.$t("permissions_for",{x:t.$tc("sale",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-sales"],callback:function(e){t.$set(t.form,"read-sales",e)},expression:"form['read-sales']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("sale",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-sales"],callback:function(e){t.$set(t.form,"create-sales",e)},expression:"form['create-sales']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("sale",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-sales"],callback:function(e){t.$set(t.form,"update-sales",e)},expression:"form['update-sales']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("sale",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-sales"],callback:function(e){t.$set(t.form,"delete-sales",e)},expression:"form['delete-sales']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("sale",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["email-sales"],callback:function(e){t.$set(t.form,"email-sales",e)},expression:"form['email-sales']"}},[t._v(t._s(t.$t("email_x",{x:t.$tc("sale",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("delivery",2),description:t.$t("permissions_for",{x:t.$tc("delivery",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-deliveries"],callback:function(e){t.$set(t.form,"read-deliveries",e)},expression:"form['read-deliveries']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("delivery",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-deliveries"],callback:function(e){t.$set(t.form,"create-deliveries",e)},expression:"form['create-deliveries']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("delivery",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-deliveries"],callback:function(e){t.$set(t.form,"update-deliveries",e)},expression:"form['update-deliveries']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("delivery",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-deliveries"],callback:function(e){t.$set(t.form,"delete-deliveries",e)},expression:"form['delete-deliveries']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("delivery",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["email-deliveries"],callback:function(e){t.$set(t.form,"email-deliveries",e)},expression:"form['email-deliveries']"}},[t._v(t._s(t.$t("email_x",{x:t.$tc("delivery",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("recurring_sale",2),description:t.$t("permissions_for",{x:t.$tc("recurring_sale",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-recurring-sales"],callback:function(e){t.$set(t.form,"read-recurring-sales",e)},expression:"form['read-recurring-sales']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("recurring_sale",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-recurring-sales"],callback:function(e){t.$set(t.form,"create-recurring-sales",e)},expression:"form['create-recurring-sales']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("recurring_sale",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-recurring-sales"],callback:function(e){t.$set(t.form,"update-recurring-sales",e)},expression:"form['update-recurring-sales']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("recurring_sale",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-recurring-sales"],callback:function(e){t.$set(t.form,"delete-recurring-sales",e)},expression:"form['delete-recurring-sales']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("recurring_sale",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["email-recurring-sales"],callback:function(e){t.$set(t.form,"email-recurring-sales",e)},expression:"form['email-recurring-sales']"}},[t._v(t._s(t.$t("email_x",{x:t.$tc("recurring_sale",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("customer",2),description:t.$t("permissions_for",{x:t.$tc("customer",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-customers"],callback:function(e){t.$set(t.form,"read-customers",e)},expression:"form['read-customers']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("customer",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-customers"],callback:function(e){t.$set(t.form,"create-customers",e)},expression:"form['create-customers']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("customer",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-customers"],callback:function(e){t.$set(t.form,"update-customers",e)},expression:"form['update-customers']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("customer",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-customers"],callback:function(e){t.$set(t.form,"delete-customers",e)},expression:"form['delete-customers']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("customer",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("purchase",2),description:t.$t("permissions_for",{x:t.$tc("purchase",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-purchases"],callback:function(e){t.$set(t.form,"read-purchases",e)},expression:"form['read-purchases']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("purchase",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-purchases"],callback:function(e){t.$set(t.form,"create-purchases",e)},expression:"form['create-purchases']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("purchase",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-purchases"],callback:function(e){t.$set(t.form,"update-purchases",e)},expression:"form['update-purchases']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("purchase",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-purchases"],callback:function(e){t.$set(t.form,"delete-purchases",e)},expression:"form['delete-purchases']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("purchase",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["email-purchases"],callback:function(e){t.$set(t.form,"email-purchases",e)},expression:"form['email-purchases']"}},[t._v(t._s(t.$t("email_x",{x:t.$tc("purchase",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("supplier",2),description:t.$t("permissions_for",{x:t.$tc("supplier",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-suppliers"],callback:function(e){t.$set(t.form,"read-suppliers",e)},expression:"form['read-suppliers']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("supplier",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-suppliers"],callback:function(e){t.$set(t.form,"create-suppliers",e)},expression:"form['create-suppliers']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("supplier",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-suppliers"],callback:function(e){t.$set(t.form,"update-suppliers",e)},expression:"form['update-suppliers']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("supplier",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-suppliers"],callback:function(e){t.$set(t.form,"delete-suppliers",e)},expression:"form['delete-suppliers']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("supplier",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("quotation",2),description:t.$t("permissions_for",{x:t.$tc("quotation",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-quotations"],callback:function(e){t.$set(t.form,"read-quotations",e)},expression:"form['read-quotations']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("quotation",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-quotations"],callback:function(e){t.$set(t.form,"create-quotations",e)},expression:"form['create-quotations']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("quotation",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-quotations"],callback:function(e){t.$set(t.form,"update-quotations",e)},expression:"form['update-quotations']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("quotation",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-quotations"],callback:function(e){t.$set(t.form,"delete-quotations",e)},expression:"form['delete-quotations']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("quotation",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("return_order",2),description:t.$t("permissions_for",{x:t.$tc("return_order",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-return-orders"],callback:function(e){t.$set(t.form,"read-return-orders",e)},expression:"form['read-return-orders']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("return_order",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-return-orders"],callback:function(e){t.$set(t.form,"create-return-orders",e)},expression:"form['create-return-orders']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("return_order",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-return-orders"],callback:function(e){t.$set(t.form,"update-return-orders",e)},expression:"form['update-return-orders']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("return_order",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-return-orders"],callback:function(e){t.$set(t.form,"delete-return-orders",e)},expression:"form['delete-return-orders']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("return_order",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("payment",2),description:t.$t("permissions_for",{x:t.$tc("payment",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-payments"],callback:function(e){t.$set(t.form,"read-payments",e)},expression:"form['read-payments']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("payment",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-payments"],callback:function(e){t.$set(t.form,"create-payments",e)},expression:"form['create-payments']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("payment",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-payments"],callback:function(e){t.$set(t.form,"update-payments",e)},expression:"form['update-payments']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("payment",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-payments"],callback:function(e){t.$set(t.form,"delete-payments",e)},expression:"form['delete-payments']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("payment",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["email-payments"],callback:function(e){t.$set(t.form,"email-payments",e)},expression:"form['email-payments']"}},[t._v(t._s(t.$t("email_x",{x:t.$tc("payment",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("income",2),description:t.$t("permissions_for",{x:t.$tc("income",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-incomes"],callback:function(e){t.$set(t.form,"read-incomes",e)},expression:"form['read-incomes']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("income",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-incomes"],callback:function(e){t.$set(t.form,"create-incomes",e)},expression:"form['create-incomes']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("income",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-incomes"],callback:function(e){t.$set(t.form,"update-incomes",e)},expression:"form['update-incomes']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("income",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-incomes"],callback:function(e){t.$set(t.form,"delete-incomes",e)},expression:"form['delete-incomes']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("income",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("expense",2),description:t.$t("permissions_for",{x:t.$tc("expense",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-expenses"],callback:function(e){t.$set(t.form,"read-expenses",e)},expression:"form['read-expenses']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("expense",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-expenses"],callback:function(e){t.$set(t.form,"create-expenses",e)},expression:"form['create-expenses']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("expense",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-expenses"],callback:function(e){t.$set(t.form,"update-expenses",e)},expression:"form['update-expenses']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("expense",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-expenses"],callback:function(e){t.$set(t.form,"delete-expenses",e)},expression:"form['delete-expenses']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("expense",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("item",2),description:t.$t("permissions_for",{x:t.$tc("item",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-items"],callback:function(e){t.$set(t.form,"read-items",e)},expression:"form['read-items']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("item",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-items"],callback:function(e){t.$set(t.form,"create-items",e)},expression:"form['create-items']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("item",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-items"],callback:function(e){t.$set(t.form,"update-items",e)},expression:"form['update-items']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("item",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-items"],callback:function(e){t.$set(t.form,"delete-items",e)},expression:"form['delete-items']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("item",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["label-items"],callback:function(e){t.$set(t.form,"label-items",e)},expression:"form['label-items']"}},[t._v(t._s(t.$t("view_x",{x:t.$t("item_label")})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["trail-items"],callback:function(e){t.$set(t.form,"trail-items",e)},expression:"form['trail-items']"}},[t._v(t._s(t.$t("trail_x",{x:t.$tc("item",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("modifier",2),description:t.$t("permissions_for",{x:t.$tc("modifier",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-modifiers"],callback:function(e){t.$set(t.form,"read-modifiers",e)},expression:"form['read-modifiers']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("modifier",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-modifiers"],callback:function(e){t.$set(t.form,"create-modifiers",e)},expression:"form['create-modifiers']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("modifier",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-modifiers"],callback:function(e){t.$set(t.form,"update-modifiers",e)},expression:"form['update-modifiers']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("modifier",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-modifiers"],callback:function(e){t.$set(t.form,"delete-modifiers",e)},expression:"form['delete-modifiers']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("modifier",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("gift_card",2),description:t.$t("permissions_for",{x:t.$tc("gift_card",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-gift-cards"],callback:function(e){t.$set(t.form,"read-gift-cards",e)},expression:"form['read-gift-cards']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("gift_card",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-gift-cards"],callback:function(e){t.$set(t.form,"create-gift-cards",e)},expression:"form['create-gift-cards']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("gift_card",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-gift-cards"],callback:function(e){t.$set(t.form,"update-gift-cards",e)},expression:"form['update-gift-cards']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("gift_card",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-gift-cards"],callback:function(e){t.$set(t.form,"delete-gift-cards",e)},expression:"form['delete-gift-cards']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("gift_card",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["log-gift-cards"],callback:function(e){t.$set(t.form,"log-gift-cards",e)},expression:"form['log-gift-cards']"}},[t._v(t._s(t.$t("log_x",{x:t.$tc("gift_card",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("stock_adjustment",2),description:t.$t("permissions_for",{x:t.$tc("stock_adjustment",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-stock-adjustments"],callback:function(e){t.$set(t.form,"read-stock-adjustments",e)},expression:"form['read-stock-adjustments']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("stock_adjustment",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-stock-adjustments"],callback:function(e){t.$set(t.form,"create-stock-adjustments",e)},expression:"form['create-stock-adjustments']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("stock_adjustment",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-stock-adjustments"],callback:function(e){t.$set(t.form,"update-stock-adjustments",e)},expression:"form['update-stock-adjustments']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("stock_adjustment",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-stock-adjustments"],callback:function(e){t.$set(t.form,"delete-stock-adjustments",e)},expression:"form['delete-stock-adjustments']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("stock_adjustment",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("asset_transfer",2),description:t.$t("permissions_for",{x:t.$tc("asset_transfer",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-asset-transfers"],callback:function(e){t.$set(t.form,"read-asset-transfers",e)},expression:"form['read-asset-transfers']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("asset_transfer",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-asset-transfers"],callback:function(e){t.$set(t.form,"create-asset-transfers",e)},expression:"form['create-asset-transfers']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("asset_transfer",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-asset-transfers"],callback:function(e){t.$set(t.form,"update-asset-transfers",e)},expression:"form['update-asset-transfers']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("asset_transfer",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-asset-transfers"],callback:function(e){t.$set(t.form,"delete-asset-transfers",e)},expression:"form['delete-asset-transfers']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("asset_transfer",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("stock_transfer",2),description:t.$t("permissions_for",{x:t.$tc("stock_transfer",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-stock-transfers"],callback:function(e){t.$set(t.form,"read-stock-transfers",e)},expression:"form['read-stock-transfers']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("stock_transfer",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-stock-transfers"],callback:function(e){t.$set(t.form,"create-stock-transfers",e)},expression:"form['create-stock-transfers']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("stock_transfer",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-stock-transfers"],callback:function(e){t.$set(t.form,"update-stock-transfers",e)},expression:"form['update-stock-transfers']"}},[t._v(t._s(t.$t("edit_x",{x:t.$tc("stock_transfer",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-stock-transfers"],callback:function(e){t.$set(t.form,"delete-stock-transfers",e)},expression:"form['delete-stock-transfers']"}},[t._v(t._s(t.$t("delete_x",{x:t.$tc("stock_transfer",2)})))])],1)],2)],1)],1)]),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:12}},[r("div",{staticClass:"mb16"},[r("List",{staticClass:"permissions",attrs:{border:""}},[r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("account",2),description:t.$t("permissions_for",{x:t.$tc("account",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-accounts"],callback:function(e){t.$set(t.form,"read-accounts",e)},expression:"form['read-accounts']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("account",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-accounts"],callback:function(e){t.$set(t.form,"create-accounts",e)},expression:"form['create-accounts']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("account",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-accounts"],callback:function(e){t.$set(t.form,"update-accounts",e)},expression:"form['update-accounts']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("account",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-accounts"],callback:function(e){t.$set(t.form,"delete-accounts",e)},expression:"form['delete-accounts']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("account",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("location",2),description:t.$t("permissions_for",{x:t.$tc("location",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-locations"],callback:function(e){t.$set(t.form,"read-locations",e)},expression:"form['read-locations']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("location",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-locations"],callback:function(e){t.$set(t.form,"create-locations",e)},expression:"form['create-locations']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("location",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-locations"],callback:function(e){t.$set(t.form,"update-locations",e)},expression:"form['update-locations']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("location",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-locations"],callback:function(e){t.$set(t.form,"delete-locations",e)},expression:"form['delete-locations']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("location",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("user",2),description:t.$t("permissions_for",{x:t.$tc("user",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-users"],callback:function(e){t.$set(t.form,"read-users",e)},expression:"form['read-users']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("user",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-users"],callback:function(e){t.$set(t.form,"create-users",e)},expression:"form['create-users']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("user",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-users"],callback:function(e){t.$set(t.form,"update-users",e)},expression:"form['update-users']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("user",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-users"],callback:function(e){t.$set(t.form,"delete-users",e)},expression:"form['delete-users']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("user",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("role",2),description:t.$t("permissions_for",{x:t.$tc("user_role",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-roles"],callback:function(e){t.$set(t.form,"read-roles",e)},expression:"form['read-roles']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("role",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-roles"],callback:function(e){t.$set(t.form,"create-roles",e)},expression:"form['create-roles']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("role",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-roles"],callback:function(e){t.$set(t.form,"update-roles",e)},expression:"form['update-roles']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("role",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-roles"],callback:function(e){t.$set(t.form,"delete-roles",e)},expression:"form['delete-roles']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("role",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("salary",2),description:t.$t("permissions_for",{x:t.$tc("salary",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-salaries"],callback:function(e){t.$set(t.form,"read-salaries",e)},expression:"form['read-salaries']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("salary",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-salaries"],callback:function(e){t.$set(t.form,"create-salaries",e)},expression:"form['create-salaries']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("salary",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-salaries"],callback:function(e){t.$set(t.form,"update-salaries",e)},expression:"form['update-salaries']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("salary",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-salaries"],callback:function(e){t.$set(t.form,"delete-salaries",e)},expression:"form['delete-salaries']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("salary",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("promo",2),description:t.$t("permissions_for",{x:t.$tc("promo",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-promos"],callback:function(e){t.$set(t.form,"read-promos",e)},expression:"form['read-promos']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("promo",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-promos"],callback:function(e){t.$set(t.form,"create-promos",e)},expression:"form['create-promos']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("promo",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-promos"],callback:function(e){t.$set(t.form,"update-promos",e)},expression:"form['update-promos']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("promo",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-promos"],callback:function(e){t.$set(t.form,"delete-promos",e)},expression:"form['delete-promos']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("promo",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("brand",2),description:t.$t("permissions_for",{x:t.$tc("brand",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-brands"],callback:function(e){t.$set(t.form,"read-brands",e)},expression:"form['read-brands']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("brand",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-brands"],callback:function(e){t.$set(t.form,"create-brands",e)},expression:"form['create-brands']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("brand",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-brands"],callback:function(e){t.$set(t.form,"update-brands",e)},expression:"form['update-brands']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("brand",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-brands"],callback:function(e){t.$set(t.form,"delete-brands",e)},expression:"form['delete-brands']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("brand",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("category",2),description:t.$t("permissions_for",{x:t.$tc("category",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-categories"],callback:function(e){t.$set(t.form,"read-categories",e)},expression:"form['read-categories']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("category",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-categories"],callback:function(e){t.$set(t.form,"create-categories",e)},expression:"form['create-categories']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("category",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-categories"],callback:function(e){t.$set(t.form,"update-categories",e)},expression:"form['update-categories']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("category",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-categories"],callback:function(e){t.$set(t.form,"delete-categories",e)},expression:"form['delete-categories']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("category",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("tax",2),description:t.$t("permissions_for",{x:t.$tc("tax",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-taxes"],callback:function(e){t.$set(t.form,"read-taxes",e)},expression:"form['read-taxes']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("tax",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-taxes"],callback:function(e){t.$set(t.form,"create-taxes",e)},expression:"form['create-taxes']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("tax",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-taxes"],callback:function(e){t.$set(t.form,"update-taxes",e)},expression:"form['update-taxes']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("tax",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-taxes"],callback:function(e){t.$set(t.form,"delete-taxes",e)},expression:"form['delete-taxes']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("tax",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("field",2),description:t.$t("permissions_for",{x:t.$tc("field",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-fields"],callback:function(e){t.$set(t.form,"read-fields",e)},expression:"form['read-fields']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("field",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-fields"],callback:function(e){t.$set(t.form,"create-fields",e)},expression:"form['create-fields']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("field",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-fields"],callback:function(e){t.$set(t.form,"update-fields",e)},expression:"form['update-fields']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("field",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-fields"],callback:function(e){t.$set(t.form,"delete-fields",e)},expression:"form['delete-fields']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("field",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("customer_group",2),description:t.$t("permissions_for",{x:t.$tc("customer_group",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-customer-groups"],callback:function(e){t.$set(t.form,"read-customer-groups",e)},expression:"form['read-customer-groups']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("customer_group",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-customer-groups"],callback:function(e){t.$set(t.form,"create-customer-groups",e)},expression:"form['create-customer-groups']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("customer_group",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-customer-groups"],callback:function(e){t.$set(t.form,"update-customer-groups",e)},expression:"form['update-customer-groups']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("customer_group",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-customer-groups"],callback:function(e){t.$set(t.form,"delete-customer-groups",e)},expression:"form['delete-customer-groups']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("customer_group",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("hall",2),description:t.$t("permissions_for",{x:t.$tc("hall",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-halls"],callback:function(e){t.$set(t.form,"read-halls",e)},expression:"form['read-halls']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("hall",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-halls"],callback:function(e){t.$set(t.form,"create-halls",e)},expression:"form['create-halls']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("hall",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-halls"],callback:function(e){t.$set(t.form,"update-halls",e)},expression:"form['update-halls']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("hall",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-halls"],callback:function(e){t.$set(t.form,"delete-halls",e)},expression:"form['delete-halls']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("hall",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("table",2),description:t.$t("permissions_for",{x:t.$tc("table",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-tables"],callback:function(e){t.$set(t.form,"read-tables",e)},expression:"form['read-tables']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("table",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-tables"],callback:function(e){t.$set(t.form,"create-tables",e)},expression:"form['create-tables']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("table",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-tables"],callback:function(e){t.$set(t.form,"update-tables",e)},expression:"form['update-tables']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("table",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-tables"],callback:function(e){t.$set(t.form,"delete-tables",e)},expression:"form['delete-tables']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("table",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("unit",2),description:t.$t("permissions_for",{x:t.$tc("unit",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-units"],callback:function(e){t.$set(t.form,"read-units",e)},expression:"form['read-units']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("unit",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-units"],callback:function(e){t.$set(t.form,"create-units",e)},expression:"form['create-units']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("unit",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-units"],callback:function(e){t.$set(t.form,"update-units",e)},expression:"form['update-units']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("unit",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-units"],callback:function(e){t.$set(t.form,"delete-units",e)},expression:"form['delete-units']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("unit",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("report",2),description:t.$t("permissions_for",{x:t.$tc("report",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-report"],callback:function(e){t.$set(t.form,"read-report",e)},expression:"form['read-report']"}},[t._v(t._s(t.$tc("report",2)))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["registers-report"],callback:function(e){t.$set(t.form,"registers-report",e)},expression:"form['registers-report']"}},[t._v(t._s(t.$tc("register",2)))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["expiry-alerts-report"],callback:function(e){t.$set(t.form,"expiry-alerts-report",e)},expression:"form['expiry-alerts-report']"}},[t._v(t._s(t.$t("expiry_alerts")))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["quantity-alerts-report"],callback:function(e){t.$set(t.form,"quantity-alerts-report",e)},expression:"form['quantity-alerts-report']"}},[t._v(t._s(t.$t("quantity_alerts")))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["items-report"],callback:function(e){t.$set(t.form,"items-report",e)},expression:"form['items-report']"}},[t._v(t._s(t.$t("x_report",{x:t.$tc("item",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["sales-report"],callback:function(e){t.$set(t.form,"sales-report",e)},expression:"form['sales-report']"}},[t._v(t._s(t.$t("x_report",{x:t.$tc("sale",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["purchases-report"],callback:function(e){t.$set(t.form,"purchases-report",e)},expression:"form['purchases-report']"}},[t._v(t._s(t.$t("x_report",{x:t.$tc("purchase",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["payments-report"],callback:function(e){t.$set(t.form,"payments-report",e)},expression:"form['payments-report']"}},[t._v(t._s(t.$t("x_report",{x:t.$tc("payment",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["expenses-report"],callback:function(e){t.$set(t.form,"expenses-report",e)},expression:"form['expenses-report']"}},[t._v(t._s(t.$t("x_report",{x:t.$tc("expense",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["incomes-report"],callback:function(e){t.$set(t.form,"incomes-report",e)},expression:"form['incomes-report']"}},[t._v(t._s(t.$t("x_report",{x:t.$tc("income",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["taxes-report"],callback:function(e){t.$set(t.form,"taxes-report",e)},expression:"form['taxes-report']"}},[t._v(t._s(t.$t("x_report",{x:t.$tc("tax",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["stock-transfers-report"],callback:function(e){t.$set(t.form,"stock-transfers-report",e)},expression:"form['stock-transfers-report']"}},[t._v(t._s(t.$tc("stock_transfer",2)))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["stock-adjustments-report"],callback:function(e){t.$set(t.form,"stock-adjustments-report",e)},expression:"form['stock-adjustments-report']"}},[t._v(t._s(t.$tc("stock_adjustment",2)))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["time-clock-report"],callback:function(e){t.$set(t.form,"time-clock-report",e)},expression:"form['time-clock-report']"}},[t._v(t._s(t.$tc("time_clock",2)))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["activity-logs-report"],callback:function(e){t.$set(t.form,"activity-logs-report",e)},expression:"form['activity-logs-report']"}},[t._v(t._s(t.$t("activity_logs")))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("event",2),description:t.$t("permissions_for",{x:t.$tc("event",2)})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form.calendar,callback:function(e){t.$set(t.form,"calendar",e)},expression:"form['calendar']"}},[t._v(t._s(t.$t("calendar")))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["read-events"],callback:function(e){t.$set(t.form,"read-events",e)},expression:"form['read-events']"}},[t._v(t._s(t.$t("view_x",{x:t.$tc("event",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["create-events"],callback:function(e){t.$set(t.form,"create-events",e)},expression:"form['create-events']"}},[t._v(t._s(t.$t("add_x",{x:t.$tc("event",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["update-events"],callback:function(e){t.$set(t.form,"update-events",e)},expression:"form['update-events']"}},[t._v(t._s(t.$t("edit_x_all",{x:t.$tc("event",2)})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-events"],callback:function(e){t.$set(t.form,"delete-events",e)},expression:"form['delete-events']"}},[t._v(t._s(t.$t("delete_x_all",{x:t.$tc("event",2)})))])],1)],2),t._v(" "),r("ListItem",[r("ListItemMeta",{attrs:{title:t.$tc("misc",2),description:t.$t("permissions_for",{x:t.$t("misc")})}}),t._v(" "),r("template",{slot:"action"},[r("Checkbox",{staticClass:"v-check",model:{value:t.form["alerts-report"],callback:function(e){t.$set(t.form,"alerts-report",e)},expression:"form['alerts-report']"}},[t._v(t._s(t.$tc("alert",2)))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["delete-media"],callback:function(e){t.$set(t.form,"delete-media",e)},expression:"form['delete-media']"}},[t._v(t._s(t.$t("delete_x",{x:t.$t("media")})))]),t._v(" "),r("Checkbox",{staticClass:"v-check",model:{value:t.form["item-label-design"],callback:function(e){t.$set(t.form,"item-label-design",e)},expression:"form['item-label-design']"}},[t._v(t._s(t.$t("item_label_design")))])],1)],2)],1)],1)])],1),t._v(" "),r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.setPermissions("roles")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.setPermissions("roles",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])])],1)],1)],1)}),[],!1,null,null,null).exports},95367:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>p});var s=r(48921),a=r(23279),i=r.n(a),o=r(44605);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var u=function(t,e){return t.amount=parseFloat(t.amount),t.advance=1==t.advance?1:0,e.attachments=t.attachments&&t.attachments.length?c(t.attachments):[],e.form=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t),e.form};const m={mixins:[o.Z,(0,s.Z)("salary","app/salaries",!0,u)],data:function(){return{users:[],accounts:[],salaries:[],account_id:null,searching:!1,form:{id:"",type:"",amount:null,advance:0,user_id:"",account_id:"",status:"",points:null},rules:{type:[{required:!0,message:this.$t("field_is_required",{field:this.$t("type")}),trigger:"change"}],status:[{required:!0,message:this.$t("field_is_required",{field:this.$t("status")}),trigger:"change"}],user_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("user")}),trigger:"change"}],account_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("account")}),trigger:"change"}],points:[{type:"number",trigger:"change",required:!0,message:this.$t("field_is_required",{field:this.$t("points")})}],amount:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("amount")}),trigger:"change"}],date:[{type:"date",required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("date")})}]}}},methods:{create:function(){var t=this;this.$http.get("app/accounts/search").then((function(e){return t.accounts=e.data})).finally((function(){return t.loading=!1}))},fetch:function(t){var e=this;this.$http.get("app/accounts/search").then((function(r){e.accounts=r.data,e.$http.get("app/salaries/".concat(t)).then((function(t){return u(t.data,e)}))})).finally((function(){return e.loading=!1}))},searchUsers:function(t){""===t||this.users.find((function(e){return e.label==t}))||this.getUsers(t,this)},getUsers:i()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/users/search?q="+t).then((function(t){return e.users=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250)}};const p=(0,r(51900).Z)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?t.$t("edit"):t.$t("add"))+" "+t._s(t.$tc("salary")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/users/salaries"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("list"))+" "+t._s(t.$tc("salary",2))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"salary",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.form.reference,callback:function(e){t.$set(t.form,"reference",e)},expression:"form.reference"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("user"),prop:"user_id"}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,"remote-method":t.searchUsers,placeholder:t.$t("type_to_search")},model:{value:t.form.user_id,callback:function(e){t.$set(t.form,"user_id",e)},expression:"form.user_id"}},t._l(t.users,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("account"),prop:"account_id"}},[r("Select",{attrs:{remote:"",clearable:"",filterable:"",loading:t.searching,placeholder:""},model:{value:t.form.account_id,callback:function(e){t.$set(t.form,"account_id",e)},expression:"form.account_id"}},t._l(t.accounts,(function(e,s){return r("Option",{key:s+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("amount"),prop:"amount",error:t._f("a2s")(t.errors.form.amount)}},[r("InputNumber",{model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("type"),prop:"type",error:t._f("a2s")(t.errors.form.type)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[r("Option",{attrs:{value:"salary"}},[t._v(t._s(t.$tc("salary")))]),t._v(" "),r("Option",{attrs:{value:"commission"}},[t._v(t._s(t.$tc("commission")))])],1)],1),t._v(" "),"commission"==t.form.type?r("FormItem",{attrs:{label:t.$t("points"),prop:"points",error:t._f("a2s")(t.errors.form.points)}},[r("InputNumber",{model:{value:t.form.points,callback:function(e){t.$set(t.form,"points",e)},expression:"form.points"}})],1):t._e(),t._v(" "),r("FormItem",{attrs:{label:t.$t("status"),prop:"status",error:t._f("a2s")(t.errors.form.status)}},[r("Select",{attrs:{placeholder:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[r("Option",{attrs:{value:"due"}},[t._v(t._s(t.$t("due")))]),t._v(" "),r("Option",{attrs:{value:"paid"}},[t._v(t._s(t.$t("paid")))])],1)],1)],1)],1),t._v(" "),r("attachments-component",{attrs:{error:t._f("a2s")(t.errors.form.attachments)},on:{selected:t.handleUpload,clear:t.clearAttachments}},[r("list-attachments-component",{attrs:{attachments:t.attachments},on:{remove:t.deleteAttachment}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:8}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"advance",error:t._f("a2s")(t.errors.form.advance)}},[r("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.advance,callback:function(e){t.$set(t.form,"advance",e)},expression:"form.advance"}},[r("span",[t._v(t._s(t.$t("advance_salary_text")))])])],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("salaries")}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{ghost:"",type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit("salaries",!0)}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("save_n_stay")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},58789:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d});var s=r(92704),a=r(7174),i=r.n(a),o=r(37148);const n={props:{salary:{type:Object,required:!0}},components:{VueBarcode:i(),ListAttachmentsComponent:o.Z},data:function(){return{loading:!1}},methods:{print:function(){window.print()},deleteAttachment:function(t){this.$emit("remove",t)}}};var l=r(51900);const c={components:{SalaryViewComponent:(0,l.Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{}},[t.salary.id?r("div",{staticClass:"order"},[r("div",{staticClass:"order-header"},[r("div",{staticClass:"details"},[r("img",{staticClass:"logo",attrs:{src:t.salary.user.location&&t.salary.user.location.logo?t.salary.user.location.logo:t.$store.state.settings.default_logo}}),t._v(" "),r("div",{staticClass:"header-text"},[r("ul",[r("li",[r("strong",[t._v(t._s(t.$store.getters.settings.name)+" ("+t._s(t.$store.getters.settings.short_name)+")")])]),t._v(" "),r("li",[r("strong",[t._v(t._s(t.$store.getters.settings.company))])]),t._v(" "),r("li",[t._v(t._s(t.$store.getters.settings.email)+" "),r("span",{staticClass:"text-muted"},[t._v("|")]),t._v(" "+t._s(t.$store.getters.settings.phone))]),t._v(" "),r("li",[t._v(t._s(t.$store.getters.settings.address))])])])]),t._v(" "),r("vue-barcode",{staticClass:"barcode",attrs:{width:1,margin:0,height:50,fontSize:12,"margin-top":0,format:"code39","margin-bottom":2,value:t.salary.reference}},[t._v("\n        "+t._s(t.$t("barcode_error"))+"\n      ")])],1),t._v(" "),r("Row",{staticClass:"border-t",attrs:{gutter:16}},[r("Col",{staticClass:"border-y py-2",attrs:{xs:24}},[r("h3",{staticClass:"text-center",staticStyle:{"text-transform":"uppercase"}},[t._v("\n          "+t._s(t.$tc("salary"))+"\n        ")])])],1),t._v(" "),r("Row",{staticClass:"border-y py-2",attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[t._v("\n        "+t._s(t.$t("date"))+": "),r("strong",[t._v(t._s(t._f("date")(t.salary.date)))]),t._v(" "),r("br"),t._v("\n        "+t._s(t.$t("reference"))+": "),r("strong",[t._v(t._s(t.salary.reference))]),t._v(" "),r("br"),t._v("\n        "+t._s(t.$t("created_at"))+": "),r("strong",[t._v(t._s(t._f("datetime")(t.salary.created_at)))])]),t._v(" "),r("Col",{attrs:{xs:24,sm:12}},[t._v("\n        "+t._s(t.$t("name"))+": "),r("strong",[t._v(t._s(t.salary.user.name))]),t._v(" "),r("br"),t._v("\n        "+t._s(t.$t("employee_number"))+": "),r("strong",[t._v(t._s(t.salary.user.employee_number))]),t._v(" "),r("br"),t._v("\n        "+t._s(t.$t("phone"))+": "),r("strong",[t._v(t._s(t.salary.user.phone))])])],1),t._v(" "),r("Row",{staticClass:"mt16",attrs:{gutter:16}},[r("Col",{attrs:{xs:24,sm:12}},[r("p",[t._v(t._s(t.$tc("store"))+":")]),t._v(" "),t.salary.user.location?r("div",[r("strong",[t._v(t._s(t.salary.user.location.name))]),r("br"),t._v("\n          "+t._s(t.salary.user.location.address+", "+t.salary.user.location.state_name+", "+t.salary.user.location.country_name)),r("br"),t._v("\n          "+t._s(t.salary.user.location.phone)),r("br"),t._v("\n          "+t._s(t.salary.user.location.email)),r("br")]):t._e()])],1),t._v(" "),r("div",{staticClass:"table-wrapper"},[r("table",{staticClass:"table"},[r("tbody",[r("tr",[r("td",[t._v(t._s(t.$tc("account")))]),t._v(" "),r("td",[t._v(t._s(t.salary.account.name))])]),t._v(" "),r("tr",[r("td",{staticClass:"bold"},[t._v(t._s(t.$t("amount")))]),t._v(" "),r("td",{staticClass:"bold"},[t._v(t._s(t.formatNumber(t.salary.amount)))])])])])]),t._v(" "),t.checkExtraAttributes(t.salary.extra_attributes)?r("Card",{staticClass:"mt16",attrs:{"dis-hover":""}},[r("span",{domProps:{innerHTML:t._s(t.renderExtraAttributes(t.salary.extra_attributes,t.salary.attributes))}})]):t._e(),t._v(" "),r("list-attachments-component",{staticClass:"mt16",attrs:{attachments:t.salary.attachments},on:{remove:t.deleteAttachment}}),t._v(" "),t.salary.details?r("Card",{staticClass:"mt16",attrs:{"dis-hover":""}},[t._v(t._s(t.salary.details))]):t._e(),t._v(" "),r("p",{staticClass:"cgd"},[t._v(t._s(t.$t("order_cgd")))])],1):t._e(),t._v(" "),r("div",{staticClass:"np text-center"},[r("Button",{staticClass:"mt16 mx8",attrs:{type:"primary",loading:t.loading,disabled:t.loading,icon:"md-print"},on:{click:function(e){return t.print()}}},[t._v("\n      "+t._s(t.$t("print"))+"\n    ")])],1)])}),[],!1,null,null,null).exports},mixins:[(0,s.Z)("salary","app/salaries","name")],data:function(){var t=this;return{salary:{},view:!1,message:null,loading:!1,url:"app/salaries",columns:[{title:this.$t("date"),sortable:!0,sortType:"desc",key:"date",width:100,render:this.renderDate},{title:this.$t("created_at"),sortable:!0,key:"created_at",width:175,render:this.renderCreatedAt},{title:this.$t("amount"),sortable:!0,key:"amount",minWidth:100,render:this.renderAmount},{title:this.$t("advance"),sortable:!0,key:"advance",width:100,render:this.renderAdvance},{title:this.$t("type"),sortable:!0,key:"type",width:100,render:this.renderType},{title:this.$t("status"),sortable:!0,key:"status",width:100,render:this.renderStatus},{title:this.$tc("user"),sortable:!0,key:"user",minWidth:175,render:this.renderUser},{title:this.$tc("account"),sortable:!0,key:"account",minWidth:175,render:this.renderAccount},{title:this.$t("details"),sortable:!1,key:"details",ellipsis:!0,width:350},{width:100,fixed:"right",key:"actions",align:"center",title:this.$t("actions"),render:function(e,r){return e("actions-component",{props:{params:r,viewFn:t.viewModal,editFn:t.editRecord,deleteFn:t.deleteRecord,record:{model:"salary",name:"reference"}}})}}],options:{orderBy:"date desc",perPage:this.$store.state.settings.rows}}},created:function(){this.url="app/salaries"+(this.$route.query.user_id?"?user_id="+this.$route.query.user_id:"")},methods:{viewModal:function(t){var e=this;this.view=!0,t.id!=this.salary.id&&(this.loading=!0,this.$http.get("app/salaries/".concat(t.id)).then((function(t){return e.salary=t.data})).finally((function(){return e.loading=!1})))},renderAmount:function(t,e){return this.renderNumber(t,e,"amount")},renderAdvance:function(t,e){return this.renderBoolean(t,e,"advance")},renderType:function(t,e){return t("div",{class:"text-center"},[e.row.type?t("div",{class:"ivu-tag ivu-tag-".concat("salary"==e.row.type?"primary":"purple"," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[this.$tc(e.row.type)])]):""])},renderStatus:function(t,e){return t("div",{class:"text-center"},[e.row.status?t("div",{class:"ivu-tag ivu-tag-".concat("paid"==e.row.status?"success":"warning"," ivu-tag-checked")},[t("span",{class:"ivu-tag-text ivu-tag-color-white"},[this.$t(e.row.status)])]):""])},renderAccount:function(t,e){return t("div",[e.row.account?e.row.account.name:""])},renderUser:function(t,e){return t("div",[e.row.user?e.row.user.name:""])},generateSalaries:function(){var t=this;this.loading=!0,this.$http.post("/app/salaries/generate").then((function(e){e.data.success&&(t.message=e.data.message,t.$Notice.success({title:t.$t("success"),desc:e.data.message||t.$t("record_updated"),duration:10}))})).catch((function(e){t.$Notice.error({title:t.$t("failed"),desc:e.message,duration:10})})).finally((function(){return t.loading=!1}))}}};const d=(0,l.Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("salary",2)))]),t._v(" "),r("span",{attrs:{slot:"extra"},slot:"extra"},[r("router-link",{attrs:{slot:"extra",to:"/users/salaries/add"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n        "+t._s(t.$t("add"))+" "+t._s(t.$tc("salary"))+"\n      ")],1),t._v(" "),r("Button",{attrs:{type:"primary",loading:t.loading,disabled:t.loading,size:"small"},on:{click:function(e){return t.generateSalaries()}}},[r("Icon",{attrs:{type:"ios-sync"}}),t._v("\n        "+t._s(t.$t("generate_x",{x:t.$tc("salary",2)}))+"\n      ")],1)],1),t._v(" "),r("div",[t.message?r("Alert",{domProps:{innerHTML:t._s(t.message.replaceAll("\n","<br />"))}}):t._e(),t._v(" "),r("table-component",{attrs:{url:t.url,columns:t.columns,options:t.options,refresh:t.refresh,dblClickCB:t.viewModal,bulkDelCB:t.deleteRecords}})],1)]),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"750","footer-hide":!0,"mask-closable":!1,title:t.$tc("salary")+" ("+t.salary.reference+")"},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[t.loading?r("div",{staticClass:"py16"},[r("Loading")],1):t._e(),t._v(" "),r("salary-view-component",{attrs:{salary:t.salary},on:{remove:function(e){return t.deleteAttachment(e,t.salary)}}})],1)],1)}),[],!1,null,null,null).exports},57683:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>_});function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var s,a,i=[],o=!0,n=!1;try{for(r=r.call(t);!(o=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(n)throw a}}return i}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}const c={data:function(){var t=this;return{value:"",deleting:0,month:null,event:!1,saving:!1,loading:!1,interval:null,delete_id:null,newEventModal:!1,errors:{message:"",form:{}},translatedMonths:[1,2,3,4,5,6,7,8,9,10,11,12].map((function(e){return t.$t("i.datepicker.month"+parseInt(e))})),events:{},dateEvent:[],selected_date:null,form:{title:"",details:"",start_date:new Date,end_date:null,start_time:new Date,end_time:null,color:"#FFFFFF"},rules:{title:[{required:!0,message:this.$t("field_is_required",{field:this.$t("title")}),trigger:"blur"}],start_date:[{type:"date",required:!0,trigger:"change",message:this.$t("field_is_required",{field:this.$t("start_date")})}]}}},computed:{formatedDate:function(){return this.$options.filters.date(this.selected_date)}},mounted:function(){var t=this;this.setEvents(null,!0);for(var e=document.querySelectorAll(".ivu-picker-panel-icon-btn"),r=0;r<e.length;r++)e[r].addEventListener("click",this.handleClick);document.querySelectorAll(".ivu-date-picker-header-label")[0].addEventListener("click",(function(){for(var e=document.querySelector(".ivu-date-picker-cells-month").childNodes,r=0;r<e.length;r++)e[r].addEventListener("click",t.handleClick)})),document.querySelectorAll(".ivu-date-picker-header-label")[1].addEventListener("click",(function(){for(var e=document.querySelector(".ivu-date-picker-cells-year").childNodes,r=0;r<e.length;r++)e[r].addEventListener("click",(function(){for(var e=document.querySelector(".ivu-date-picker-cells-month").childNodes,r=0;r<e.length;r++)e[r].addEventListener("click",t.handleClick)}))}))},methods:{handleClick:function(t){if(t){for(var e=null,r=document.querySelectorAll(".ivu-date-picker-header-label")[0].outerText,s=document.querySelectorAll(".ivu-date-picker-header-label")[1].outerText,a=1;a<=12;a++)this.$t("i.datepicker.month"+parseInt(a))==r&&(e=a>9?a:"0"+a);var i=s+"-"+e;this.setEvents(i)}},setEvents:function(t,e){var r=this;(t!=this.month||e)&&(t||(t=this.$moment().format("YYYY-MM")),this.$http.get("app/events?month="+t).then((function(t){return r.events=t.data})).then((function(){r.loading=!1;for(var t=[],e=0,s=Object.entries(r.events);e<s.length;e++){var a=o(s[e],2),n=a[0];a[1];t.push(parseInt(n.substring(n.length-2,n.length))-1)}i(document.querySelectorAll(".ivu-date-picker-cells-cell:not(.ivu-date-picker-cells-cell-prev-month):not(.ivu-date-picker-cells-cell-next-month)")).map((function(e,r){if(t.includes(r)){var s=document.createElement("span");s.style.position="absolute",s.innerHTML='<div class="got-event"></div>',e.firstChild.append(s)}}))})))},handleChange:function(t){this.selected_date=t,this.dateEvent=this.events[t],this.dateEvent&&(this.event=!0)},closeModal:function(){this.newEventModal=!1,this.form={title:"",details:"",start_date:this.$moment().format("YYYY-MM-DD"),end_date:null,start_time:new Date,end_time:null,color:"#FFFFFF"}},addEvent:function(){var t=this;this.$refs.newEvent.validate((function(e){if(e){t.saving=!0;var r="added",i="post",o="app/events";t.errors.message="";var n="record_added";t.form.id&&(i="put",r="updated",n="record_updated",o=o+"/"+t.form.id);var l=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t.form);l.start_date&&(l.start_date=t.$moment(l.start_date).format(t.$moment.HTML5_FMT.DATE)),l.end_date&&(l.end_date=t.$moment(l.end_date).format(t.$moment.HTML5_FMT.DATE)),t.$http[i](o,l).then((function(e){e.data.success?(t.newEventModal=!1,t.setEvents(t.month,!0),t.$Notice.destroy(),t.$Notice.success({title:t.$tc("event")+" "+t.$t(r),desc:t.$t(n)}),t.form={title:"",details:"",start_date:t.$moment().format("YYYY-MM-DD"),end_date:null,start_time:new Date,end_time:null,color:"#FFFFFF"}):t.$Notice.error({title:t.$t("failed"),desc:t.$t("failed_error_text")})})).catch((function(e){return t.errors=e})).finally((function(){t.event=!1,t.saving=!1,t.loading=!1}))}else t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10})}))},deleteEvent:function(t,e){var r=this;this.delete_id=e,this.deleting=5,this.interval=setInterval((function(){r.deleting--,r.deleting||r.$http.delete("app/events/"+e).then((function(e){e.data.success&&(r.events[r.selected_date].splice(t,1),r.$Notice.success({title:r.$t("deleted"),desc:r.$t("record_deleted")}))})).catch((function(t){return r.$Notice.error({title:r.$t("failed"),desc:r.$t("failed_error_text")})})).finally((function(){r.delete_id=null,r.resetDelete()}))}),500)},resetDelete:function(){this.deleting=0,this.delete_id=null,clearInterval(this.interval)}}};var d=r(93379),u=r.n(d),m=r(69199),p={insert:"head",singleton:!1};u()(m.Z,p);m.Z.locals;const _=(0,r(51900).Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("calendar")))]),t._v(" "),r("Button",{attrs:{slot:"extra",type:"text",size:"small"},on:{click:function(e){t.newEventModal=!0}},slot:"extra"},[r("Icon",{attrs:{type:"ios-add-circle-outline",size:"16"}}),t._v("\n      "+t._s(t.$t("add_x",{x:t.$tc("event")}))+"\n    ")],1),t._v(" "),r("div",{staticClass:"calendar"},[r("DatePicker",{attrs:{type:"date",open:!0,value:t.value,transfer:!1,clearable:!1},on:{"on-change":t.handleChange,"on-open-change":t.handleClick}},[r("a",{staticStyle:{width:"0",height:"0",padding:"0",margin:"0"},attrs:{href:"javascript:void(0)"}})]),t._v(" "),r("transition",{attrs:{name:"event"}},[t.event?r("div",{staticClass:"events"},[r("Card",{staticStyle:{height:"100%"},attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n              "+t._s(t.$t("events_on",{x:t.formatedDate}))+"\n            ")]),t._v(" "),r("a",{attrs:{slot:"extra"},on:{click:function(e){t.event=!1}},slot:"extra"},[r("Icon",{attrs:{type:"ios-close-circle",size:"20",color:"#495060"}})],1),t._v(" "),r("div",{staticClass:"day-events"},t._l(t.dateEvent,(function(e,s){return r("Card",{key:"event_"+s,staticStyle:{"margin-right":"16px","margin-bottom":"16px"},attrs:{"dis-hover":""}},[r("div",{staticStyle:{"min-width":"60px",position:"absolute",top:"-5px",right:"0","text-align":"right"},attrs:{slot:"extra"},slot:"extra"},[r("a",{on:{click:function(r){t.form=e,t.newEventModal=!0}}},[r("Icon",{attrs:{type:"ios-create",size:"20",color:"#495060"}})],1),t._v(" "),r("span",{staticStyle:{"margin-left":"8px",position:"relative"}},[t.delete_id&&t.delete_id==e.id?r("span",{staticStyle:{color:"red",position:"absolute",width:"150px",top:"-5px",right:"0",display:"flex","align-items":"center"}},[r("span",{staticStyle:{"margin-right":"5px"}},[t._v(t._s(t.$t("deleting_in",{x:t.deleting})))]),t._v(" "),r("Button",{staticClass:"red-bg",attrs:{type:"error",size:"small"},on:{click:function(e){return t.resetDelete()}}},[t._v(t._s(t.$t("cancel")))])],1):r("a",{on:{click:function(r){return t.deleteEvent(s,e.id)}}},[r("Icon",{attrs:{type:"ios-trash",size:"20",color:"#495060"}})],1)])]),t._v(" "),r("div",{staticClass:"event"},[r("h3",[t._v(t._s(e.title))]),t._v(" "),e.details?r("p",[t._v(t._s(e.details))]):r("p",{staticStyle:{"margin-bottom":"-16px"}}),t._v(" "),r("div",{staticClass:"time"},[e.start_date?r("span",[t._v("\n                      "+t._s(t.$t("start_date"))+": "),r("strong",[t._v(t._s(t._f("date")(e.start_date)))])]):t._e(),t._v(" "),e.start_time?r("span",[t._v("\n                      "+t._s(t.$t("start_time"))+": "),r("strong",[t._v(t._s(e.start_time))])]):t._e(),t._v(" "),e.end_date?r("span",[t._v("\n                      "+t._s(t.$t("end_date"))+": "),r("strong",[t._v(t._s(t._f("date")(e.end_date)))])]):t._e(),t._v(" "),e.end_time?r("span",[t._v("\n                      "+t._s(t.$t("end_time"))+": "),r("strong",[t._v(t._s(e.end_time))])]):t._e()])])])})),1)])],1):t._e()])],1)],1),t._v(" "),r("Modal",{attrs:{"footer-hide":""},model:{value:t.newEventModal,callback:function(e){t.newEventModal=e},expression:"newEventModal"}},[r("p",{attrs:{slot:"header"},slot:"header"},[t.form.id?r("span",[t._v("\n        "+t._s(t.$t("edit_x",{x:t.$tc("event")}))+"\n      ")]):r("span",[t._v("\n        "+t._s(t.$t("add_x",{x:t.$tc("event")}))+"\n      ")])]),t._v(" "),r("a",{staticStyle:{"margin-top":"6px",display:"inline-block",width:"2.5em",height:"2.5em"},attrs:{slot:"close"},on:{click:function(e){return t.closeModal()}},slot:"close"},[r("Icon",{attrs:{type:"md-close",size:"20"}})],1),t._v(" "),r("Form",{ref:"newEvent",staticClass:"form-responsive normal",attrs:{model:t.form,rules:t.rules,"label-position":"top"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{staticClass:"mb26",attrs:{label:t.$t("title"),prop:"title",error:t._f("a2s")(t.errors.form.title)}},[r("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"mb26",attrs:{label:t.$t("start_date"),prop:"start_date",error:t._f("a2s")(t.errors.form.start_date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"mb26",attrs:{label:t.$t("end_date"),error:t._f("a2s")(t.errors.form.end_date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"mb26",attrs:{label:t.$t("start_time"),prop:"start_time",error:t._f("a2s")(t.errors.form.start_time)}},[r("TimePicker",{staticStyle:{width:"100%"},attrs:{type:"time",format:"HH:mm:ss"},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{staticClass:"mb26",attrs:{label:t.$t("end_time"),error:t._f("a2s")(t.errors.form.end_time)}},[r("TimePicker",{staticStyle:{width:"100%"},attrs:{type:"time",format:"HH:mm:ss"},model:{value:t.form.end_time,callback:function(e){t.$set(t.form,"end_time",e)},expression:"form.end_time"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{staticClass:"mb26",attrs:{label:t.$t("details")}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.addEvent()}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.closeModal()}}},[t._v("Cancel")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},79317:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const o={data:function(){return{countries:[],saving:!1,attributes:[],loading:!1,searching:!1,errors:{message:"",form:{}},states:[{value:"",label:this.$t("select_country")}],form:{id:"",name:"",email:"",phone:"",state:"",number:"",footer:"",address:"",country:""},rules:{name:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("name")})}],phone:[{required:!1,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("phone")})}],email:[{required:!1,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("email")})}],address:[{required:!1,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("address")})}],country:[{trigger:"change",required:this.$store.getters.require_country,message:this.$t("field_is_required",{field:this.$t("country")})}],state:[{trigger:"change",required:this.$store.getters.require_country,message:this.$t("field_is_required",{field:this.$t("state")})}]}}},created:function(){var t=this;this.$http.get("app/countries").then((function(e){var r=e.data;return t.countries=r})),this.$store.state.user&&(this.$store.state.user.customer_id||this.$store.state.user.supplier_id)?this.$http.get("app/user/company").then((function(e){var r,s;t.form=(r=e.data,s=t,r.attributes&&(s.attributes=r.attributes,delete r.attributes),r.extra_attributes=s.formatAttributes(s.attributes,r.extra_attributes),s.form=a(a({},r),r.extra_attributes),s.form),t.form.country&&t.getStates(t.form.country,t.form.state)})).finally((function(){return t.loading=!1})):this.$router.push("/")},methods:{handleSubmit:function(){var t=this;this.$refs.company.validate((function(e){e?(t.saving=!0,t.$http.post("app/user/company",t.form).then((function(e){e.data.success&&t.$Notice.success({title:t.$t("updated"),desc:t.$t("record_updated")})})).finally((function(){return t.saving=!1}))):t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10})}))},countryChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t?(this.searching=!0,this.getStates(t,e),this.form.state=""):(this.form.state="",this.form.country="",this.states=[{value:"",label:this.$t("select_country")}])},getStates:function(t,e){var r=this;this.$http.get("app/states",{params:{country:t}}).then((function(t){r.states=t.data,e&&(r.form.state=r.states.find((function(t){return t.value==e})).value),r.searching=!1})).catch((function(t){return r.$event.fire("appError",t.response)}))},updateCF:function(t,e){var r=this;this.form[t]=e,setTimeout((function(){r.$refs[model].validateField(t)}),1e3)}}};const n=(0,r(51900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("update"))+" "+t._s(t.$tc("company")))]),t._v(" "),r("router-link",{attrs:{slot:"extra",to:"/"},slot:"extra"},[r("Icon",{attrs:{type:"ios-grid-outline"}}),t._v("\n    "+t._s(t.$t("dashboard"))+"\n  ")],1),t._v(" "),r("div",[r("Form",{ref:"company",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("company"),prop:"company",error:t._f("a2s")(t.errors.form.company)}},[r("Input",{model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("phone"),prop:"phone",error:t._f("a2s")(t.errors.form.phone)}},[r("Input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("email"),prop:"email",error:t._f("a2s")(t.errors.form.email)}},[r("Input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("house_no"),prop:"house_no",error:t._f("a2s")(t.errors.form.house_no)}},[r("Input",{model:{value:t.form.house_no,callback:function(e){t.$set(t.form,"house_no",e)},expression:"form.house_no"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("street_no"),prop:"street_no",error:t._f("a2s")(t.errors.form.street_no)}},[r("Input",{model:{value:t.form.street_no,callback:function(e){t.$set(t.form,"street_no",e)},expression:"form.street_no"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{attrs:{label:t.$t("address"),prop:"address",error:t._f("a2s")(t.errors.form.address)}},[r("Input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("city"),prop:"city",error:t._f("a2s")(t.errors.form.city)}},[r("Input",{model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("postal_code"),prop:"postal_code",error:t._f("a2s")(t.errors.form.postal_code)}},[r("Input",{model:{value:t.form.postal_code,callback:function(e){t.$set(t.form,"postal_code",e)},expression:"form.postal_code"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("country"),prop:"country",error:t._f("a2s")(t.errors.form.country)}},[r("Select",{attrs:{placeholder:"",filterable:""},on:{"on-change":t.countryChange},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.countries,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("state"),prop:"state",error:t._f("a2s")(t.errors.form.state)}},[r("Select",{attrs:{placeholder:"",filterable:"",loading:t.searching},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.states,(function(e,s){return r("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit()}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},13358:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});const s={data:function(){return{page:1,loading:!1,notifications:{}}},watch:{"$route.query.reload":function(){console.log("reload"),this.getNotifications()}},mounted:function(){this.getNotifications()},methods:{getNotifications:function(){var t=this;this.$http.get("app/notifications",{params:{page:this.page}}).then((function(e){return t.notifications=e.data}))},pageChanged:function(t){this.page=t},markAsRead:function(t){var e=this;this.$http.put("app/notifications/"+t).then((function(){return e.getNotifications()}))},markAsUnread:function(t){var e=this;this.$http.post("app/notifications/"+t).then((function(){return e.getNotifications()}))},deleteNotification:function(t){var e=this;this.$http.delete("app/notifications/"+t).then((function(){return e.getNotifications()}))},readAllNotification:function(){var t=this;this.$http.post("app/notifications/read/all").then((function(){return t.getNotifications()}))},deleteAllNotification:function(){var t=this;this.$http.post("app/notifications/delete/all").then((function(){return t.getNotifications()}))}}};const a=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{"dis-hover":!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$tc("notification",2)))]),t._v(" "),r("span",{attrs:{slot:"extra"},slot:"extra"},[r("Button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.readAllNotification()}}},[t._v("\n        "+t._s(t.$t("mark_all_as_x",{x:t.$t("read")}))+"\n      ")]),t._v(" "),r("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.deleteAllNotification()}}},[r("Icon",{attrs:{type:"ios-trash",size:"16"}}),t._v("\n        "+t._s(t.$t("delete_x",{x:t.$t("all")}))+"\n      ")],1)],1),t._v(" "),t.notifications.data&&t.notifications.data.length?r("div",[r("List",t._l(t.notifications.data,(function(e){return r("ListItem",{key:e.id},[r("ListItemMeta",[r("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n              "+t._s(e.data.title)+"\n              "),e.read_at?r("Icon",{attrs:{type:"md-checkmark"}}):t._e()],1),t._v(" "),r("div",{attrs:{slot:"description"},slot:"description"},[t._v("\n              "+t._s(e.data.description)+"\n              "),r("div",{staticStyle:{"font-weight":"normal","margin-top":"5px"}},[r("Icon",{attrs:{type:"md-time"}}),t._v("\n                "+t._s(t.datetime(e.created_at))+"\n              ")],1)])]),t._v(" "),r("template",{slot:"action"},[e.read_at?r("li",[r("Button",{attrs:{type:"text",size:"small"},on:{click:function(r){return t.markAsUnread(e.id)}}},[t._v(t._s(t.$t("mark_as_x",{x:t.$t("unread")})))])],1):r("li",[r("Button",{attrs:{type:"text",size:"small"},on:{click:function(r){return t.markAsRead(e.id)}}},[t._v(t._s(t.$t("mark_as_x",{x:t.$t("read")})))])],1),t._v(" "),r("li",[r("Button",{attrs:{ghost:"",type:"error",size:"small"},on:{click:function(r){return t.deleteNotification(e.id)}}},[t._v(t._s(t.$t("delete")))])],1)])],2)})),1),t._v(" "),r("Row",{staticStyle:{"padding-top":"16px","border-top":"1px solid #e8eaec"}},[r("Col",{staticClass:"table-info",attrs:{sm:24,md:8}},[r("span",{staticStyle:{"line-height":"32px"}},[t.notifications.total>0?r("span",[t._v(t._s(t.$t("table_info",{start:t.notifications.from,end:t.notifications.to,total:t.notifications.total})))]):r("span",[t._v(t._s(t.$t("zero_records")))])])]),t._v(" "),t.page>0?r("Col",{staticClass:"table-page",attrs:{sm:24,md:16}},[r("span",{staticClass:"page"},[r("Page",{attrs:{total:t.notifications.total,"page-size":t.notifications.per_page,current:t.notifications.current_page},on:{"on-change":t.pageChanged}})],1)]):t._e()],1)],1):r("Alert",{attrs:{type:"warning","show-icon":""}},[t._v("\n      "+t._s(t.$t("no_data"))+"\n    ")])],1)],1)}),[],!1,null,null,null).exports}}]);